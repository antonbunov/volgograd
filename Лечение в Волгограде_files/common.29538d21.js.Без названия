/*! For license information please see common.29538d21.js.LICENSE.txt */
(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[23592],{511897:(e,t,s)=>{"use strict";s.d(t,{AccountSecurityLevelEnumNames:()=>n});const n={NOTHING_TO_SAY:0,HAVE_ISSUES:1,HAVE_RECOMMENDATIONS:10,GOOD:20}},74605:(e,t,s)=>{"use strict";s.d(t,{BaseSexEnumNames:()=>n});const n={UNKNOWN:0,FEMALE:1,MALE:2}},600222:(e,t,s)=>{"use strict";function n(){return{icon:'<svg fill="none" height="8" viewBox="0 0 12 8" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M2.16 2.3a.75.75 0 0 1 1.05-.14L6 4.3l2.8-2.15a.75.75 0 1 1 .9 1.19l-3.24 2.5c-.27.2-.65.2-.92 0L2.3 3.35a.75.75 0 0 1-.13-1.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"dropdown_12"}}s.d(t,{getIcon12Dropdown:()=>n})},447931:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M10.48 1.07c.55.05 1.03.14 1.47.37a3.74 3.74 0 0 1 1.64 1.63c.23.44.32.92.37 1.47.04.53.04 1.18.04 2v5.48c0 .5 0 .92-.03 1.25-.03.33-.1.72-.35 1.03a1.8 1.8 0 0 1-1.35.7c-.4.01-.76-.15-1.04-.32-.3-.17-.64-.41-1.04-.7l-1.7-1.2a7.21 7.21 0 0 0-.43-.3.25.25 0 0 0-.12 0l-.08.05c-.08.04-.18.12-.35.24l-1.7 1.2c-.4.3-.75.54-1.04.71-.28.17-.64.33-1.04.32a1.8 1.8 0 0 1-1.35-.7c-.25-.32-.32-.7-.35-1.03C2 12.94 2 12.52 2 12.02V6.53c0-.7 0-1.3.03-1.79a9.01 9.01 0 0 1 .01-.2c.05-.55.14-1.03.37-1.47a3.75 3.75 0 0 1 1.64-1.63c.44-.23.92-.32 1.47-.37.23-.02.48-.03.76-.03 1.4-.03 2.82-.08 4.2.03Z"/></svg>',name:"bookmark_16"}}s.d(t,{getIcon16Bookmark:()=>n})},667309:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M6.72 1h2.56c.67 0 1.23 0 1.67.04.47.03.88.12 1.28.31a3.25 3.25 0 0 1 1.42 1.42c.2.4.28.81.31 1.28.04.44.04 1 .04 1.67v6.05c0 .56 0 1.02-.03 1.4-.04.36-.11.76-.37 1.1a1.9 1.9 0 0 1-1.45.73c-.42.01-.8-.17-1.11-.36-.32-.2-.7-.47-1.14-.8L8.5 12.8a7.25 7.25 0 0 0-.44-.3.25.25 0 0 0-.12 0s-.03 0-.08.04c-.08.05-.19.12-.37.26L6.1 13.84c-.45.33-.82.6-1.14.8-.31.19-.69.37-1.1.36a1.9 1.9 0 0 1-1.46-.73 2.06 2.06 0 0 1-.37-1.1C2 12.78 2 12.32 2 11.76V5.72c0-.67 0-1.23.04-1.67.03-.47.12-.88.31-1.28a3.25 3.25 0 0 1 1.42-1.42c.4-.2.81-.28 1.28-.31C5.49 1 6.05 1 6.72 1Zm1.22 11.5Zm.12 0Zm-2.9-9.97c-.36.03-.56.09-.7.16a1.75 1.75 0 0 0-.77.77c-.07.14-.13.34-.16.7-.03.39-.03.88-.03 1.59v5.98c0 .6 0 1 .03 1.3.02.24.05.31.06.32a.4.4 0 0 0 .3.15s.08-.02.3-.14l1.05-.75L6.6 11.6l.07-.05c.27-.2.56-.41.89-.5a1.75 1.75 0 0 1 .88 0c.33.09.62.3.89.5l.07.05 1.36 1c.49.37.8.6 1.06.76.2.12.29.14.3.14a.4.4 0 0 0 .3-.15s.03-.08.05-.32c.03-.3.03-.7.03-1.3V5.75c0-.71 0-1.2-.03-1.58a1.88 1.88 0 0 0-.16-.71 1.75 1.75 0 0 0-.77-.77 1.88 1.88 0 0 0-.7-.16c-.39-.03-.88-.03-1.59-.03h-2.5c-.71 0-1.2 0-1.58.03Z" clip-rule="evenodd"/></svg>',name:"bookmark_outline_16"}}s.d(t,{getIcon16BookmarkOutline:()=>n})},985737:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.74 3.26a.9.9 0 0 1 0 1.28L9.27 8l3.47 3.46a.9.9 0 0 1 .08 1.18l-.08.1a.9.9 0 0 1-1.28 0L8 9.27l-3.46 3.47a.9.9 0 0 1-1.28-1.28L6.73 8 3.26 4.54a.9.9 0 0 1-.08-1.18l.08-.1a.9.9 0 0 1 1.28 0L8 6.73l3.46-3.47a.9.9 0 0 1 1.28 0Z"/></svg>',name:"cancel_16"}}s.d(t,{getIcon16Cancel:()=>n})},959156:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" fill="none" viewBox="0 0 12 16"><path fill="currentColor" d="M7.23 8 3.86 4.64a.9.9 0 0 1 1.28-1.28l4 4a.9.9 0 0 1 0 1.28l-4 4a.9.9 0 0 1-1.28-1.28L7.23 8Z"/></svg>',name:"chevron_16"}}s.d(t,{getIcon16Chevron:()=>n})},706891:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3Z" clip-rule="evenodd"/></svg>',name:"add_20"}}s.d(t,{getIcon20Add:()=>n})},893980:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"/></svg>',name:"check_20"}}s.d(t,{getIcon20Check:()=>n})},899690:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="m12.75 4.04-.8 3.3 1.91.35c.96.17 1.82.62 2.07 1.53.26.92-.25 1.84-.82 2.52l-5.08 5.75c-.33.35-.66.64-.99.81-.3.16-.8.33-1.27.05-.46-.26-.58-.76-.6-1.1-.03-.38.03-.82.15-1.3l.84-3.35-1.81-.32c-.92-.16-1.84-.59-2.2-1.45-.39-.92 0-1.9.8-2.76l1.41-1.5c.84-.91 2.07-2.26 3.68-4.05.31-.35.64-.64.96-.82.31-.16.8-.32 1.26-.07.47.25.6.74.64 1.1.03.38-.02.83-.15 1.31Zm-1.37-.75a3.95 3.95 0 0 0-.22.22A330.83 330.83 0 0 1 6.05 9.1c-.63.69-.57 1.05-.52 1.15.16.38.73.5 1.08.56l2.33.41c.56.1.95.67.8 1.24l-.96 3.86a4.71 4.71 0 0 0-.08.4 4.42 4.42 0 0 0 .23-.24l5.04-5.7c.53-.65.55-1.02.52-1.15-.02-.07-.15-.32-.88-.45l-2.45-.44c-.56-.1-.94-.68-.8-1.24l.94-3.81a4.29 4.29 0 0 0 .08-.4Z" clip-rule="evenodd"/></svg>',name:"flash_outline_20"}}s.d(t,{getIcon20FlashOutline:()=>n})},497185:(e,t,s)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M19.28 12.22c.3.3.3.77 0 1.06l-4.5 4.5c-.29.29-.76.29-1.05 0l-2.5-2.5a.75.75 0 0 1 1.05-1.06l1.97 1.97 3.97-3.97c.3-.3.77-.3 1.06 0z" fill-rule="evenodd"/></g></svg>',name:"list_add_outline_20"}}s.d(t,{getIcon20ListAddOutline:()=>n})},472240:(e,t,s)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><clipPath id="list_play_outline_20__a"><path d="M0 0h20v20H0z"/></clipPath><g clip-path="url(#list_play_outline_20__a)" fill="currentColor"><path d="M19.68 11.43c.43.25.43.89 0 1.14l-4.73 2.84c-.42.25-.95-.06-.95-.57V9.16c0-.5.53-.82.95-.57zM2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75z"/></g></svg>',name:"list_play_outline_20"}}s.d(t,{getIcon20ListPlayOutline:()=>n})},827087:(e,t,s)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="currentColor"/></svg>',name:"more_20"}}s.d(t,{getIcon20More:()=>n})},433849:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12 8.13a7.85 7.85 0 0 1-1.5 2.37A7.83 7.83 0 0 1 8.13 12c.83.37 1.72.86 2.37 1.51a7.83 7.83 0 0 1 1.5 2.37c.37-.84.86-1.72 1.51-2.37a7.83 7.83 0 0 1 2.37-1.5 7.85 7.85 0 0 1-2.37-1.51 7.83 7.83 0 0 1-1.5-2.37Zm-.78-2.18c-.42 1.32-1.02 2.72-1.78 3.49-.77.77-2.17 1.36-3.49 1.78a21.07 21.07 0 0 1-1.16.34c-.38.1-.38.79 0 .9a27.15 27.15 0 0 1 .91.25l.25.08c1.32.42 2.72 1.01 3.49 1.78.76.77 1.36 2.17 1.78 3.49a20.84 20.84 0 0 1 .27.9l.07.26c.1.38.79.38.9 0a27.49 27.49 0 0 1 .25-.91l.08-.25c.42-1.32 1.01-2.72 1.78-3.49s2.17-1.36 3.49-1.78a20.84 20.84 0 0 1 .9-.27l.26-.07c.38-.1.38-.8 0-.9a27.49 27.49 0 0 1-.91-.25 20.84 20.84 0 0 1-.25-.08c-1.32-.42-2.72-1.01-3.49-1.78s-1.36-2.17-1.78-3.49a21.13 21.13 0 0 1-.34-1.16c-.1-.38-.8-.38-.9 0a27.15 27.15 0 0 1-.25.91 21.13 21.13 0 0 1-.08.25ZM4.36.76a.39.39 0 0 0-.73 0L3.24 2A1.93 1.93 0 0 1 2 3.22l-1.24.41a.39.39 0 0 0 0 .74l1.24.4A1.93 1.93 0 0 1 3.22 6l.41 1.24a.39.39 0 0 0 .74 0L4.77 6A1.93 1.93 0 0 1 6 4.78l1.24-.42a.39.39 0 0 0 0-.73L6 3.24A1.93 1.93 0 0 1 4.78 2L4.36.76Z"/></svg>',name:"stars_20"}}s.d(t,{getIcon20Stars:()=>n})},655623:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M2.75 4a.75.75 0 0 0 0 1.5H6v9.75a.75.75 0 0 0 1.5 0V5.5h3.25a.75.75 0 0 0 0-1.5h-8Z"/><path d="M10.75 7.5a.75.75 0 0 0 0 1.5h2.5v6.25a.75.75 0 0 0 1.5 0V9h2.5a.75.75 0 0 0 0-1.5h-6.5Z"/></svg>',name:"text_tt_outline_20"}}s.d(t,{getIcon20TextTtOutline:()=>n})},73245:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.08 2.65A2.21 2.21 0 0 1 14.64 2c.57 0 1.14.22 1.57.65l1.14 1.14a2.21 2.21 0 0 1 0 3.13l-.94.94-9.17 9.18A3.3 3.3 0 0 1 4.9 18H3a1 1 0 0 1-1-1v-1.9a3.29 3.29 0 0 1 .96-2.33l8.13-8.13 1.99-2zm2.28 4.13.93-.92a.71.71 0 0 0 0-1.02l-1.14-1.13a.71.71 0 0 0-.5-.21.71.71 0 0 0-.51.2l-.93.93 2.15 2.15zm-3.22-1.07-8.11 8.12a1.79 1.79 0 0 0-.53 1.26v1.11a.3.3 0 0 0 .3.3h1.11c.47 0 .93-.19 1.27-.53l8.1-8.11-2.15-2.15z" fill="currentColor"/></svg>',name:"write_outline_20"}}s.d(t,{getIcon20WriteOutline:()=>n})},702510:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.58.06.7.05 1.32.17 1.88.46a4.79 4.79 0 0 1 2.1 2.1c.28.56.4 1.17.46 1.88.06.68.06 1.53.06 2.58v7.62c0 .77 0 1.41-.05 1.91-.04.5-.14 1.03-.48 1.46a2.46 2.46 0 0 1-1.9.93c-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.48-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.58.05-.7.18-1.32.46-1.88a4.79 4.79 0 0 1 2.1-2.1c.56-.28 1.17-.4 1.88-.46C9.18 3 10.03 3 11.08 3Z" clip-rule="evenodd"/></svg>',name:"bookmark_24"}}s.d(t,{getIcon24Bookmark:()=>n})},880526:(e,t,s)=>{"use strict";function n(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.59.06.7.05 1.31.17 1.88.46.9.46 1.63 1.2 2.09 2.1.29.56.4 1.17.46 1.87.06.69.06 1.54.06 2.6v7.6c0 .78 0 1.42-.05 1.92-.04.5-.14 1.03-.48 1.46-.46.58-1.15.92-1.9.93-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.47-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.59.05-.7.17-1.31.46-1.88.46-.9 1.2-1.63 2.1-2.09.56-.29 1.17-.4 1.87-.46C9.18 3 10.03 3 11.1 3zM8.64 4.85c-.6.05-.94.14-1.2.28-.57.28-1.03.74-1.31 1.3-.14.27-.23.62-.28 1.21-.05.6-.05 1.38-.05 2.48v7.53c0 .83 0 1.4.04 1.8.04.41.1.5.1.5.12.16.3.25.5.25 0 0 .12 0 .47-.22.34-.22.79-.56 1.45-1.07l1.58-1.2.1-.09c.44-.33.85-.65 1.32-.78.42-.1.86-.1 1.28 0 .47.13.88.45 1.32.78l.1.08 1.58 1.21c.66.5 1.1.85 1.45 1.07.35.22.46.22.46.22.2 0 .39-.1.5-.25 0 0 .07-.09.11-.5.04-.4.04-.97.04-1.8v-7.53c0-1.1 0-1.88-.05-2.48-.05-.6-.14-.94-.28-1.2a2.99 2.99 0 0 0-1.3-1.31 3.17 3.17 0 0 0-1.21-.28 33.8 33.8 0 0 0-2.48-.05h-1.76c-1.1 0-1.88 0-2.48.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"bookmark_outline_24"}}s.d(t,{getIcon24BookmarkOutline:()=>n})},936492:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M7.54 6.26a.9.9 0 0 0-1.28 1.28L10.73 12l-4.47 4.46a.9.9 0 0 0 1.28 1.28L12 13.27l4.46 4.47a.9.9 0 1 0 1.28-1.28L13.27 12l4.47-4.46a.9.9 0 1 0-1.28-1.28L12 10.73 7.54 6.26Z"/></svg>',name:"cancel_24"}}s.d(t,{getIcon24Cancel:()=>n})},138431:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21Z" fill="currentColor"/></svg>',name:"check_circle_off_24"}}s.d(t,{getIcon24CheckCircleOff:()=>n})},740361:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24a12 12 0 1 0 0-24 12 12 0 0 0 0 24Zm6.2-14.8a1 1 0 0 0-1.4-1.4L10 14.58l-2.8-2.8a1 1 0 0 0-1.4 1.42l3.5 3.5a1 1 0 0 0 1.4 0l7.5-7.5Z" fill="currentColor"/></svg>',name:"check_circle_on_24"}}s.d(t,{getIcon24CheckCircleOn:()=>n})},784394:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="favorite_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="favorite_24__favorite_24"><path id="favorite_24__Bounds" d="M0 0h24v24H0z"/><path d="m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z" id="favorite_24__Mask" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"favorite_24"}}s.d(t,{getIcon24Favorite:()=>n})},977202:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.86a.6.6 0 0 0-.35-1.05l-4.13-.26a.9.9 0 0 1-.77-.56l-1.62-3.9ZM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23L9.78 4Z" clip-rule="evenodd"/></svg>',name:"favorite_outline_24"}}s.d(t,{getIcon24FavoriteOutline:()=>n})},901098:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M6 6.6c0-.56 0-.84.1-1.05a1 1 0 0 1 .45-.44C6.76 5 7.04 5 7.6 5h.8c.56 0 .84 0 1.05.1a1 1 0 0 1 .44.45c.11.21.11.49.11 1.05v10.8c0 .56 0 .84-.1 1.05a1 1 0 0 1-.45.44c-.21.11-.49.11-1.05.11h-.8c-.56 0-.84 0-1.05-.1a1 1 0 0 1-.44-.45C6 18.24 6 17.96 6 17.4V6.6Zm8 0c0-.56 0-.84.1-1.05a1 1 0 0 1 .45-.44C14.76 5 15.04 5 15.6 5h.8c.56 0 .84 0 1.05.1a1 1 0 0 1 .44.45c.11.21.11.49.11 1.05v10.8c0 .56 0 .84-.1 1.05a1 1 0 0 1-.45.44c-.21.11-.49.11-1.05.11h-.8c-.56 0-.84 0-1.05-.1a1 1 0 0 1-.44-.45c-.11-.21-.11-.49-.11-1.05V6.6Z"/></svg>',name:"pause_24"}}s.d(t,{getIcon24Pause:()=>n})},660596:(e,t,s)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M18.5 11.13a1 1 0 0 1 0 1.74l-9 5.2A1 1 0 0 1 8 17.2V6.8a1 1 0 0 1 1.5-.86l9 5.2Z"/></svg>',name:"play_24"}}s.d(t,{getIcon24Play:()=>n})},312311:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="song_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="song_24__song_24"><path id="song_24__Bounds" d="M0 0h24v24H0z"/><path d="M13 11.48v5.65c0 4.52-.87 5.39-4.37 5.85C6.96 23.19 5 22.44 5 19.8c0-1.28.8-2.5 2.46-2.81 1.27-.25-.09.02 2.78-.52.7-.13.77-.37.77-.9V3.97c0-1.24.67-1.69 2.66-2.09l4.68-.87c.37-.07.65.07.65.49v4.05c0 .42-.17.6-.59.68l-4.86.86c-.38.1-.55.36-.55.74v3.64Z" id="song_24__Mask" fill="currentColor"/></g></g></svg>',name:"song_24"}}s.d(t,{getIcon24Song:()=>n})},518996:(e,t,s)=>{"use strict";function n(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 52a24 24 0 1 0 0-48 24 24 0 0 0 0 48z" fill="#FC3"/><path fill-rule="evenodd" clip-rule="evenodd" d="M31.86 40.86a1.29 1.29 0 0 1 0 2.57h-7.72a1.29 1.29 0 0 1 0-2.57h7.72zm-1.29-12c.86-.86 1.72 1.71 6 1.71 3.43 0 6.43-1.71 6.86-.86.43.86-2.57 4.29-6.86 4.29-5.14 0-6.86-4.29-6-5.14zm-5.14 0c.86.85-.86 5.14-6 5.14-4.29 0-7.29-3.43-6.86-4.29.43-.85 3.43.86 6.86.86 4.28 0 5.14-2.57 6-1.71zm9.43-10.29c.85-.86 2.57 2.14 6 3.43s4.28 1.29 4.28 2.57c0 .86-.85 1.72-5.14 0-4.29-1.71-6-5.14-5.14-6zm-13.72 0c.86.86-.85 4.29-5.14 6-4.29 1.72-5.14.86-5.14 0 0-1.28.85-1.28 4.28-2.57 3.43-1.29 5.15-4.29 6-3.43z" fill="#805446"/></svg>',name:"pensive_face_56"}}s.d(t,{getIcon56PensiveFace:()=>n})},84463:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerHTML5:()=>l});var n=s(575753),a=s(434810),r=s(899841),d=s(63057);class l{destroy(){}getPlayedTime(){const e=this._currentAudioEl.played;let t=0;for(let s=0;s<e.length;s++)t+=e.end(s)-e.start(s);return t}getCurrentTime(){return this._currentAudioEl.currentTime}clearAudioNode(){this._currentAudioEl=this._createAudioNode(r.SILENCE)}isCurrent(e){return e===this._currentAudioEl}_createAudioNode(e){const t=new d.AudioHlsNode({onBufferUpdate:()=>{this.isCurrent(t)&&this.opts.onBufferUpdate(this.getCurrentBuffered())},onProgressUpdate:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onProgressUpdate(this.getCurrentProgress(),this.getPlayedTime(),this.getCurrentTime())},onEnd:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onEnd()},onSeeked:()=>{this.isCurrent(t)&&this.opts.onSeeked()},onSeek:()=>{this.isCurrent(t)&&this.opts.onSeek()},onFail:e=>{this._prefetchAudioEl===t?this._prefetchAudioEl=this._createAudioNode():this.isCurrent(t)&&t.src!==r.SILENCE&&(this._hlsError=e,this.opts.onFail&&this.opts.onFail())},onDurationChange:()=>{this.isCurrent(t)&&this._seekOnReady&&t.duration>0&&(this.seek(this._seekOnReady),this._seekOnReady=!1)},onCanPlay:()=>{this.isCurrent(t)&&this.opts.onCanPlay&&this.opts.onCanPlay()},onPause:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPause(...e)},onPlay:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPlay(...e)},volume:this.hasOwnProperty("_volume")?this._volume:this.opts.defaultVolume},e);return t}onReady(e){e()}prefetch(e){const t=(0,a.audioUnmaskSource)(e);this._prefetchAudioEl&&this._prefetchAudioEl.url===t||(this._prefetchAudioEl=this._createAudioNode(t))}seek(e){const t=this._currentAudioEl;t.duration>0&&t.src&&t.src!==r.SILENCE?t.currentTime=t.duration*e:this._seekOnReady=e}setVolume(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}setPlaybackRate(e){this._currentAudioEl.playbackRate=e}getCurrentProgress(){return this._currentAudioEl.currentProgress}getCurrentBuffered(){return this._currentAudioEl&&this._currentAudioEl.currentBuffered}getDuration(){return this._currentAudioEl&&this._currentAudioEl.duration}isFullyLoaded(){return this._currentAudioEl.isFullyLoaded}setUrl(e,t=(()=>{})){let s;if(!e)return t&&t(!1);const n=(0,a.audioUnmaskSource)(e);let d=this._currentAudioEl;if(this._currentAudioEl.src&&this._currentAudioEl.src!==r.SILENCE&&(this._seekOnReady=!1),this._currentAudioEl.src===n)return this.opts.onCanPlay&&this.opts.onCanPlay(),void(t&&t(!0));if(this._prefetchAudioEl){if(this._prefetchAudioEl.src===n)return this._currentAudioEl.pause(),this._currentAudioEl.setUrl(r.SILENCE),this._prefetchAudioEl.readyState>=3&&setTimeout((()=>this.opts.onCanPlay&&this.opts.onCanPlay())),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=null,void(t&&t(!0));n!==r.SILENCE&&this._prefetchAudioEl.setUrl(r.SILENCE)}d.src!==n&&(s=d.setUrl(n).then((()=>this._stopFrequencyAnalise()))),s?s.then((()=>t(!0))).catch((()=>t(!1))):t(!0)}play(){this._stopFrequencyAnalise();const e=this._currentAudioEl;if(e.src){const t=e.play();return this._startFrequencyAnalise(),t}return Promise.resolve()}preparePlay(){if(n.browser.safari)return this._currentAudioEl.setUrl(r.SILENCE).then((()=>this._currentAudioEl.play()))}_startFrequencyAnalise(){function e(e,t,s,n){return(s-t)*e/n+t}function t(e,t){return Math.random()*(t-e)+e}this._stopFrequencyAnalise();let s=999,n=null,a=null;this._freqUpdateInterval=setInterval((()=>{let r;this._currentAudioEl.paused?r=[0,0,0,0]:(s++,s>3&&(s=0,n=a,a=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)],n||(n=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)])),r=[e(s,n[0],a[0],3),e(s,n[1],a[1],3),e(s,n[2],a[2],3),e(s,n[3],a[3],3)]),this.opts.onFrequency&&this.opts.onFrequency(r)}),50)}_stopFrequencyAnalise(){clearInterval(this._freqUpdateInterval),this.opts.onFrequency&&this.opts.onFrequency([0,0,0,0])}pause(){this._currentAudioEl.pause(),this._stopFrequencyAnalise()}stop(){this._currentAudioEl.pause(),this.seek(0),this._stopFrequencyAnalise()}_setFadeVolumeInterval(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){const e=new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(e))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}fadeVolume(e,t,s){e=Math.max(0,Math.min(1,e));const n=this._currentAudioEl;let a=0;if(t){const s=e-n.volume;a=s/(t/20||1)}else a=e<n.volume?-.06:.001;if(Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),s&&s();let r=n.volume;this._setFadeVolumeInterval((()=>{!t&&a>0&&(a*=1.35),r+=a;let n=!1;if(n=a<0?r<=e:r>=e,n)return this.setVolume(e),this._setFadeVolumeInterval(),s&&s();this.setVolume(r)}))}getErrorData(){const e=this._currentAudioEl.error||{};return{is_hls:this._currentAudioEl.hls?1:0,url:this._currentAudioEl.src,error_code:e.code,error_message:e.message,hls_error:this._hlsError?JSON.stringify(this._hlsError):null}}constructor(e){this.type="html5",this.opts=e||{},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}}},800418:(e,t,s)=>{"use strict";s.d(t,{AudioAds:()=>p});var n=s(898848),a=s(598129),r=s(575753),d=s(392358),l=s(251458),c=s(636576),u=s(690027),_=s(255818);class p{get isActive(){return!!this._isActive}set isActive(e){this._isActive=e,this.player.notify(d.events.PLAYER_IS_AD_CHANGED,e)}isPlaying(){return this.isActive}getCurrentAd(){return this._currentAd}setAdsConfig(e){this._adsConfig=e}getCurrentProgress(){return this._adsCurrentProgress}getDuration(){return this._duration}loadAdman(e){const t=t=>e&&e(t);if(this._admanLoaded)return void t();let s=0;(0,a.loadScript)(p.ADMAN_SRC,{onLoad:()=>{this._admanLoaded=!0,t()},onError:()=>{window.abp?(this._admanLoaded=!0,t()):(s+=1,3===s&&(this._admanLoaded=!0),t("script_load_fail"))}})}_fetchAd(e,t,s,a,r){this.loadAdman((l=>{if(!window.AdmanHTML)return this._sendEvent("no_adman",t,p.AD_TYPE,l),a&&a();this._adman=new AdmanHTML;const c=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig,u={_SITEID:276,ver:251116,vk_id:vk.id,puid1:554,duration:e.duration,content_id:m(e.ownerId,e.id),vk_catid:p.CAT_IDS[t]||p.CAT_IDS.other,sign:c?.sign||""};Object.assign(u,e.ads||{}),nav.objLoc&&nav.objLoc.preview&&(u.preview=(0,n.intval)(nav.objLoc.preview)),cur.adsPreview&&(u.preview=1,u.vk_id=398724832),this._adman.setDebug(!!u.preview),this._adman.onError((()=>a&&a())),this._adman.onReady((()=>{if(!this._adman)return;const e=this._adman.getBannersForSection(p.AD_TYPE);if(e&&e.length){const[n]=e;"statistics"===n.type?(this._play(!0,t),a&&a()):(this._sendEvent("received",t),s?(this._sendEvent("rejected",t,p.AD_TYPE,r),this.deinit(),a&&a()):(this._sendEvent("ready",t),this.player.notify(d.events.AD_READY),this._play(!1,t,a,n)))}else s||this._sendEvent("not_received",t),a&&a()})),this._adman.init({slot:3514,wrapper:document.createElement("div"),params:u,browser:{adBlock:!!window.abp,mobile:!1}}),this._sendEvent("requested",t)}))}_sendEvent(e,t,s,a){const r=s?"/"+s:"",d=a?"/"+a:"";this._adEvents.push(e+"/"+t+r+d),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout((()=>{ajax.post(this.adsStatUrl,{act:"ad_event",events:this._adEvents.join(","),v:this.playerVersion,abp:(0,n.intval)(window.abp)},{onFail:()=>!0}),this._adEvents=[]}),500)}_play(e,t,s,a){this._adman.onCompleted((()=>{this.deinit(!0),e?this._sendEvent("statistics",t):(this.player.notify(d.events.PROGRESS,0),this.player.notify(d.events.AD_COMPLETED),this.isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._sendEvent("completed",t),this.isMvk||(window.document.title=(0,n.replaceEntities)(this._adsPrevTitle)),s&&s())})),this._adman.onStarted((()=>{e||(this.player.setIsPlaying(!0),this.player.notify(d.events.PLAY),this.player.notify(d.events.PROGRESS,0),this.player.notify(d.events.AD_STARTED,(0,_.makeAudioAdFromAdman)(a)),this.updateVolume(),this._sendEvent("started",t),window.statlogsValueEvent&&(0,c.statlogsValueEvent)("audio_web_ad_link","show"))})),this._adman.onPaused((()=>{this.player.setIsPlaying(!1),this.player.notify(d.events.PAUSE)})),this._adman.onPlayed((()=>{this.player.setIsPlaying(!0),this.player.notify(d.events.PLAY)}));const r=[.25,.5,.75];if(this._adman.onTimeRemained((e=>{this._duration=isNaN(e.duration)?0:e.duration,this._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,this.player.notify(d.events.PROGRESS,this._adsCurrentProgress,this._duration),(0,n.each)(r,((e,s)=>{if(this._adsCurrentProgress>=s)return r.shift(),this._sendEvent("progress_"+(0,n.intval)(100*s),t),!1}))})),this._adman.start(p.AD_TYPE),e)return s&&s();this._currentAd=(0,_.makeAudioAdFromAdman)(a),this.isActive=!0,this._adsPrevTitle=document.title,this.isMvk||(window.document.title=getLang("global_audio_ad"))}updateVolume(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}deinit(e){this._adman=null,!e&&this.player.notify(d.events.AD_DEINITED)}pause(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}stop(){this._adman&&(this.player.setIsPlaying(!1),this._adman.stop())}resume(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(d.events.PLAY))}checkPlay(e,t){const s=this.player._getPlayingContextSection(),{type:n,reason:a}=this._isAllowed(e),r=()=>t&&t();switch(n){case p.ALLOW_ALLOWED:this._fetchAd(e,s,!1,r);break;case p.ALLOW_DISABLED:r();break;case p.ALLOW_REJECT:this._fetchAd(e,s,!0,!1,a),r()}}hasAdsSupport(){const e=(0,n.intval)(r.browser.version.split(".")[0]);return!(r.browser.ios||r.browser.safari&&this.isMvk||r.browser.chrome&&e<50)}_isAllowed(e){if(vk.widget||(0,l.isPodcast)(e)||(0,u.isExternalStream)(e))return{type:p.ALLOW_DISABLED};const t=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(t){if(!t.enabled||!this.hasAdsSupport())return{type:p.ALLOW_DISABLED};if(cur.adsPreview)return{type:p.ALLOW_ALLOWED};if(t.day_limit_reached)return{type:p.ALLOW_REJECT,reason:p.REJECT_REASON_LIMIT};return"im"!==this.player._getPlayingContextSection()?{type:p.ALLOW_ALLOWED}:{type:p.ALLOW_REJECT,reason:p.REJECT_REASON_SECTION}}return{type:p.ALLOW_REJECT,reason:p.REJECT_REASON_UNKNOWN}}startPlay(e,t){this.checkPlay(e,t)}constructor(e,t,s){this._isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=e||{},this.playerVersion=t||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(s),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}}function m(e,t){const s=e.toString(16);let n=t.toString(16);for(;n.length<8;)n="0"+n;return s+n}p.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",p.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},p.AD_TYPE="preroll",p.ALLOW_DISABLED=1,p.ALLOW_ALLOWED=2,p.ALLOW_REJECT=3,p.REJECT_REASON_UNKNOWN="unknown",p.REJECT_REASON_LIMIT="track_limit_exceeded",p.REJECT_REASON_SECTION="section_not_allowed"},899841:(e,t,s)=>{"use strict";s.d(t,{DEFAULT_VOLUME:()=>a,SILENCE:()=>n});const n="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",a=.4761515102104643},434810:(e,t,s)=>{"use strict";s.d(t,{audioUnmaskSource:()=>d});var n=s(898848);const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",r={v:function(e){return e.split("").reverse().join("")},r:function(e,t){let s;e=e.split("");const n=a+a;let r=e.length;for(;r--;)s=n.indexOf(e[r]),~s&&(e[r]=n.substr(s-t,1));return e.join("")},s:function(e,t){let s=e.length;if(s){const n=function(e,t){const s=e.length,n=[];if(s){let e=s;for(t=Math.abs(t);e--;)t=(s*(e+1)^t+e)%s,n[e]=t}return n}(e,t);let a=0;for(e=e.split("");++a<s;)e[a]=e.splice(n[s-1-a],1,e[a])[0];e=e.join("")}return e},i:function(e,t){return r.s(e,t^vk.id)},x:function(e,t){const s=[];return t=t.charCodeAt(0),(0,n.each)(e.split(""),(function(e,n){s.push(String.fromCharCode(n.charCodeAt(0)^t))})),s.join("")}};function d(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){let t,s,n=e.split("?extra=")[1].split("#"),a=""===n[1]?"":l(n[1]);if(n=l(n[0]),"string"!=typeof a||!n)return e;a=a?a.split(String.fromCharCode(9)):[];let d=a.length;for(;d--;){if(s=a[d].split(String.fromCharCode(11)),t=s.splice(0,1,n)[0],!r[t])return e;n=r[t].apply(null,s)}if(n&&"http"===n.substr(0,4))return n}return e}function l(e){if(!e||e.length%4==1)return!1;let t,s,n=0,r=0,d="";for(;s=e.charAt(r++);)s=a.indexOf(s),~s&&(t=n%4?64*t+s:s,n++%4)&&(d+=String.fromCharCode(255&t>>(-2*n&6)));return d}},280213:(e,t,s)=>{"use strict";function n(e,t){let s="";return e.forEach((function(n,a){let r="/audio?performer=1&q="+encodeURIComponent(n.name),d=window.getWebHost?window.getWebHost():"";n.id&&(r=`/artist/${n.id}`),s+=t?`<a class="artist_link" href="${d}${r}">${n.name}</a>`:n.name,a<e.length-1&&(s+=", ")})),s}s.d(t,{getAudioArtistsString:()=>n})},349581:(e,t,s)=>{"use strict";s.d(t,{getAudioPerformers:()=>d});var n=s(251458),a=s(280213),r=s(867366);function d(e,t=!0){let s="";const d=!(0,n.isPodcast)(e)&&t;if(Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(s=(0,a.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],d)),Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(s+=" feat. ",s+=(0,a.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],d)),!s){let t=e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(d){s=`<a class="artist_link" data-performer="${t}" href="${"/audio?performer=1&q="+encodeURIComponent(t)}">${t}</a>`}else s=t}return s}},251458:(e,t,s)=>{"use strict";s.d(t,{isPodcast:()=>r});var n=s(867366),a=s(898848);function r(e){if(!e)return!1;let t=(0,a.isObject)(e)?e.extra:e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];return(0,a.isObject)(t)||(t=JSON.parse(t||"{}")),!!t.podcast}},8236:(e,t,s)=>{"use strict";s.d(t,{serializeAudio:()=>a});var n=s(867366);function a(e){if(!e)return null;if(Array.isArray(e))return e;const t=[e.addHash,e.editHash,e.actionHash,e.deleteHash,e.replaceHash,e.urlHash,e.restoreHash].join("/"),s=[e.coverUrl_l,e.coverUrl_p].join(","),a=[];return a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]=e.id,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]=e.owner_id,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL]=e.url,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e.title,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e.performer,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]=e.duration,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]=e.albumId,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK]=e.authorLink,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]=e.lyrics,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]=e.flags,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]=e.context,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA]=e.extra,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]=t,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]=s,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS]=e.ads,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE]=e.subTitle,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]=e.mainArtists,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]=e.featArtists,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM]=e.album,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=e.trackCode,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION]=e.restrictionStatus,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]=e.albumPart,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=e.accessKey,a[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]=e.chartInfo,a}},762701:(e,t,s)=>{"use strict";function n(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);{const s=new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);try{const t=new Worker(window.URL.createObjectURL(s));return t.onmessage=function(){t.terminate(),e()},t.postMessage("start"),t}catch(s){return setTimeout(e,t)}}}s.d(t,{setWorkerTimeout:()=>n})},43866:(e,t,s)=>{"use strict";function n(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}s.d(t,{wrapAudioPlay:()=>n})},613715:(e,t,s)=>{"use strict";s.d(t,{EMOJI_HINTS:()=>l,EMOJI_PREFIXED_REPLACES:()=>r,EMOJI_REPLACES:()=>d,emojiRegex:()=>n,skinToneModifierRegex:()=>a});const n=()=>/\u{1F3F4}(?:\u{E0067}\u{E0062}(?:\u{E0065}\u{E006E}\u{E0067}|\u{E0077}\u{E006C}\u{E0073}|\u{E0073}\u{E0063}\u{E0074})\u{E007F}|\u{200D}\u{2620}\u{FE0F}?)|\u{1F469}\u{200D}\u{1F469}\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F468}(?:\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D})?\u{1F468}|[\u{1F468}\u{1F469}]\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D}[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}\u{1F466}\u{200D}\u{1F466}|(?:\u{1F441}\u{FE0F}?\u{200D}\u{1F5E8}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{1F468}(?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{200D}[\u{2695}\u{2696}\u{2708}])|(?:[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}]\u{FE0F}?|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}])\u{200D}[\u{2640}\u{2642}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}](?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|\u{200D}[\u{2640}\u{2642}])|\u{1F469}\u{200D}[\u{2695}\u{2696}\u{2708}])\u{FE0F}?|\u{1F469}\u{200D}\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|\u{1F469}\u{200D}\u{1F469}\u{200D}[\u{1F466}\u{1F467}]|\u{1F468}(?:\u{200D}(?:[\u{1F468}\u{1F469}]\u{200D}[\u{1F466}\u{1F467}]|[\u{1F466}\u{1F467}])|[\u{1F3FB}-\u{1F3FF}])|\u{1F3F3}\u{FE0F}?\u{200D}\u{1F308}|\u{1F469}\u{200D}\u{1F467}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}]|\u{1F469}\u{200D}\u{1F466}|\u{1F1F6}\u{1F1E6}|\u{1F1FD}\u{1F1F0}|\u{1F1F4}\u{1F1F2}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]|\u{1F1ED}[\u{1F1F0}\u{1F1F2}\u{1F1F3}\u{1F1F7}\u{1F1F9}\u{1F1FA}]|\u{1F1EC}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EE}\u{1F1F1}-\u{1F1F3}\u{1F1F5}-\u{1F1FA}\u{1F1FC}\u{1F1FE}]|\u{1F1EA}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1ED}\u{1F1F7}-\u{1F1FA}]|\u{1F1E8}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1EE}\u{1F1F0}-\u{1F1F5}\u{1F1F7}\u{1F1FA}-\u{1F1FF}]|\u{1F1F2}[\u{1F1E6}\u{1F1E8}-\u{1F1ED}\u{1F1F0}-\u{1F1FF}]|\u{1F1F3}[\u{1F1E6}\u{1F1E8}\u{1F1EA}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F4}\u{1F1F5}\u{1F1F7}\u{1F1FA}\u{1F1FF}]|\u{1F1FC}[\u{1F1EB}\u{1F1F8}]|\u{1F1FA}[\u{1F1E6}\u{1F1EC}\u{1F1F2}\u{1F1F3}\u{1F1F8}\u{1F1FE}\u{1F1FF}]|\u{1F1F0}[\u{1F1EA}\u{1F1EC}-\u{1F1EE}\u{1F1F2}\u{1F1F3}\u{1F1F5}\u{1F1F7}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1EF}[\u{1F1EA}\u{1F1F2}\u{1F1F4}\u{1F1F5}]|\u{1F1F8}[\u{1F1E6}-\u{1F1EA}\u{1F1EC}-\u{1F1F4}\u{1F1F7}-\u{1F1F9}\u{1F1FB}\u{1F1FD}-\u{1F1FF}]|\u{1F1EE}[\u{1F1E8}-\u{1F1EA}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}]|\u{1F1FF}[\u{1F1E6}\u{1F1F2}\u{1F1FC}]|\u{1F1EB}[\u{1F1EE}-\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1F7}]|\u{1F1F5}[\u{1F1E6}\u{1F1EA}-\u{1F1ED}\u{1F1F0}-\u{1F1F3}\u{1F1F7}-\u{1F1F9}\u{1F1FC}\u{1F1FE}]|\u{1F1E9}[\u{1F1EA}\u{1F1EC}\u{1F1EF}\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1FF}]|\u{1F1F9}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1ED}\u{1F1EF}-\u{1F1F4}\u{1F1F7}\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FF}]|\u{1F1E7}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EF}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|[#\*0-9]\u{FE0F}?\u{20E3}|\u{1F1F1}[\u{1F1E6}-\u{1F1E8}\u{1F1EE}\u{1F1F0}\u{1F1F7}-\u{1F1FB}\u{1F1FE}]|\u{1F1E6}[\u{1F1E8}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F2}\u{1F1F4}\u{1F1F6}-\u{1F1FA}\u{1F1FC}\u{1F1FD}\u{1F1FF}]|\u{1F1F7}[\u{1F1EA}\u{1F1F4}\u{1F1F8}\u{1F1FA}\u{1F1FC}]|\u{1F1FB}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1EE}\u{1F1F3}\u{1F1FA}]|\u{1F1FE}[\u{1F1EA}\u{1F1F9}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]|[\u{261D}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F470}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F4AA}\u{1F574}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91D}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F936}\u{1F9B5}\u{1F9B6}\u{1F9D1}-\u{1F9D5}][\u{1F3FB}-\u{1F3FF}]|[\u{231A}\u{231B}\u{23E9}-\u{23EC}\u{23F0}\u{23F3}\u{25FD}\u{25FE}\u{2614}\u{2615}\u{2648}-\u{2653}\u{267F}\u{2693}\u{26A1}\u{26AA}\u{26AB}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26CE}\u{26D4}\u{26EA}\u{26F2}\u{26F3}\u{26F5}\u{26FA}\u{26FD}\u{2705}\u{270A}\u{270B}\u{2728}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2795}-\u{2797}\u{27B0}\u{27BF}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{1F004}\u{1F0CF}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F236}\u{1F238}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F320}\u{1F32D}-\u{1F335}\u{1F337}-\u{1F37C}\u{1F37E}-\u{1F393}\u{1F3A0}-\u{1F3CA}\u{1F3CF}-\u{1F3D3}\u{1F3E0}-\u{1F3F0}\u{1F3F4}\u{1F3F8}-\u{1F43E}\u{1F440}\u{1F442}-\u{1F4FC}\u{1F4FF}-\u{1F53D}\u{1F54B}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F57A}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5FB}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CC}\u{1F6D0}-\u{1F6D2}\u{1F6EB}\u{1F6EC}\u{1F6F4}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]|[\xA9\xAE\u{203C}\u{2049}\u{2122}\u{2139}\u{2194}-\u{2199}\u{21A9}\u{21AA}\u{231A}\u{231B}\u{2328}\u{23CF}\u{23E9}-\u{23F3}\u{23F8}-\u{23FA}\u{24C2}\u{25AA}\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2600}-\u{2604}\u{260E}\u{2611}\u{2614}\u{2615}\u{2618}\u{261D}\u{2620}\u{2622}\u{2623}\u{2626}\u{262A}\u{262E}\u{262F}\u{2638}-\u{263A}\u{2648}-\u{2653}\u{265F}\u{2660}\u{2663}\u{2665}\u{2666}\u{2668}\u{267B}\u{267E}\u{267F}\u{2692}-\u{2697}\u{2699}\u{269B}\u{269C}\u{26A0}\u{26A1}\u{26AA}\u{26AB}\u{26B0}\u{26B1}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26C8}\u{26CE}\u{26CF}\u{26D1}\u{26D3}\u{26D4}\u{26E9}\u{26EA}\u{26F0}-\u{26F5}\u{26F7}-\u{26FA}\u{26FD}\u{2702}\u{2705}\u{2708}-\u{270D}\u{270F}\u{2712}\u{2714}\u{2716}\u{271D}\u{2721}\u{2728}\u{2733}\u{2734}\u{2744}\u{2747}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2763}\u{2764}\u{2795}-\u{2797}\u{27A1}\u{27B0}\u{27BF}\u{2934}\u{2935}\u{2B05}-\u{2B07}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{3030}\u{303D}\u{3297}\u{3299}\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]\u{FE0F}?|[\u{261D}\u{26F9}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}-\u{1F3C4}\u{1F3C7}\u{1F3CA}-\u{1F3CC}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}-\u{1F469}\u{1F46E}\u{1F470}-\u{1F478}\u{1F47C}\u{1F481}-\u{1F483}\u{1F485}-\u{1F487}\u{1F4AA}\u{1F574}\u{1F575}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F645}-\u{1F647}\u{1F64B}-\u{1F64F}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F926}\u{1F930}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B5}\u{1F9B6}\u{1F9B8}\u{1F9B9}\u{1F9D1}-\u{1F9DD}]/gu,a=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/,r={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g},d={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g},l={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},573859:(e,t,s)=>{"use strict";s.d(t,{emojiReplace:()=>u,emojiToHTML:()=>l,getEmojiHTML:()=>c});var n=s(575753),a=s(613715),r=s(261347),d=s(8520);function l(e,t){if(n.browser.ipad||n.browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(let t=0;t<2;t++)Object.keys(a.EMOJI_PREFIXED_REPLACES).forEach((t=>{e.replace(a.EMOJI_PREFIXED_REPLACES[t],((e,s,n,a)=>(s||"")+c(t)+(a||"")))}));return Object.keys(a.EMOJI_REPLACES).forEach((t=>{e=e.replace(a.EMOJI_REPLACES[t],((e,s,n)=>c(t)+(n||"")))})),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace((0,a.emojiRegex)(),u)),e}function c(e,t,s,a){if(!s&&t)return t;if(a){return`<i class="emoji @${e}" emoji="${e}"${t?` title="${t}"`:""}></i>`}return`<img class="emoji" src="/emoji/e/${e}${window.devicePixelRatio>=2?"_2x":""}.png"${t?` alt="${t}"`:""}${n.browser.msie&&Number(n.browser.version)>8?' contenteditable="false"':""}>`}function u(e){return c((0,r.emojiSymbolToByteHex)(e),(0,d.encodeHTMLEntities)((0,d.escape)(e)),!0)}},261347:(e,t,s)=>{"use strict";s.d(t,{emojiByteHexToSymbol:()=>r,emojiRemoveSkinToneModifiers:()=>d,emojiSymbolToByteHex:()=>a});var n=s(613715);function a(e){return encodeURIComponent(e.replace(/\uFE0F/giu,"")).replace(/%/gi,"").toLowerCase()}function r(e){const t=e.length%2==1,s=t?e.slice(0,1):"",n=t?e.slice(1):e;let a="";try{a=decodeURIComponent("%"+(r=n,r.split("").reduce(((e,t,s)=>e+t+((s+1)%2==0?" ":"")),"").trim().split(/\s+/)).join("%"))}catch(e){}var r;return s+a}function d(e){return e.replace((0,n.emojiRegex)(),l)}function l(e){return e.replace(n.skinToneModifierRegex,"")}},312641:(e,t,s)=>{"use strict";s.d(t,{MASS_MENTION_ALIASES:()=>a,MASS_MENTION_REGEXP:()=>r,PINNED_CONVERSATION_BIT_MASK:()=>n,VK_OFFICIAL_PEER_ID:()=>d});const n=112,a={all:["all","everyone","все"],online:["online","here","здесь","тут"]},r=new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(a.all).concat(a.online).map((e=>`@${e}|\\*${e}`)).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi"),d=-22822305},34231:(e,t,s)=>{"use strict";s.d(t,{wrapAway:()=>d,wrapAwayIfExternal:()=>r});var n=s(105330);const a=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${n.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function r(e,t=!1){return function(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||a.test(t)}(e)?e:d(e,t)}function d(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}},740342:(e,t,s)=>{"use strict";function n(e,t,s){let n;return function(){const a=arguments,r=s&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,s||e.apply(this,a)}),t),r&&e.apply(this,a)}}s.d(t,{debounce:()=>n})},556216:(e,t,s)=>{"use strict";s.d(t,{decodeHTMLEntitiesDEPRECATED:()=>r,prepareToWriting:()=>d});var n=s(8520),a=s(573859);function r(e){return(0,n.decodeHTMLEntities)(e)}function d(e){let t=(0,n.decodeHTMLEntities)(e);return t=t.replace(/\n\r/gi,"\n"),t=(0,n.escape)(t),t=(0,a.emojiToHTML)(t,!0),t}},826981:(e,t,s)=>{"use strict";function n(e){const t="string"==typeof e?e.match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/):null;return t?(3600*t[1]||0)+(60*t[2]||0)+(+t[3]||0):0}function a(e){let t="";return e>=3600&&(t+=Math.floor(e/3600)+"h",e%=3600),e>=60&&(t+=Math.floor(e/60)+"m",e%=60),e>0&&(t+=Math.floor(e)+"s"),t}s.d(t,{fromString:()=>n,toString:()=>a})},628459:(e,t,s)=>{"use strict";s.d(t,{DEFAULT_MEDIA_SESSION:()=>d,HAS_MEDIA_SESSION:()=>r,clear:()=>l,updateMediaSessionMetadata:()=>c});var n=s(899841);let a;const r=window&&window.navigator&&"mediaSession"in window.navigator&&"MediaMetadata"in window,d=r?navigator.mediaSession:null;async function l(){if(r){a=a||document.createElement("audio"),a.src=n.SILENCE;try{await a.play()}catch(e){}}}function c(e,t=d){if(!t||!r)return;(location.hostname+e.album).length>30&&(e.album=e.album.substring(0,30-location.hostname.length)+"…");const s=t.metadata;s?(s.title=e.title,s.artist=e.artist,s.album=e.album,s.artwork=e.artwork):t.metadata=new MediaMetadata(e)}},636111:(e,t,s)=>{"use strict";s.d(t,{isAdvertBlocked:()=>a});var n=function(){function e(e,t){var s=document.createElement("div"),n=function(e,t){for(var s,n,a=e.length,r=0;r<t;r++)n=Math.floor(Math.random()*a),s=e[r],e[r]=e[n],e[n]=s;return e.slice(0,t)}(String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,100,118,101,114,116,66,108,111,99,107,32,98,45,114,98,32,98,97,110,110,101,114,95,50,52,48,32,112,45,116,97,114,103,101,116,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,112,117,98,95,55,50,56,120,57,48,32,114,98,95,98,111,100,121,32,114,98,45,102,108,111,97,116,105,110,103,32,114,98,45,115,108,111,116,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,116,101,120,116,45,97,100,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,98,97,110,110,101,114,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,65,100,32,116,101,120,116,97,100,32,116,101,120,116,65,100,115,32,116,101,120,116,97,100,115,32,116,103,98,45,98,97,110,110,101,114,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107).split(" "),7);s.setAttribute("class",n.join(" ")),s.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),s.setAttribute("id","trg-b-banners-1"),s.setAttribute("data-view","SlotView.mimic"),this.bait=document.body.appendChild(s),this.bait.offsetParent,this.bait.offsetHeight,this.bait.offsetLeft,this.bait.offsetTop,this.bait.offsetWidth,this.bait.clientHeight,this.bait.clientWidth,this.loopNumber=0,this.fnPositive=e||null,this.fnNegative=t||null;var a=this;setTimeout((function(){a._checkBait.call(a)}),1)}return e.prototype._checkBait=function(){var e=null!==document.body.getAttribute("abp")||!function(e,t){if(null===e.offsetParent||0==e.offsetHeight||0==e.offsetWidth||0==e.clientHeight||0==e.clientWidth)return!1;if(t&&(0==e.offsetLeft||0==e.offsetTop))return!1;if(void 0!==window.getComputedStyle){var s=window.getComputedStyle(e,null);return"none"!==s.display&&"hidden"!==s.visibility}return!0}(this.bait,!0);if((!0===e||++this.loopNumber>=10)&&this._stop(),e&&this.fnPositive)try{(0,this.fnPositive)()}catch(e){}else if(!e&&this.loopNumber<10){var t=this;setTimeout((function(){t._checkBait.call(t)}),50*this.loopNumber)}else try{(0,this.fnNegative)()}catch(e){}},e.prototype._stop=function(){try{document.body.removeChild(this.bait)}catch(e){}},function(t,s){new e(t,s)}}();function a(){return new Promise(((e,t)=>n(t,e))).then((()=>!1)).catch((()=>!0))}},150681:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var n=s(593159),a=s(672277),r=s(754866),d=s(972332);const l="idle",c="pend_rows",u="pend_prefetch",_="done_prefetch",p="done";class m{getListEl(){return this._containerEl}setListEl(e,t){let s;this._containerEl=(0,r.ge)(e),this._scrollNode=t||m.closestOverflowParent(this._containerEl),s=this._scrollNode===window?0:(0,r.getXY)(this._scrollNode)[1],this._contentYOffset=(0,r.getXY)(this._containerEl)[1]-s}options(e){(0,n.extend)(this._opts,e)}_countRows(e){const t=this;let s=0;return(0,n.each)(e,(function(e,a){"string"==typeof a&&(a=(0,r.se)(a)),t._rowClasses?(0,n.each)(t._rowClasses,(function(e,t){if((0,r.hasClass)(a,t))return s++,!1})):s++})),s}_drawRows(e){const t=this;this._opts.drawRows?this._opts.drawRows(t._containerEl,e):(0,n.each)(e,(function(e,s){"string"==typeof s&&(s=(0,r.se)((0,n.trim)(s))),s&&t._containerEl.appendChild(s)})),this.toggleProgress(this._state!==p),!this._forceDrawCalled&&this._opts.onRendered&&this._opts.onRendered(this._offset)}toggleProgress(e){e?!this._isProgressShown&&this._opts.showProgress&&this._opts.showProgress():this._isProgressShown&&this._opts.hideProgress&&this._opts.hideProgress(),this._isProgressShown=e}drawMore(){(0,n.inArray)(this._state,[l,_])?(this._forceDrawCalled=!0,this._drawRows(this._prefetched),this._setState(u),this._prefetched=[],this._requestRows(),this._forceDrawCalled=!1):this._state===p&&this._opts.onNoMore&&this._opts.onNoMore(this._containerEl.childElementCount)}destroy(){this._ev_scroll&&((0,d.removeEvent)(this._scrollNode,"scroll",this._ev_scroll),this._ev_scroll=!1),this._ev_window_resize&&(0,d.removeEvent)(window,"resize",this._ev_window_resize),this._setState(p),this.toggleProgress(!1)}getOffset(){return this._offset}_requestRows(){if(!this.isDone()&&this._state!==_){function e(){this._opts.onNeedRows(this._onRowsProvided.bind(this),this._offset,this._page++,this._state===u,this)}this._initialRender=!1,e.apply(this)}}_onRowsProvided(e,t){if(this.isDone())return;if(!1===e)return this._requestRows();e=e||[];let s=!1;this._needUseExternalOffset?(this._offset=t??0,s=Boolean(t)):(this._offset+=void 0===t?this._countRows(e):t,s=Boolean(e.length));const n=this._containerEl.childElementCount;switch(this._state){case u:0!==e.length&&(this._prefetched=this._prefetched.concat(e)),s?(this._setState(l),this._opts.onHasMore&&this._opts.onHasMore()):(this._setState(_),this._opts.onNoMore&&this._opts.onNoMore(n),0===this._prefetched.length&&this._setState(p)),(s||0!==this._prefetched.length)&&this._onScroll();break;case c:this._drawRows(e),s?(this._setState(u),this._requestRows()):(this._setState(p),this._opts.onNoMore&&this._opts.onNoMore(n)),this.toggleProgress(!1);break;case l:this._prefetched=this._prefetched.concat(e)}}_setState(e){this._state=e}isDone(){return this._state===p}static closestOverflowParent(e){let t,s=e;for(;s&&s.tagName&&(t=(0,r.getStyle)(s,"overflow"),"visible"===t||"page_wrap"===s.id);)s=(0,r.domPN)(s);return s!==window.document&&s!==document.body&&s||(s=window),s}_onScroll(){if(this._forceDrawCalled)return;if(this._state===c)return;const e=this._scrollNode;let t,s,n;e===window?(n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(0,a.scrollGetY)()):(n=(0,r.getSize)(e)[1],t=this._scroll?this._scroll.data.scrollTop:e.scrollTop),n<10||(s=this._containerEl.scrollHeight,s-n-t+this._contentYOffset<10&&(this._state===c||!this._prefetched.length&&this._state===u?(this.toggleProgress(!0),this._setState(c)):this._state===u||this._state===l?(this._drawRows(this._prefetched),this._prefetched=[],this._setState(u),this._requestRows()):this._state===_&&(this._drawRows(this._prefetched),this._prefetched=[],this._setState(p),this._opts.onNoMore&&this._opts.onNoMore(),this.destroy())))}constructor(e,t){if(this.constructor!==m)throw new Error("AutoList: AutoList was called without 'new' operator");if(m._counter=m._counter||0,this._id=m._counter++,this.setListEl(e,t.scrollNode),this._opts=(0,n.extend)({threshold:0,renderImmediate:!1,fetchImmediate:!0},t),!this._containerEl)throw new Error("AutoList: container not found");this._rowClasses=!!this._opts.rowClass&&this._opts.rowClass.split(" "),delete this._opts.rowClass,this._initialRender=this._opts.renderImmediate,this._needUseExternalOffset=this._opts.needUseExternalOffset??!1,this._isProgressShown=!1,this._prefetched=[],this._needUseExternalOffset?this._offset=this._opts.offset??0:this._initialRender?this._offset=0:this._opts.offset?this._offset=this._opts.offset:this._opts.rowClasses?this._offset=this._countRows(this._containerEl.children):this._offset=this._containerEl.children.length,this._page=this._offset>0?1:0,(0,d.addEvent)(this._scrollNode,"scroll",this._ev_scroll=this._onScroll.bind(this)),(0,d.addEvent)(window,"resize",this._ev_window_resize=this._onScroll.bind(this)),this._setState(this._opts.renderImmediate?c:u),this._opts.fetchImmediate?this._requestRows():(this._setState(l),this._onScroll())}}},131455:(e,t,s)=>{"use strict";s.d(t,{initSw:()=>d,onSwReady:()=>a});const n=(0,s(558137).makeSharedState)("sw-loading-state",(()=>({isReady:!1,onReadyCallbacks:[]})),{version:1}),a=e=>{n().isReady?e():n().onReadyCallbacks.push(e)},r=()=>{n().isReady=!0;for(let e of n().onReadyCallbacks)e();n().onReadyCallbacks=[]};async function d(){if(!window.vk.disableSW)try{const[{SWClient:e},{default:t}]=await Promise.all([s.e(8716).then(s.bind(s,510486)),s.e(41837).then(s.bind(s,419970))]);window.sw=new e,await window.sw.register(),window.pushNotifier=new t(window.sw,e),window.sw.storePushHash(),r()}catch(e){console.log(e)}}},146175:(e,t,s)=>{"use strict";s.d(t,{PIN_HIDDEN_ID_OP:()=>c,RECENT_SEARCH_OP:()=>l,imDbGet:()=>_,mount:()=>y});var n=s(740342),a=s(898848),r=s(636576),d=s(593159);const l="recent_search",c="pin_hide";function u(e){return"im_store_"+e}function _(e){return ls.get(u(e))||{}}function p(e,t,s){if(ls.checkVersion()){const n=JSON.stringify(t);(0,a.rand)(0,1e5)<=1&&(0,r.statlogsValueEvent)("im_local_store_size",n.length),s(u(e),n)}}function m(e,t,s){s.key===u(e)&&(t.db=JSON.parse(s.newValue),t.checkTime=Date.now())}function y(e){const t=(0,n.debounce)(((e,t)=>{localStorage.setItem(e,t)}),300);ls.checkVersion()&&function(e,t){const s=["fwd","draft","bind_attach"],n=_(e);let a=!1;for(let e=s.length;e--;)s[e]in n&&(delete n[s[e]],a=!0);a&&p(e,n,t)}(e,t);const s={db:_(e),checkTime:Date.now()},a=m.bind(null,e,s);return window.addEventListener("storage",a,!1),{select:(t,n)=>(Date.now()-s.checkTime>1e3&&(s.db=_(e)),function(e,t,s){return t===l?e[t]||[]:t===c?e[t]&&e[t][s]:e[t]?(0,d.extend)(!0,{},e[t][s]):null}(s.db,t,n)),selectByKey:t=>(Date.now()-s.checkTime>1e3&&(s.db=_(e)),s.db[t]),update(n,a){const r=function(e,t,s){switch(e[t]||(e[t]={}),t){case l:const n=s;n&&n.length>0?e[t]=n:delete e[t];break;case c:const[a,r]=s;r?e[t][a]=+r:delete e[t][a]}return e}(s.db,n,a);return s.db=r,s.checkTime=Date.now(),p(e,r,t)},updateByKey:(n,a)=>(s.db[n]=a,s.checkTime=Date.now(),p(e,s.db,t)),unmount(){window.removeEventListener("storage",a,!1)}}}},196829:(e,t,s)=>{"use strict";s.d(t,{Gifts:()=>g});var n=s(683234),a=s(866467),r=s(270959),d=s(972332),l=s(593159),c=s(246429),u=s(754866),_=s(584427),p=s(664822),m=s(801746),y=s(985737),f=s(120101);const g={deleteGift:function(e,t,s,n={}){window.ajax.post("al_gifts.php",{act:"delete",mid:n.mid,gift:s,hash:n.hash},{onDone:function(e){const s=(0,u.ge)("gift"+t);s&&((0,u.domNS)((0,u.domFC)(s))?(0,u.domNS)((0,u.domFC)(s)).innerHTML=e:(s.appendChild((0,u.ce)("div",{className:"gift_deleted",innerHTML:e})),(0,u.hide)((0,u.domFC)(s)),window.Pagination&&!(0,c.curBox)()&&window.Pagination.recache(-1)),(0,f.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&window.Profile?.updateGiftBlock())},showProgress:()=>{e.classList.add("gift_delete--loading"),e.innerHTML="",e.appendChild((0,u.ce)("div",{className:"gift_delete__spinner",innerHTML:(0,m.getIcon16Spinner)().icon}))},hideProgress:()=>{e.classList.remove("gift_delete--loading"),e.innerHTML=(0,y.getIcon16Cancel)().icon}})},restoreGift:function(e,t,s,n){n=n||{},ajax.post("al_gifts.php",{act:"restore",mid:n.mid,gift:s,hash:n.hash},{onDone:function(){const e=(0,u.ge)("gift"+t);e&&(0,u.domNS)((0,u.domFC)(e))&&((0,u.re)((0,u.domNS)((0,u.domFC)(e))),(0,u.show)((0,u.domFC)(e)),(0,f.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&window.Profile?.updateGiftBlock())}})},markSpamGift:function(e,t,s,n){n=n||{},ajax.post("al_gifts.php",{act:"mark_spam",mid:n.mid,gift:s,hash:n.hash},{onDone:function(e){(0,u.ge)("gift_mark_spam"+t).innerHTML=e}})},initGiftsBox:function(e,t){e.setOptions({width:638,bodyStyle:"padding: 0",grey:!0,hideButtons:!0,onShow:function(){cur.gftbxWasScroll&&(boxLayerWrap.scrollTop=cur.gftbxWasScroll,cur.gftbxWasScroll=!1)}}),t.lang&&(cur.lang=(0,l.extend)(cur.lang||{},t.lang)),(0,l.extend)(cur,{gftbxOffset:t.offset,gftbxAutoload:!0,gftbxWasScroll:!1,gftbxMid:t.mid}),ajax.preload("al_gifts.php",{act:"box",mid:t.mid,offset:t.offset},t.preload),window.uiScrollBox&&window.uiScrollBox.init(e,{onShow:function(){(0,d.addEvent)(boxLayerWrap,"scroll",g.onGiftsScroll),setTimeout(cur.chooseAudioScroll,0)},onHide:function(){(0,d.removeEvent)(boxLayerWrap,"scroll",g.onGiftsScroll)}}),(0,d.addEvent)(boxLayerWrap,"scroll",g.onGiftsScroll);const s=boxLayerWrap.scrollTop;(0,u.elfocus)((0,u.geByClass1)("_scroll_node",e.bodyNode)),boxLayerWrap.scrollTop=s,onBodyResize(),g.onGiftsScroll()},moreGifts:function(){const e=(0,u.ge)("gifts_more_link");(0,n.buttonLocked)(e)||(ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{onDone:function(t,s,n){const a=(0,u.ce)("div",{innerHTML:t}),r=(0,u.ge)("gifts_rows");if(r){for(let e=(0,u.domFC)(a);e;e=(0,u.domFC)(a))r.appendChild(e);cur.gftbxOffset=s,n?g.preloadGifts():(0,u.hide)(e)}},showProgress:n.lockButton.pbind(e),hideProgress:n.unlockButton.pbind(e),cache:1}),cur.gftbxAutoload=!0)},preloadGifts:function(){ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{cache:1})},onGiftsScroll:function(){if(!cur.gftbxAutoload)return;const e=lastWindowHeight,t=(0,u.ge)("gifts_more_link");(0,u.isVisible)(t)&&e>(0,u.getXY)(t,!0)[1]&&t.click()},showGiftBox:function(e,t,s){return window.Profile?window.Profile.showGiftBox(e,t,s):(cur.gftbxWasScroll=boxLayerWrap.scrollTop,boxLayerWrap.scrollTop=0,cur.viewAsBox?cur.viewAsBox():!(0,r.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:s},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"],cache:1},t))},processBoxOptions(e,t){-1e3!=t&&t&&(requestAnimationFrame((()=>{(0,c.hideBoxLoader)()})),(0,l.extend)(cur,{paymentsOfferPreview:t.paymentsOfferPreview,paymentsPreload:t.paymentsPreload,paymentsAppOrder:t.paymentsAppOrder,paymentsOfferPreload:t.paymentsOfferPreload}),t.orderData&&p.AppOrderBox.initialize(t.orderData.orderId,t.orderData.appId,t.orderData.testMode,t.orderData.hash,t.orderData.votes,t.orderData.discount,t.orderData.billPeriod),(0,l.extend)(cur,{paymentsAuthPayment:t.paymentsAuthPayment,paymentsOrderNotice:t.paymentsOrderNotice,paymentsTryCompleteOrder:t.paymentsTryCompleteOrder,isPaymentsAppOrder:t.isPaymentsAppOrder,paymentsOfferApp:t.paymentsOfferApp,checkoutEnabled:t.checkoutEnabled}),t.showProgress&&_.PaymentsBox.showProgress(""),(0,l.extend)(cur,{votesAmountsData:t.votesAmountsData,paymentsPreferVotes:t.paymentsPreferVotes,votesTypeInit:t.votesTypeInit,psList:t.psList,paymentsWideBox:t.paymentsWideBox,paymentsTooltips:t.paymentsTooltips,paymentsChangeType:0===t.paymentsWideBox?a.getLang("payments_go_change_pay_type"):"",payments_get_votes:a.getLang("payments_get_votes_new"),getVotesDoneHide:!0,paymentsWaitingCache:{},isPaymentComplete:!1,isPaymentAttemted:!1,usdRate:t.usdRate,paymentsHash:t.paymentsHash,paymentComplete:_.PaymentsBox.complete,paymentCanceled:_.PaymentsBox.paymentCanceled,paymentsShowProgress:_.PaymentsBox.showProgress,statSessionId:t.statSessionId}),_.PaymentsBox.initialize(e),cur.checkoutEnabled||(_.PaymentsBox.initPhoneCountry(t.countries,t.country),_.PaymentsBox.initPhoneNumber((0,u.ge)("phone"))),(0,l.extend)(cur,{paymentsTypesSum:t.paymentsTypesSum,instantNeedCVV:t.instantNeedCVV,votesType:t.votesType,paymentsWPreload:t.paymentsWPreload,isMidas:t.isMidas,isHideButtonBackAndText:t.isHideButtonBackAndText}),t.getVotesAmountsOnDone&&_.PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsWPreload))},showGetMoneyBox(e=null){return(0,r.showBox)("al_gifts.php",{act:"get_money",...e},{onDone:this.processBoxOptions})}}},633009:(e,t,s)=>{"use strict";s.d(t,{cancelStackFilter:()=>r,cancelStackPop:()=>l,cancelStackPush:()=>d,getCancelStack:()=>a});var n=s(419733);function a(){return window.cancelStack||[]}function r(e,t){const s=a();return t&&(0,n.topHeaderClearClose)(),window.cancelStack=s.filter((t=>t.name!==e)),window.cancelStack}function d(e,t,s){return s&&(0,n.topHeaderClose)((function(s){t(s),r(e)})),window.cancelStack=r(e).concat([{func:t,name:e,dclick:s}]),window.cancelStack}function l(e){const t=a();(0,n.topHeaderClearClose)(),t.length>0&&t.pop().func(e);const s=t[t.length-1];return s&&s.dclick&&(0,n.topHeaderClose)((function(){s.func(e),r(s.name)})),window.cancelStack=t,window.cancelStack}},471984:(e,t,s)=>{"use strict";s.d(t,{clipboardProcessPaste:()=>p,copyToClipboard:()=>l._copyWithFakeElement,getFiles:()=>c});var n=s(967495),a=s(593159),r=s(972332),d=s(754866),l=s(695847);function c(e){let t=function(e){return e&&e.clipboardData?e.clipboardData:e&&e.originalEvent&&e.originalEvent.clipboardData?e.originalEvent.clipboardData:window.clipboardData}(e);if(!t)return[];let s=t.items;if(!s)return[];let n=[];for(let e=0;e<s.length;e++)0==s[e].type.indexOf("image")&&n.push(s[e].getAsFile());return n}let u=!1,_=null;function p(e){return new Promise(((t,s)=>{if(u)return(0,r.cancelEvent)(e),s();let[l,c,p,m,y]=(0,n.rangeGet)();if(l){if("paste"===e.type){let s=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData;if(s&&s.types&&s.getData){(0,r.cancelEvent)(e),u=!0;let d=s.getData("text/html")||(0,a.clean)(s.getData("text/plain"))||"";return t([d,e=>{(0,n.rangeInsert)(l,e),u=!1}])}let _=(0,d.cf)(),f=e.target||window.event.srcElement;for(;f.firstChild;)_.appendChild(f.firstChild);return new Promise((e=>setTimeout((()=>{let t=f.innerHTML||"";f.innerHTML="",f.appendChild(_),e([t,e=>{l=(0,n.rangeCreate)(c,p,m,y),(0,n.rangeInsert)(l,e),u=!1}])}),0)))}if("beforepaste"===e.type)return u=!0,function(){if(!_){let e=(0,d.ge)("utils");_=(0,d.ce)("div",{},{width:"10px",height:"10px",overflow:"hidden"}),(0,d.attr)(_,"contenteditable","true"),e.appendChild(_)}}(),_.focus(),void(_.onpaste=()=>{setTimeout((()=>{let e=_.innerHTML||"";_.innerHTML="",delete _.onpaste,t([e,e=>{l=(0,n.rangeCreate)(c,p,m,y),(0,n.rangeInsert)(l,e),u=!1}])}),0)})}return s()}))}},250598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ElementTooltip:()=>_,default:()=>p});var n=s(754866),a=s(593159),r=s(972332),d=s(672277),l=s(137771),c=s(153659),u=s(317216);class _{_initEvents(e){this._opts.autoShow&&(this._el_me_event=this._onMouseEnter.bind(this),(0,r.addEvent)(e,"mouseenter",this._el_me_event),this._opts.showOnKeyboard&&(this._el_kd_event=t=>{t.target!==e||t.keyCode!==r.KEY.ENTER&&t.keyCode!==r.KEY.SPACE||this.toggle()}),(0,r.addEvent)(e,"keydown",this._el_kd_event)),(this._opts.autoShow||this._opts.autoHide)&&(this._el_ml_event=this._onMouseLeave.bind(this),(0,r.addEvent)(e,"mouseleave",this._el_ml_event)),this._opts.autoShow||this._opts.customShow||(this._el_c_event=()=>{this._isShown&&this._opts.noHideOnClick||this.toggle(!this._isShown)},(0,r.addEvent)(e,"click",this._el_c_event))}_onMouseEnter(e){clearTimeout(this._hto),this._hto=!1,!this._isShown&&this._opts.autoShow&&(clearTimeout(this._reTimeout),this._reTimeout=!1,clearTimeout(this._sto),this._sto=setTimeout(this.show.bind(this),this._opts.delay))}_onMouseLeave(e){this._clearTimeouts(),this._hto=setTimeout(this._hide.bind(this),200)}_onMouseWindowClick(e){if(this._opts.noAutoHideOnWindowClick)return;let t=e.target;for(;t&&t!==this._ttel&&t!==document.body&&t!==this._el;)t=(0,n.domPN)(t);return(0,n.hasClass)(e.target,"_ap_layer__close")||t&&t!==document.body?void 0:(0,a.isFunction)(this._opts.onWindowClick)?(this._opts.onWindowClick(),(0,r.cancelEvent)(e)):(this.hide(!0),(0,r.cancelEvent)(e))}destroy(){let e;this._el_me_event&&(0,r.removeEvent)(this._el,"mouseenter",this._el_me_event),this._el_ml_event&&(0,r.removeEvent)(this._el,"mouseleave",this._el_ml_event),this._el_c_event&&(0,r.removeEvent)(this._el,"click",this._el_c_event),this._el_kd_event&&(0,r.removeEvent)(this._el,"keydown",this._el_kd_event),this._clearTimeouts(),(0,n.removeData)(this._el,"ett"),(0,n.re)(this._ttel),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ttel&&(e=(0,n.geByClass1)("_eltt_content",this._ttel)),this._opts.onDestroy&&this._opts.onDestroy(e)}hide(e,t){this._hide(e,t)}_onTooltipMouseEnter(e){this._clearTimeouts()}_onTooltipMouseLeave(e){this._onMouseLeave()}build(){if(!this._ttel){const e=this._opts.withCloseButton?"eltt_with_close_button":"";this._ttel=(0,n.se)(`\n        <div class="eltt ${this._opts.cls||""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),this._ttArrowEl=(0,n.geByClass1)("_eltt_arrow_back",this._ttel);const t=(0,n.geByClass1)("_eltt_content",this._ttel);if(this._opts.content&&((0,a.isString)(this._opts.content)?t.innerHTML=this._opts.content:t.appendChild(this._opts.content)),this._opts.withCloseButton){const e='\n          <div class="eltt_close_button"></div>\n        ';this._ttel.insertAdjacentHTML("beforeend",e),this._closeButton=this._ttel.lastElementChild;const t=e=>{e.stopPropagation(),this.hide(null,!0),this._opts.onCloseButtonClick&&this._opts.onCloseButtonClick()};this._closeButton.addEventListener("click",t),cur.destroy.push((()=>this._closeButton.removeEventListener("click",t)))}this._appendToEl&&this._appendToEl.appendChild(this._ttel),this._opts.onClick&&(this._ttel.addEventListener("click",this._opts.onClick),window.cur.destroy.push((()=>this._ttel.removeEventListener("click",this._opts.onClick))))}}show(){if(this._isShown)return void this.updatePosition();if(this._tooltipStats.handleShow(),this._opts.skipShow)return;if(this._clearTimeouts(),this._ttel||(this.build(),(this._opts.autoShow||this._opts.autoHide)&&(this._ev_ttenter=this._onTooltipMouseEnter.bind(this),this._ev_ttleave=this._onTooltipMouseLeave.bind(this),(0,r.addEvent)(this._ttel,"mouseenter",this._ev_ttenter),(0,r.addEvent)(this._ttel,"mouseleave",this._ev_ttleave))),this._opts.width){const e=(0,a.isFunction)(this._opts.width)?this._opts.width.call(this):this._opts.width;(0,n.setStyle)(this._ttel,"width",e)}(0,n.show)(this._ttel);const e=(0,n.geByClass1)("_eltt_content",this._ttel);this._opts.onFirstTimeShow&&!this._firstTimeShown&&this._opts.onFirstTimeShow.call(this,e,this._ttel),this._opts.onShow&&this._opts.onShow(e,!this._firstTimeShown),this._firstTimeShown=!0,this.updatePosition(),this._isShown=!0,this._el.setAttribute("aria-expanded","true"),this._visTO=setTimeout(n.addClass.pbind(this._ttel,"eltt_vis"),10),this._opts.elClassWhenShown&&(0,n.addClass)(this._el,this._opts.elClassWhenShown),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ev_wclick=this._onMouseWindowClick.bind(this),(0,r.addEvent)(document,"mousedown",this._ev_wclick)}static getType(e){switch(e){case"top":case"bottom":return _.TYPE_VERTICAL;case"right":case"left":return _.TYPE_HORIZONTAL}}getOptions(){return this._opts}updatePosition(){let e=this._opts.forceSide,t=!!this._opts.getTargetBoundingBox&&this._opts.getTargetBoundingBox(this);if(!t){const e=(0,n.getXY)(this._el),s=(0,n.getSize)(this._el);t={left:e[0],top:e[1],width:s[0],height:s[1]}}const s=this._opts.getWrapEl?this._opts.getWrapEl(this):(0,n.gpeByClass)("audio_layer_container",this._ttel),r=s||(0,n.domClosestOverflowHidden)(this._ttel),c=r!==document.body?(0,n.getXY)(r):[(0,d.scrollGetX)(),(0,d.scrollGetY)()+(0,l.getPageHeaderHeight)()],u=r!==document.body?(0,n.getSize)(r):[window.innerWidth,window.innerHeight],p=(0,n.getSize)(this._ttel),m=this._arrowSize,y=this._opts.noBorder?0:1,f=(0,a.isFunction)(this._opts.offset)?this._opts.offset():this._opts.offset;let g;const E=(e,s)=>{const a={},r=[vk.rtl?"marginRight":"marginLeft","marginTop"].indexOf(e);let d;d=this._opts.align===(vk.rtl?_.ALIGN_LEFT:_.ALIGN_RIGHT)?p[r]-Math.max(y+m+(s||0),Math.min(p[r],t[r?"height":"width"])/2):this._opts.align===(vk.rtl?_.ALIGN_RIGHT:_.ALIGN_LEFT)?Math.max(y+m+(s||0),Math.min(p[r],t[r?"height":"width"])/2):p[r]/2,a[e]=Math.floor(d)-y-m-(s||0),this._opts.onSetArrowPosition(a),(0,n.setStyle)(this._ttArrowEl,a)};if(this._opts.setPos)g=this._opts.setPos(this)||{},_.getType(e)===_.TYPE_VERTICAL?void 0!==g.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginLeft:g.arrowPosition}):vk.rtl?E("marginRight"):E("marginLeft"):void 0!==g.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginTop:g.arrowPosition}):E("marginTop");else{if(!e&&this._prevSide&&this._opts.preventSideChange)e=this._prevSide;else if(!e)if(this._opts.type===_.TYPE_VERTICAL){const s=document.body.classList.contains("body_im")?this._opts.bottomGap||60:this._opts.bottomGap||0,n=t.top-c[1]>p[1]+m-f[1],a=(0,d.scrollGetY)()+u[1]-(t.top+t.height+m)-s>p[1];e="top"===this._opts.defaultSide?n?"top":"bottom":a?"bottom":"top"}else e=t.left-c[0]<p[0]?"right":"left";let s,a,r,l,y,g,A=(0,n.getXY)(this._appendToEl),b=[t.left-A[0],t.top-A[1]],P=f[0]+b[0];this._opts.centerShift?(P+=this._opts.centerShift||0,s=this._opts.centerShift):this._opts.rightShift&&(s=-(p[0]/2-this._opts.rightShift),P+=s),this._prevSide=e;let I=20;const T=!this._opts.autoAdjustToViewport;switch(this._opts.align===(vk.rtl?_.ALIGN_LEFT:_.ALIGN_RIGHT)?(a=t.width-p[0],r=t.height-p[1]):this._opts.align===(vk.rtl?_.ALIGN_RIGHT:_.ALIGN_LEFT)?(a=0,r=0):(a=-p[0]/2+t.width/2,r=t.height/2-p[1]/2),e){case"bottom":y=a+P,g=t.height+m-f[1]+b[1],s||T||(l=a+t.left+f[0]+p[0]+I-(c[0]+u[0]),l<0&&(l=0),y-=l,s=-l),(0,n.setStyle)(this._ttel,{left:y,top:g});break;case"top":y=a+P,s||T||(l=a+t.left+f[0]+p[0]+I-(c[0]+u[0]),l<0&&(l=0),y-=l,s=-l),(0,n.setStyle)(this._ttel,{left:y}),g=-(0,n.getSize)(this._ttel)[1]-m+f[1]+b[1],(0,n.setStyle)(this._ttel,{top:g});break;case"right":y=t.width+m+P,g=r+f[1]+b[1],s||T||(l=r+t.top+f[1]-(c[1]+I),l>0&&(l=0),g-=l,s=-l),(0,n.setStyle)(this._ttel,{left:y,top:g});break;case"left":y=-p[0]-m+P,g=r+f[1]+b[1],s||T||(l=r+t.top+f[1]-(c[1]+I),l>0&&(l=0),g-=l,s=-l),(0,n.setStyle)(this._ttel,{left:y,top:g})}this._opts.type===_.TYPE_VERTICAL?vk.rtl?E("marginRight",s):E("marginLeft",s):E("marginTop",s)}(0,a.each)(["top","bottom","left","right"],function(t,s){e!==s&&(0,n.removeClass)(this._ttel,"eltt_"+s)}.bind(this)),(0,n.addClass)(this._ttel,"eltt_"+e),(0,n.setStyle)(this._ttel,g)}_hide(e,t){if(this.tempPreventHide)return;let s;if(e&&(s=u.ETooltipEventTypes.TOOLTIP_HIDE_BY_CLICK),t&&(s=u.ETooltipEventTypes.TOOLTIP_HIDE_BY_CROSS),this._tooltipStats.handleHide(s),this._isShown=!1,this._clearTimeouts(),this._reTimeout=setTimeout(function(){(0,n.hide)(this._ttel),this._el.setAttribute("aria-expanded","false"),this._opts.elClassWhenShown&&(0,n.removeClass)(this._el,this._opts.elClassWhenShown),this._opts.onHide&&this._opts.onHide(this._ttel,!!e,!!t)}.bind(this),_.FADE_SPEED),this._opts.onBeforeHide)try{this._opts.onBeforeHide(this._ttel,!!e,!!t)}catch(e){}(0,n.removeClass)(this._ttel,"eltt_vis"),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick)}isShown(){return this._isShown}toggle(){this.isShown()?this.hide():this.show()}_clearTimeouts(){this._visTO&&clearTimeout(this._visTO),this._visTO=!1,this._sto&&clearTimeout(this._sto),this._sto=!1,this._hto&&clearTimeout(this._hto),this._hto=!1,this._reTimeout&&clearTimeout(this._reTimeout),this._reTimeout=!1}getContent(){return(0,n.geByClass1)("_eltt_content",this._ttel)}constructor(e,t){if(this.constructor!==_)throw new Error("ElementTooltip was called without 'new' operator");if(!(e=(0,n.ge)(e))||!e.nodeType)throw new Error("First argument not a DOM element");if((0,n.data)(e,"ett"))return(0,n.data)(e,"ett");if(this._tooltipStats=new c.TooltipsStat(t.helpHintId||"unknown",t.skipShow||!1),this._opts=(0,a.extend)({delay:100,offset:[0,0],type:_.TYPE_VERTICAL,id:"",cls:"",width:null,appendToParent:!1,autoAdjustToViewport:!0,autoShow:!0,autoHide:!1,noHideOnClick:!1,arrowSize:"normal",customShow:!1,align:_.ALIGN_CENTER,withCloseButton:!1,skipShow:!1,onSetArrowPosition:()=>{}},t),this._opts.customShow&&(this._opts.autoShow=!1),this._opts.defaultSide||(this._opts.defaultSide=this._opts.type===_.TYPE_VERTICAL?"top":"left"),this._opts.cls+=" eltt_arrow_size_"+this._opts.arrowSize,this._opts.cls+=" eltt_align_"+this._opts.align,this._opts.noBorder&&(this._opts.cls+=" eltt_noborder"),this._opts.setPos&&!this._opts.forceSide)throw new Error("forceSide parameter should be set if you use setPos");if(this._appendToEl=this._opts.appendTo?this._opts.appendTo:this._opts.appendToParent?(0,n.domClosestPositioned)(e,{noOverflow:!0}):e,this._arrowSize={mini:_.ARROW_SIZE_MINI,normal:_.ARROW_SIZE_NORMAL,big:_.ARROW_SIZE_BIG}[this._opts.arrowSize],this._opts.forceSide){const e=_.getType(this._opts.forceSide);if(void 0===e)throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);0,this._opts.type=e}this._opts.type===_.TYPE_HORIZONTAL&&void 0===t?.autoAdjustToViewport&&(this._opts.autoAdjustToViewport=!1),this._el=e,(0,n.data)(this._el,"ett",this),this._initEvents(e),this._clearTimeouts(),this._isShown=!1,this._el.setAttribute("aria-expanded","false")}}_.TYPE_VERTICAL=0,_.TYPE_HORIZONTAL=1,_.FADE_SPEED=100,_.ARROW_SIZE_MINI=9,_.ARROW_SIZE_NORMAL=8,_.ARROW_SIZE_BIG=16,_.ALIGN_LEFT="left",_.ALIGN_CENTER="center",_.ALIGN_RIGHT="right";const p=_},193694:(e,t,s)=>{"use strict";s.d(t,{initFavIcon:()=>r,setFavIcon:()=>a});var n=s(754866);function a(e,t){if(!window.icoNode)return;if(e=e+"?"+((stVersions||{}).favicon||""),icoNode.getAttribute("href")===e&&!t)return;const s=(0,n.ce)("link",{rel:"shortcut icon",type:"image/gif",href:e});headNode.replaceChild(s,icoNode),icoNode=s}function r(){window._iconAdd=window.devicePixelRatio>=2?"_2x":""}},788789:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{giftsBox:()=>giftsBox,imageStatusPopup:()=>imageStatusPopup,mobilePromo:()=>mobilePromo,moneyTransferBox:()=>_moneyTransferBox__WEBPACK_IMPORTED_MODULE_11__.moneyTransferBox,reportAd:()=>reportAd,showAudioClaimWarning:()=>showAudioClaimWarning,showPollBox:()=>showPollBox,showSettingsAddressBox:()=>showSettingsAddressBox,showWriteMessageBox:()=>showWriteMessageBox,sureDeleteAll:()=>sureDeleteAll});var _web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(270959),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(909436),_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(683234),_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(754866),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(972332),_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(102088),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(237625),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(246429),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(101272),_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(880789),_icons_desktop__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(936492),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(952661),_moneyTransferBox__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(205597);function showSettingsAddressBox(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_settings.php",{act:"address_box"},{stat:[window.jsc("web/settings.js"),"settings.css"],params:{bodyStyle:"padding: 0;",hideButtons:!0},onDone(e,{hash:t}){(0,_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_9__.initSettingsAddressBox)(e,t)}})}function showWriteMessageBox(e,t,s={}){cur.onFriendMessage&&cur.onFriendMessage(),window.stManager.add([window.jsc("web/page.js"),window.jsc("web/wide_dd.js")]);const n=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_im.php",{act:"a_write_box",to:t,...s.params},{stat:[window.jsc("web/writebox.js"),"writebox.css","wide_dd.css","page.css","post.css",window.jsc("web/emoji.js"),"notifier.css"],cache:1},e);return n&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e),window.WriteBox&&WriteBox.extractEmoji(),!n}function giftsBox(e,t,s){return cur.viewAsBox?cur.viewAsBox():!(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_gifts.php",{act:"box",tab:s||"received",mid:e},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)}function reportAd(e,t){{let s="",n=null;const a=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("/reports.php",{act:"report_ad_box",ad_data:t},{onDone:function(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.geByClass)("radiobtn","ad_report");window.radioBtns.ad_report={val:0,els:e};const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ge)("ad_csrf");s=t?t.value:s,n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ge)("ad_comment")},params:{width:370,onClean:()=>{delete window.radioBtns.ad_report}},stat:["reports.css"]});a.removeButtons(),a.addButton(_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("box_send"),(r=>{ajax.post("reports.php",{act:"a_report_ad",ad_id:e,reason:window.radioBtns.ad_report.val,comment:n?n.value:"",ad_data:t,hash:s},{onDone:()=>{a.hide(),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)(_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("reports_thanks_for_report"))},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__.lockButton)(r),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__.unlockButton)(r)})})),a.addButton(_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_cancel"),!1,"no")}}const mobilePromo=()=>(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_login.php",{act:"mobile",box:1});function showAudioClaimWarning(e,t,s){const{id:n,ownerId:a,title:r}=e,d=t.id,{reason:l,original:c}=t,u={width:470};let _,p;if(e.restrictionStatus)return _web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.showAudioRestriction(e);"geo"===l?(_=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claimed_geo"),p=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_warning_title")):"site_rules_violation"===l?(_=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_site_rules_violation_warning"),p=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_site_rules_violation_header")):"replace"===l?(_=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claimed_replacement_available"),p=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_warning_title")):"subscription"===l?(u.hideButtons=!0,u.bodyStyle="padding: 0; border-radius: 4px;",u.width=450,p=!1,_=`\n      <div class="audio_claim_popup">\n        <div class="audio_claim_popup__title">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_audio_only_with_subscription_title")}</div>\n        <div class="audio_claim_popup__text">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_audio_only_with_subscription_text")}</div>\n        <div class="audio_claim_popup__close" onclick="curBox().hide()">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_12__.getIcon24Cancel)().icon}</div>\n        ${_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButton.render({appearance:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonAppearance.PRIMARY,size:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonSize.M,round:!0,restAttrs:{onclick:"AudioPlayer.showSubscriptionPopup()"},children:_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_audio_only_with_subscription_btn")}).outerHTML}\n      </div>`):(_=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_warning"),p=_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_warning_title")),u.title=p,_=_.replace(/\{audio\}/g,`<b>${r}</b>`),_=_.replace(/\{objection_link\}/g,`<a href="/help?act=cc_objection&claim=${d}&content=audio${a}_${n}">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_objection")}</a>`),_=_.replace(/\{delete_link\}/g,`<a onclick="deleteAudioOnClaim(${a}, ${n}); return false;">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_delete")}</a>`);const m=[u,_];let y=null;if(s&&c){const e=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.drawAudio(c,"no_extra");m[1]=_.replace(/\{original\}/g,c[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_PERFORMER]+" - "+c[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_TITLE])+"<br/><br/>"+e,m.push(_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_replace_with_original"),(function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__.lockButton)(y.btns.ok[0]),s((()=>y.hide()))})),u.textControls=`<a onclick="deleteAudioOnClaim(${a}, ${n}); return false;">${_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("audio_claim_delete_capital")}</a>`}cur.claimWarning=y=_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox.apply(null,m)}function sureDeleteAll(title,text,where,objectId,toId,fromId,hash,event){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.checkEvent)(event))return;const box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)({title},text,_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_delete"),(function(btn){ajax.post("/delete_all.php",{act:where,object_id:objectId,to_id:toId,from_id:fromId,hash,loc:nav.objLoc[0]},{onDone:function(res){if(__debugMode)eval(res);else try{eval(res)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,res)}box.hide()},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__.lockButton)(btn),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_2__.unlockButton)(btn)})}),_web_lib_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_cancel"));return!1}function imageStatusPopup(e,t){Object.assign(t,{act:"image_status"});const s=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("special_event.php",t,{containerClass:"ImageStatusPopup__container",params:{hideButtons:!0,needShadow:!1},onFail:function(){return window.cur.imageStatusBox&&window.cur.imageStatusBox.hide(),!0},onDone:function(e,t){const{status_id:s}=t;s&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_8__.saveStatlogEvents)({name:"image_status",value:s,keys:["show_popup"]})}},e);s&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e),window.cur.imageStatusBox=s)}function showPollBox(e,{ref:t,className:s}={}){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_voting.php",{act:"get_layout",voting_id:e,for_box:!0,ref:t},{containerClass:s,params:{hideButtons:!0,width:510}})}},205597:(e,t,s)=>{"use strict";s.d(t,{moneyTransferBox:()=>_});var n=s(270959),a=s(593159),r=s(683234),d=s(754866),l=s(102088),c=s(246429),u=s(641608);function _(e,t,s,p,m,y,f){if(cur.viewAsBox)return cur.viewAsBox();if(m){if(!f){let a,r;return 2===m?(a=l.curLang("mail_money_transfer_cancel_confirm")||l.getLang("mail_money_transfer_cancel_confirm"),r=l.curLang("mail_money_transfer_cancel_btn")||l.getLang("mail_money_transfer_cancel_btn")):(a=l.curLang("mail_money_transfer_decline_confirm")||l.getLang("news_fb_money_transfer_decline_confirm"),r=l.curLang("mail_money_transfer_decline_btn")||l.getLang("news_fb_money_transfer_decline_btn")),void(cur.confirmBox=(0,n.showFastBox)(l.getLang("global_action_confirmation"),a,r,_.pbind(e,t,s,p,m,!1,1),l.getLang("global_cancel")))}const a=(0,d.hasClass)((0,d.domPN)(p),"wall_postlink_preview_btn")||(0,d.hasClass)(p,"money_transfer__decline_button"),u=(0,d.geByClass1)("flat_button",(0,d.domPN)(p)),y=()=>{a?((0,d.addClass)(p.firstChild,"round_spinner"),(0,d.removeClass)(p.firstChild,"button")):(0,r.lockButton)(p)},g=()=>{a?((0,d.addClass)(p.firstChild,"button"),(0,d.removeClass)(p.firstChild,"round_spinner")):(0,r.unlockButton)(p)};return 2!==f&&((0,r.disableButton)(u,!0),y(p),cur.confirmBox&&cur.confirmBox.hide()),void ajax.post("al_payments.php?act=a_cancel_money_transfer",{tx_id:e,hash:t,from:a?"snippet":""},{onDone:function(n,r,l){0!==n?(a?((0,d.re)(p),(0,d.hasClass)(u,"secondary")||(0,d.domReplaceEl)(u,l)):(0,d.re)((0,d.domPN)(p)),(0,c.showDoneBox)(r),window.TopNotifier.invalidate()):setTimeout((()=>_(e,t,s,p,m,!1,2)),2e3)},onFail:function(e){return(0,r.disableButton)(u,!1),g(p),setTimeout((0,n.showFastBox)(l.getLang("global_error"),e).hide,2e3),!0}})}return cur.acceptMoneyBtn=p,y?!u.MoneyTransfer.showMoneyTransferBox({request_id:e,request:y,hash:t},{stat:["payments.css",window.jsc("web/payments_legacy.js")]},(e=>((0,c.curBox)()&&(0,c.curBox)().hide(),setTimeout((0,n.showFastBox)(l.getLang("global_error"),e).hide,2e3),!0))):!(0,n.showBox)("al_payments.php",{act:"accept_money_transfer_box",tx_id:e,hash:t},{stat:["payments.css",window.jsc("web/payments_legacy.js")],onFail:e=>((0,c.curBox)()&&(0,c.curBox)().hide(),setTimeout((0,n.showFastBox)(l.getLang("global_error"),e).hide,2e3),!0),onDone(e,t){u.MoneyTransfer.initHandlers(),window.cur=(0,a.extend)(window.cur,{paymentsOptions:t,paymentsPopupWrite(e){e.document.innerHTML!=cur._popup_text&&(e.document.write(window.cur._popup_text),e.document.close(),e.blur(),e.focus(),window.cur._popup_callback&&window.cur._popup_callback())}}),e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){window.cur.moneyTranferCheckInt&&clearInterval(window.cur.moneyTranferCheckInt),window.removeEventListener("message",u.MoneyTransfer.frameMessage,!1)}}),u.MoneyTransfer.initAccept(t.chkData,t.frame)}},s)}},458840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AudioMessagePlayer:()=>se,articlePrepare:()=>S.articlePrepare,bookmark:()=>V,bookmarkArticle:()=>G,bookmarkEvent:()=>ee,bookmarkLink:()=>z,bookmarkNarrative:()=>J,bookmarkPodcast:()=>Y,bookmarkPost:()=>$,deleteAudioOnClaim:()=>ie,ensureShowPhoto:()=>L.ensureShowPhoto,getIconBookmarked:()=>X,initTopAudioPlayer:()=>oe,initTopNotifier:()=>R,isArticleLayerOpen:()=>O.isArticleLayerOpen,isPhotoeditor3Available:()=>B,mentionClick:()=>ne,openArticleEditor:()=>D.openArticleEditor,podcastStartFrom:()=>j,sendBookmarkLink:()=>q,sendImageStatusStat:()=>ae,setIconBookmarked:()=>Q,setNewIconBookmarked:()=>Z,shareAudioPlaylist:()=>te,showAlbum:()=>k.showAlbum,showAlbums:()=>k.showAlbums,showApp:()=>H,showManyPhoto:()=>F,showNftInfo:()=>W,showPhoto:()=>L.showPhoto,showPhotoTags:()=>x.showPhotoTags,showPodcast:()=>K,showVideoTags:()=>N,showWiki:()=>M.showWiki,videoCallback:()=>U});var n=s(905366),a=s(909436),r=s(898848),d=s(754866),l=s(593159),c=s(246429),u=s(972332),_=s(270959),p=s(575753),m=s(866467),y=s(6898),f=s(101272),g=s(194025),E=s(977202),A=s(784394),b=s(447931),P=s(702510),I=s(667309),T=s(880526),C=s(974010),O=s(613253),M=s(414623),S=s(416362),D=s(741791),k=s(862471),L=s(254551),x=s(100538);function R(){const e=[window.jsc("web/notifier.js"),"notifier.css"];return{preload:function(){window.stManager.add(e,(()=>window.TopNotifier.preload()))},show:function(t){if(!0!==(0,u.checkEvent)(t))return window.stManager.add(e,(()=>window.TopNotifier.show(t))),(0,u.cancelEvent)(t)},showTooltip:function(t){window.stManager.add(e,(()=>window.TopNotifier.showTooltip(t)))},invalidate:()=>{},setCount:()=>{},createNewEventsBox:()=>{},onBellClick:t=>{window.stManager.add(e,(()=>window.TopNotifier.onBellClick(t)))},onBellMouseDown:t=>{window.stManager.add(e,(()=>window.TopNotifier.onBellMouseDown(t)))},checkClick:(t,s)=>{window.stManager.add(e,(()=>window.TopNotifier.checkClick(t,s)))}}}function B(){return!p.browser.msie||parseInt(p.browser.version)>10}function F(e,t,s,n){Page.showManyPhoto(e,t,s,n)}function N(e,t,s){return cur.viewAsBox?cur.viewAsBox():(0,u.checkEvent)(s)?void 0:(window.stManager.add([window.jsc("web/video.js"),"video.css",window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showVideoTags(e,t)})),!1)}function U(e){const t=e.shift();if(window.Videoview&&Videoview.playerCallback[t])return Videoview.playerCallback[t].apply(Videoview,e);throw Error("Unregistered player callback: "+t)}function W(e,t){return(0,c.curBox)()||(0,_.showBox)("al_nft.php",{act:"token_details_modal",tokenId:t},{params:{hideButtons:!0,noCloseButton:!0,titleTransparent:!0,bodyStyle:"padding: 16px 24px"}}),(0,u.cancelEvent)(e)}function H(e,t,s,n,a,r){r||(r={});let d=!1,c=(0,l.extend)({w:"app"+t},r);if(s=(0,l.intval)(s),n&&((0,l.isObject)(n)?c=(0,l.extend)(c,n):c.ref=n),r.layer&&(d=!0),(cur.apps&&cur.apps[t]||!s)&&!d){delete c.w;const s="app"+t+(a?"_"+a:""),n=nav.objLoc&&!nav.objLoc[1]&&nav.objLoc[0]===s;return nav.go("/"+s+nav.toStr(c),e,{nocur:n})}a&&(c.mid=a);const u={stat:[window.jsc("web/wkview.js"),"wkview.css",window.jsc("web/apps.js"),"apps.css"],...r?.wikiOptions};r.queue&&(u.queue=1);const _=cur.module;if(u.onHide=()=>{cur.module=_,r.onHide&&r.onHide()},r.urlHash&&(c.url_hash=r.urlHash),c["#"]){const e=c["#"];delete c["#"],u.onLoaded=()=>{nav.setLoc((0,l.extend)(nav.objLoc,{"#":e}))}}return(0,M.showWiki)(c,!1,e,u)}function K(e,t,s,n,a){if(!vk.widget)return(0,d.show)(boxLoader),(0,d.show)(boxLayerWrap),(0,c.boxRefreshCoords)(boxLoader),window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.show(e,t,null,n,a)})),s&&(0,u.cancelEvent)(s)}function j(e,t,s,n){return window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.goToTime(e,t,s,n)})),s&&(0,u.cancelEvent)(s)}function V(e,t,s,n,a=!1,u="",p="",y="",f=1,g){ajax.post("al_bookmarks.php",{act:"bookmark",owner_id:e,object_id:t,type:s,state:a?1:0,hash:n,item_access_hash:u,ref:p||cur.module,track_code:y,show_snack:f,source:g},{onDone:(n,a,u,p)=>{if(n&&!vk.widget){const y=function(n){const c=(0,d.geByClass1)("bookmarks_tag_set",n);if(c&&!(0,r.isEmpty)(a)){const n=[];(0,l.each)(a,((e,t)=>{n.push(t)})),n.sort(((e,t)=>e.order-t.order));let r='<div class="bookmarks_tags_list">';for(let e=0;e<n.length;e++){const t=n[e];r+=`<div class="bookmarks_tags_list_item" data-id="${t.id}">${t.name}</div>`}r+="</div>",r=(0,d.se)(r),r.addEventListener("click",(s=>{const n=(0,d.domClosest)("bookmarks_tags_list_item",s.target);if(n){const s=(0,d.domData)(n,"id"),a=(0,d.toggleClass)(n,"bookmarks_tags_list_item--selected");ajax.post("al_bookmarks.php",{act:"set_tag",item_type:u,item_oid:e,item_id:t,hash:p,tag_id:s,is_tagged:(0,l.intval)(!a),is_from_snackbar:!0},{onFail:e=>((0,_.showFastBox)(m.getLang("global_error"),e),!0)})}})),cur.setBookmarksTagTooltip&&cur.setBookmarksTagTooltip.destroy(),window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{}));let y=new ElementTooltip(c,{content:r,appendToParent:!0,cls:"bookmarks_tag_set_tt",autoShow:!0,offset:"video"===s?[-95,-10]:[0,-36],onFirstTimeShow:e=>{window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{cur.setBookmarksTagTooltipScrolls||(cur.setBookmarksTagTooltipScrolls=[]),cur.setBookmarksTagTooltipScrolls.push(new uiScroll((0,d.domFC)(e),{theme:"dark"}))}))},onShow:function(){Notifier.freezeEvents(),curNotifier.tooltipShown=!0},onHide:function(){curNotifier.tooltipShown=!1,curNotifier.unfreezeAfterTooltipHide&&Notifier.unfreezeEvents()}});cur.destroy.push((()=>{cur.setBookmarksTagTooltipScrolls&&(cur.setBookmarksTagTooltipScrolls.forEach((function(e){e.destroy()})),delete cur.setBookmarksTagTooltipScrolls),y.destroy()}))}};(0,c.showDoneBox)(n,{tooltipHandler:y,link:"/bookmarks"})}}})}async function $(e,t,n,a,r,c,u="",_="",p=""){if(p){const{bookmarkClipPost:t}=await s.e(88651).then(s.bind(s,697698));return t(e,p,X(e))}if((0,l.isObject)(window.cur)&&(0,l.isFunction)(window.cur.viewAsBox))return window.cur.viewAsBox();const m=X(e);e.innerHTML=m?(0,d.domData)(e,"add"):(0,d.domData)(e,"remove"),(0,d.domData)(e,"state",m?0:1),V(t,n,a,r,m,c,u,_)}function G(e,t,s,n,a,r,d,l=!1){return t&&(d=X(t),l?Z(t,d,24):Q(t,d)),V(s,n,a,r,d),document.querySelectorAll(`._article_${s}_${n}`).forEach((e=>{const t=e.querySelector("._bookmark_btn");l?Z(t,d,24):Q(t,d)})),(0,u.cancelEvent)(e)}function q(e,t,s,n,a,r){ajax.post("al_bookmarks.php",{act:"bookmark_link",state:e?1:0,hash:t,url:s,img:n,title:a,ref:cur.module,track_code:r},{onDone:e=>{e&&!vk.widget&&(0,c.showDoneBox)(e)}})}function z(e,t,s){const n=X(t);return Q(t,n),q(n,s,(0,d.domData)(t,"link-url"),(0,d.domData)(t,"link-img"),(0,d.domData)(t,"link-title"),(0,d.domData)(t,"track-code")),(0,u.cancelEvent)(e)}function Y(e,t,s,n,a){return window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.toggleFave(e,t,s,a)})),n&&(0,u.cancelEvent)(n)}function X(e){return parseInt(e.dataset.state)}function Q(e,t){e.dataset.state=String(t?0:1),e.innerHTML=t?(0,E.getIcon24FavoriteOutline)().icon:(0,A.getIcon24Favorite)().icon}function Z(e,t,s=16){e.dataset.state=String(t?0:1);const n={16:(0,b.getIcon16Bookmark)().icon,24:(0,P.getIcon24Bookmark)().icon}[s],a={16:(0,I.getIcon16BookmarkOutline)().icon,24:(0,T.getIcon24BookmarkOutline)().icon}[s];e.innerHTML=t?a:n}function J(e,t,s,n,a,r){const d=X(t);return Q(t,d),V(s,n,a,r,d),d||(0,g.sendNarrativeAnalytic)(g.NarrativeAnalyticEventType.addToBookmarks,{ownerId:s,id:n},window.cur.module),(0,u.cancelEvent)(e)}function ee(e,t,s,n){const a=X(t);return Q(t,a),ajax.post("fave.php",{act:a?"a_delete_group":"a_add_group",gid:s,hash:n},{onDone:(e,t)=>{a||vk.widget||(0,c.showDoneBox)(t)}}),(0,u.cancelEvent)(e)}function te(e,t,s,n){return(0,_.showBox)("like.php",{act:"publish_box",object:"audio_playlist"+t+"_"+s,list:n},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")],params:{shareButtonElement:e?.target??null}}),(0,u.cancelEvent)(e)}function ie(e,t){const s=e+"_"+t,n=(0,d.geByClass1)("_audio_row_"+s);a.AudioUtils.deleteAudio(n,a.AudioUtils.getAudioFromEl(n,!0)),cur.claimWarning&&cur.claimWarning.hide()}function oe(){window.TopAudioPlayer.init()}const se={loaded:!1,events:{on(e,t){(0,C.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.events.on(e,t)}))}},togglePlay:function(e){(0,C.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.togglePlay(e)}))},toggleTranscript:function(e){(0,C.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.toggleTranscript(e)}))},detachPlayer:function(e){(0,C.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.detachPlayer(e)}))}};function ne(e,t,s={}){e&&e.tt&&e.tt.hide&&e.tt.hide({fasthide:1});let a=e,r=!1;if((0,O.isArticleLayerOpen)()&&ArticleLayer.isStandalone()&&(r=!0),a.tagName&&"a"===a.tagName.toLowerCase()&&!a.getAttribute("target")&&!nav.baseBlank){const e=a.getAttribute("hrefparams");let t;e&&(s.params=(0,l.extend)(s.params||{},(0,y.fromQueryString)(e))),a=a.href||"",a=(0,n.stripVKSiteURLOrigin)(a),a.match(/#$/)||!(t=a.match(/^\/(.*?)(\?|#|$)/))?r=!0:(t=t[1],(t.indexOf(".php")>0||t.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images|utils|\.js|js\/|\.css|css\/)/))&&(r=!0))}if(r){if(!!!(s&&s.params&&s.params._post&&s.params._post_click_type))return!0;e.setAttribute("data-change-location-with-post-away",1),a=e}return nav.go(a,t,s)}function ae(e){e&&(0,f.saveStatlogEvents)({name:"image_status",value:e,keys:["popup_action"]})}},568775:(e,t,s)=>{"use strict";s.d(t,{audioShowActionTooltip:()=>m,bookmarkTooltip:()=>f,mentionOver:()=>y,mobileOnlineTip:()=>_,pageVerifiedTip:()=>p});var n=s(342879),a=s(909436),r=s(593159),d=s(754866),l=s(540462),c=s(120101),u=s(927848);function _(e,t){const s=t.asrtl?0:t.right?289:35,a=t.asrtl?" mobile_tt_asrtl":t.right?" mobile_tt_right":"";return(0,n.showTooltip)(e,{url:"al_login.php",params:{act:"mobile_tt",mid:t.mid,was:t.was},slide:15,ajxdt:200,showdt:200,hidedt:200,forcetoup:t.forcetoup,toup:!1,dir:"auto",asrtl:t.asrtl,appendParentCls:t.appendParentCls,shift:[s,8,7],className:"mobile_tt"+a})}function p(e,t){return(0,n.showTooltip)(e,{url:"/al_page.php",params:{act:"verified_tt",type:t.type,oid:t.oid,force_new_tab:t.forceNewTab?1:0,with_action:t.withAction},slide:15,ajxdt:200,showdt:200,hidedt:200,dir:"auto",shift:t.shift&&t.shift.length?t.shift:[95,5,7],className:"verified_tt",forcetodown:t.forceToDown,appendEl:t.appendEl})}function m(e,t,s){if(cur._addRestoreInProgress)return;const l=(0,d.gpeByClass)("_audio_row",e),c=a.AudioUtils.getAudioFromEl(l,!0);if(!c)return;const _=(0,d.domData)(e,"action"),p=a.AudioUtils.getRowActionName(_,c,l);if("snippet"===_){const t=u.AudioLongtapTooltip.ensure();if(t.isOpen)return;if(t.canShow())return void t.show(e)}const m={text:()=>p,black:1,shift:t||[7,4,0],needLeft:!0,forcetodown:s,noZIndex:!0};(0,r.each)(["_im_mess_stack","top_notify_wrap","_ape_audio_item","wk_history_audio_content"],(function(t,s){if((0,d.gpeByClass)(s,e))return m.appendParentCls=s,!1})),(0,d.gpeByClass)("_im_mess_stack",e)&&(m.shift=[7,10,0],m.noZIndex=!0);const y=e.closest(".CatalogBlock");y&&(m.appendEl=y),(0,n.showTooltip)(e,m)}function y(e,t={}){if(!(0,l.partConfigEnabled)("mail_history_mention_popover")||"im"!==window.cur.module||window.TopNotifier.shown()||window.layers.visible)(0,n.showTooltip)(e,{url:"al_wall.php",params:{act:"mention_tt",mention:e.getAttribute("mention_id"),from:"wall"},shift:t.shift||[52,7,7],hidedt:t.hidedt||500,showdt:500,needLeft:t.needLeft,slide:15,checkLeft:!0,reverseOffset:t.reverseOffset||112,dir:"auto",appendEl:t.appendEl||(0,d.domClosest)("im-page-history-w",e)||(0,d.domClosest)("rb_box_wrap",e)||(0,d.domClosest)("wk_cont",e)||(0,c.isVKCOMProfileRedesignedEnabled)()&&(0,d.domClosest)("box_layout",e)||(0,d.domClosest)("scroll_fix_wrap",e)});else{const t=e.getAttribute("mention_id").match(/^(id|club)(\d+)$/);if(!t)return;let s;switch(t[1]){case"id":s=parseInt(t[2],10);break;case"club":s=-parseInt(t[2],10)}if(!s)return;window.reforgedME&&window.reforgedME.profileInfo&&window.reforgedME.profileInfo.mountProfileInfo({peerId:s,targetElement:e})}}function f(e){let t="";(0,d.gpeByClass)("_im_mess_stack",e)?t="_im_mess_stack":(0,d.gpeByClass)("wall_text",e)&&(t="scroll_fix_wrap"),(0,n.showTooltip)(e,{className:"bookmarks_tt ",shift:[32,8],text:()=>"1"===(0,d.domData)(e,"state")?(0,d.domData)(e,"remove"):(0,d.domData)(e,"add"),black:1,appendParentCls:t})}},265167:(e,t,s)=>{"use strict";s.d(t,{handleGlobalEsc:()=>O,hideCookiesPolicy:()=>M,onCtrlEnter:()=>C,onDocumentClick:()=>I,onEnter:()=>T});var n=s(31580),a=s(905366),r=s(636576),d=s(101148),l=s(540462),c=s(754866),u=s(972332),_=s(593159),p=s(983567),m=s(604723),y=s(575753),f=s(469004),g=s(633009),E=s(6898),A=s(701563),b=s(945028),P=s(298077);function I(e){if((0,l.partConfigEnabled)("ignore_navgo_if_prevented")&&e.defaultPrevented)return;if((0,u.checkEvent)(e))return!0;if((0,b.processAliExpressMiniAppLinkClickEvent)(e))return!1;if(f.ls.set("last_reloaded",[]),cur.onMouseClick&&cur.onMouseClick(e))return;if(!(e=window.event||e.originalEvent||e))return!0;e.target?.dataset?.donutLogEvent&&(0,A.logDonutEvent)(e.target.dataset.donutLogEvent);let t,s=8,p=e.target||e.srcElement;for(;p&&p!==document.body&&"A"!==p.tagName&&s--;)p=p.parentNode;if(!p||"A"!==p?.tagName)return!0;const m=p.onclick||p.onmousedown;if((0,l.partConfigEnabled)("react_global_nav_handling")?Boolean(p.getAttribute("onclick")||p.getAttribute("onmousedown")):!(0,n.isAllowLinkOnclickWebForLink)(p)&&m)return!0;let y=p.href;const g=p.getAttribute("target")||nav.baseBlank;if(y&&g){if((0,c.domClosest)("bookmarks_row_type_link",p)){const e=(nav.fromStr(y)||{}).to;(0,r.statlogsValueEvent)("bookmarks_product_analytics",{link_url:e,time:(0,d.getServerTime)()})}return!0}y=(0,a.stripVKSiteURLOrigin)(y);const I={};if((t=y.match(/^\/(.+?)#[\!\/](.+?)$/))&&!t[1].match(/^app(\d+)/)&&!(0,l.partConfigEnabled)("mini_apps_navgo_hash_fix")){const e=y;I.permanent=t[1],y="/"+t[2],(0,l.partConfigEnabled)("mini_apps_navgo_hash_stats")&&(0,P.logError)("Legacy hash navigation",{breadcrumb:{data:{oldHref:e,newHref:`${y}?_permanent=${I.permanent}`}}})}const T=!!(p.getAttribute&&p.getAttribute("data-post-click-type")&&p.getAttribute("data-post-id"));if(y.match(/#$/)&&!T)return!0;const C=(0,c.domData)(p,"post-id");let O;C&&(I.postId=C);let M=y,S=null;const D=y.match(/^\/(.*?)(\?|#|$)/);if(D)S=D[1];else{if(p.hostname)O=p.hostname,S=p.pathname+p.search;else{const e=/^([^:\/]+)?(?::(\d+))?(\/?[^#]*)(#?.*)$/i.exec(y);if(!e)return!0;O=e[1],S=e[3]||"/"}if(!O||!T)return!0;p.setAttribute("data-change-location-with-post-away",1),M=p}if("add_community_app"===S)return(0,c.attr)(p,"target","_blank"),!0;if(S.indexOf(".php")>0||S.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images\/|utils\/|\.js|js\/|\.css|css\/|source\b)/)){if(!T)return!0;p.setAttribute("data-change-location-with-post-away",1),M=p}const k=p.getAttribute("hrefparams");k&&(I.params=(0,_.extend)(I.params||{},(0,E.fromQueryString)(k)));try{return nav.go(M,e,(0,_.extend)({},I,{throwErrorOnDisabledPath:!0})),(0,u.cancelEvent)(e)}catch(e){return!0}}function T(e,t){(t=t||window.event).keyCode===u.KEY.ENTER&&(e(),(0,u.cancelEvent)(t))}function C(e,t){(10===(e=e||window.event).keyCode||13===e.keyCode&&(e.ctrlKey||e.metaKey&&y.browser.mac))&&(t(),(0,u.cancelEvent)(e))}function O(e){if(window._wf=1,e.keyCode===u.KEY.ESC&&boxQueue.count()&&!cur._noEscHide)return boxQueue.hideLast(),-1;if(e.keyCode===u.KEY.ESC&&window.articleCloseImageFullSize&&window.articleCloseImageFullSize())return(0,u.cancelEvent)(e);if(e.keyCode===u.KEY.ESC&&window.isArticleLayerOpen&&window.isArticleLayerOpen())return window.ArticleLayer.close(!0),(0,u.cancelEvent)(e);if(e.keyCode===u.KEY.ESC&&window.AuthorPage&&!cur.articleEditorLayer)return window.AuthorPage.close(),(0,u.cancelEvent)(e);if(e.keyCode===u.KEY.ESC&&(0,l.partConfigEnabled)("vkm_reforged_in_vkcom")&&"im"===window.cur?.module)return void((0,g.getCancelStack)().length&&((0,g.cancelStackPop)(),(0,u.cancelEvent)(e)));if(e.keyCode===u.KEY.ESC)return(0,g.cancelStackPop)(),(0,u.cancelEvent)(e);const t=[176,177,178,179];let s=!1;window.audioPlayer&&(t.push(u.KEY.LEFT),t.push(u.KEY.RIGHT)),(0,_.each)(t,(function(t,n){if(e.keyCode===n)return s=!0,!1})),s&&(0,p.getAudioPlayer)().onMediaKeyPressedEvent(e),m.Chat.inited&&191===e.keyCode&&(e.ctrlKey||e.metaKey&&y.browser.mac)&&m.Chat.showFriends()}function M(){(0,c.re)("cookies_policy_wrap"),ajax.post("/settings",{act:"a_hide_cookies_policy"})}},749284:(e,t,s)=>{"use strict";s.d(t,{isInputActive:()=>_,placeholderInit:()=>y,placeholderSetup:()=>m});var n=s(754866),a=s(972332),r=s(939646),d=s(593159),l=s(575753),c=s(540462),u=s(342018);function _(){return document.activeElement&&((0,n.attr)(document.activeElement,"contenteditable")||"INPUT"===document.activeElement.tagName||"textarea"===document.activeElement.tagName)}function p(e,t={},s,a){const d=e.phshown,c=e.phcont,{back:u,editable:_,hideBackAfter:p,timeout:m,phColor:y="#8C8E91",activeColor:f="#C0C8D0"}=t,g=m||0===m?m:100,E=t.period||200;let A;if(A=_?(void 0!==e.textContent?e.textContent:e.innerText)||(0,n.geByTag)("img",e).length:e.value,d&&(u&&A||!u&&(s&&!s.type||A))?((0,n.hide)(c),e.phshown=!1):d||A||!u&&!a||((0,n.show)(c),e.phshown=!0,l.browser.opera&&a&&(e.setAttribute("placeholder",""),e.removeAttribute("placeholder",""))),u&&!A){if(s&&!s.type){const t=p?n.hide.pbind(c.firstChild.firstChild):null;clearTimeout(e.phanim),e.phanim=setTimeout((function(){(0,r.animate)(c.firstChild.firstChild,{color:f},E,t)}),g)}a&&(clearTimeout(e.phanim),p&&(0,n.show)(c.firstChild.firstChild),e.phanim=setTimeout((function(){(0,r.animate)(c.firstChild.firstChild,{color:y},E)}),g))}}function m(e,t){const s=(0,n.ge)(e);if(!s)return!1;if(!(s.getAttribute?s.getAttribute("contenteditable"):s.contenteditable)&&(0,c.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,d.clone)(t):{};if(s.phevents&&!r.reload)return;const u=s.getAttribute?s.getAttribute("placeholder"):s.placeholder;if(!u)return;s.removeAttribute("placeholder");let _={},m=!1;const y=["Top","Bottom","Left","Right"];if(r.pad)_=r.pad;else{if(r.fast){for(let e=0;e<4;e++)_["padding"+y[e]]=3,_["margin"+y[e]]=0,_["border"+y[e]+"Width"]=1;(0,d.extend)(_,r.styles||{})}else{const e=[];for(let t=0;t<4;t++)e.push("margin"+y[t]),e.push("padding"+y[t]),e.push("border"+y[t]+"Width");_=(0,n.getStyle)(s,e)}for(let e=0;e<4;e++){const t="margin"+y[e],s="border"+y[e]+"Width";_[t]=(0,d.intval)(_[t])+(0,d.intval)(_[s])+"px",delete _[s]}}if(r.reload){const e=s.previousSibling;e&&(0,n.hasClass)(e,"input_back_wrap")&&(0,n.re)(e)}const f=r.big?" big":"",g=(0,n.getSize)(s)[0]-20,E=s.phcont=s.parentNode.insertBefore((0,n.ce)("div",{className:"input_back_wrap no_select",innerHTML:`<div class="input_back"><div class="input_back_content${f}" style="width: ${g}px;">${u}</div></div>`}),s),A=(0,n.domFC)(E);(0,n.setStyle)(A,_);const b=p.pbind(s,r),P=l.browser.mobile?b:(e,t)=>setTimeout(b.pbind(e,t),0);l.browser.msie&&l.browser.version<8&&(0,n.setStyle)(A,{marginTop:1}),s.phonfocus=function(e){m||(s.focused=!0,cur.__focused=s,!0===e&&((0,n.setStyle)(s,{backgroundColor:"#FFF"}),(0,n.hide)(A)),P(!0,!1))},s.phonblur=function(){m||(cur.__focused=s.focused=!1,(0,n.show)(A),P(!1,!0))},s.phshown=!0,s.phanim=null,(s.value||r.editable&&((void 0!==s.textContent?s.textContent:s.innerText)||(0,n.geByTag)("img",s).length))&&(s.phshown=!1,(0,n.hide)(E)),l.browser.opera_mobile||((0,a.addEvent)(E,"focus click",(function(e){m||(r.editableFocus?(setTimeout(r.editableFocus.pbind(s),0),s.phonfocus()):(s.blur(),s.focus()))})),(0,a.addEvent)(s,"focus"+(r.editable?" click":""),s.phonfocus),(0,a.addEvent)(s,"keydown paste cut input",P)),(0,a.addEvent)(s,"blur",s.phonblur),s.check=P,s.getValue=()=>r.editable?s.innerHTML:s.value,s.setPlaceholder=e=>(0,n.geByClass1)("input_back_content",E).textContent=e,s.setDisabled=e=>m=e,s.setValue=function(e){r.editable?s.innerHTML=e:s.value=e,p(s,r)},s.phevents=!0,s.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],cur.destroy.push(function(e){for(let t=0,s=e.length;t<s;t++)(0,n.removeData)(e[t])}.pbind(cur.__phinputs))),cur.__phinputs.push(s))}function y(e,t){const s=(0,n.ge)(e);if(!s)return!1;if(!(s.getAttribute?s.getAttribute("contenteditable"):s.contenteditable)&&(0,c.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,d.clone)(t):{},_=void 0===(0,n.ce)("input").placeholder||s&&s.getAttribute&&s.getAttribute("contenteditable");if(s.phevents&&!r.reload)return;const p=s.getAttribute?s.getAttribute("placeholder"):s.placeholder;if(!p)return;if(s.getValue=function(){return r.editable?s.innerHTML:s.value},s.setValue=function(e){r.editable?s.innerHTML=e:s.value=e,_&&m(s,r)},s.phonfocus=function(){},s.phonblur=function(){},!_)return;function m(e,t={}){const s=e.phshown,a=e.phcont;let r;t.editable?(r=void 0!==e.textContent?e.textContent:e.innerText,r&&l.browser.opera&&r.match(/^[ ]+$/)&&(r=""),r||(r=(0,n.geByTag)("img",e).length>0),r||(r=(0,n.geByTag)("br",e).length>1),r||(r=(0,n.geByTag)("p",e).length>1)):r=e.value,s&&r?((0,n.hide)(a),e.phshown=!1):s||r||((0,n.show)(a),e.phshown=!0)}if(s.removeAttribute("placeholder"),r.reload){const e=(0,n.domNS)(s);e&&(0,n.hasClass)(e,"placeholder")&&(0,n.re)(e)}const y=s.phcont=(0,n.domInsertAfter)((0,n.ce)("div",{className:"placeholder",innerHTML:'<div class="ph_input"><label class="ph_content" for="'+s.id+'">'+p+"</label></div>"}),s),f=m.pbind(s,r),g=l.browser.mobile?f:(e,t)=>setTimeout(f.pbind(e,t),0);s.phonfocus=function(){s.focused=!0,cur.__focused=s,g(!0,!1)},s.phonblur=function(){cur.__focused=s.focused=!1,g(!1,!0)},s.phshown=!0,(s.value||r.editable&&((void 0!==s.textContent?s.textContent:s.innerText)||(0,n.geByTag)("img",s).length))&&(s.phshown=!1,(0,n.hide)(y)),l.browser.opera_mobile||((0,a.addEvent)(y,"focus click contextmenu",(function(e){r.editableFocus?(setTimeout(r.editableFocus.pbind(s),0),"contextmenu"===e.type&&l.browser.msie&&r.editableFocus(s),s.phonfocus()):(s.blur(),s.focus())})),(0,a.addEvent)(s,"focus"+(r.editable?" click":""),s.phonfocus),(0,a.addEvent)(s,"keydown paste cut input",g)),(0,a.addEvent)(s,"blur",s.phonblur),s.check=g,s.phevents=!0,s.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],(0,u.pushNavDestroy)((()=>{if(cur.__phinputs)for(let e=0,t=cur.__phinputs.length;e<t;++e)(0,n.removeData)(cur.__phinputs[e])}))),cur.__phinputs.push(s))}},226220:(e,t,s)=>{"use strict";s.d(t,{TopMenu:()=>I,autosizeSetup:()=>P,checkPageBlocks:()=>E.checkPageBlocks,getProgressBarEl:()=>C,getProgressHtml:()=>T,leftBlockOut:()=>b,leftBlockOver:()=>A});var n=s(593159),a=s(754866),r=s(939646),d=s(972332),l=s(575753),c=s(633009),u=s(314309),_=s(187403),p=s(590151),m=s(540462),y=s(957994),f=s(64323),g=s(965494),E=s(420839);function A(e){let t=1;e.id||(e=(0,a.ge)("left_hide"+e),t=0),!t&&e.timer||(e.showing?(0,a.removeAttr)(e,"showing"):((0,r.animate)(e,{opacity:t?1:.5},200),t&&(e.showing=1))),e.timer&&(clearTimeout(e.timer),(0,a.removeAttr)(e,"timer"))}function b(e){let t=.5;e.id||(e=(0,a.ge)("left_hide"+e),t=0),e.timer=setTimeout((function(){(0,r.animate)(e,{opacity:t},200),(0,a.removeAttr)(e,"timer")}),1)}function P(e,t={}){if(!(e=(0,a.ge)(e)))return;if(e.autosize)return void e.autosize.update();t.minHeight=(0,n.intval)(t.minHeight)||(0,n.intval)((0,a.getStyle)(e,"height")),t.maxHeight=(0,n.intval)(t.maxHeight);let s=(0,a.getSize)(e)[0]||(0,n.intval)((0,a.getStyle)(e,"width")),r=(0,a.getStyle)(e,"fontSize"),c=(0,a.getStyle)(e,"lineHeight");s<1&&(s=(0,n.intval)((0,a.getStyle)(e,"width",!1))),r.indexOf("em")>0&&(r=(0,n.floatval)(r)*parseInt(window.getComputedStyle(document.body).fontSize)),r=(0,n.intval)(r);const u={width:s,height:10,fontFamily:(0,a.getStyle)(e,"fontFamily"),fontSize:r+"px",lineHeight:c,boxSizing:(0,a.getStyle)(e,"boxSizing")};(0,n.each)(["Top","Bottom","Left","Right"],(function(){u["padding"+this]=(0,a.getStyle)(e,"padding"+this)})),e.autosize={options:t,helper:(0,a.ce)("textarea",{className:"ashelper"},u),handleEvent:function(t,s){let n=s.charCode?String.fromCharCode(s.charCode):s.charCode;if(void 0===n&&(n=String.fromCharCode(s.keyCode),10===s.keyCode||13===s.keyCode?n="\n":!l.browser.msie&&s.keyCode<=40&&(n="")),!n)return t;if(!l.browser.msie)return t.substr(0,e.selectionStart)+n+t.substr(e.selectionEnd);const a=document.selection.createRange();return a.text&&(t=t.replace(a.text,"")),t+n},update:function(t){let s=e.value;!t||"blur"===t.type||"keyup"===t.type||l.browser.msie&&"keypress"!==t.type||t.ctrlKey||t.altKey||t.metaKey||(s=e.autosize.handleEvent(s,t)),s||(s=" "),e.autosize.helper.value!==s&&(e.autosize.helper.value=s);const r=e.autosize.options,d=(0,a.getSize)(e,!0)[1];let u=e.autosize.helper.scrollHeight;const _=u%c;r.exact&&_>2&&(u-=_-2),u<r.minHeight&&(u=r.minHeight);const p={overflow:"hidden"},m=(0,a.getStyle)(e,"overflow").indexOf("auto")>-1?"auto":"hidden";r.maxHeight&&u>r.maxHeight&&(u=r.maxHeight,(0,n.extend)(p,{overflow:"auto",overflowX:"hidden"})),r.addHeight&&(u+=r.addHeight),d===u&&m===p.overflow||(p.height=u,(0,a.setStyle)(e,p),(0,n.isFunction)(r.onResize)&&r.onResize(u))}},t.exact&&("normal"===c&&(c="120%"),c.indexOf("%")>0&&(c=r*(0,n.intval)(c)/100)),utilsNode.appendChild(e.autosize.helper),l.browser.opera_mobile?((0,a.setStyle)(e,{overflow:"hidden"}),e.autosize.update(),(0,d.addEvent)(e,"blur",e.autosize.update)):((0,d.addEvent)(e,"keydown keyup keypress change",e.autosize.update),setTimeout((()=>{(0,a.setStyle)(e,{overflow:"hidden",resize:"none"});const t=(0,a.val)(e);(0,a.val)(e," ",!0),(0,a.val)(e,t,!0),e.autosize.update()}),0))}const I={init:function(){if(this.inited)return!1;this.ecoPlateAnalytics=new g.EcoPlateAnalytics;const e=(0,a.ge)("top_profile_link"),t=(0,a.ge)("top_profile_menu");if(!e||!t)return!1;(0,d.addEvent)(e,"mousedown",I.clicked),this.inited=!0,(0,_.initColorSchemeDropdowns)()},clicked:function(e){return(0,d.checkEvent)(e)||"mousedown"===e.type&&(0,d.checkKeyboardEvent)(e)||I.toggle(),!1},toggle:function(e){if((0,m.partConfigEnabled)("logout_save_user_dialog")){if(document.querySelector(".SaveUserForQuickLoginBox"))return}const t=(0,a.ge)("top_profile_link"),s=(0,a.ge)("top_profile_menu"),n=(0,a.hasClass)(s,"shown");if(void 0!==e&&n===e)return;void 0===e&&(e=!n);const r=(0,a.$)("[data-warning]")?.getAttribute("data-warning"),d=(0,a.$)("[data-security-svg]");(0,a.hasClass)(s,"top_profile_menu_new")&&(e?(u.vkConnectNavigationCollector.logAccountActionsOpen(r),(0,p.logSwitcherAccounts)(),(0,m.partConfigEnabled)("vkprotect_security_recommendation")&&null!==d&&(d.remove(),(0,y.api)("account.setSecurityIndicatorShown",{}))):u.vkConnectNavigationCollector.logAccountActionsClose(r)),this.ecoPlateAnalytics&&this.ecoPlateAnalytics.logTopNavToggle(e),(0,a.toggleClass)(t,"active",e),(0,a.toggleClass)(s,"shown",e),e?((0,c.cancelStackPush)("top_menu",I.toggle.bind(this,!1),!0),cur.introExitTooltipHide&&(cur.introExitTooltipHide(),delete cur.introExitTooltipHide)):(0,c.cancelStackFilter)("top_menu",!0)},show:function(){I.hidetimer&&(clearTimeout(I.hidetimer),I.hidetimer=0),I.toggle(!0)},hide:function(){I.hidetimer||(I.hidetimer=setTimeout((function(){I.toggle(!1),I.hidetimer=0}),200))},select:function(e,t){return!!(0,d.checkEvent)(t)||((0,f.logTopNavElements)(e.href),I.toggle(!1),nav.go(e,t,{noback:!0}))}};function T(e,t){return(0,a.rs)(vk.pr_tpl,{id:e||"",cls:t||""})}function C(e){return(0,a.geByClass1)("ui_progress_bar",e)}},604723:(e,t,s)=>{"use strict";s.d(t,{Chat:()=>m,__qlClear:()=>P,cssAnim:()=>y,hideNewsAnnounce:()=>f,initLegacyBrowserDetectionInAttribute:()=>b,initPostsLegacyVars:()=>D,leftAdBlockClose:()=>g,leftBlockFriendTooltip:()=>A,leftBlockToggleFriend:()=>E,nodeUpdated:()=>S,onLoginCaptcha:()=>O,onLoginDone:()=>T,onLoginFailed:()=>C,onLoginReCaptcha:()=>M,storePasswordCredential:()=>I});var n=s(342879),a=s(683234),r=s(754866),d=s(939646),l=s(972332),c=s(593159),u=s(270959),_=s(575753),p=s(102088);const m={maxHeight:300,tabs:{},counters:{},showFriends:function(){curFastChat.clistBox.visible?curFastChat.clistBox.options.fixed?window.FastChat.clistHide():curFastChat.clistBox.show():(window.FastChat.clistShow(),m.cont.tt&&m.cont.tt.destroy&&m.cont.tt.destroy())},showTT:function(){if(!document.querySelector(".WideScreenAppPage")&&!(0,r.hasClass)(m.wrap,"chat_active")&&!(0,r.hasClass)(m.wrap,"chat_expand")){const e=_.browser.mac?"Cmd":"Ctrl";(0,n.showTooltip)(m.cont,{text:`${p.getLang("head_fr_online_tip")} (${e}+?)`,shift:[-2,4,0],showdt:0,black:1})}},init:function(){m.wrap=(0,r.ce)("div",{id:"chat_onl_wrap",className:"chat_onl_wrap",innerHTML:'\n<div class="chat_tt_wrap"></div>\n<div class="chat_onl_inner">\n  <div class="chat_cont_scrolling"><div class="chat_onl_height"></div></div>\n  <div class="chat_cont_sh_top"></div>\n  <div class="chat_cont_sh_bottom"></div>\n  <a class="chat_tab_wrap" id="chat_tab_wrap" onclick="Chat.showFriends()" onmouseover="Chat.showTT();">\n    <div class="chat_onl_cont">\n      <div class="chat_onl" id="chat_onl"></div>\n    </div>\n  </a>\n</div>'}),utilsNode.appendChild(m.wrap),m.scrollNode=(0,r.geByClass1)("chat_cont_scrolling",m.wrap),m.ttNode=(0,r.geByClass1)("chat_tt_wrap",m.wrap),m.itemsCont=m.scrollNode.firstChild,m.onl=(0,r.ge)("chat_onl"),m.cont=m.onl.parentNode.parentNode,(0,r.hide)(m.wrap),m.inited=!0,window.stManager._addCss(".layers_shown .chat_onl_wrap {margin-right: "+(0,a.sbWidth)()+"px;}")}};function y(e,t,s,n){const a=(0,c.intval)(_.browser.version);if(e&&(_.browser.chrome&&a>14||_.browser.mozilla&&a>13||_.browser.opera&&a>2)){const a="all "+s.duration+"ms "+(s.func||"ease-out");e.style.WebkitTransition=a,e.style.MozTransition=a,e.style.OTransition=a,e.style.transition=a;const d=function(){return _.browser.opera&&(0,c.intval)(_.browser.version)<=12?e.removeEventListener("oTransitionEnd",d):(0,l.removeEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",d),e.style.WebkitTransition="",e.style.MozTransition="",e.style.OTransition="",e.style.transition="",n&&n(),!1};n&&(_.browser.opera&&(0,c.intval)(_.browser.version)<=12?e.addEventListener("oTransitionEnd",d):(0,l.addEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",d)),setTimeout(r.setStyle.pbind(e,t),0)}else(0,d.animate)(e,t,(0,c.extend)(s,{onComplete:n}))}function f(e,t){const s={act:"hide_block",block:e,hash:t};ajax.post("al_index.php",s),(0,r.hide)("news_announce_"+e)}function g(e,t,s){(0,r.setStyle)("left_hide"+e,{visibility:"hidden"}),function(e,t,s){let n="";const l=(0,u.showBox)("reports.php",{act:"hide_ad_box",ad_data:s},{onDone:function(){const e=(0,r.geByClass)("radiobtn","ad_hide");window.radioBtns.ad_hide={val:0,els:e};const t=(0,r.ge)("ad_csrf");n=t?t.value:n},params:{width:370,onClean:()=>{delete window.radioBtns.ad_hide}},stat:["reports.css"]});l.removeButtons(),l.addButton(p.getLang("box_send"),(c=>{(0,a.lockButton)(c),ajax.post("reports.php",{act:"hide_ad",reason_id:window.radioBtns.ad_hide.val,ad_data:s,hash:n}),function(e,t,s){function n(t){if(!t.done)return;if("function"==typeof s&&s(),"ya_direct"===e)return(0,d.animate)(e,{opacity:0},200,(function(){(0,r.re)("ya_direct"),setTimeout((function(){AdsLight.updateBlock("force_hard",2)}),5e3)})),void(window.vk__adsLight.yaDirectAdActive=!1);const n=(0,r.ge)("ads_ad_close_info_"+e);if(!n)return!1;(0,r.setStyle)(n,{opacity:0}),n.style.setProperty("display","block","important"),setTimeout(a,0)}function a(){(0,d.animate)("ads_ad_close_info_"+e,{opacity:1},200,l)}function l(){(0,r.setStyle)("ads_ad_box2_"+e,{visibility:"hidden"})}ajax.post(t,{},{noAds:!0,onDone:n})}(e,t,(()=>{(0,a.unlockButton)(c),l.hide()}))})),l.addButton(p.getLang("global_cancel"),!1,"no")}(e,t,s)}function E(e,t,s,n,a){n&&window.stManager.add(["tooltips.css",window.jsc("web/tooltips.js")]),cur.mfid=e,ajax.post("al_friends.php",{act:n?"add":"remove",mid:e,mf_type:t,hash:s,from:"leftblock"},{onDone:function(t,s,n){if(!t)return nav.reload();const a=(0,r.ge)("left_friend_status_"+e);(0,r.cleanElems)(a.firstChild),t?((0,r.show)(a),(0,r.val)(a,t)):(0,r.hide)(a),s&&(ajax.preload("al_friends.php",{act:"friend_tt",mid:e},[s,n]),setTimeout(A,0))},showProgress:function(){const t=((0,r.ge)("left_friend_subscribed")||{}).tt;t&&(t.hide({fasthide:1}),t.destroy()),(0,r.ge)("left_friend_status_"+e).innerHTML='<img src="/images/upload'+(window.devicePixelRatio>=2?"_2x":"")+'.gif" width="32" />'},hideProgress:()=>(0,r.hide)("left_friend_status_"+e),onFail:function(e){if(e)return(0,u.showFastBox)({title:p.getLang("global_error")},e),!0}}),(0,l.cancelEvent)(a)}function A(){return(0,n.showTooltip)((0,r.ge)("left_friend_subscribed"),{url:"al_friends.php",params:{act:"friend_tt",mid:cur.mfid,from:"leftblock"},slide:15,hidedt:500,shift:[40,-1,3],className:"preq_tt",forcetodown:!0})}function b(){let e=[];(0,c.each)(_.browser,(function(t,s){s&&!(0,c.inArray)(t,["version","mac","search_bot"])&&"flash"!==t.substr(0,5)&&e.push(t)})),e=e.join(" "),document.body.setAttribute("data-useragent",e)}function P(){clearTimeout(window.__qlTimer),setTimeout((()=>clearTimeout(window.__qlTimer)),2e3)}function I(e){if(!_.browserFeatures.cmaEnabled||!window.ResizeObserver||!(0,r.val)("quick_email"))return;if(void 0===window.PasswordCredential)return;const t=new PasswordCredential({id:(0,r.ge)("quick_email").value,password:(0,r.ge)("quick_pass").value,name:e.name,iconURL:e.photo_50});navigator.credentials.store(t)}function T(e,t){P(),I(t),nav.reload({force:!0,from:6})}function C(e,t){switch(P(),e){case-1:location.href=location.href.replace(/^http:/,"https:");break;case 4:let e="/login?m=1"+(t.expire?"&s=0":"");(0,c.each)(["email","ul","pch","to"],(function(s,n){t[n]&&(e+="&"+n+"="+t[n])})),location.href=e;break;case 7:location.href="/login?m=7";break;default:location.href="/login"}}function O(e,t){P(),(0,a.unlockButton)(window.__qfBtn),window.qloginBox=(0,u.showCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e,t){!function(){const e=(0,r.ge)("quick_captcha_sid"),t=(0,r.ge)("quick_captcha_key"),s=(0,r.ge)("quick_recaptcha"),n=(0,r.ge)("quick_login_form");e||n.appendChild((0,r.ce)("input",{type:"hidden",name:"captcha_sid",id:"quick_captcha_sid",value:""})),t||n.appendChild((0,r.ce)("input",{type:"hidden",name:"captcha_key",id:"quick_captcha_key",value:""})),s||n.appendChild((0,r.ce)("input",{type:"hidden",name:"recaptcha",id:"quick_recaptcha",value:""}))}(),(0,r.ge)("quick_captcha_sid").value=e,(0,r.ge)("quick_captcha_key").value=t,(0,r.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function M(e,t){P(),(0,a.unlockButton)(window.__qfBtn),window.qloginBox=(0,u.showReCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e){(0,r.ge)("quick_recaptcha").value=e,(0,r.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function S(e,t){(0,r.setStyle)(e,{backgroundColor:"#F5F7FA"}),(0,d.animate)(e,{backgroundColor:"#FFF"},t||6e3,(function(e){(0,r.setStyle)(e,{backgroundColor:null})}))}function D(){window._postsSeen=window._postsSeen??{},window._postsSaved=window._postsSaved??{},window._postsSaveTimer=window._postsSaveTimer??void 0,window._postsSendTimer=window._postsSendTimer??void 0,window._postsCleanTimer=window._postsCleanTimer??void 0,window._postsSeenModules=window._postsSeenModules??{},window._postsExtras=window._postsExtras??{}}},191468:(e,t,s)=>{"use strict";s.d(t,{shortCurrency:()=>r});var n=s(593159),a=s(754866);function r(){const e={};(0,n.each)((0,a.geByClass)("_short_currency"),(function(){const t=(0,a.domData)(this,"short")||"";if(!t)return!0;const s=this.innerHTML,r=(0,n.winToUtf)(s).length,d=(0,a.getStyle)(this,"fontFamily")||"tahoma,arial,sans-serif";if(void 0===e[d]){let t="";for(let e=r-1;e>=0;e--)t+="&#8399;";const n=(0,a.ce)("div",{innerHTML:`<b>${s}</b><b>${t}</b>`},{fontFamily:d,fontSize:"24px"});(0,a.ge)("utils").appendChild(n),e[d]=Math.abs(n.firstChild.offsetWidth-n.lastChild.offsetWidth)>=2*r,(0,a.re)(n)}!1===e[d]&&(0,a.val)(this,t)}))}},967495:(e,t,s)=>{"use strict";s.d(t,{rangeCreate:()=>l,rangeGet:()=>r,rangeInsert:()=>c});var n=s(754866),a=s(575753);function r(){let e=null,t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0));let s=null,n=null,a=0,r=0,d=document.activeElement;return e&&("selectionStart"in d?(s=d,n=d,a=d.selectionStart,r=d.selectionEnd):t.rangeCount&&(s=e.startContainer,n=e.endContainer,a=e.startOffset,r=e.endOffset)),[e,s,a,n,r]}function d(e){let t=window.getSelection();return t.removeAllRanges(),t.addRange(e),e}function l(e,t,s,n){let a=document.createRange();return a.setStart(e,t),a.setEnd(s,n),d(a)}function c(e,t){if(t=t?t+"":"",!a.browser.msie&&document.execCommand)document.execCommand("insertHTML",!1,t);else if(e){e.deleteContents();let s=(0,n.cf)(t),a=s.lastChild;e.insertNode(s),a&&((e=e.cloneRange()).setStartAfter(a),e.collapse(!0),d(e))}return e}},568129:(e,t,s)=>{"use strict";s.d(t,{blockNameEmpty:()=>Oe,blockNameOwn:()=>Me,blockNameSearch:()=>Se,blockNameSearchGeoGroups:()=>ke,blockNameSearchGroups:()=>De,clickTypeAddFriendOut:()=>Pe,clickTypeJoinGroupOut:()=>we,clickTypeLeaveGroupOut:()=>be,clickTypeRemoveFriendOut:()=>Ie,generateQID:()=>ft,logLeftMenuClicks:()=>mt,outOfSerpGroup:()=>Te,outOfSerpProfile:()=>Ce,removeOutOfSerpClickLogging:()=>ut,removeSearchPositionTracker:()=>ht,saveSearchAttemptStats:()=>yt,serviceApps:()=>L,serviceAppsList:()=>k,serviceAppsManage:()=>x,serviceAudio:()=>H,serviceBookmarksGroups:()=>S,serviceBookmarksUsers:()=>D,serviceDocs:()=>U,serviceEvents:()=>g,serviceFriends:()=>E,serviceFriendsFind:()=>b,serviceGamesCatalog:()=>z,serviceGroups:()=>m,serviceGroupsCatalog:()=>y,serviceManage:()=>K,serviceMarketV2:()=>$,serviceMessages:()=>W,serviceNews:()=>O,servicePhotos:()=>N,serviceSearchAudio:()=>M,serviceSearchClips:()=>B,serviceSearchCommunities:()=>f,serviceSearchPeople:()=>A,serviceSearchStatuses:()=>C,serviceSearchVideo:()=>R,serviceTopSearch:()=>F,serviceUserFriends:()=>q,serviceVideo:()=>j,serviceWall:()=>T,serviceWallGroups:()=>I,serviceWallUsers:()=>P,tryLogOutOfSerpClick:()=>ct});var n=s(898848),a=s(972332),r=s(593159),d=s(754866),l=s(636576),c=s(553608),u=s(952661),_=s(540462);const p={},m="groups",y="groups_catalog",f="search_communities",g="events",E="friends",A="search_people",b="friends_find",P="wall_users",I="wall_groups",T="wall",C="search_statuses",O="news",M="search_audio",S="bookmarks_groups",D="bookmarks_users",k="apps_list",L="apps",x="apps_manage",R="search_video",B="search_clips",F="top_search",N="photos",U="docs",W="messages",H="audio",K="manage",j="video",V="market",$="market_v2",G="market_groups",q="profile_user_friends",z="games_catalog",Y="",X="tap",Q="join_group",Z="leave_group",J="fave",ee="unfave",te="write_msg",ie="add_friend",oe="remove_friend",se="restore_friend",ne="show_photo",ae="add",re="remove",de="play",le="open_artist",ce="open_author_group",ue="open_author_user",_e="open_author",pe="show_similar",he="search_by_tag",me="edit",ye="like",fe="open_comments",ge="share",ve="expand",Ee="mark_as_spam",Ae="stats",we="join_group_out",be="leave_group_out",Pe="add_friend_out",Ie="remove_friend_out",Te="group",Ce="profile",Oe="",Me="own",Se="search",De="search_groups",ke="search_communities_geo",Le="own_playlists",xe="global_clips",Re="own_audios",Be="search_artists",Fe="search_playlists",Ne="search_global_playlists",Ue="search_audios",We="own_conversations",He="own_messages",Ke="own_albums",je="own_videos",Ve="video_playlists",$e="search_videos",Ge="serps",qe="SERPS_LOGS_DATA_LOCK",ze=180,Ye=100,Xe="",Qe="user",Ze="group",Je="app",et="event",tt="public",it="grid",ot="list";function st(e,t,s,a="",r=void 0,l=void 0){let c=0,u="",_=0,p=1,m=0,y=0;return e&&((0,n.isArray)(s)||(s=[s]),s.some((s=>{const n=e.classList.contains(s)?e:(0,d.gpeByClass)(s,e);let f=0;if(n){let s;if(s=a?document.querySelectorAll(a):n.parentNode.children,s){if(c=[...s].indexOf(n)+1,c&&r)for(const e in r)if(r.hasOwnProperty(e)){const t=document.querySelectorAll(r[e]);if(t){const s=[...t].indexOf(n)+1;if(s){_=s,u=e;break}}p++,f++}if(l)for(const t of l){const s=(0,d.gpeByClass)(t,e);s&&(p=s.getAttribute("data-block-num"))}return[m,y]=t(n,f),!0}}}))),[c,m,y,u,_,p]}function nt(e,t,s,n,a,r,l){if(!p[e])return;const c=l.target;if(c&&c.classList)switch(e){case m:return void function(e,t,s,n,a,r){if(!t)return;const l=r.classList,c=r.outerHTML,_=r.tagName;let[,p,m,y,f]=st(r,(e=>{let t=e.getAttribute("id")||e.getAttribute("data-id");return t=t?t.replace("gl_groups","").replace("gl_admin",""):0,[0,"-"+t]}),["_gl_row","search_row"],"#groups_list_tab_groups ._gl_row, #groups_list_search_wrap ._gl_row, #results .search_row, #groups_list_search_wrap .search_row",{[Me]:"#groups_list_tab_groups ._gl_row",[Se]:"#groups_list_search_wrap ._gl_row, #groups_list_search_wrap .search_row"});if(!f)return;y===Me&&(n=0,a="");let g=Y;if(l.contains("group_row_title")||l.contains("group_row_img")||l.contains("highlight")||l.contains("search_item_img")||"A"===_&&-1!==c.indexOf("return nav.go")){let e=(0,d.gpeByClass)("group_list_row",r)||(0,d.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),g=X}(u.FlatButton.isFlatButton(r)&&u.FlatButton.getAppearance(r)!==u.FlatButtonAppearance.SECONDARY||l.contains("search_sub_button"))&&(g=Q);(u.FlatButton.isFlatButton(r)&&u.FlatButton.getAppearance(r)===u.FlatButtonAppearance.SECONDARY||l.contains("search_unsub_button"))&&(g=Z);if(y===Me&&-1!==c.indexOf("GroupsList.subscribe")){if(l.contains("ui_actions_menu"))return;g=Q,!cur.scrollList.deleted[-m]&&(g=Z)}if(y===Me&&-1!==c.indexOf("GroupsList.toggleFave")){if(l.contains("ui_actions_menu"))return;g=J,"1"===r.getAttribute("data-value")&&(g=ee)}if(g===Y)return;lt(),g===X&&dt(Te,e,y,f,s,t,m,p,n,a);_t(e,y,f,g,s,t,m,p,n,a,Xe)}(e,t,s,n,a,c);case f:return(0,_.partConfigEnabled)("search_communities_web_blocks_enabled")?void function(e,t,s,n,a,r,l){const c=l.classList,u=l.tagName,_=l.outerHTML,p=Boolean(l?.closest(".block_geo_groups"))||Boolean(l?.closest(".search_communities_block.section_page"))?ke:De,m=l?.closest(".search_row")?.dataset?.id||0,y=(()=>{const e=document.querySelector("#results .block_user_groups"),t=document.querySelector("#results .block_other_groups"),s=document.querySelector("#results .block_geo_groups"),n=document.querySelector("#results .search_communities_block.section_page");if(s&&l?.closest(".block_geo_groups")){const e=[...s.querySelectorAll(".search_row")].findIndex((e=>+e?.dataset?.id==+m));if(-1!==e)return e+1}return[...e?.querySelectorAll(".search_row")||[],...t?.querySelectorAll(".search_row")||[],...n?.querySelectorAll(".search_row")||[]].findIndex((e=>+e?.dataset?.id==+m))+1})(),f=document.querySelector("#results .block_geo_groups")?p===ke?1:2:1;if(!y)return;let g=Y;if(c.contains("search_item_img")||c.contains("highlight")||"A"===u&&-1!==_.indexOf("return nav.go")){let e=(0,d.gpeByClass)("groups_row",l);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),g=X}c.contains("search_sub_button")&&(g=Q);c.contains("search_unsub_button")&&(g=Z);if(g===Y)return;lt(),g===X&&dt(Te,e,p,y,s,t,m,0,n,a,r,f);_t(e,p,y,g,s,t,m,0,n,a,Xe,"",r,f)}(e,t,s,n,a,r,c):void function(e,t,s,n,a,r,l){if(!t)return;const c=l.classList,u=l.outerHTML,_=l.tagName;let[p,m,y]=st(l,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row");const f=l?.closest(".search_communities_block.section_page")?ke:Oe;if(!p)return;let g=Y;if(c.contains("search_item_img")||c.contains("highlight")||"A"===_&&-1!==u.indexOf("return nav.go")){let e=(0,d.gpeByClass)("groups_row",l);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),g=X}c.contains("search_sub_button")&&(g=Q);c.contains("search_unsub_button")&&(g=Z);if(g===Y)return;lt(),g===X&&dt(Te,e,f,p,s,t,y,m,n,a);_t(e,f,p,g,s,t,y,m,n,a,Xe,"",r)}(e,t,s,n,a,r,c);case y:return void function(e,t,s,n,a,r){if(!t)return;const l=r.classList,c=r.outerHTML,u=r.tagName;let[_,p,m]=st(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row"),y=Y;if(l.contains("search_item_img")||l.contains("highlight")||"A"===u&&-1!==c.indexOf("return nav.go")){let e=(0,d.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),y=X}l.contains("search_sub_button")&&(y=Q);l.contains("search_unsub_button")&&(y=Z);if(y===Y)return;lt(),y===X&&dt(Te,e,Oe,_,s,t,m,p,n,a);_t(e,Oe,_,y,s,t,m,p,n,a,Xe)}(e,t,s,n,a,c);case g:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML,u=r.parentElement?r.parentElement.classList:null;let[_,p,m]=st(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#groups_list_in_tab_search_all .search_row");if(!_)return;let y=Y;if(l.contains("search_item_img")||-1!==c.indexOf("return nav.go")&&u&&u.contains("title")){let e=(0,d.gpeByClass)("search_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),y=X}l.contains("search_sub_button")&&(y=Q);l.contains("search_unsub_button")&&(y=Z);if(y===Y)return;lt(),y===X&&dt(Te,e,Oe,_,s,t,m,p,n,a);_t(e,Oe,_,y,s,t,m,p,n,a,Xe)}(e,t,s,n,a,c);case E:case q:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML,u=r.tagName;let[,_,p,m,y]=st(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("friends_user_row",""):0,[0,t]}),"friends_user_row","#list_content .friends_user_row, #friends_search_cont .friends_user_row",{[Me]:"#list_content .friends_user_row",[Se]:"#friends_search_cont .friends_user_row"});if(!y)return;let f=Y;m===Me&&-1!==c.indexOf("showWriteMessageBox")&&(f=te);m===Me&&-1!==c.indexOf("deleteFriend")&&(f=oe);m===Me&&l.contains("friends_restore_link")&&(f=se);l.contains("ui_zoom_icon")&&(f=ne);m===Se&&r.id&&-1!==r.id.indexOf("friends_subsc")&&(f=ie);m===Se&&r.id&&-1!==r.id.indexOf("friends_unsubsc")&&(f=oe);if(l.contains("friends_photo_img")||m===Me&&"A"===u&&-1!==c.indexOf("return nav.go")||m===Se&&"A"===u&&0===l.length){let e=(0,d.gpeByClass)("friends_user_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),f=X}if(f===Y)return;lt(),f===X&&dt(Ce,e,m,y,s,t,p,_,n,a);_t(e,m,y,f,s,t,p,_,n,a,Xe)}(e,t,s,n,a,c);case b:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML,u=r.parentElement?r.parentElement.classList:null;if(!t)return;let[_,p,m]=st(r,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!_)return;let y=Y;if(l.contains("search_item_img")||-1!==c.indexOf("return nav.go")&&u&&u.contains("name")){let e=(0,d.gpeByClass)("people_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),y=X}l.contains("search_sub_button")&&(y=ie);l.contains("search_unsub_button")&&(y=oe);if(y===Y)return;lt(),y===X&&dt(Ce,e,Oe,_,s,t,m,p,n,a);_t(e,Oe,_,y,s,t,m,p,n,a,Xe)}(e,t,s,n,a,c);case A:return void function(e,t,s,n,a,r,l){const c=l.classList,u=l.outerHTML,_=l.parentElement?l.parentElement.classList:null;if(!t)return;let[p,m,y]=st(l,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!p)return;let f=Y;if(c.contains("search_item_img")||c.contains("AvatarRich")||(-1!==u.indexOf("return nav.go")||-1!==u.indexOf("searcher.openProfileNps"))&&_&&(_.contains("name")||_.contains("img"))){let e=(0,d.gpeByClass)("people_row",l);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),f=X}c.contains("search_sub_button")&&(f=ie);c.contains("search_unsub_button")&&(f=oe);if(f===Y)return;lt(),f===X&&dt(Ce,e,Oe,p,s,t,y,m,n,a);_t(e,Oe,p,f,s,t,y,m,n,a,Xe,"",r)}(e,t,s,n,a,r,c);case S:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML;let[u,_,p]=st(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!u)return;let m=Y;if(l.contains("group_link")||l.contains("bookmark_page_item__image")){let e=(0,d.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=X}(l.contains("ui_zoom")||l.contains("ui_zoom_icon"))&&(m=ne);-1!==c.indexOf("Bookmarks.removeBookmark")&&(m=ee);if(m===Y)return;lt(),m===X&&dt(Te,e,Oe,u,s,t,p,_,n,a);_t(e,Oe,u,m,s,t,p,_,n,a,Xe)}(e,t,s,n,a,c);case D:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML,[u,_,p]=st(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!u)return;let m=Y;if(l.contains("mem_link")||l.contains("bookmark_page_item__image")){let e=(0,d.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=X}(l.contains("ui_zoom")||l.contains("ui_zoom_icon"))&&(m=ne);-1!==c.indexOf("Bookmarks.removeBookmark")&&(m=ee);if(m===Y)return;lt(),m===X&&dt(Ce,e,Oe,u,s,t,p,_,n,a);_t(e,Oe,u,m,s,t,p,_,n,a,Xe)}(e,t,s,n,a,c);case M:!function(e,t,s,n,a,r){const l=r.classList,c=r.tagName;let u=(0,d.gpeByClass)("ap_layer_wrap",r);if(u)return;let _=(0,d.gpeByClass)("search_results",r);if(!_)return;let[p,m,y]=st(r,(e=>{let t=e.getAttribute("data-full-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_audio_row");if(!p)return;let f=Y;(l.contains("audio_row__cover_icon")||l.contains("audio_row__performer_title")||l.contains("audio_row__title")||l.contains("audio_row__title_inner")||l.contains("audio_row__title_inner_subtitle")||l.contains("audio_row__inner")||l.contains("audio_player__place")||l.contains("audio_row__action_next")||l.contains("audio_row__performers"))&&(f=de);l.contains("audio_row__action_add")&&(f=ae);"A"===c&&(f=le);if(f===Y)return;_t(e,Oe,p,f,s,t,y,m,n,a,Xe)}(e,t,s,n,a,c);break;case R:return void function(e,t,s,n,a,r,d){const l=d.classList;let[c,u,_]=st(d,(e=>{let t=e.getAttribute("data-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_video_item","#results ._video_item");if(!c)return;let p=Y;(l.contains("video_thumb_play")||l.contains("video_item_controls")||l.contains("video_thumb_label_item")||l.contains("video_thumb_label")||l.contains("video_item_title")||l.contains("mv_subtitle"))&&(p=de);(l.contains("icon_add")||l.contains("video_thumb_action_add")||l.contains("VideoCard__action--add"))&&(p=ae);l.contains("icon_added")&&(p=re);l.contains("group_link")&&(p=ce);l.contains("al_need_login")&&(p=le);l.contains("mem_link")&&(p=ue);if(p===Y)return;_t(e,Oe,c,p,s,t,_,u,n,a,Xe,"",r)}(e,t,s,n,a,r,c);case B:return void function(e,t,s,n,a,r,d){const l=d.classList;let[c,u,_]=st(d,(e=>{let t=e.parentNode.getAttribute("href");return t=t.replace("/clip",""),t&&t.indexOf("_")?t.split("_"):[0,0]}),"ShortVideoGridItem__thumb",".ShortVideoGridItem__thumb");if(!c)return;let p=Y;l.contains("ShortVideoGridItem__thumb")&&(p=de);if(p===Y)return;_t(e,Oe,c,p,s,t,_,u,n,a,Xe,"",r)}(e,t,s,n,a,r,c);case H:return void function(e,t,s,n,a,r){const d=r.classList,l=r.tagName,c=r.parentElement?r.parentElement.classList:null,[,u,_,p,m]=st(r,((e,t)=>{let s="";switch(t){case 1:case 4:case 2:s=e.getAttribute("data-full-id");break;case 0:case 3:case 6:s=e.getAttribute("data-raw-id")}return s&&s.indexOf("_")?s.split("_"):s?[s,0]:[0,0]}),["_audio_pl_item","audio_block_small_item","_audio_row","_video_item"],"\n        ._audio_section__search ._audio_pl_item,\n        ._audio_section__search ._audio_row,\n        ._audio_section__search .audio_block_small_item,\n        ._audio_section__search .video_item,\n        ._audio_search_blocks ._audio_row,\n        ._audio_search_blocks ._video_item,\n        ._audio_search_blocks ._audio_pl_item,\n        ._audio_search_blocks .audio_block_small_item\n      ",{[Fe]:".CatalogBlock__search_global_albums ._audio_pl_item",[Re]:".CatalogBlock__search_owned_audios ._audio_row",[Ue]:".CatalogBlock__search_global_audios ._audio_row",[Be]:".CatalogBlock__search_global_artists .audio_block_small_item",[xe]:".CatalogBlock__search_global_clips .video_item",[Le]:'._audio_page_block__playlists_items[data-audio-context="search_owned_playlist"] ._audio_pl_item',[Ne]:".CatalogBlock__search_global_playlists ._audio_pl_item"});if(!m)return;let y=Y;d.contains("audio_row__action_more")||c&&c.contains("audio_row__actions")||(y=de);d.contains("audio_row__action_next")&&(y=de);p===Re&&d.contains("audio_row__action_recoms")&&(y=pe);p===Re&&d.contains("audio_row__action_delete")&&(y=re);p===Re&&d.contains("audio_row__action_add")&&(y=ae);p===Ue&&d.contains("audio_row__action_add")&&(y=ae);p===xe&&d.contains("icon_add")&&(y=ae);p===xe&&d.contains("icon_added")&&(y=re);p===Be&&"A"===l&&(y=le);if(y===Y)return;_t(e,p,m,y,s,t,_,u,n,a,Xe)}(e,t,s,n,a,c);case F:return void function(e,t,s,n,a,r){const l=r.classList;let c=r;l.contains("ts_contact")||(c=(0,d.gpeByClass)("ts_contact",r,"div#ts_cont_wrap"));let[u,_,p]=st(c,(()=>[0,(c.id||"").replace("ts_contact","")]),"ts_contact","#ts_cont_wrap .ts_contact");if(!u)return;let m=X,y=Xe;switch(c.getAttribute("hinttype")){case"h_friends":y=Qe,l.contains("ts_contact_status")&&(m=te);break;case"h_mutual_friends":case"s_people":case"h_mail_peers":y=Qe;break;case"h_vk_apps":case"h_apps":y=Je;break;case"h_events":y=et;break;case"h_publics":y=tt;break;case"h_visited":case"s_groups":y=Ze}_t(e,Oe,u,m,s,t,p,_,n,a,y)}(e,t,s,n,a,c);case j:return void function(e,t,s,n,a,r,d){const l=d.classList;let[,c,u,p,m]=st(d,((e,t)=>{let s="";switch(t){case 1:case 3:s=e.getAttribute("data-id");break;case 2:s=e.getAttribute("data-name")}return s&&s.indexOf("_")?s.split("_"):[0,0]}),["video_playlist_item","_video_item","ui_gallery_item"],"\n        #video_layout_search .video_playlist_item,\n        #video_layout_search ._video_item,\n        #video_subtab_pane_search_promo_albums .ui_gallery_item\n      ",{[Ke]:"#video_subtab_pane_search_albums .video_playlist_item",[je]:"#video_subtab_pane_search_videos ._video_item",[Ve]:"#video_subtab_pane_search_promo_albums .ui_gallery_item",[$e]:"#video_subtab_pane_search_global_videos ._video_item"});if(!m)return;let y=Y;(l.contains("icon_add")||l.contains("video_thumb_action_add")||l.contains("VideoCard__action--add"))&&(y=ae);l.contains("icon_added")&&(y=re);const f=(0,_.partConfigEnabled)("video_remove_restore_video_act")?"video-restore-button-widget"===d.id:l.contains("video_restore_act");p===je&&f&&(y=ae);p===je&&l.contains("video_thumb_action_delete")&&(y=re);(l.contains("video_item_title")||l.contains("video_item_controls")||l.contains("video_thumb_label_item")||l.contains("video_thumb_play"))&&(y=de);l.contains("group_link")&&(y=ce);l.contains("al_need_login")&&(y=le);l.contains("mem_link")&&(y=ue);y===Y&&p===Ve&&(l.contains("VideoCard__controlsOverlay")||l.contains("VideoCard__title")||l.contains("VideoCard__icon")||l.contains("VideoCard__controlsOverlayText"))&&(y=X);if(y===Y)return;_t(e,p,m,y,s,t,u,c,n,a,Xe,"",r)}(e,t,s,n,a,r,c);case V:case G:return void function(e,t,s,n,a,r){const l=r.classList;let c=it;const u=(0,d.gpeByClass)("market_row_line",r,".marketplace_content_search");u&&(c=ot);const _=c===it?"_market_row":"market_row_line";let[p,m,y]=st(r,(e=>[0,e.getAttribute("data-id")||0]),_,"#marketplace_content ."+_);if(!p)return;let f=Y;switch(c){case ot:(l.contains("market_row_img")||l.contains("link"))&&(f=X),l.contains("market_favourite")&&!l.contains("selected")&&(f=J),l.contains("market_favourite")&&l.contains("selected")&&(f=ee),l.contains("mem_link")&&(f=ue),l.contains("group_link")&&(f=ce);break;case it:f=X,(l.contains("icon")||l.contains("fav"))&&(f=J)}if(f===Y)return;_t(e,Oe,p,f,s,t,y,m,n,a,Xe)}(e,t,s,n,a,c);case $:return void function(e,t,s,n,a,r){const d=r.classList,l="ClassifiedsCatalogProduct__serpItem",[c,u,_]=st(r,(e=>[+e.getAttribute("data-owner-id"),+e.getAttribute("data-id")]),l);if(!c)return;let p=Y;d.contains("ClassifiedsCatalogProduct__serpTap")&&(p=X);d.contains("MarketplaceCatalogProductFavouriteButton--favorite")&&(p=J);d.contains("MarketplaceCatalogProductFavouriteButton--notFavorite")&&(p=ee);d.contains("ClassifiedsCatalogProduct__serpOwnerGroup")&&(p=ce);d.contains("ClassifiedsCatalogProduct__serpOwnerUser")&&(p=ue);if(p===Y)return;_t(e,Oe,c,p,s,t,_,u,n,a,Xe)}(e,t,s,n,a,c);case W:return void function(e,t,s,n,a,r){let[,d,l,c,u]=st(r,(e=>{let t=e.getAttribute("data-peer");return t||(t=0),[0,t]}),"_im_dialog","._im_page_dcontent ._im_dialog",{[We]:"._im_page_dcontent ._im_dialog:not(._im_search)",[He]:"._im_page_dcontent ._im_dialog._im_search"});if(!u)return;_t(e,c,u,X,s,t,l,d,n,a,Xe)}(e,t,s,n,a,c);case U:return void function(e,t,s,n,a,r){const d=r.classList,l=r.outerHTML;let[,c,u,_,p]=st(r,(e=>{let t=e.getAttribute("id");return t&&(t=t.replace("docs_file_","")),t&&t.indexOf("_")?t.split("_"):[0,0]}),"_docs_item","#docs_list ._docs_item, #docs_search_list ._docs_item",{[Me]:"#docs_list ._docs_item",[Se]:"#docs_search_list ._docs_item"});if(!p)return;let m=Y;_===Se&&d.contains("docs_add_row")&&(m=ae);_===Me&&d.contains("docs_delete_row")&&(m=re);_===Me&&-1!==l.indexOf("Docs.restoreItem")&&(m=ae);_===Me&&d.contains("docs_edit_row")&&(m=me);(d.contains("highlight")||d.contains("docs_item_thumb_img")||d.contains("docs_item_icon")||d.contains("docs_item_name"))&&(m=X);-1!==l.indexOf("Docs.tagSearch")&&(m=he);if(m===Y)return;_t(e,_,p,m,s,t,u,c,n,a,Xe)}(e,t,s,n,a,c);case k:case L:return void function(e,t,s,n,a,r){const[d,l,c]=st(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_cat_row");if(!d)return;let u=X;if(u===Y)return;_t(e,Oe,d,u,s,t,c,l,n,a,Xe)}(e,t,s,n,a,c);case z:return void function(e,t,s,n,a,r){const d=r.classList,[l,c,u]=st(r,(e=>[0,e.getAttribute("data-app-id")||0]),"GameCatalogSearchCard");if(!l)return;let _=Y;(d.contains("GameCatalogSearchCard__screenshotImg")||d.contains("GameCatalogSearchCard__run")||d.contains("GameCatalogSearchCard__avatar")||d.contains("GameCatalogSearchCard__name"))&&(_=de);if(_===Y)return;_t(e,Oe,l,_,s,t,u,c,n,a,Xe)}(e,t,s,n,a,c);case N:return void function(e,t,s,n,a,r){const[d,l,c]=st(r,(()=>{let e=r.getAttribute("href")||"";e=e.replace("/photo","");let t=e.split("_");return 2!==t.length?[0,0]:[t[0],t[1]]}),"page_post_thumb_wrap","._feed_rows .page_post_thumb_wrap");if(!d)return;_t(e,Oe,d,X,s,t,c,l,n,a,Xe)}(e,t,s,n,a,c);case P:case I:case T:case C:case O:return void function(e,t,s,n,a,r){const l=r.classList,c=r.outerHTML,u=(0,d.gpeByClass)("replies",r,".post");if(u)return;let _="feed_row",p="";e!==C&&e!==P&&e!==I||(_="post");e!==P&&e!==I||(p="#page_search_posts .post");const[m,y,f]=st(r,(e=>{let t;if(e.classList.contains("post"))t=e;else{const s=e.getElementsByClassName("post");if(0===s.length)return[0,0];t=s[0]}if(!t)return[0,0];const s=(t.getAttribute("data-post-id")||"").split("_");return 2===s.length?s:[0,0]}),_,p);if(!m)return;let g=Y;const E=(0,d.gpeByClass)("wall_text",r,".post");(E||l.contains("wall_text"))&&(g=X);(l.contains("author")||l.contains("post_img")||l.contains("copy_author")||l.contains("copy_post_img")||l.contains("_copy_post_img")||l.contains("PostHeader__avatar"))&&(g=_e);const A=(0,d.gpeByClass)("PostHeaderSubtitle__link",r,"_post");(l.contains("rel_date")||l.contains("published_by_date")||A)&&(g=X);const b=(0,d.gpeByClass)("like",r,".post"),T=(0,d.gpeByClass)("PostBottomActionContainer",r,"_post");(b||l.contains("like")||T)&&(g=ye);const O=(0,d.gpeByClass)("comment",r,".post");(O||l.contains("comment"))&&(g=fe);const M=(0,d.gpeByClass)("share",r,".post");(M||l.contains("share"))&&(g=ge);l.contains("ui_actions_menu_item")&&-1!==c.indexOf("bookmarkPost")&&(g=J);l.contains("ui_actions_menu_item")&&-1!==c.indexOf("wall.markAsSpam")&&(g=Ee);const S=(0,d.gpeByClass)("PostTextMore",r,"_post");S&&(g=ve);if(g===Y)return;_t(e,Oe,m,g,s,t,f,y,n,a,Xe)}(e,t,s,n,a,c);case K:case x:return void function(e,t,s,n,a,r){const d=r.classList,l=r.tagName,[c,u,_]=st(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_settings_row");if(!c)return;let p=Y;d.contains("apps_settings_stats")&&(p=Ae);"A"!==l&&"img"!==l||(p=X);if(p===Y)return;_t(e,Oe,c,p,s,t,_,u,n,a,Xe)}(e,t,s,n,a,c)}}function at(){const e=window.vk.id;let t={[e]:{}};const s=c.vkLocalStorage.getItem(Ge);if(!s)return t;try{t=JSON.parse(s)}catch(e){t={}}return t&&e&&(t={...t,[e]:{...t[e]}}),t}function rt(e){if("locked"===c.vkLocalStorage.getItem(qe))setTimeout((()=>rt(e)),100);else{c.vkLocalStorage.setItem(qe,"locked");try{e()}catch(e){}c.vkLocalStorage.setItem(qe,"free")}}function dt(e,t,s,n,a,r,d,l,u,_,p=!1,m=0){rt((()=>{const y=window.vk.id;let f=Math.round(+new Date/1e3),g=at();g[y][e]=g[y][e]||{};const E=Object.keys(g[y][e]);if(E.length>=Ye){let t=E[0],s=g[y][e][t][0];E.forEach((n=>{let a=g[y][e][n][0];a<s&&(s=a,t=n)})),delete g[y][e][t]}g[y][e][d]=[f,t,s,n,a,r,l,u,_,p,m],c.vkLocalStorage.setItem(Ge,JSON.stringify(g))}))}function lt(){rt((()=>{let e=at();if(!e)return;const t=Math.round(+new Date/1e3);Object.keys(e).forEach((s=>{Object.keys(e[s]).forEach((n=>{let a=e[s][n];Object.keys(a).forEach((e=>{let s=a[e][0];t-s>ze&&delete a[e]})),e[s][n]=a,0===Object.keys(a).length&&delete e[s][n]}))})),c.vkLocalStorage.setItem(Ge,JSON.stringify(e))}))}function ct(e,t,s){const n=window.vk.id;let a=at();a[n][e]=a[n][e]||{};const r=a[n][e][t];if(!r)return;Math.round(+new Date/1e3)-r[0]>ze?ut(!0,e,t):_t(r[1],r[2],r[3],s,r[4],r[5],t,r[6],r[7],r[8],Xe,"",r[9],r[10])}function ut(e,t,s){e&&rt((()=>{const e=window.vk.id;let n=at();n[e][t]=n[e][t]||{},n[e][t][s]&&(delete n[e][t][s],c.vkLocalStorage.setItem(Ge,JSON.stringify(n)))}))}function _t(e,t,s,n,a,r,d,c,u,_,p,m="",y=!1,f=0){if(!s)return;const g=-(new Date).getTimezoneOffset();(0,l.statlogsValueEvent)("search_position",e,p,n,t,s,y,c,d,r,g,a,u,_,m,f)}function pt(){for(let e in p)p.hasOwnProperty(e)&&ht(e)}function ht(e){if(p[e]){const t=p[e];(0,a.removeEvent)(window,"click",t),delete p[e]}}function mt(e,t){const s=t||e.target.getAttribute("data-stats-key");s&&s.length>0&&(0,l.statlogsValueEvent)("submenu_clicks",0,s)}function yt(e,t,s,n,r="0",d=0,c="0",u="",_=Oe,m="",y=!1,f=0,g=null,E=0,A=!1){s=s?1:0,r=r&&"0"!==r?r:ft(),A||function(e,t,s,n,a,r,d,c,u="",_=!1,p=0,m=0,y=0){const f=-(new Date).getTimezoneOffset();(0,l.statlogsValueEvent)("search_attempts",e,_,r,n,f,s,d,a,c,t,u,p,m,y)}(e,_,r,n,c,s,d,u,m,y,f,g,E),p[e]&&ht(e);const b=nt.pbind(e,n,r,d,u,y);p[e]=b,(0,a.addEvent)(window,"click",b,!1,!1,!0),cur.destroy||(cur.destroy=[]),cur.destroy.some((e=>e===pt))||cur.destroy.push(pt)}function ft(){return(0,r.rand)(-9223372035,9223372035).toFixed(0).concat((0,r.rand)(0,999999999).toFixed(0))}},856771:(e,t,s)=>{"use strict";s.r(t),s.d(t,{sendMask:()=>b,showNarrative:()=>f,showStory:()=>y,storiesPreloadStatic:()=>E});var n=s(270959),a=s(246429),r=s(102088),d=s(226220),l=s(754866),c=s(194065),u=s(530888),_=s(540462);let p=!1,m=!1;function y(e,t={},s=void 0){if(cur.storiesNotSupported)return void(0,n.showFastBox)(r.getLang("global_error"),r.getLang("stories_bad_browser"));(0,c.trackStoryOpeningStart)({nonce:e,isColdStart:!m,isAnimated:null!=t.fromEl,viewSource:t.source,navigationSource:u.StoryTypeOpen.OPEN_STORY_BY_CLICK});const a=`stories_viewer_loader_${performance.now()}`;let _=!1;clearTimeout(p),p=setTimeout((function(){document.body.appendChild((0,l.ce)("div",{id:"stories_loader",innerHTML:(0,d.getProgressHtml)("stories_loader_pr","pr_baw pr_medium")+'<div class="back"></div>'})),_=!0,(0,c.trackShowViewerLoader)({nonce:a,isColdStart:!m})}),1e3);const y=[window.jsc("web/stories.js"),"stories.css",window.jsc("web/emoji.js"),window.jsc("web/videoview.js"),"videoplayer.css"];window.stManager.add(y,(function(){clearTimeout(p),(0,l.re)("stories_loader"),m=!0,_&&(0,c.trackHideViewerLoader)({nonce:a}),window.Stories.show(e,t,s)}))}function f(e,t,s=0,n="",a={}){const r=`narrative${t}`;if(s=s?`_${s}`:"",(0,_.partConfigEnabled)("stories_web_api")&&(0,_.partConfigEnabled)("stories_view_rights")){let s=n.match(/^narrative(-?\d+)_(\d+)(?:_(\d+))?(?:\/([a-z0-9_\-]+))?(?:\/([a-z0-9_:;\-]+))?$/i);if(s){const[,,,,a,r]=s;n=a||(r?`narrative${e}_${t}/${r}`:`narrative${e}_${t}`)}else n=n||`narrative${e}_${t}`}else n=n||`narrative${e}_${t}`;y(n=`${e}${s}&${r}/${n}`,a)}let g=!1;function E(){g||cur.storiesNotSupported||(g=!0,window.stManager.add([window.jsc("web/stories.js"),"stories.css",window.jsc("web/story_publisher.js")]))}let A=!1;function b(e,t,s=!1){A||(A=!0,ajax.post("al_stories.php",{act:"send_mask",mask_id:e,hash:t,is_short_video:s},{loader:!0,onDone:(e,t,s,d)=>{"cant_send"===e?(0,n.showFastBox)({title:t,width:460},s,d):(0,a.showDoneBox)(r.getLang("stories_mask_sent")),A=!1},onFail:()=>(A=!1,(0,n.showFastBox)({title:r.getLang("global_box_error_title")},r.getLang("global_unknown_error")),!0)}))}},342879:(e,t,s)=>{"use strict";s.d(t,{destroyAllTooltips:()=>_,hideAllTooltips:()=>u,showHint:()=>c,showTitle:()=>l,showTooltip:()=>d});var n=s(754866),a=s(972332),r=s(593159);function d(e,t){(vk.loaded||t.noload)&&e&&(e.temphide||(e.temphide=function(){e.showing=!1},(0,a.addEvent)(e,"mouseout",e.temphide)),e.showing=!0,"loadingstat"!==e.tt&&(e.tt||(e.tt="loadingstat"),cur.cancelTooltip=!1,t.stat&&window.stManager.add(t.stat),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"],(function(){"loadingstat"===e.tt&&(e.tt=!1),e.showing&&!cur.cancelTooltip&&(!function(e){e.temphide&&((0,a.removeEvent)(e,"mouseout",e.temphide),(0,n.removeAttr)(e,"temphide"),(0,n.removeAttr)(e,"showing"))}(e),e.tt&&e.tt.el&&!t.force||(tooltips.create(e,t),t.onCreate&&t.onCreate()),tooltips.show(e,t))}))))}function l(e,t,s,a){e=(0,n.ge)(e);if(!s){s=[Math.round(20-(0,n.getSize)(e)[0]/2),8]}d(e,(0,r.extend)({text:function(){return t||e.getAttribute("data-title")},shift:s,black:1},a||{}))}function c(e,t){t=t||{};d(e=(0,n.ge)(e),(0,r.extend)({text:function(){return e.getAttribute("data-title")},dir:"auto",width:300,shift:[22,8]},t))}function u(e){tooltips.hideAll(e)}function _(e){tooltips.destroyAll(e)}},449299:(e,t,s)=>{"use strict";s.d(t,{arrayUnique:()=>P,checkTextLength:()=>O,getAct:()=>F,getDropdownValue:()=>B,getSelectionText:()=>M,goAway:()=>S,hashCode:()=>C,isClaimContent:()=>N,isFullScreen:()=>D,lplog:()=>A,onlinePlatformClass:()=>x,parallel:()=>T,parseJSON:()=>f.parseJSON,showErrorBox:()=>R,shuffle:()=>g.shuffle,throttle:()=>I,throttleAccumulate:()=>E,toArray:()=>b,toggleOnline:()=>L,unpackStore:()=>y.unpackStore,updateMoney:()=>k});var n=s(105330),a=s(593159),r=s(396858),d=s(898848),l=s(270959),c=s(754866),u=s(102088),_=s(575753),p=s(576854),m=s(972332),y=s(687903),f=s(261910),g=s(787661);function E(e,t){let s=[],n=0;return function(a){s.push(a),n||(n=setTimeout((()=>{n=!1,e(s),s=[]}),t))}}function A(e,t){let s,n;if(window.__debugMode){switch(t){case"error":s="color: red",n="background: red; color: white";break;case"success":s="color: green",n="background: green; color: white";break;default:s="color: blue;",n="background: #000; color: #fff;"}try{let t=new Date;console.debug(`%cLP:[${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}]%c ${e}`,n,s)}catch(e){}}}function b(e){let t=[];if(void 0===e.length)return Object.keys(e).map((t=>e[t]));for(let s=0;s<e.length;s++)t.push(e[s]);return t}function P(e){let t={},s=[];for(let n=0;n<e.length;n++)t[e[n]]||(s.push(e[n]),t[s[n]]=1);return s}function I(e,t){let s;return function(){s||(e.apply(this,arguments),s=setTimeout((function(){s=!1}),t))}}function T(){const e=[].slice.call(arguments),t=e.pop(),s=new CallHub(t,e.length);(0,a.each)(e,((e,t)=>t((()=>s.done()))))}function C(e){let t=0;if(0===e.length)return t;for(let s=0,n=e.length;s<n;s++){t=(t<<5)-t+e.charCodeAt(s),t|=0}return t}function O(e,t,s,n,a,r,d,l,_){if(!t)return;const p=t.getValue?t.getValue():t.value,m=t.lastLen||0;if(t.lastLen===p.length&&!r)return;t.lastLen=p.length;const y={"&":5,"<":4,">":4,'"':6,"\n":n?1:4,"\r":0,"!":5,"'":5,$:6,"\\":6},f={1168:1,1169:1,8211:1,8212:1,8216:1,8217:1,8218:1,8230:1,8240:1,8249:1,8250:1,8364:1,8470:1,8482:1,65533:1},g={1037:1,1104:1,1117:1};a&&(y[","]=5);const E=function(e){let t=0;for(let s=0,n=e.length;s<n;s++){const n=_?void 0:y[e.charAt(s)],a=e.charCodeAt(s);t+=void 0!==n?n:!d&&a>=128&&(a<1025||g[a]||a>1119)&&!f[a]&&(a<8220||a>8222)&&(a<8224||a>8226)?("&#"+a+";").length:1}return t}(p);if(s=(0,c.ge)(s),E>Math.max(e-100,.75*e))if((0,c.show)(s),E>e)if(a){const n=(0,c.val)(t,function(e,t){let s=0,n="";for(let a=0,r=e.length;a<r;a++){const r=e.charAt(a),l=_?void 0:y[r],c=e.charCodeAt(a);if(s+=void 0!==l?l:!d&&c>=128&&(c<1025||g[c]||c>1119)&&!f[c]&&(c<8220||c>8222)&&(c<8224||c>8226)?("&#"+c+";").length:1,s>t)break;n+=r}return n}(p,Math.min(e,m)));t.lastLen=n.length,s.innerHTML=u.getLang("text_N_symbols_remain",0),l&&s.classList.contains(l)&&s.classList.remove(l)}else s.innerHTML=u.getLang("text_exceeds_symbol_limit",E-e),l&&!s.classList.contains(l)&&s.classList.add(l);else s.innerHTML=u.getLang("text_N_symbols_remain",e-E),l&&s.classList.contains(l)&&s.classList.remove(l);else(0,c.hide)(s)}function M(){let e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange().text),e}function S(e,t,s){if(-1!==(t||{}).h||(0,m.checkEvent)(s))return!0;if(-1!==(t||{}).h){const s=e.match(n.VK_URL_REGEX_STRICT);if(s&&"api."!==s[1].toLowerCase())return location.href=e,!1;const l=(0,a.intval)((0,r.getCookie)("remixsettings_bits"));if(n.VK_URL_REGEX_STRICT.test((0,d.locBase)())||1&l)return window.open("/away.php?to="+encodeURIComponent(e)+(t&&void 0!==t.h?"&h="+t.h:""),"_blank"),!1}const c=(0,a.extend)({act:"a_go",to:e},t||{});return!(0,l.showBox)("away.php",c,{},s)}function D(){return!!(document.fullscreenElement||document.fullScreenElement||document.msFullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||cur.pvPartScreen)}function k(e,t){if(void 0===e||!1===e)return;if("object"==typeof e)return;let s="";!0===t?(vk.balanceEx=e,s="_ex"):vk.balance=e;const n=(0,c.geByClass)("votes_balance_nom"+s);(0,a.each)(n,((t,s)=>s.innerHTML=`${e} ${u.getLang("votes_flex",e)}`));const r=e*(vk.vcost||7),d=(0,c.geByClass)("money_balance_nom"+s);(0,a.each)(d,((e,t)=>t.innerHTML=u.getLang("global_money_amount_rub",r,!0))),void 0!==t&&!1!==t&&!0!==t&&k(t,!0),window.GamesCatalog&&window.GamesCatalog.updateMoney(e);const l=document.getElementById("topmenu-balance");l&&(l.textContent=e)}function L(e,t){const s=x(t).split(" "),n=[];["online","mobile","_online"].forEach((function(t){(0,a.inArray)(t,s)&&!(0,c.hasClass)(e,t)?n.push(t):!(0,a.inArray)(t,s)&&(0,c.hasClass)(e,t)&&(0,c.removeClass)(e,t)})),n.length>0&&(0,c.addClass)(e,n.join(" "))}function x(e){let t=" _online";return e&&(t+=" online"),_.mobPlatforms[e]&&(t+=" mobile"),(0,p.updateOnlineText)(),t}function R(e,t){return void 0===t&&(t=1e4),setTimeout((0,l.showFastBox)({title:u.getLang("global_error")},e).hide,t)}function B(e){let t=(0,c.ge)(e+"_container");if(t||(t=(0,c.ge)(e)),t&&t.dropdown)return t.dropdown.val()}function F(){return window.nav.objLoc.act}function N(){return Boolean(window.nav&&window.nav.objLoc&&window.nav.objLoc.claim)}},432081:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{VideoConstants:()=>VideoConstants,initVideo:()=>initVideo,loadInlineVideo:()=>loadInlineVideo,showInlineVideo:()=>showInlineVideo,showVideo:()=>showVideo});var _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(636576),_web_lib_date__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(101148),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(754866),_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(972332),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(593159),_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(102088),_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(270959),_layout_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(226220),_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(672263),_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(826619),_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(105330),_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(892848),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(540462);const rtrgQuery=`//${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__.getHostName)()}/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-`;function showVideo(e,t,s={},n){if(cur.viewAsBox)return cur.viewAsBox();if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(n))return;if((0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.isUnauthorizedMediaLayerBoxAvailable)()&&(n||s.openInPopup)&&!s.forceUnauth&&!cur.is_showcase)return _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.Unauthorized.showMoreBox(null,0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.UnauthorizedSourceType.VIDEO,(()=>{showVideo(e,t,{...s,openInPopup:!1,forceUnauth:!0},n)})),!1;if(s.forceUnauth=!0,window.mvcur&&mvcur.mvShown&&mvcur.minimized&&mvcur.videoRaw==e)return s.fromPlayer||Videoview.unminimize(),!1;const a=nav.objLoc.claim,r=!(!s.addParams||!/^-?\d+_\d+$/.test(s.addParams.post_id))&&s.addParams.post_id;if(!s.playlistId&&r&&(/^public|groups|profile$/.test(cur.module)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)("post"+r,"own")?s.playlistId="wall_"+cur.oid:s.playlistId="post_"+s.addParams.post_id),s.playlistId)if(s.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(s.addParams,{playlist_id:s.playlistId}),window.VideoPlaylist&&VideoPlaylist.getList(s.playlistId))e||(s.addParams.load_playlist=1);else if(/^wall_/.test(s.playlistId)){const e=cur.wallVideos&&cur.wallVideos[s.playlistId];s.addParams.load_playlist=e?.list.length>=50?0:1,s.addParams.show_next=e?.list.length>=1?1:0}else{const e=/^(?:post_)?-?\d+_-?\d+$/.test(s.playlistId)&&!(cur.pageVideosList&&cur.pageVideosList[s.playlistId]);s.addParams.load_playlist=e?1:0,s.addParams.show_next=e?1:0}s.expandPlayer||!cur.videoInlinePlayer||cur.videoInlinePlayer.getVideoId()!=e&&cur.videoInlinePlayer.getProjectId()!=e||!cur.videoInlinePlayer.canExpand()||(s.expandPlayer=cur.videoInlinePlayer),s.expandPlayer&&(s.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(s.addParams,{expand_player:1}),delete cur.videoInlinePlayer),cur.simple_description&&(s.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(s.addParams||{},{simple_description:cur.simple_description}));const d=new CallHub((function(){s.hidden?s.hidden(d.data,s,t,e):Videoview.showVideo.apply(Videoview,d.data)}),2);window.stManager.add([window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/page.js"),"page.css"],(()=>{d.failed||(s.hidden||((0,_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_11__.revertLastInlineVideo)(),Videoview.show(n,e,t,s)),d.done())})),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(s,{onDone:function(){const t=Array.prototype.slice.call(arguments);t.unshift(e),d.data=t,d.done()},onFail:function(t){if(d.failed=1,!s.hidden){if(window.mvcur&&mvcur.mvShown)window.Videoview.hide();else{const t=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.clone)(nav.objLoc);t.z==="video"+e&&delete t.z,t[0]==="video"+e&&(t[0]="videos"+e.split("_")[0]),nav.setLoc(t)}const s=t&&"object"==typeof t?t?.data:t;if((0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error"),s||_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error_occured")),window.Videoview?.isMinimized())if(mvcur&&mvcur.fallbackData){const{videoRaw:e,options:t,listId:s,mvData:n}=mvcur.fallbackData;mvcur.videoRaw=e,mvcur.options=t,mvcur.listId=s,mvcur.myData=n,mvcur.fallbackData=null,Videoview.initPlaylistBlock(e,t.playlistId,t.catLoadMore),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)("mv_progress_box")}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)("mv_player_box","");d.done()}return!0},cache:"status"!==t}),window.VideoPlaylist&&(window.VideoPlaylist.module=null);let l=s.params;return l||(l={act:"show",video:e,list:t,autoplay:s.autoplay?1:0,ad_video:s.ad_video,module:s.module||window.Videoview&&window.Videoview.getVideoModule()||"",webcast:nav.objLoc.webcast?1:0,screen:nav.objLoc.screen?1:0}),cur.is_showcase&&!l.context&&cur.ref_context&&(l.context=cur.ref_context),s.addParams&&(l=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(l,s.addParams)),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(l.module)||(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(l,{_nol:JSON.stringify(nav.objLoc)}),l.module&&(window.VideoPlaylist&&(window.VideoPlaylist.module=l.module),s.is_similar&&(l.module+=":similar")),a&&(l.claim=a),ajax.post(`al_video.php?act=${l.act}`,l,s),(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__.idlizeCall)((()=>{(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=`${locProtocol}${rtrgQuery}`})),!1}function showInlineVideo(videoId,listId,options,ev,thumb){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(ev))return!0;if(options=options||{},window.mvcur&&mvcur.mvShown||options.hasRestriction)return showVideo(videoId,listId,options,ev);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-loading"))return!1;let h=thumb.clientHeight,w=thumb.clientWidth;h&&w||!thumb.parentElement||!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_12__.partConfigEnabled)("feed_video_primary_attachment_web_enable")||(h=thumb.parentElement.clientHeight,w=thumb.parentElement.clientWidth);const btn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(thumb,"page_post_video_play_inline"),onLoaded=options.onLoaded;onLoaded&&delete options.onLoaded;const params={video:videoId,list:listId,autoplay:options.autoplay,module:options.module};return thumb.className.includes("page_video_croppable")&&(params.with_crop=!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domData)(thumb,"stretch-vertical")&&(params.stretch_vertical=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(params,options.addParams),window.VideoPlaylist&&(window.VideoPlaylist.module=params.module),showProgress(),loadInlineVideo(params,(function(e,t){hideProgress(),e?onDone.apply(null,t):onFail.apply(null,t)}),options.cache),cur.videoInlinePlayerDestroyerSet||(cur.destroy.push(_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_11__._destroyInlineVideoPlayer),cur.videoInlinePlayerDestroyerSet=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=rtrgQuery,!1;function onDone(title,html,js,opts){(0,_web_lib_revertLastInlineVideo__WEBPACK_IMPORTED_MODULE_11__.revertLastInlineVideo)(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)(thumb);const isMt=thumb.dataset.mtId,isDirectMp4=!!thumb.dataset.directMp4,mtAspectRatio=thumb.dataset.mtAspectRatio?Number(thumb.dataset.mtAspectRatio):0,videoWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{innerHTML:html,className:"inline_video_wrap"},{width:w,height:isMt&&mtAspectRatio?Math.round(w*mtAspectRatio):h});if(opts&&opts.mvData&&-195297477!==opts.mvData.authorId&&(window._videoLastInlined=[videoWrap,thumb]),thumb.parentNode.appendChild(videoWrap),cur.mvOpts=!(!opts||!opts.mvData)&&opts.mvData,opts.player){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(videoWrap,"video_box_wrap");(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(onLoaded)&&(opts.player.params[0].onPlayerLoaded=onLoaded);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-link-attr");if(t&&(opts.player.params[0].link_attr=t),isMt){opts.player.params[0].ad_block_id=isMt;const e=thumb.dataset.mtVideoMp4;e&&(opts.player.params[0].direct_mp4=e);const t=thumb.dataset.mtVideoHls;t&&(opts.player.params[0].hls=t),mtAspectRatio&&(opts.player.params[0].aspect_ratio=mtAspectRatio);const s=thumb.firstChild&&thumb.firstChild.firstChild&&thumb.firstChild.firstChild.src;s&&(opts.player.params[0].jpg=s);const n=thumb.firstChild,a=n.dataset.mtLink,r=n.getAttribute("onclick");a&&(opts.player.params[0].link_attr=`href="${a}" onclick="${r}"`)}isDirectMp4&&(opts.player.params[0].direct_mp4=thumb.dataset.directMp4,opts.player.params[0].hls=void 0,opts.player.params[0].dash_sep=void 0,Object.keys(opts.player.params[0]).forEach((e=>{e.startsWith("url")&&(opts.player.params[0][e]=void 0)}))),VideoInitializer.initPlayer(e,opts.player.type,opts.player.params)}try{eval("(function () {"+js+"})();")}catch(e){}if(!params.from_autoplay){const e=window.Notifier;e&&setTimeout((()=>e.lcSend("video_start")),0);const t=window.ap;t&&t.isPlaying()&&(t.pauseByChangeChannel(),t.pausedByVideo=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkNow)())}ev&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("bookmarks_row_type_video",ev.target)&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"video",item_owner_id:cur.mvOpts.oid,item_id:cur.mvOpts.vid,time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_1__.getServerTime)()}),thumb.setAttribute("data-playing",1)}function onFail(e){params.from_autoplay||(0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error"),e||_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error_occured"))}function showProgress(){thumb.setAttribute("data-loading",1),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,(0,_layout_utils__WEBPACK_IMPORTED_MODULE_7__.getProgressHtml)()))}function hideProgress(){thumb.removeAttribute("data-loading"),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,""))}}function loadInlineVideo(e,t,s){const n=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({autoplay:0,module:cur.module},e);(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(n.module)||(n._nol=JSON.stringify(nav.objLoc));const a=[window.jsc("web/videoview.js"),"videoview.css"];function r(e,s){(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(t)&&t(e,s)}n.from_autoplay&&a.push("videoplayer.css"),ajax.post("al_video.php?act=video_box",n,{onDone:function(){r(!0,[].slice.call(arguments))},onFail:function(){return r(!1,[].slice.call(arguments)),!0},stat:a,local:1,cache:s})}const VideoConstants={VIDEO_ITEM_INDEX_OWNER_ID:0,VIDEO_ITEM_INDEX_ID:1,VIDEO_ITEM_INDEX_THUMB:2,VIDEO_ITEM_INDEX_TITLE:3,VIDEO_ITEM_INDEX_FLAGS:4,VIDEO_ITEM_INDEX_DURATION:5,VIDEO_ITEM_INDEX_HASH:6,VIDEO_ITEM_INDEX_OWNER:8,VIDEO_ITEM_INDEX_DATE:9,VIDEO_ITEM_INDEX_VIEWS:10,VIDEO_ITEM_INDEX_PLATFORM:11,VIDEO_ITEM_INDEX_BLOCKED:12,VIDEO_ITEM_INDEX_MUSIC_VIDEO_META:13,VIDEO_ITEM_INDEX_ARIA:14,VIDEO_ITEM_INDEX_RESTRICTION_BLOCK:15,VIDEO_ITEM_INDEX_RESTRICTION_CLASSES:16,VIDEO_ITEM_INDEX_ADMIN_INFO:17,VIDEO_ITEM_INDEX_CARD_MENU_TOGGLE:18,VIDEO_ITEM_INDEX_RAW_DURATION:19,VIDEO_ITEM_INDEX_LINK:20,VIDEO_ITEM_INDEX_TRAILER:21,VIDEO_ITEM_INDEX_VIEWED_DURATION:22,VIDEO_ITEM_INDEX_VIEWED_DAY:23,VIDEO_ITEM_INDEX_LIST_ID:24,VIDEO_ITEM_INDEX_PLAYLIST_ID:25,VIDEO_ITEM_INDEX_CARD_ACTIONS:26,VIDEO_ITEM_INDEX_CARD_PRIVACY_ICONS:27,VIDEO_ITEM_INDEX_SMALL_THUMB:28,VIDEO_ITEM_INDEX_ML_THUMB_ID:29,VIDEO_ITEM_INDEX_PLAY_FROM:30,VIDEO_ITEM_INDEX_RECOMMENDATION_SOURCES:31,VIDEO_ITEM_INDEX_RECOMMENDATION_USERS:32,VIDEO_ITEM_TRACK_CODE:33,VIDEO_ITEM_INDEX_SUBTITLE_PLACE:34,VIDEO_ITEM_INDEX_AVATAR_IMAGE:35,VIDEO_ITEM_INDEX_AVATAR_PLACE:36,VIDEO_ITEM_INDEX_DESCRIPTON:37,VIDEO_ITEM_INDEX_DOWNLOAD_URL:38,VIDEO_ITEM_INDEX_OWNER_HREF:39,VIDEO_ITEM_PUBLISH_DATE:40,VIDEO_ITEM_BOOKMARKED:41,VIDEO_ITEM_BOOKMARK_HASH:42,VIDEO_ITEM_INDEX_UPCOMING_LIVE_DATE:43,VIDEO_ITEM_INDEX_INTERACTIVE:44,VIDEO_ITEM_INDEX_LABEL_PLACE:45,VIDEO_ITEM_INDEX_VK_LIVE_CHANNEL_URL:46,VIDEO_TEMPLATE_INDEX_SUBTITLE_DURATION_WITH_VIEWS:0,VIDEO_TEMPLATE_INDEX_SUBTITLE_LABEL:1,VIDEO_TEMPLATE_INDEX_SUBTITLE_SCHEDULED:2,VIDEO_TEMPLATE_INDEX_SUBTITLE_UPCOMING_LIVE:3,VIDEO_ITEM_FLAG_EXTERNAL:1,VIDEO_ITEM_FLAG_ACTIVE_LIVE:2,VIDEO_ITEM_FLAG_CAN_DOWNLOAD:32,VIDEO_ITEM_FLAG_CAN_EDIT:64,VIDEO_ITEM_FLAG_CAN_DELETE:128,VIDEO_ITEM_FLAG_CAN_ADD:256,VIDEO_ITEM_FLAG_PRIVATE:512,VIDEO_ITEM_FLAG_NO_AUTOPLAY:1024,VIDEO_ITEM_FLAG_ADDED:2048,VIDEO_ITEM_FLAG_SKIP_THUMB_LOAD:4096,VIDEO_ITEM_FLAG_NEED_SIGN_IN:8192,VIDEO_ITEM_FLAG_HD:16384,VIDEO_ITEM_FLAG_DELETED:32768,VIDEO_ITEM_FLAG_CAN_MOVE:65536,VIDEO_ITEM_FLAG_CAN_DELETE_FROM_HISTORY:1<<17,VIDEO_ITEM_FLAG_PRIVATE_BY_LINK:1<<18,VIDEO_ITEM_FLAG_LIVE:1<<19,VIDEO_ITEM_FLAG_PRIVATE_NOT_PUBLISHED:1<<20,VIDEO_ITEM_FLAG_PRIVATE_MEMBERS:1<<21,VIDEO_ITEM_FLAG_HORIZONTAL:1<<22,VIDEO_ITEM_FLAG_NFT_AVATAR:1<<23,VIDEO_ITEM_FLAG_SCHEDULED:1<<24,VIDEO_ITEM_FLAG_CAN_BOOKMARK:1<<25,VIDEO_ITEM_FLAG_BOOKMARKED:1<<26,VIDEO_ITEM_FLAG_UPCOMING_LIVE:1<<27,VIDEO_ITEM_FLAG_INTERACTIVE:1<<28};function initVideo(){window._videoLastInlined=!1}},945028:(e,t,s)=>{"use strict";s.d(t,{processAliExpressMiniAppLinkClickEvent:()=>d});var n=s(330721),a=s(540462),r=s(105330);function d(e){const t=e.target||e.srcElement;if(t&&t.href){const e=t.href;let s,d;try{s=decodeURIComponent(e)}catch(e){return!1}if((0,a.partConfigEnabled)("aliexpress_app_links_redirect_web_links")){if(d=function(e){const t=[new RegExp(`(https?://)?${r.VK_SITE_REGEX_SOURCE_UNSAFE}/app${n.MARKET_ALIEXPRESS_APP_ID}(_6492794)?(#|/|#/)?$`),new RegExp(`(https?://)?${r.VK_SITE_REGEX_SOURCE_UNSAFE}/${n.MARKET_ALIEXPRESS_APP_NAME}(#|/|#/)?$`)];for(const s in t)if(e.match(t[s]))return"/away.php?to="+encodeURIComponent(n.MARKET_ALIEXPRESS_HOME_URL);return""}(s),d)return l(d,t),!0}else if(d=function(e){const t=e.match(new RegExp(`/app${n.MARKET_ALIEXPRESS_APP_ID}#(?:.+)product_id=(d+)`));if(t&&t[1])return"/away.php?to="+encodeURIComponent(`${n.MARKET_ALIEXPRESS_HOME_URL}/item/${t[1]}.html`)}(s),d)return l(d,t),!0}return!1}function l(e,t){"_blank"===t.getAttribute("target")&&void 0!==t.open?t.open(e):window.location.href=e}},664822:(e,t,s)=>{"use strict";s.d(t,{AppOrderBox:()=>p});var n=s(754866),a=s(866467),r=s(593159),d=s(246429),l=s(683234),c=s(270959),u=s(449299),_=s(196829);class p{static instantSkipAppOrder(e,t){const s=(0,n.gpeByClass)("payments_instant_progress_wrap",e);let a={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,test_mode:cur.paymentsOrderTestMode,_skip_instant:t||1,hash:cur.paymentsOrderHash};void 0!==cur.checkedMaxVotes&&(a.checked_max_votes=cur.checkedMaxVotes),ajax.post("al_apps.php",a,{forceDone:1,onDone:()=>{cur.paymentsCheckOrderCnt=1,(0,d.curBox)().hide(),cur.paymentsCheckOrderCnt=0,cur.fromInstantPay=!0},showProgress:()=>s&&s.classList.add("loading"),hideProgress:()=>s&&s.classList.remove("loading")})}static processOrder(e,t){t||(t=(0,d.curBox)());const s=(0,n.isVisible)("payments_box")?2:0;let r=!1;e||(e=s),s&&(r=t.btns.ok[0],(0,l.lockButton)(r));let m={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,from:nav.objLoc[0],test_mode:cur.paymentsOrderTestMode,_votes_ok:e,hash:cur.paymentsOrderHash};1==e&&cur.paymentsOrderBillPeriod&&(m.payment_type=cur.votesType),!cur.paymentsOrderBillPeriod&&(0,n.ge)("payments_order_auto_confirm")&&(m.auto_confirm=(0,l.isChecked)("payments_order_auto_confirm")),ajax.post("al_apps.php",m,{forceDone:3==+e?1:0,onDone:(m,y,f,g,E)=>{if(g&&-1e3!==g&&(cur.votesBoxOptions=g),3==e&&-1e3==f)return _.Gifts.processBoxOptions((0,d.curBox)(),g),cur.paymentsCheckOrderCnt=1,t.hide(),void(cur.paymentsCheckOrderCnt=0);if(0===f||f>0)return cur.paymentsPreferVotes=1,s?cur.paymentsShowBoxError(y):(t.hide(),(0,c.showFastBox)(a.getLang("global_error"),y)),void((cur.paymentsOrderBillPeriod||E)&&cur.onSubscriptionFail?cur.onSubscriptionFail(f):cur.onAppOrderFail&&cur.onAppOrderFail(f));if(m.result){let e=(0,d.curBox)();return cur.isPaymentsAppOrder=!1,e&&e.hide(),(0,d.showDoneBox)(y),m.balance&&(0,u.updateMoney)(m.balance),void(cur.onSubscriptionDone&&m.subscriptionStatus&&(cur.onSubscriptionDone(m.subscriptionStatus),cur.onSubscriptionDone=!1))}const A=m.orderId;if(!A)return void(cur.paymentGetOrderItemTO=setTimeout(p.processOrder.pbind(!1,t),1e3));y&&(t=(0,c.showFastBox)("",y)).setOptions({title:!1,width:520,bodyStyle:"padding: 0;",hideButtons:!0}),r&&(0,l.unlockButton)(r),cur.isPaymentsAppOrder=!1,cur.paymentsOrderId=A,m.subscriptionId&&(cur.paymentsSubscriptionId=m.subscriptionId),cur.paymentsOrderCheckHash=m.checkHash;const b=a.getLang("payments_waiting_app_order_complete");(0,n.ge)("payments_box_progress_msg_wrap")?((0,n.val)("payments_box_progress_msg_wrap",`<span id="payments_box_progress_msg">${b}</span>`),cur.paymentsShowProgress()):(0,n.val)("apps_paymentbox_progress_msg_wrap",b),cur.paymentsCheckOrderCnt=0,cur.paymentsCheckOrderInt=setInterval(p.checkOrder,2e3)},onFail:function(e){return!e||(cur.onSubscriptionFail?cur.onSubscriptionFail():cur.onAppOrderFail&&cur.onAppOrderFail(),(0,n.isVisible)("payments_box")?cur.paymentsShowBoxError(e):(t.hide(),(0,c.showFastBox)(a.getLang("global_error"),e)),!0)}})}static checkOrder(){if(15==cur.paymentsCheckOrderCnt)(0,n.ge)("payments_box_progress_msg").innerHTML=a.getLang("payments_waiting_payment_complete_still");else if(cur.paymentsCheckOrderCnt>30)return clearInterval(cur.paymentsCheckOrderInt),(0,d.curBox)().hide(),void(0,c.showFastBox)(a.getLang("payments_app_order_box_title"),a.getLang("payments_app_add_votes_delay"),a.getLang("global_close"),(()=>{cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.onAppOrderCancel&&cur.onAppOrderCancel(),(0,d.curBox)().hide()}));cur.paymentsCheckOrderCnt++,ajax.post("al_apps.php",{act:"a_check_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,test_mode:cur.paymentsOrderTestMode,from:nav.objLoc[0],hash:cur.paymentsOrderCheckHash},{onDone:(e,t,s,n,a)=>{e&&((0,d.curBox)()&&(0,d.curBox)().hide(),clearInterval(cur.paymentsCheckOrderInt),cur.paymentsCheckOrderCnt=0,(0,d.showDoneBox)(t,{out:1e3}),s&&(0,u.updateMoney)(s),1==e?(cur.paymentsOrderBillPeriod&&cur.onSubscriptionSuccess?(cur.onSubscriptionSuccess(cur.paymentsSubscriptionId),TopNotifier&&TopNotifier.invalidate()):cur.onAppOrderSuccess&&cur.onAppOrderSuccess(cur.paymentsOrderId),cur.onSubscriptionDone&&a&&(cur.onSubscriptionDone(a),cur.onSubscriptionDone=!1)):cur.paymentsOrderBillPeriod&&cur.onSubscriptionFail?cur.onSubscriptionFail(n):cur.onAppOrderFail&&cur.onAppOrderFail(n))},onFail:function(e){return clearInterval(cur.paymentsCheckOrderInt),cur.paymentsShowBoxError(e),!0}})}static initialize(e,t,s,n,a,d,l){(0,r.extend)(cur,{isPaymentsAppOrder:!0,paymentsAuthPayment:!1,paymentsOrderNotice:!1,paymentsOrderId:e,paymentsOrderAppId:t,paymentsOrderTestMode:s,paymentsOrderHash:n,paymentsPreferVotes:a,paymentsOrderDiscount:d,paymentsOrderBillPeriod:l})}}},641608:(e,t,s)=>{"use strict";s.d(t,{MoneyTransfer:()=>N});var n=s(683234),a=s(575753),r=s(191468),d=s(898848),l=s(749284),c=s(972332),u=s(246429),_=s(270959),p=s(754866),m=s(560377),y=s(449299),f=s(593159),g=s(237625),E=s(636576),A=s(866467),b=s(126645),P=s.n(b),I=s(584427),T=s(150681),C=s(338329),O=s(342879),M=s(443291),S=s(105330),D=s(952661),k=s(810068),L=s(377803),x=s(428374);const R=1,B=2,F=-1,N={initHandlers(){(0,C.tq)().setInteractiveHandler("MoneyTransfer/receive_method_change",(e=>{const t=e.payload.event.target;if((0,p.hasClass)(t,"disabled"))return;const{value:s,name:n}=e.payload.dataAttrs;N.onReceiveMethodChange(t,s,n)})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/in_chat_focus_amount",(()=>{(0,p.elfocus)("transfer_amount")})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/check_user_message",(()=>{N.checkUserMessage()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/show_hint",(e=>{(0,O.showHint)(e.payload.event.target)})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/send",(e=>{N.send(Boolean(e.payload.dataAttrs.newWindow))})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/check_participate",(e=>{(0,n.checkbox)(e.payload.event.target),N.checkRequestParticipate()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/check",(e=>{(0,n.checkbox)(e.payload.event.target)})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/check_auto_accept",(e=>{(0,n.checkbox)(e.payload.event.target),N.checkAutoAccept()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/about",(e=>{N.aboutBox(e.payload.dataAttrs.aboutKey)})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/history",(()=>{N.historyBox()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/hide_pin_box",(()=>{N.hidePinBox()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/check_vk_pay_offer",(()=>{N.checkVkPayOfferBox()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/clean_amount",(e=>{N.cleanAmount(e.payload.event.target,e.payload.event,Boolean(e.payload.dataAttrs.onlyClean))})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/send_amount_on_enter",(e=>{13===e.payload.event.keyCode&&N.send(),N.autosizeAmount()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/focus_from_to",(e=>{(0,p.elfocus)(e.payload.event,0,1e4)})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/focus_and_hide_link",(e=>{(0,p.elfocus)(e.payload.event,0,1e4),N.hideLinkCopied()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/copy_link",(e=>{N.copyLinkToClipboard((0,p.ge)(e.payload.dataAttrs.element))})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/share_qr",(()=>{N.shareQRCode()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/download_qr",(()=>{N.downloadQRCode()})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/switch_to_transfer_box",(e=>{N.switchBoxSection(e.payload.event.target,"transfer")})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/switch_to_request_box",(e=>{N.switchBoxSection(e.payload.event.target,"request")})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/switch_to_link_box",(e=>{N.switchBoxSection(e.payload.event.target,"link")})),(0,C.tq)().setInteractiveHandler("MoneyTransfer/init_accept",(()=>{N.initAccept(cur.paymentsOptions.chkData,cur.paymentsOptions.frame,!0)}))},init(){this.initHandlers();const e=(0,u.curBox)();if((0,p.ge)("payments_box")!=(0,p.geByClass1)("payments_money_transfer_box",e.bodyNode)&&_message_boxes.length>1){let e=!0;_message_boxes.forEach((function(t,s){e&&(0,p.ge)("payments_box")==(0,p.geByClass1)("payments_money_transfer_box",t.bodyNode)&&(boxLayer.removeChild((0,p.gpeByClass)("popup_box_container",t.bodyNode)),boxQueue._boxes.splice(s,1),delete _message_boxes[s],e=!1)}))}if(cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip),e.setOptions({grey:!0}),cur.paymentsOptions.requestId&&!cur.paymentsOptions.vkpayAvailable&&(e.changed=!0,e.setOptions({width:510}),N.send()),(0,l.placeholderInit)("transfer_amount"),(0,l.placeholderInit)("transfer_comment"),cur.paymentsOptions.isChat){if((0,l.placeholderInit)("transfer_chunk_amount"),cur.autoacceptCardDD=new x.InlineDropdown("transfer_autoaccept_card",{items:cur.paymentsOptions.cards,selected:cur.paymentsOptions.cardSeleceted,withArrow:!0,onShow:N.enableAutoaccept,onSelect:e=>{-1==e?N.sendBind():cur.paymentsOptions.vkpayAvailable&&N.checkAmount((0,p.val)("transfer_amount"))}}),cur.autoacceptCardEl=(0,p.ge)("transfer_autoaccept_card"),(0,p.toggleClass)("transfer_autoaccept_card","disabled",!cur.paymentsOptions.autoAcceptEnabled),cur.paymentsOptions.autoAcceptEnabled&&(0,n.checkbox)("transfer_autoaccept",!0),cur.paymentsOptions.cards.length<2){let e=(0,p.ce)("a",{id:"payments_money_transfer_new_card_lnk",innerHTML:A.getLang("payments_money_transfer_new_card")});(0,c.addEvent)(e,"mousedown",N.sendBind),(0,p.hide)(cur.autoacceptCardEl),cur.autoacceptCardEl.parentNode.appendChild(e)}}else if((0,p.ge)("transfer_to")){(0,p.hide)("payments_money_transfer_user");let e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo=new Dropdown((0,p.ge)("transfer_to"),cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]})),{big:!0,introText:A.getLang("votes_transfer_start_typing_recipient"),noResult:"",placeholder:A.getLang("votes_transfer_choose_recipients"),multiselect:!1,enableCustom:!0,autocomplete:!0,imageId:"transfer_to_photo",indexkeys:[1,4],noImageSrc:"/images/blank.gif",onChange:e=>{if(!e||-1==e)return;const t=cur.uiTransferTo.val_full();cur.paymentsOptions.toId=t[0],cur.paymentsOptions.hash=t[5],(0,p.val)("payments_money_transfer_summary",t[6]),setTimeout(p.elfocus.pbind("transfer_amount"),100),cur.paymentsOptions.vkpayAvailable&&N.updateMethods()}})}else(0,p.ge)("transfer_method")&&N.initMethods();setTimeout(p.elfocus.pbind("transfer_amount"),100),(0,r.shortCurrency)(),"link"===cur.paymentsOptions.boxTab&&N.genQRCode();let t=(0,p.val)("transfer_amount");t&&N.checkAmount(t,!1,!0),N.autosizeAmount(),N.showMoneyLinksTooltip(),cur.transferPageLoaded=!1,cur.destroy.push(N.destroy)},destroy(){N.stopCheckFrameLoad(),cur.uiTransferTo&&cur.uiTransferTo.destroy(cur.uiTransferTo),cur.qrFrame&&(0,p.re)(cur.qrFrame)},initMethods(){cur.paymentsOptions.onlyCards=!(0,p.isVisible)("payments_money_transfer_receive_methods");let e=cur.paymentsOptions.cardSelected;if([B,R].includes(parseInt(cur.paymentsOptions.forceType)))for(const[t]of cur.paymentsOptions.cards)t===F&&(e=F);if(cur.uiTransferCard=new Dropdown((0,p.ge)("transfer_method"),cur.paymentsOptions.cards,{big:!0,selectedItems:e,onChange:(e,t)=>{if(-2===parseInt(e)){const e=(0,p.se)(t);nav.go(e.getAttribute("data-url"));const s=document.querySelector("#payments_money_transfer_send");return D.FlatButton.lock(s),!1}N.updateTransferType(),N.updateCardFee(!0),(0,p.val)("transfer_amount")||setTimeout(p.elfocus.pbind("transfer_amount"),100)}}),!cur.paymentsOptions.onlyCards){(0,p.geByClass1)("payments_money_transfer_receive_options","payments_money_transfer_receive_methods")&&(window.radioBtns.receiveOptions={els:Array.prototype.slice.apply((0,p.geByClass)("radiobtn")),val:e==F?"vkpay":"cards"})}if(void 0!==cur.paymentsOptions.vkpayBalance&&((0,f.each)((0,p.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,c.addEvent)(this,"mousedown",N.onPinClick),(0,c.addEvent)(this,"keyup",N.onPinKeyUp),(0,c.addEvent)(this,"keypress",N.onPinEnter)})),N.isVKPayFillUpEnabled())){const e=N.getBindCards();e.length>0&&(cur.uiFillUpCard=new Dropdown((0,p.ge)("fill_up_card"),e,{big:!0,selectedItems:cur.paymentsOptions.fillUpCardSelected}))}const t=!cur.paymentsOptions.transferType||cur.paymentsOptions.forceType;t&&N.updateTransferType(),N.updateCardFee(!t)},updateLocalStorageNewWindowSign(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+20+20*Math.random());return localStorage.setItem("money_transfer_new_window",t.getTime()),t},getLocalStorageNewWindowSign(){let e=parseInt(localStorage.getItem("money_transfer_new_window")??0);if(1===e)e=N.updateLocalStorageNewWindowSign().getTime();else if(0===e)return!1;return e>(new Date).getTime()},updateMethods(){const e=cur.paymentsOptions.toId;if(!e||!cur.paymentsOptions.vkpayAvailable||!k.Ranges.isUserIdTransitional(e)&&!k.Ranges.isChatOrChannelPeer(e))return;const t=document.querySelector("#payments_money_transfer_send");(0,p.val)("payments_box_error",""),cur.moneyTranferMethodsReq&&(cur.moneyTranferMethodsReq.abort(),cur.moneyTranferMethodsReq=null),"request"!==cur.paymentsOptions?.boxTab&&(cur.moneyTranferMethodsReq=ajax.post("al_payments.php?act=a_get_money_transfer_methods",{to_id:e},{onDone:(e,s)=>{D.FlatButton.unlock(t),(0,p.val)("payments_money_transfer_methods",e),cur.paymentsOptions=(0,f.extend)(cur.paymentsOptions,s),cur.paymentsOptions.transferType=s.transferType,N.initMethods()},onFail:e=>(e&&(0,d.isString)(e)&&(D.FlatButton.unlock(t),N.showError(e)),!0),showProgress:()=>D.FlatButton.lock(t)}))},send(e=!1,t=!1){const s=(0,u.curBox)(),a=document.querySelector("#payments_money_transfer_send");if(D.FlatButton.isLocked(a))return;if(!cur.paymentsOptions.toId&&cur.uiTransferTo)return void(0,n.notaBene)(cur.uiTransferTo.container);let r=0;if(N.resetTransferWindow(),!(0,p.isVisible)("payments_money_transfer_no_amount_wrap")){if(r=(0,p.val)("transfer_amount"),!r||r<=0)return(0,p.addClass)("payments_money_transfer_amount_wrap","money_error"),setTimeout(p.removeClass.pbind("payments_money_transfer_amount_wrap","money_error"),500),void(0,p.elfocus)("transfer_amount");if(!N.checkAmount(r,!0))return;if((0,n.isChecked)("transfer_participate")){r-=N.getChunkAmount(r,!0)}}if(N.hideMoneyLinksTooltip(),cur.paymentsOptions.onSendStart&&cur.paymentsOptions.onSendStart(),"request"===cur.paymentsOptions.boxTab)return void N.sendRequest(r);N.createFrame();let d={act:"a_init_money_transfer",to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:r,currency:cur.paymentsOptions.currency,comment:(0,p.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash,accept_vk_pay_offer:cur.paymentsOptions.shouldAcceptVkPayOffer};if(cur.paymentsOptions.vkpayAvailable&&(d.card_id=cur.uiTransferCard.val(),cur.paymentsOptions.onlyCards||(d.receive_method=(0,n.radioval)("receiveOptions")),"-1"===d.card_id)){if(!t)return void N.showPinBox();d.vkpay_pin=t}if(N.isVKPayTransfer()&&N.isVKPayFillUpEnabled()&&N.isFillUpCardSelectionVisible()&&(d.fill_up_card_id=cur.uiFillUpCard.val()),cur.paymentsOptions.requestId&&(d.request_id=cur.paymentsOptions.requestId),cur.paymentsOptions.statSessionId&&(d.stat_session_id=cur.paymentsOptions.statSessionId),(0,p.val)("payments_box_error",""),e||!localStorage||this.isVKPayTransfer()||"-1"===d.card_id||(e=N.getLocalStorageNewWindowSign()),e){cur.paymentsOptions.qid&&(d.act="a_continue_money_transfer",d.qid=cur.paymentsOptions.qid),cur.transferWindow=window.open("","Money Transfer");let e=I.PaymentsBox.popupHtml(A.getLang("payments_cards_redirect"),"","");cur.transferWindow.document.write(e)}ajax.post("al_payments.php",d,{onDone:(t,a)=>{if(a)if(cur.paymentsOptions.qid=t.qid,e)cur.transferWindow?N.updateTransferWindow(a):N.showError(A.getLang("payments_payment_cancelled"),"info_msg");else{let e;cur._popup_text=a,cur._popup_callback=function(){(0,p.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_prg","payments_iframe_cookie_disabled_div"),(0,p.show)("payments_money_transfer_iframe","payments_iframe_container"),cur.uiTransferTo&&((0,p.hide)("payments_money_transfer_user_select"),(0,p.show)("payments_money_transfer_user")),(0,p.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",N.frameMessage,!1),s.changed=!0,s.setOptions({width:510}),!cur.paymentsOptions.requestId&&(0,p.isVisible)(s.titleWrap)&&s.setBackTitle(N.resetSendBox),(0,p.setStyle)(e,{width:(0,p.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},e=(0,p.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(a),e.contentWindow.document.close(),cur._popup_callback(),N.startCheckFrameLoad(+new Date)}else cur.paymentsOptions.receiptRedesign&&window.addEventListener("message",N.frameMessage,!1),(0,p.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_container",(0,p.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,p.hide)("payments_money_transfer_user_select"),(0,p.show)("payments_money_transfer_user")),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg");N.startCheckStatus(t,e)},onFail:e=>(N.resetTransferWindow(),N.showError(e),!0),showProgress:()=>D.FlatButton.lock(a),hideProgress:()=>D.FlatButton.unlock(a)})},sendRequest(e){let t=document.querySelector("#payments_money_transfer_send"),s={to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:e,currency:cur.paymentsOptions.currency,comment:(0,p.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash};if(cur.paymentsOptions.statSessionId&&(s.stat_session_id=cur.paymentsOptions.statSessionId),cur.paymentsOptions.isChat){if(s.total_amount=parseInt(e),s.amount=parseInt((0,p.val)("transfer_chunk_amount")),s.pin_message=(0,n.isChecked)("transfer_pin_message")?1:0,(0,n.isChecked)("transfer_autoaccept")&&(cur.autoacceptCardDD&&(s.accept_card=cur.autoacceptCardDD.val()),!s.accept_card||-1==s.accept_card))return N.showError(A.getLang("payments_money_request_error_no_accept_card")),!1;let t=!1;const a=N.getTransferLimit("minAmount"),r=N.getTransferLimit("maxAmount");if(a&&s.amount<a?t=A.getLang("payments_money_request_error_min_chunk_amount_currency"):r&&s.amount>r?t=A.getLang("payments_money_request_error_max_chunk_amount_currency"):s.total_amount&&s.amount>s.total_amount&&(t=A.getLang("payments_money_request_error_chunk_amount_too_big")),t)return N.showError(t),(0,n.notaBene)("transfer_chunk_amount"),!1}(0,p.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_send_money_request",s,{onDone:e=>{(0,u.curBox)().hide(),(0,u.showDoneBox)(e,{out:6e3})},onFail:e=>(N.showError(e),!0),showProgress:()=>D.FlatButton.lock(t),hideProgress:()=>D.FlatButton.unlock(t)})},sendBind(){const e=(0,u.curBox)();N.createFrame(),(0,p.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_summary_wrap","payments_iframe_container",(0,p.geByClass1)("msg","payments_money_transfer_iframe"),(0,p.geByClass1)("tb_tabs_wrap",e.bodyNode)),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg"),e.setBackTitle(N.resetSendBox),e.setOptions({width:510});const t={type:"card",only_auth:1,hash:cur.paymentsOptions.bindHash};(0,p.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_getvotes_charge",t,{onDone:(t,s)=>{let a;cur._popup_text=s,cur._popup_callback=function(){(0,p.hide)("payments_money_transfer_prg"),(0,p.show)("payments_iframe_container"),(0,p.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",N.frameMessage,!1),cur.autoacceptCardDD&&(0,p.isVisible)(cur.autoacceptCardEl)&&cur.autoacceptCardDD.select(cur.paymentsOptions.cards[0][0]),e.changed=!0,(0,p.setStyle)(a,{width:(0,p.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},a=(0,p.ge)("transfer_iframe"),a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(s),a.contentWindow.document.close(),cur._popup_callback(),cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTranferCheckInt=setInterval((function(){N.checkBindStatus(t),(cur.isPaymentCanceled||cur.isPaymentFailed)&&(clearInterval(cur.moneyTranferCheckInt),cur.isPaymentFailed?N.showError(A.getLang("payments_landing_cancelled")):N.showError(A.getLang("payments_payment_cancelled"),"info_msg"))}),2e3)},onFail:e=>(N.showError(e),!0)})},createFrame(){let e=(0,p.ge)("payments_iframe_container"),t=(0,p.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:510-(0,n.sbWidth)()+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t)},popupWrite(e){if(e.document.innerHTML!==cur._popup_text){e.document.write(cur._popup_text),e.document.close();try{e.document.charset="windows-1251"}catch(e){}e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback()}},resetSendBox(){const e=(0,u.curBox)();if(!e)return;const t=(0,p.geByClass1)("tb_tabs_wrap",e.bodyNode);(0,p.hide)("payments_money_transfer_iframe"),(0,p.show)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_money_transfer_summary_wrap",t,(0,p.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,p.hide)("payments_money_transfer_user"),(0,p.show)("payments_money_transfer_user_select")),t&&e.setOptions({title:""}),e.changed=!1,e.setOptions({width:510}),(0,p.isVisible)(e.titleWrap)&&e.setBackTitle(!1)},resetTransferWindow(){cur.transferWindow&&((0,p.show)("payments_money_transfer_wrap","payments_money_transfer_buttons"),(0,p.hide)("payments_money_transfer_prg","payments_money_transfer_iframe"),cur.transferWindow.location=window.location,cur.transferWindow.close()),cur.transferWindow=void 0},updateTransferWindow(e){const t=cur.transferWindow.document.getElementById("wait_text_container");t&&(t.innerHTML=""),cur.transferWindow.document.write(e),setTimeout((()=>{cur.transferWindow.document.getElementById("popup_payment_form")?.submit()}),1500),window.addEventListener("message",N.frameMessage,!1),(0,p.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,p.val)("payments_transfer_box_progress_msg",A.getLang("payments_waiting_transfer_complete")),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg")},startCheckStatus(e,t=!1){cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTransferRedirected=!1,cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=setInterval((function(){if(N.checkStatus(e,t),cur.isPaymentCanceled||cur.isPaymentFailed){let t=N.resetTransferWindow();if(t&&t(),clearInterval(cur.moneyTranferCheckInt),e.accept)return void(0,u.curBox)().hide();cur.isPaymentFailed?N.showError(A.getLang("payments_landing_cancelled")):N.showError(A.getLang("payments_payment_cancelled"),"info_msg")}}),2e3)},hideBoxQueue(){for(;boxQueue.count();)boxQueue.hideLast(!1)},stopListeningFrameMessages(){window.removeEventListener("message",N.frameMessage,!1)},checkStatus(e,t){const s={act:"a_check_money_transfer",qid:e.qid,hash:e.hash};e.accept&&(s.accept=e.accept),ajax.post("al_payments.php",s,{onDone:(s,a,r,d)=>{if(!s||4==s&&cur.moneyTransferRedirected)t&&cur.transferWindow?.closed&&(N.showError(A.getLang("payments_payment_cancelled")),N.stopListeningFrameMessages(),N.resetTransferWindow(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1);else{if(1==s||3==s){if(t){0===cur.paymentsOptions.transferType||cur.paymentsOptions.transferType===R?cur.transferWindow&&!cur.transferWindow.closed&&(N.resetTransferWindow(),N.hideBoxQueue()):(N.resetTransferWindow(),N.hideBoxQueue())}else cur.paymentsOptions.transferType===B?(N.resetTransferWindow(),N.hideBoxQueue()):cur.paymentsOptions.receiptRedesign&&((0,p.hide)(document.querySelector(".payments_money_transfer_footer")),d?.receipt_link&&N.setIframeByLink(d.receipt_link));d||(0,u.showDoneBox)(a,{out:6e3});const n=nav.objLoc;e.accept||"settings"!==n[0]||"payments"!==n.act||"transfer"!==n.section||(cur.historyOffset||(cur.historyOffset={}),cur.historyOffset.transfer=0,(0,M.showNextPaymentsHistory)(!1,n.section)),3==s&&(d&&d.title&&(0,_.showFastBox)({title:d.title},a,A.getLang("payments_remember_card_btn"),N.rememberAcceptCard.pbind(d),A.getLang("payments_dont_remember_card_btn")),TopNotifier.invalidate(),cur.acceptMoneyBtn&&(0,p.hasClass)((0,p.domPN)(cur.acceptMoneyBtn),"feedback_buttons")?((0,p.re)((0,p.domPN)(cur.acceptMoneyBtn)),cur.acceptMoneyBtn=!1):cur.acceptMoneyBtn&&((0,p.re)((0,p.geByClass1)("_decline_btn",(0,p.domPN)(cur.acceptMoneyBtn))),(0,p.domReplaceEl)(cur.acceptMoneyBtn,r),cur.acceptMoneyBtn=!1))}else if(2==s||5==s)N.showError(a),N.stopListeningFrameMessages(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1;else{if(4==s){if(cur.moneyTransferRedirected=!0,cur._popup_text=r,t&&cur.transferWindow)N.updateTransferWindow(r);else{let e;cur._popup_callback=function(){(0,p.hide)("payments_money_transfer_prg"),(0,p.show)("payments_iframe_container"),(0,p.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",N.frameMessage,!1),(0,u.curBox)().changed=!0,(0,p.setStyle)(e,{width:(0,p.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},e=(0,p.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(r),e.contentWindow.document.close(),cur._popup_callback()}return}if(6==s)return void((0,p.isVisible)("payments_money_transfer_prg")||((0,p.hide)("payments_iframe_container"),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg")))}clearInterval(cur.moneyTranferCheckInt)}},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),N.resetTransferWindow()(),N.showError(e),!0)})},checkBindStatus(e){let t={act:"a_getvotes_check",type:"card"};e&&(e.oid||e.qid)&&(t.oid=e.oid,t.qid=e.qid,t.hash=e.hash),ajax.post("al_payments.php",t,{onDone:(e,t,s)=>{e&&(1==e?(N.resetSendBox(),N.enableAutoaccept(),s&&cur.autoacceptCardDD&&((0,p.isVisible)(cur.autoacceptCardEl)||((0,p.hide)((0,p.geByTag)("A",cur.autoacceptCardEl.parentNode)[0]),(0,p.show)(cur.autoacceptCardEl)),cur.paymentsOptions.cards.unshift([s.bindingId,s.bin]),cur.autoacceptCardDD.setItems(cur.paymentsOptions.cards),cur.autoacceptCardDD.select(s.bindingId))):2!=e&&10!=e||N.showError(t),clearInterval(cur.moneyTranferCheckInt))},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),N.showError(e),!0)})},paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,N.frameHeight()},frameHeight(e,t){let s=(0,p.ge)("transfer_iframe");e?(e=Math.max(e,250),cur.prevFrameHeight=s.style.height,s.style.height=e+"px"):(s.style.height=cur.prevFrameHeight,(0,p.removeClass)("payments_iframe_container","payments_threeds_frame")),t||((0,p.ge)("payments_iframe_container").style.height=(e||cur.prevFrameHeight)+15+"px"),(0,p.ge)("payments_iframe_container").scrollTop=0},frameMessage(e){if(!(0,u.curBox)()&&cur.paymentsOptions.receiptRedesign)return void N.stopListeningFrameMessages();if(!(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-.]+\.)?money\.mail\.ru$/)||e.origin.match(new RegExp(`^https?:\\/\\/([a-zA-Z0-9\\-.]+\\.)?${S.VK_SITE_REGEX_SOURCE_UNSAFE}$`))&&cur.paymentsOptions?.receiptRedesign))return!1;let t={};if(e.data){switch(typeof e.data){case"object":t=e.data;break;case"string":"{"===e.data.substr(0,1)&&(t=(0,y.parseJSON)(e.data))}if("billing"!==t.type)return!1}vk.dev&&(0,g.debugLog)(t);const s=(0,p.geByClass1)("payments_iframe_container",(0,u.curBox)().bodyNode)||(0,p.ge)("payments_iframe_container");if(cur.transferPageLoaded=!0,"resizeFrame"===t.action?setTimeout(N.frameHeight.pbind(t.action_params.height),200):"submit"===e.data||"3dsPage"===t.action?(setTimeout(N.frameHeight.pbind(600,!0),200),(0,p.addClass)(s,"payments_threeds_frame")):"3dsFinish"===t.action?(N.frameHeight(),(0,p.removeClass)(s,"payments_threeds_frame")):"session_fail"===t.action?((0,p.hide)(s),N.resetTransferWindow(),(0,p.show)("payments_iframe_safari_trouble_div"),N.updateLocalStorageNewWindowSign()):"putPixel"===t.action&&"page_load"===t.action_params.alias?(I.PaymentsBox.finishFormMeasure("dmr_transfer"),(0,E.statlogsValueEvent)("money_transfers",0,"iframe_loaded")):"paySuccess"===t.action?setTimeout(N.frameHeight.pbind(500),300):"payError"===t.action&&(0,p.isVisible)("payments_iframe_container")&&((0,p.hide)("payments_iframe_container"),(0,p.val)("payments_transfer_box_progress_msg",A.getLang("payments_waiting_transfer_complete")),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg")),cur.paymentsOptions.receiptRedesign){if("make_one_more_transfer"===t.action||"close_window"===t.action)switch(clearInterval(cur.moneyTranferCheckInt),N.resetTransferWindow(),N.stopListeningFrameMessages(),t.action){case"make_one_more_transfer":N.resetSendBox();break;case"close_window":N.hideBoxQueue()}if("get_transfer_source"===t.action){let e=vk.dev?"*":window.location.origin;cur.transferWindow&&cur.transferWindow.postMessage(JSON.stringify({from:cur.paymentsOptions.from}),e);let t=(0,p.ge)("transfer_iframe");t&&t.contentWindow.postMessage(JSON.stringify({action:"set_transfer_source",source:cur.paymentsOptions.from}),e)}}},setIframeByLink(e){let t=(0,p.geByClass1)("payments_iframe_container",(0,u.curBox)().bodyNode)||(0,p.ge)("payments_iframe_container"),s=(0,p.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});s.frameBorder=0,t.innerHTML="",t.appendChild(s),(0,p.hide)((0,p.ge)("payments_money_transfer_prg")),(0,p.show)(t),s.src=e},startCheckFrameLoad(e){cur.frameLoadChecker=setInterval((function(){if(cur.transferPageLoaded)N.stopCheckFrameLoad();else{+new Date-e>5e3&&(N.stopCheckFrameLoad(),N.resetTransferWindow(),(0,p.hide)("payments_iframe_container"),(0,p.show)("payments_iframe_safari_trouble_div"),N.updateLocalStorageNewWindowSign())}}),1e3)},stopCheckFrameLoad(){clearInterval(cur.frameLoadChecker)},initAccept(e,t,s=!1){if(s)cur.transferWindow=window.open("/","Money transfer"),cur.transferWindow.document.write(t),(0,p.hide)("payments_box_error","payments_iframe_container","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,p.val)("payments_transfer_box_progress_msg",A.getLang("payments_waiting_transfer_complete")),(0,p.show)("payments_money_transfer_iframe","payments_money_transfer_prg");else{let e=(0,p.geByClass1)("payments_iframe_container",(0,u.curBox)().bodyNode)||(0,p.ge)("payments_iframe_container");(0,p.show)(e);let s=(0,p.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});s.frameBorder=0,e.innerHTML="",e.appendChild(s),s.contentWindow.document.open("text/html","replace"),s.contentWindow.document.write(t),s.contentWindow.document.close(),N.startCheckFrameLoad(+new Date)}window.addEventListener("message",N.frameMessage,!1),N.startCheckStatus(e,s)},rememberAcceptCard(e){const t=(0,u.curBox)()||{};let s=t.btns.ok[0];ajax.post("al_payments.php?act=a_remember_money_transfer_accept_card",{card_id:e.card_id,hash:e.hash},{onDone:t.hide,showProgress:()=>D.FlatButton.lock(s),hideProgress:()=>D.FlatButton.unlock(s)})},cleanAmount(e,t,s){if(13===t.keyCode)return;let n=e.value.replace(/[^0-9]/g,"");n=n.replace(/^0+/,""),e.value!=n&&(e.value=n),s||(N.checkAmount(n),N.autosizeAmount(),cur.paymentsOptions.cardsFee&&N.updateCardFee(!0))},getTransferLimit(e){let t="request"===cur.paymentsOptions.boxTab?0:cur.paymentsOptions.transferType;return"balance"===e&&parseInt(t)===B?cur.paymentsOptions.vkpayBalance:(cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab&&"maxAmount"===e&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(t=2),cur.paymentsOptions.limits[t][e])},checkAmount(e,t,s){let a=!1;const r=(0,p.hasClass)("payments_money_transfer_amount_wrap","money_error"),d=parseInt(cur.uiTransferCard?.val())===F,l=N.isVKPayTransfer(),c=N.isVKPayFillUpEnabled();if(t&&r)return l&&e>N.getTransferLimit("balance")&&!c&&(0,_.showFastBox)({title:A.getLang("payments_vkpay_low_balance_title"),width:420},A.getLang("payments_vkpay_low_balance_text"),A.getLang("payments_vkpay_topup_button"),nav.go.pbind("/vkpay#action=refill"),A.getLang("global_close")),!1;const u=cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab,m=u&&(0,n.isChecked)("transfer_participate"),y=N.getTransferLimit("minAmount")*(m?2:1),f=N.getTransferLimit("maxAmount"),g=N.getTransferLimit("balance"),E=(0,A.langNumeric)(y,cur.paymentsOptions.currencyStr,!0),b=A.getLang("payments_money_transfer_amount_limits").replace("{min_amount}",E);let P=!u;if(u&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(P=!0),d&&l&&c&&!(void 0!==g&&e<=g)||N.hideFillUpCardSelection(),t&&y&&e<y)a=A.getLang("payments_money_transfer_error_min_amount_currency").replace("{min_amount}",E);else if(f&&P&&e>f){const e=(0,A.langNumeric)(f,cur.paymentsOptions.currencyStr,!0);a=A.getLang("payments_money_transfer_error_max_amount_currency").replace("{max_amount}",e)}else if(d&&void 0!==g&&e>g)if(l&&c){N.getBindCards().length>0?N.showFillUpCardSelection():a=A.getLang("payments_money_transfer_low_balance")}else a=A.getLang("payments_money_transfer_low_balance");const I=(0,p.ge)("payments_money_transfer_notice");if(0!=a)return(0,p.val)(I,a),(0,p.addClass)("payments_money_transfer_amount_wrap","money_error"),!1;if((r||s||e<y)&&((e<y||"request"===cur.paymentsOptions.boxTab)&&(0,p.val)(I,b),(0,p.removeClass)("payments_money_transfer_amount_wrap","money_error")),!t&&u){const t=N.getChunkAmount(e,m);if((0,p.val)("transfer_chunk_amount",t),y&&e<y)(0,p.val)(I,b);else{const s=m?e-t:e,n=(0,A.langNumeric)(s,cur.paymentsOptions.currencyStr,!0);(0,p.val)(I,A.getLang("payments_money_transfer_will_be_requested").replace("{amount}",n))}}return!0},getChunkAmount(e,t){const s=N.getTransferLimit("minAmount"),n=N.getTransferLimit("maxAmount");let a=Math.max(s||100,Math.ceil(e/Math.max(1,cur.paymentsOptions.chatCount-(t?0:1))));return n&&(a=Math.min(a,n)),a},autosizeAmount(){let e=(0,p.ge)("transfer_amount"),t=(0,p.ce)("span",{innerHTML:e.value||"0"},{fontFamily:(0,p.getStyle)(e,"fontFamily"),fontSize:(0,p.getStyle)(e,"fontSize"),fontWeight:(0,p.getStyle)(e,"fontWeight")});(0,p.ge)("utils").appendChild(t);let s=Math.floor((0,p.getSize)(t)[0])+50;(0,p.re)(t),cur.amountMinSize||(cur.amountMinSize=80),s<cur.amountMinSize&&(s=cur.amountMinSize),(0,p.setStyle)(e,{width:s})},checkUserMessage(){(0,y.checkTextLength)(cur.paymentsOptions.maxTextLength,(0,p.ge)("transfer_comment"),(0,p.ge)("transfer_comment_limit_message"),!1,!0),((0,p.val)("transfer_comment_limit_message")&&(0,p.isVisible)("transfer_comment_limit_message")?p.hide:p.show)("payments_money_transfer_fee_link")},checkRequestParticipate(){N.checkAmount((0,p.val)("transfer_amount"))},checkRequestNoAmount(e,t){e&&uiTabs.switchTab(e),t?((0,p.hide)("payments_money_transfer_amount_wrap","transfer_participate"),(0,p.show)("payments_money_transfer_no_amount_wrap")):((0,p.hide)("payments_money_transfer_no_amount_wrap"),(0,p.show)("payments_money_transfer_amount_wrap","transfer_participate"),(0,p.elfocus)("transfer_amount"))},checkAutoAccept(){(0,p.toggleClass)("transfer_autoaccept_card","disabled",!(0,n.isChecked)("transfer_autoaccept"))},enableAutoaccept(){(0,n.isChecked)("transfer_autoaccept")||((0,n.checkbox)("transfer_autoaccept",!0),(0,p.removeClass)("transfer_autoaccept_card","disabled"))},showMoneyTransferBox:(e,t,s=void 0,n=null)=>(0,_.showBox)("al_payments.php",{...e,act:"money_transfer_box"},{...t,onDone(e,t){n?.(),cur.paymentsOptions=t,e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),nav.objLoc.z&&"moneysend"===nav.objLoc.z.substr(0,9)&&(delete nav.objLoc.z,nav.setLoc(nav.objLoc))}}),N.init()},onFail:s}),aboutBox:e=>!(0,_.showFastBox)({title:A.getLang("payments_money_transfer_about_title"),width:560},A.getLang(e)),showError(e,t){e&&((0,p.ge)("payments_box_error").innerHTML="",(0,m.showMsg)("payments_box_error",e,t||"error"),(0,p.show)("payments_box_error")),(0,p.ge)("payments_money_transfer_wrap")&&(N.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1))},switchBoxSection(e,t){if(cur.paymentsOptions.boxTab!==t){if(e&&uiTabs.switchTab(e),"transfer"===cur.paymentsOptions.boxTab&&(0,p.isVisible)("payments_money_transfer_iframe")&&(N.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1)),"transfer"===cur.paymentsOptions.boxTab&&cur.paymentsMoneyBoxTTHide&&cur.paymentsMoneyBoxTTHide(),"link"===cur.paymentsOptions.boxTab&&((0,p.hide)("payments_money_link_box"),(0,p.show)("payments_money_transfer_request_box"),N.hideMoneyLinksTooltip()),cur.paymentsOptions.boxTab=t,"link"===t)(0,p.hide)("payments_money_transfer_request_box"),(0,p.show)("payments_money_link_box"),N.hideMoneyLinksTooltip(),N.genQRCode(),N.showMoneyLinksTooltip();else{(0,p.val)("payments_money_transfer_summary",cur.paymentsOptions.boxSections[t].summary);const e=document.querySelector("#payments_money_transfer_send");D.FlatButton.setLabel(e,cur.paymentsOptions.boxSections[t].btn),(0,p.val)("payments_money_transfer_user_select_label",cur.paymentsOptions.boxSections[t].user_select_label),N.checkAmount((0,p.val)("transfer_amount"),!1,!0),"transfer"===t&&N.updateCardFee(!0)}(0,p.toggle)("payments_money_transfer_nf_warning","transfer"===t),(0,p.toggle)("payments_money_transfer_methods","transfer"===t),(0,p.toggle)("payments_money_transfer_vk_pay_offer","transfer"===t),N.renderSelectBox(),setTimeout(p.elfocus.pbind("transfer_amount"),100)}},genQRCode(){const e=(0,p.ge)("payments_money_transfer_qr");if(e.childNodes.length)return;const t={isShowLogo:!0,isShowBackground:!1,foregroundColor:L.default.colorTextPrimary.normal.value,logoColor:L.default.colorIconAccent.normal.value};(0,p.val)(e,P().createQR(cur.paymentsOptions.transferLink,115,"qr-code",t))},shareQRCode(){N.hideMoneyLinksTooltip(!0),(0,_.showBox)("like.php",{act:"publish_box",object:"moneysend"+vk.id+"_0",list:""})},downloadQRCode(){if(!cur.paymentsOptions.qrUrl)return!1;let e=(0,p.ce)("iframe",{src:cur.paymentsOptions.qrUrl});return utilsNode.appendChild(e),cur.qrFrame&&(0,p.re)(cur.qrFrame),cur.qrFrame=e,!1},hideLinkCopied(){(0,f.each)((0,p.geByClass)("_link_copied","payments_money_link_box"),p.hide.pbind(this))},copyLinkToClipboard(e){N.hideLinkCopied(),N.hideMoneyLinksTooltip(!0),e.select(),document.execCommand("copy");const t=(0,p.geByClass1)("_link_copied",(0,p.gpeByClass)("_link_wrap",e));(0,p.show)(t)},renderSelectBox(){if(!cur.uiTransferTo)return;const e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo.setData([]),cur.uiTransferTo.setOptions({autocomplete:!1}),cur.uiTransferTo.setData(cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]}))),cur.uiTransferTo.setOptions({autocomplete:!0}),cur.paymentsOptions.toId=null,cur.paymentsOptions.hash=null,cur.uiTransferTo.clear(),cur.uiTransferTo.deselectTokens(),(0,p.val)("payments_money_transfer_methods","")},updateImHistory(e,t,s){const n=(0,p.geByClass1)("_money_transfer"+t,e);if(!n)return;let a=(0,p.geByClass1)("_accept_btn",n);a&&((0,p.re)((0,p.geByClass1)("_decline_btn",(0,p.domPN)(a))),(0,p.domReplaceEl)(a,s))},initHistoryBox(e,t,s,r){let d=(0,p.ge)("ui_money_transfer_load_more");if(d){let l=(0,p.ge)("settings_transfer_history").tBodies[0];cur.userAutoScroll=new T.default(l,{offset:s,onNoMore:p.re.pbind(d),onNeedRows:(s,n)=>{let a={act:"money_transfer_history_box",offset:n,owner_id:e};t&&(a.request_id=t),r&&(a.hash=r),ajax.post("al_payments.php",a,{onDone:s})},drawRows:(e,t)=>{if(a.browser.msie){const s=(0,p.se)("<table>"+t+"</table>");t=(0,p.geByTag)("tr",s);for(let s in t)1==t[s].nodeType&&e.appendChild(t[s])}else e.insertAdjacentHTML("beforeEnd",t)},showProgress:()=>(0,n.lockButton)(d),hideProgress:()=>(0,n.unlockButton)(d),rowClass:"settings_history_row"})}},historyBox(){(0,_.showBox)("al_payments.php?act=money_transfer_history_box")},showMoneyLinksTooltip(){if(!cur.paymentsOptions.moneylinks_feature_tooltip||cur.moneyLinksTooltip)return;let e,t,s;(0,p.isVisible)("payments_money_link_box")?(e=(0,p.geByClass1)("payments_money_transfer_link_copy_btn","payments_money_link_box"),t=A.getLang("payments_money_link_btn_feature_text"),s={forceSide:"right",width:320,offset:[6,0]}):(e=(0,p.geByClass1)("ui_tab",(0,p.geByClass1)("_moneylink_tab","box_layer")),e&&(t=A.getLang("payments_money_link_tab_feature_text"),s={forceSide:"bottom",width:250,offset:[0,4]})),e&&setTimeout((function(){cur.moneyLinksTooltip=new ElementTooltip(e,(0,f.extend)({content:'<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>'+t,cls:"feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:(0,p.geByClass1)("ui_tabs","box_layer"),onHide:N.hideMoneyLinksTooltip.pbind(!0)},s)),cur.moneyLinksTooltip.show(),cur.destroy.push(N.hideMoneyLinksTooltip)}),500)},hideMoneyLinksTooltip(e){e&&ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.paymentsOptions.moneylinks_feature_tooltip_hash,type:"moneylinks"}),cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip)},showPinBox(){(0,p.addClass)((0,u.curBox)().bodyNode,"payments_box_code_showed"),(0,p.show)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,f.each)((0,p.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,p.val)(this,"")})),(0,p.elfocus)("payments_code1"),(0,u.curBox)().changed=!0;const e=document.querySelector("#payments_money_transfer_send");e&&(e.style.pointerEvents="none",setTimeout((()=>{e.style.pointerEvents="auto"}),0))},hidePinBox(){(0,p.hide)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,p.removeClass)((0,u.curBox)().bodyNode,"payments_box_code_showed"),(0,u.curBox)().changed=!1},checkVkPayOfferBox(){const e="payments_money_transfer_vk_pay_offer_box",t=!(0,n.isChecked)(e),s=document.querySelector("#payments_money_transfer_send");D.FlatButton.setDisabled(s,!t),(0,n.checkbox)(e)},onPinKeyUp(e){const t=e.target;if(8==e.keyCode){const e=(0,p.domPS)(t);if(e){const t=e.getAttribute("data-index");(0,p.val)(e,""),cur.paymentsOptions.vkpcode[t]="",cur.paymentsOptions.vkpcode[t-1]="",(0,p.elfocus)(e)}}},onPinEnter(e){const t=e.target;if(!(e.keyCode>=47&&e.keyCode<=57))return(0,c.cancelEvent)(e);{const s=t.getAttribute("data-index");cur.paymentsOptions.vkpcode||(cur.paymentsOptions.vkpcode=[]),cur.paymentsOptions.vkpcode[s-1]=e.key,(0,p.val)(t,String.fromCharCode(9679));const n=(0,p.domNS)(t);n?setTimeout(p.elfocus.pbind(n),10):setTimeout((function(){t.blur(),N.checkPin()}),10)}},onPinClick(e){const t=e.target,s=(0,p.domPS)(t);if(s&&!(0,p.val)(s))return(0,c.cancelEvent)(e)},checkPin(){const e=cur.paymentsOptions.vkpcode.join("");delete cur.paymentsOptions.vkpcode,(0,p.val)("payments_money_transfer_code_error",""),ajax.post("al_payments.php?act=a_check_vkpay_pin",{code:e,hash:cur.paymentsOptions.pinHash},{onDone:t=>{if(1==t)return(0,p.hide)((0,p.geByClass1)("_code_enter","payments_money_transfer_code_box")),void(0,p.show)((0,p.geByClass1)("_code_recover","payments_money_transfer_code_box"));N.hidePinBox(),N.send(!1,e)},onFail:e=>(e&&(0,p.val)("payments_money_transfer_code_error",e),(0,f.each)((0,p.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,p.val)(this,""),(0,n.notaBene)(this)})),(0,p.elfocus)("payments_code1"),!0),showProgress:function(){(0,p.hide)("payments_money_transfer_code_wrap"),(0,p.show)("payments_money_transfer_spinner")},hideProgress:function(){(0,p.hide)("payments_money_transfer_spinner"),(0,p.show)("payments_money_transfer_code_wrap")}})},onReceiveMethodChange(e,t,s){(0,n.radiobtn)(e,t,s),N.updateTransferType(e),N.updateCardFee(!0)},updateTransferType(e){void 0!==cur.paymentsOptions.forceType?cur.paymentsOptions.transferType=cur.paymentsOptions.forceType:parseInt(cur.uiTransferCard.val())===F?cur.paymentsOptions.transferType=B:cur.paymentsOptions.onlyCards?cur.paymentsOptions.transferType=0:(void 0===e&&(0,f.each)(radioBtns.receiveOptions.els,(function(){(0,p.hasClass)(this,"on")&&(e=this)})),void 0!==e&&(cur.paymentsOptions.transferType=(0,f.intval)((0,p.attr)(e,"data-type")))),N.checkAmount((0,p.val)("transfer_amount"),!1,!0)},updateCardFee(e){if(!cur.uiTransferCard||"request"===cur.paymentsOptions.boxTab)return;const t=(0,f.intval)((0,p.val)("transfer_amount")),s=N.getTransferLimit("minAmount"),n=(0,p.ge)("payments_money_transfer_to_card"),a=cur.uiTransferCard.val(),r=cur.paymentsOptions.cardsFee[a],d=0===cur.paymentsOptions.transferType,l=parseInt(a)===F||cur.paymentsOptions.forceType===R||cur.paymentsOptions.forceType===B,c=parseInt(a)!==F&&!cur.paymentsOptions.receiverVkpay||0===cur.paymentsOptions.forceType;let u=A.getLang("payments_transfer_without_fee"),_=A.getLang("payments_money_transfer_btn"),m=l?"payments_money_transfer_to_vkpay":"payments_money_transfer_to_card",y=c,g=0;if((0,p.toggleClass)(n,"disabled",l),(0,p.toggleClass)("payments_money_transfer_to_vkpay","disabled",c),0===parseInt(a))d&&(u=cur.paymentsOptions.mastercardPromoEnabled?A.getLang("payments_transfer_method_without_fee_for_mastercard"):A.getLang("payments_money_transfer_commission_undefined"));else if(parseInt(a)===F)y=!0;else if(d&&r&&(r.percent||r.vkPay&&r.vkPay.percent)){const e=r.free_amount_rest||0,s=r.free_amount_min||0;if(!e||t>e||s&&t<s){let s=t;t>e&&(s=t-e);const n=r.percent||0,a=r.min||0,d=r.add||0;g=s*n,g<a?g=a:g+=d,g=+(Math.round(g+"e+3")+"e-3"),g=+(Math.round(g+"e+2")+"e-2"),u=(0,A.langNumeric)(g,cur.paymentsOptions.cardsFeeStr,!0)}if(r.vkPay){const e=t+g,s=r.vkPay.percent||0,n=r.vkPay.min||0,a=r.vkPay.add||0;let d=e*s;d<n?d=n:d+=a,g=+(Math.round(g+d+"e+2")+"e-2"),d=+(Math.round(d+"e+2")+"e-2"),u=(0,A.langNumeric)(g,cur.paymentsOptions.cardsFeeStr,!0),u+=(0,A.langNumeric)(d,cur.paymentsOptions.cardsFeeVkPayStr,!0)}}!m||e&&!y||(0,p.ge)(m).classList.contains("on")||(0,p.ge)(m).click(),t>=s&&!(0,p.hasClass)("payments_money_transfer_amount_wrap","money_error")&&((0,p.val)("payments_money_transfer_notice",u),0===parseInt(a)&&d||(_=(0,A.langNumeric)(+(Math.round(t+g+"e+2")+"e-2"),cur.paymentsOptions.buttonAmountStr,!0)));const E=document.querySelector("#payments_money_transfer_send");D.FlatButton.setLabel(E,_)},isVKPayFillUpEnabled:()=>1==cur.paymentsOptions.vkpayFillUpEnabled,isVKPayTransfer:()=>parseInt(cur.paymentsOptions.transferType)===B,getBindCards:()=>cur.paymentsOptions.cards.filter((e=>{const t=parseInt(e[0]);return 0!==t&&t!==F})),hideFillUpCardSelection(){(0,p.hide)("payments_money_transfer_fill_up_cards")},showFillUpCardSelection(){(0,p.show)("payments_money_transfer_fill_up_cards")},isFillUpCardSelectionVisible:()=>(0,p.isVisible)("payments_money_transfer_fill_up_cards")}},584427:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PaymentsBox:()=>PaymentsBox});var _icons_desktop__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(963251),_shared_evbus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(338329),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(575753),_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(898848),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(866467),_shared_lib_site__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(105330),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(636576),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(576854),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(246429),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(237625),_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(754866),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(972332),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(458840),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(270959),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(342879),_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(683234),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(560377),_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(449299),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(593159),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(664822),_shared_apps_MiniAppsService_utils_getCurrentApp__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(670053);class PaymentsBox{static initHandlers(){(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/ps_promo_banner_click",(e=>{(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments_ps_promo_banner_event","","votes_buypage","relocate"),PaymentsBox.getVotesAmounts(!1,"spasibo",e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/save_phone_prefix_click",(e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByTag1)("input",e.payload.target.parentNode),0,0)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/save_phone_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.saveSmsPhone()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/get_votes_amounts",(e=>{PaymentsBox.getVotesAmounts(!1,e.payload.dataAttrs.name,e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/phone_code_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.smsSendCode()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_confirm_on_enter",(e=>{13===e.payload.event.keyCode&&PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_confirm",(()=>{PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_types",(()=>{PaymentsBox.showTypes()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_terminal_tt",(e=>{PaymentsBox.paymentsShowTerminalTT(e.payload.target,e.payload.dataAttrs.name)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form",(()=>{PaymentsBox.showPhoneForm(2)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form_1",(()=>{PaymentsBox.showPhoneForm(1)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_all_prices",(e=>{PaymentsBox.showAllPrices(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/change_option",(e=>{const{index:t,name:s}=e.payload.dataAttrs;PaymentsBox.onChangeOption(e.payload.target,t,s)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/focus_votes",(()=>{PaymentsBox.onChangeOption((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("last","payments_getvotes_amounts"),4,"payments_getvotes_amounts")})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/update_pay_amount",(e=>{PaymentsBox.updatePayAmount(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/make_checkbox",(e=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.checkbox)(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/toggle_email",(e=>{PaymentsBox.toggleEmail(e.payload.target)}))}static initialize(e){PaymentsBox.initHandlers(),window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.started&&((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__.isArray)(cur.onUnidle)||(cur.onUnidle=[]),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__.isArray)(cur.onIdle)||(cur.onIdle=[]),cur.onUnidle.push((()=>{cur.getVotesDoneHide=!0})),cur.onIdle.push((()=>{cur.getVotesDoneHide=!1})));let t={bodyStyle:"padding: 0;",hideButtons:!0};if(cur.paymentsWideBox){let e={width:cur.checkoutEnabled?800:780,height:390};cur.checkoutEnabled||(e.title=!1),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,e)}else t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,{width:480});if(e.setOptions((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,{onClean:()=>{let t="sms"===cur.votesType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress");cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt);for(let e in cur.paymentsWaitingCache)cur.paymentsWaitingCache[e][2]&&clearInterval(cur.paymentsWaitingCache[e][2]);cur.smsAmountsInt&&clearTimeout(cur.smsAmountsInt),cur.isPaymentsAppOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)?e.onDone?e.onDone():(e.hide(),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__.AppOrderBox.processOrder(1,e)):cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.onAppOrderCancel?cur.onAppOrderCancel():cur.paymentsTryCompleteOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)&&e.onDone&&e.onDone(),PaymentsBox.removeCheckOffersEvent(),window.removeEventListener("message",PaymentsBox.frameMessage,!1),window.removeEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1),t&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_box_close_notice"),{out:6e3})}})),(cur.fromInstantPay||cur.paymentsAuthPayment)&&(e.onDone=!1),cur.votesBox=e,cur.destroy.push((()=>{for(;boxQueue.count();)boxQueue.hideLast(!1)})),cur.checkoutEnabled)if(cur.paymentsWideBox){PaymentsBox.showProgress(""),PaymentsBox.submitDmrCheckout(cur.paymentsPreferVotes,!0);let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_wide_box_close_btn");e&&(e.onclick=cur.votesBox.hide)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_cont"),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")))},PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm);else cur.votesTypeInit&&(PaymentsBox.getVotesAmounts(!1,cur.votesTypeInit),cur.votesTypeInit=!1)}static initPhoneCountry(e,t){cur.countries=e,cur.defCountry=t,cur.uiPhoneCountry=new Dropdown((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone_country"),cur.countries,{selectedItems:t,big:!0,autocomplete:!0,multiselect:!1,onChange:e=>{let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_phone_prefix"),n=cur.uiPhoneCountry.val_full()[3];if(0===e||"0"===e||""===e||!1===e||void 0===e){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(s);if(n==e)return;for(let t=0,s=cur.countries.length;t<s;++t)if(cur.countries[t][3]==e)return cur.uiPhoneCountry.val(cur.countries[t]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(s,n),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus.pbind(t),0)}}),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))}static initPhoneNumber(e){e&&["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){e.addEventListener(t,(e=>{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domClosestByTag)("input",e.target);t&&(t.value=t.value.replace(/\D/g,""))}))}))}static validateEmail(e){return e.length<64&&e.match(/^.{1,40}@.{1,40}$/)&&e.match(/^([a-z0-9_\-]{0,40}\.){0,10}[a-z0-9_\-*]{1,40}@(([a-z0-9][a-z0-9_\-]{0,40})?[a-z0-9]\.){1,6}[a-z]{2,7}$/i)}static getEmail(){let e=!1;if(cur.paymentsEmailCheckbox)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(cur.paymentsEmailCheckbox)){if(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(cur.paymentsEmailInput)),!e)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),""}else e="false";return e}static toggleEmail(e){"INPUT"===e.tagName&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)(e)),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(e))||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.checkbox)(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)(cur.paymentsEmailInput))}static unbind(e,t,s,n){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit"))return;const a=cur.paymentsPreferVotes;if(!s){const s="card"==e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_unbind_card_confirm"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_revoke_token_confirm");return void(cur.confirmBox=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_action_confirmation"),bodyStyle:"padding: 20px; line-height: 160%;"},s,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_unbind_card_btn"),(()=>{PaymentsBox.unbind(e,t,!0)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel")))}const r={act:"a_del_instant_method",type:e,prefer_votes:n?-1:a,hash:t};cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId),ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:function(e){return PaymentsBox.showBoxError(e),!0},showProgress:()=>{cur.confirmBox?cur.confirmBox.showProgress():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit")},hideProgress:()=>{cur.confirmBox?cur.confirmBox.hide():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit")}})}static instantPay(){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit"))return;const e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();if(cur.isPaymentAttemted=!0,cur.paymentsAuthPayment)return void e.hide();let t,s,n;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")&&(cur.votesAmountsVal=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radioval)("payments_getvotes_amounts")),void 0===cur.votesAmountsData[cur.votesAmountsVal]){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num").value,10):0;if(!(e>0))return;cur._otherVotes=e,t=cur._otherAmount,s=cur._otherAmount,n=cur.votesAmountCustomTimeHash}else t=cur.votesAmountsData[cur.votesAmountsVal][2],s=cur.votesAmountsData[cur.votesAmountsVal][3],n=cur.votesAmountsData[cur.votesAmountsVal][4];let a={act:"a_getvotes_charge",type:cur.votesType,instant_pay:1,amount:t,order_amount:s,hash:n};cur.statSessionId&&(a.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(a.order_id=cur.paymentsOrderId,a.order_app_id=cur.paymentsOrderAppId,a.order_bill_period=cur.paymentsOrderBillPeriod,a.order_hash=cur.paymentsOrderHash),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",a,{onDone:(e,t,s,n)=>{PaymentsBox.setCurMidas(n),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,e)}),2e3),PaymentsBox.showProgress&&PaymentsBox.showProgress()},onFail:e=>(PaymentsBox.showBoxError(e),!0),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton.pbind("payments_getvotes_submit"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton.pbind("payments_getvotes_submit")})}static showAllPrices(e){return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(t)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(e),!1}static paymentsShowTerminalTT(e,t){let s="";cur.paymentsTooltips[t]&&(s+=cur.paymentsTooltips[t]),s&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(e,{text:s,dir:"auto",slide:15,className:"payments_terminal_tt",shift:[-3,3],hasover:1})}static updatePayAmount(o){let v=o.value.replace(/[^0-9]/g,"");const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(parseInt(v,10));v=i<1e4?i:parseInt(i.toString().substr(0,4),10),o.value!==v.toString()&&(o.value=v);let amount=0;if(cur.votesAmountsData.calcPayAmount){-1==cur.votesAmountsData.calcPayAmount.indexOf("return")&&(cur.votesAmountsData.calcPayAmount="return "+cur.votesAmountsData.calcPayAmount);const calcFunc="(function(votes){"+cur.votesAmountsData.calcPayAmount+";})("+v+")";try{amount=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,calcFunc)}amount=amount?Math.ceil(100*amount)/100:0,amount=parseInt(amount,10)==amount?amount.toFixed(0):amount.toFixed(2),cur._otherAmount=amount,cur._otherVotes=v}const isBonusVotesDiscount=!!cur.votesAmountsData.calcBonusVotesForDiscount,isPriceDiscount=!!cur.votesAmountsData.calOriginalAmountForDiscount;let bonusElement=null;if(bonusElement=isBonusVotesDiscount?document.getElementById("personal_discount_bonus"):isPriceDiscount?document.getElementById("personal_discount_original_amount"):document.getElementById("payments_other_votes_bonus"),bonusElement&&(cur.votesAmountsData.bonusesTable||cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount)){let bonus=0;if(cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount){const calcFunc="(function(votes){"+(cur.votesAmountsData.calcBonusVotes||cur.votesAmountsData.calcBonusVotesForDiscount||cur.votesAmountsData.calOriginalAmountForDiscount)+";})("+v+")";try{bonus=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,calcFunc)}}else for(let e in cur.votesAmountsData.bonusesTable)if(v>=e){const t=Math.floor(v*cur.votesAmountsData.bonusesTable[e]/e);t>bonus&&(bonus=t)}if(bonus)if(isBonusVotesDiscount)bonusElement.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("apps_personal_discount_amount_gift_calc",bonus),bonusElement.style.display="block";else if(isPriceDiscount){let e="";e=cur.votesAmountsData.currency_str?bonus>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(bonus,cur.votesAmountsData.currency_str):"":bonus>0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_votes_cost_in_rubles",bonus):"",bonusElement.innerHTML=e,bonusElement.style.display="inline-block"}else bonusElement.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_bonus_votes",bonus),bonusElement.style.display="inline-block";else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(bonusElement)}if(cur.votesAmountsData.currency_str?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_amount").innerHTML=amount>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(amount,cur.votesAmountsData.currency_str):"":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_amount").innerHTML=amount>0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_votes_cost_in_rubles",amount):"",isPriceDiscount){const e=document.getElementById("votes_amount");e&&e.classList.add("payments_opt_gift")}}static onChangeOption(e,t,s){let n;if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radiobtn)(e,t,s),"payments_getvotes_amounts"===s){const e=cur.votesAmountsData[t];if(e){cur.votesAmountsVal=t,n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_for_X").replace("{amount}",e[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("votes_num",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("votes_amount","");const s=document.getElementById("personal_discount_original_amount");s&&(s.style.display="none"),cur.paymentsEmailCheckbox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(cur.paymentsEmailCheckbox)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)(cur.paymentsEmailInput)}else n=cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("votes_num");cur.checkoutEnabled?PaymentsBox.setButtons(n,PaymentsBox.showConfirm):PaymentsBox.setButtons(n,cur.votesAmountIsInstant||e&&e.length>=5?PaymentsBox.instantPay:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}}static setConfirmButtons(){if("card"!=cur.votesType&&cur.psList[cur.votesType]){const e=cur.paymentsWideBox?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_back_to_ps_list"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_go_ps_list");let t=!cur.psList[cur.votesType].in_menu;cur.paymentsInstantPayType==cur.votesType?t?PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_pay_order_btn"),PaymentsBox.instantPay,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_pay_order_btn"),PaymentsBox.instantPay):t?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm)}else cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}static popupWrite(e){return!(e.document.innerHTML==cur._popup_text||!cur._popup_text)&&(e.document.write(cur._popup_text),e.document.close(),e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback(),!0)}static show3DsFrame(e,t){if(cur.threeds_submitted)return!0;cur.threeds_submitted=!0;let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("cards_iframe");n||(n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:s.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"}),n.frameBorder=0,s.innerHTML="",s.appendChild(n));let a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("form",{target:"card_iframe",method:"POST",action:e});for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&a.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("input",{type:"hidden",name:e,value:t[e]}));s.appendChild(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress"),a.submit()}static submitDmrCheckout(e,t=!1){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&!t)return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");const s=cur.psList.dmr_checkout;let n=!1;const a=(e*s.vote_cost).toFixed(2);if(!e||e<=0?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):s.min_amount&&e<s.min_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",s.min_amount):s.max_amount&&e>s.max_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",s.max_amount):void 0!==s.rest_amount_day&&e>s.rest_amount_day?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",s.rest_amount_day):void 0!==s.rest_amount_week&&e>s.rest_amount_week&&(n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",s.rest_amount_week)),n)return PaymentsBox.showBoxError(n),!1;const r=PaymentsBox.getEmail();if(""===r)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),!1;if(r&&"false"!==r&&!PaymentsBox.validateEmail(r))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email")),!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame");let d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:cur.isMidas?"560px":"435px",width:d.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden",display:"block",borderRadius:"0 0 4px 4px"});l.frameBorder=0,d.innerHTML="",d.style.height=l.style.height,d.appendChild(l),window.addEventListener("message",PaymentsBox.frameMessage,!1);let c=cur.votesType;!c&&cur.votesTypeInit&&(c=cur.votesTypeInit);const u={act:"a_getvotes_charge",type:"dmr_checkout",hash:cur.paymentsHash,amount:a,stat_session_id:cur.statSessionId,votes:e};c&&(u.pay_method=c),cur.paymentsAuthPayment&&(u.only_auth=1),r&&(u.email=r),cur.votesAmountsData.appoveCode&&(u.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(u.order_id=cur.paymentsOrderId,u.order_app_id=cur.paymentsOrderAppId,u.order_bill_period=cur.paymentsOrderBillPeriod,u.order_hash=cur.paymentsOrderHash),cur.votesAmountsData.purchaseDescr&&(u.purchase_descr=cur.votesAmountsData.purchaseDescr),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_disabled")})),ajax.post("al_payments.php",u,{onDone:function(t,n,r,d){if(PaymentsBox.setCurMidas(d),!t)return;if(-2==t){const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(a));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=r,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),!cur.paymentsWideBox){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_submit");PaymentsBox.setButtons(e.innerHTML,PaymentsBox.showConfirm,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),PaymentsBox.showVotesAmounts)}cur._popup_text=n,cur._popup_callback=!1,cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container").scrollTop=0};let l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");if(l.contentWindow.document.open("text/html","replace"),l.contentWindow.document.write(n),l.contentWindow.document.close(),cur._popup_callback(),cur.isMidas){let e=l.closest(".popup_box_container");e&&(e.style.width="520px",e.style.minWidth="520px",e.style.minHeight="560px",e.style.height=null);let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");if(t.style.width="520px",t.style.minHeight="560px",t.style.height=null,l.style.width="520px",l.style.minWidth="520px",l.style.minHeight="560px",l.style.height=null,document.body.attributes.scheme&&"vkcom_dark"==document.body.attributes.scheme.value&&e&&(e.querySelector(".box_title_wrap").style.backgroundColor="#19191a",e.querySelector(".box_body").style.backgroundColor="#19191a"),cur.isHideButtonBackAndText){let t=e.querySelector(".payments_box_summary");t&&(t.style.display="none")}}cur.smsChkData=t,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("dmr_checkout",t),s.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"dmr_checkout"!=s.name&&PaymentsBox.showTypes()}),2e3)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0),frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile})}static submitCard(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");const t=cur.psList.card;let s=!1;const n=(e*t.vote_cost).toFixed(2);if(!e||e<=0?s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):t.min_amount&&e<t.min_amount?s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",t.min_amount):t.max_amount&&e>t.max_amount?s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",t.max_amount):null!=t.rest_amount_day&&e>t.rest_amount_day?s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",t.rest_amount_day):null!=t.rest_amount_week&&e>t.rest_amount_week&&(s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",t.rest_amount_week)),s)return PaymentsBox.showBoxError(s),!1;const a=PaymentsBox.getEmail();if(""===a)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),!1;if(a&&"false"!==a&&!PaymentsBox.validateEmail(a))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email")),!1;if(cur.votesAmountsData.needApprove){const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",cur.votesAmountsData.needApprove),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),delete cur.votesAmountsData.needApprove,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),void PaymentsBox.approveGetCode()}let r;if(PaymentsBox.disablePaymentTypesRows(),t.use_iframe){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:e.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t),window.addEventListener("message",PaymentsBox.frameMessage,!1)}else{const e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;r=window.open("","_blank",e),cur._popup_text=PaymentsBox.popupHtml(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_cards_redirect"),"",""),PaymentsBox.popupWrite(r)}const d={act:"a_getvotes_charge",type:"card",hash:cur.paymentsHash,amount:n,stat_session_id:cur.statSessionId};cur.paymentsAuthPayment&&(d.only_auth=1),a&&(d.email=a),cur.votesAmountsData.appoveCode&&(d.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(d.order_id=cur.paymentsOrderId,d.order_app_id=cur.paymentsOrderAppId,d.order_bill_period=cur.paymentsOrderBillPeriod,d.order_hash=cur.paymentsOrderHash),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_disabled")})),ajax.post("al_payments.php",d,{onDone:function(s,a,d,l){if(PaymentsBox.setCurMidas(l),s){if(-2==s){t.use_iframe||r.close();const s=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",s)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=d,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),t.use_iframe||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress()),cur._popup_text=a,cur._popup_callback=!1,t.use_iframe){cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container").scrollTop=0};let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(a),e.contentWindow.document.close(),cur._popup_callback()}else r.document.open("text/html","replace"),r.document.write(a),r.document.close(),r.blur(),r.focus();cur.smsChkData=s,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("card",s),!t.use_iframe&&r.closed?setTimeout((function(){cur.isPaymentComplete||(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),500):t.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"alfabank"!=t.name&&"dmr"!=t.name&&PaymentsBox.showTypes()}),2e3)}},onFail:function(e){return t.use_iframe||r.close(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0},frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile})}static trackingProtectionEnabled(e,t){let s=new XMLHttpRequest;s.open("GET","https://top-fwz1.mail.ru/counter2?id=1",!0),s.onreadystatechange=function(){200!==s.status?e():t(),s.onreadystatechange=null},s.send()}static submitPaymentSystem(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;const t=cur.votesType,s=cur.psList[t];let n=!1,a=0,r=0,d=0,l=0;if(!s.simple_redirect){if(!e)return;a=(e*s.vote_cost).toFixed(2),r=(e*s.vote_cost/cur.usdRate).toFixed(2),d=Math.floor(a),l=100*(a-d),!e||e<=0?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):s.min_amount&&e<s.min_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",s.min_amount):s.max_amount&&e>s.max_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",s.max_amount):null!=s.rest_amount_day&&e>s.rest_amount_day?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",s.rest_amount_day):null!=s.rest_amount_week&&e>s.rest_amount_week&&(n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",s.rest_amount_week))}if(n)return PaymentsBox.showBoxError(n),!1;const c=PaymentsBox.getEmail();if(""===c)return;if(c&&"false"!==c&&!PaymentsBox.validateEmail(c))return void PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email"));if(PaymentsBox.showProgress(),PaymentsBox.disablePaymentTypesRows(),"mailmoney_vkpay"===t){const e={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:a,random_auth:0,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",e,{onDone:(e,t,s,n)=>{PaymentsBox.setCurMidas(n);const a=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)(),r={noLocChange:1,skipBoxesHide:1,noClickHide:1};cur.isPaymentsAppOrder?(0,_shared_apps_MiniAppsService_utils_getCurrentApp__WEBPACK_IMPORTED_MODULE_19__.getCurrentApp)().openAppInLayer(e,!1,!0,r):(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_11__.showWiki)({w:e},!1,!1,r),a._hide(!1,!0),cur.onExternalAppDone=e=>{a._show(),e.status||(PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons(),clearInterval(cur.smsChkStatInt)),cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0)},cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.data,null,a)}),2e3)},onFail:e=>(PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}else{if(cur.votesAmountsData.oauth_url&&(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_remember_wallet")||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)("payments_remember_wallet"))){const e=cur.votesAmountsData.oauth_params;let n="";for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){n+=`<input type="hidden" autocomplete="off" name="${t}" value="${e[t]}"/>`}let r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm");r.action=cur.votesAmountsData.oauth_url,r.method="post",r.innerHTML=n;const d=cur.votesAmountsData.popup_params||{},l="_blank",u=d.width||700,_=d.height||600,p=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-u/2}, top=${Math.floor(window.screen.height/2)-_/2}, width=${u}, height=${_}`,m=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",s.title),y=`<form action="${r.action}" method="${r.method}" id="popup_payment_form" accept-charset="UTF-8">${r.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(m,y,"document.getElementById('popup_payment_form').submit()"),cur._popup_callback=!1,window.addEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1);let f=window.open("",l,p);cur.smsChkStatCnt=0,cur.oauthState=0;let g=0;return cur.smsChkStatInt=setInterval((function(){if(2==cur.oauthState)PaymentsBox.checkStatus(cur.votesType,cur.smsChkData);else if(0==cur.oauthState&&(g=cur.isPaymentComplete&&cur.paymentCompleteParams&&cur.paymentCompleteParams.code?cur.paymentCompleteParams.code:0,g)){cur.oauthState=1;let e={act:"a_getvotes_charge",type:t,oauth_code:g,hash:cur.paymentsHash,amount:a,stat_session_id:cur.statSessionId};return cur.paymentsAuthPayment&&(e.only_auth=1),c&&(e.email=c),void ajax.post("al_payments.php",e,{onDone:(e,t,s,n)=>{PaymentsBox.setCurMidas(n),cur.oauthState=2,cur.smsChkData=e},onFail:e=>(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}(f.closed&&!cur.isPaymentComplete||cur.isPaymentComplete&&!g)&&(clearInterval(cur.smsChkStatInt),cur.isPaymentComplete?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_sms_money_fail")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),2e3),void PaymentsBox.popupWrite(f)}if(cur.votesAmountsData.provider&&-1!==["dmr","paypal","yandexmoney","api_provider"].indexOf(cur.votesAmountsData.provider)){const e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",s.title);let n,r={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:a,random_auth:0,stat_session_id:cur.statSessionId};if(c&&(r.email=c),"paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_remember_wallet")?(r.remember_wallet=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)("payments_remember_wallet")||cur.forceRebind,cur.forceRebind&&(cur.forceRebind=!1)):r.remember_wallet=1,r.remember_wallet){const t=cur.votesAmountsData.popup_params||{},s=t.width||700,n=t.height||600;e=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-s/2}, top=${Math.floor(window.screen.height/2)-n/2}, width=${s}, height=${n}`}else{e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`}n=r.remember_wallet?window.open("","",e):window.open("","_blank",e);const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",s.title);cur._popup_text=PaymentsBox.popupHtml(t,"",""),PaymentsBox.popupWrite(n)}ajax.post("al_payments.php",r,{onDone:function(t,s,a,r){if(PaymentsBox.setCurMidas(r),!t)return;let d="api_provider"!==cur.votesAmountsData.provider;cur.canOpenPopup=d;let l=!d;PaymentsBox.checkStatusCallback=t=>{if("paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){if(n&&!n.closed&&!l){l=!0;let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm");s.action=t.action,s.method="get";let a="";for(let e in t.params)if(Object.prototype.hasOwnProperty.call(t.params,e)){a+=`<input type="hidden" autocomplete="off" name="${e}" value="${t.params[e]}"/>`}s.innerHTML=a;let r=`<form action="${s.action}" method="${s.method}" id="popup_payment_form" accept-charset="UTF-8">${s.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(e,r,"document.getElementById('popup_payment_form').submit()"),PaymentsBox.popupWrite(n)}(n.closed&&!cur.isPaymentComplete||cur.isPaymentComplete)&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(cur.isPaymentComplete?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_sms_money_fail"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),PaymentsBox.setConfirmButtons())}else cur._popup||(cur._popup=window.open("","_blank"))},cur.smsChkData=t,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,t)}),2e3)},onFail:function(e){return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0}})}else{if(!cur.isAdsPayment){const t={act:"a_getvotes_invoice",type:cur.votesType,amount:a,votes:e,invoice_hash:cur.votesAmountsData.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",t)}let n=s.gate_params,u="",_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm"),p=(new Date).getTime();for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let s=n[t];s=s.replace("{amount_votes}",e),s=s.replace("{amount_rub}",a),s=s.replace("{amount_usd}",r),s=s.replace("{amount_rub_int}",d),s=s.replace("{amount_rub_frac}",l),s=s.replace("{time}",p),u+=`<input type="hidden" autocomplete="off" name="${t}" value="${s}"/>`}let m=s.gate_url;m=m.replace("{time}",p),m=m.replace("{amount_votes}",e),m=m.replace("{amount_rub}",a),m=m.replace("{amount_usd}",r),m=m.replace("{amount_rub_int}",d),m=m.replace("{amount_rub_frac}",l),_.action=m,_.method=s.gate_method,_.innerHTML=u;const y="_blank",f=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;let g=!1;try{const n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",s.title),d=`<form action="${_.action}" method="${_.method}" id="popup_payment_form" accept-charset="${s.gate_charset}">${_.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(n,d,`Payments.submitPopupForm("${t}", "${e}", "${a}", "${r}")`),cur._popup_callback=!1,g=window.open("",y,f),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments","","votes",t,"start"),cur.smsChkData=!1,cur.isPaymentComplete=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,!1),g.closed&&!cur.isPaymentComplete&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),s.simple_redirect?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):PaymentsBox.setConfirmButtons())}),2e3),PaymentsBox.popupWrite(g)}catch(e){_.submit()}c&&ajax.post("al_payments.php",{act:"a_set_receipt_email",email:c,hash:cur.paymentsHash},{onFail:e=>!0})}}}static approveSendCode(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_error");let t=0;for(let s=0;s<e.length;s++)t+=parseInt(e[s]);if(t%=10,t!=cur.votesAmountsData.approveCodeChk)return PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_invalid_code")),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");cur.votesAmountsData.appoveCode=e,PaymentsBox.showConfirm()}static approveGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_approve_code",hash:cur.votesAmountsData.confirm_hash};return e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(t,s){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),1==t?PaymentsBox.showBoxError(s):e||(cur.votesAmountsData.approveCodeChk=s,PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.approveSendCode,cur.paymentsChangeType,cur.checkoutEnabled?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0}}),!1}static smsSendPin(){if(null==cur.votesAmountsVal)return!1;const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4!=e&&8!=t&&(2!=e||5!=t))return!1;const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;s.length&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",code:s,oid:cur.votesAmountsData[cur.votesAmountsVal][3],qid:cur.smsChkData.qid,hash:cur.smsChkData.hash},{onDone:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress(),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind("sms",cur.smsChkData),2e3)},onFail:function(e){return PaymentsBox.showBoxError(e),!0}}))}static smsSendCode(){if("card"===cur.votesType)return!1;if(null!=cur.votesAmountsVal){const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4==e||8==t||2==e&&5==t)return PaymentsBox.smsSendPin()}const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;e.length?((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",pid:cur.votesAmountsVal,code:e,hash:cur.votesAmountsData[cur.votesAmountsVal].hash},{onDone:function(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e&&PaymentsBox.getVotesCharge()},onFail:function(e){return PaymentsBox.showBoxError(e),!0}})):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode")}static smsGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_validate",hash:cur.votesAmountsData[cur.votesAmountsVal].hash,pid:cur.votesAmountsVal};e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(e,t){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),2==e?(PaymentsBox.showBoxError(t,"ok_msg"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode")):e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e?PaymentsBox.getVotesCharge():(PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode"),cur.paymentsWideBox?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_change_phone_number"),PaymentsBox.showPhoneForm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,cur.paymentsChangeType,PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode"),!0}})}static confirmPinCode(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value);if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");let t={act:"a_getvotes_confirm_pin",hash:cur.updateTnxHash,ps:cur.votesType,qid:cur.smsChkData.qid,pin:e};PaymentsBox.showProgress(),ajax.post("al_payments.php",t,{onDone:function(){cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,cur.smsChkData)}),2e3)},onFail:function(e){PaymentsBox.refreshBox(),PaymentsBox.showBoxError(e)}})}static checkPinKeyPress(e){if((e=e||window.event).ctrlKey||e.altKey||e.metaKey)return;let t=null;return null===e.which&&e.keyCode>=32?t=String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode&&e.which>=32&&(t=String.fromCharCode(e.which)),null!==t?!(t<"0"||t>"9")&&void 0:void 0}static fillBDay(){let params={act:"a_getvotes_fill_bday"};ajax.post("al_payments.php",params,{onDone:function(js){if(js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}}})}static showOffer(e){let t={act:"a_getvotes_offer",offer_id:e,offer_aid:cur.paymentsOfferApp||0,app_currency:cur.offersAppCurrency||0};const s=(0,_shared_apps_MiniAppsService_utils_getCurrentApp__WEBPACK_IMPORTED_MODULE_19__.getCurrentApp)();s?.options&&(t.aid=s.options.aid),cur.paymentsOfferPreview&&(t.offer_view=cur.paymentsOfferPreview),ajax.post("al_payments.php",t,{onDone:PaymentsBox.offerOnLoad,onFail:e=>(e&&(PaymentsBox.showBoxError(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap")),!0)})}static showNextOffers(e){let t={act:"a_getvotes_amounts",type:"offers",offset:cur.offersOffset,app_currency:cur.offersAppCurrency,hash:cur.paymentsHash};const s=(0,_shared_apps_MiniAppsService_utils_getCurrentApp__WEBPACK_IMPORTED_MODULE_19__.getCurrentApp)();s?.options&&(t.isAppOrder=cur.paymentsOfferApp?1:0,t.aid=s.options.aid),ajax.post("al_payments.php",t,{onDone:function(t,s){s&&(t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(e),cur.offersOffset+=20,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offers_wrap").innerHTML+=s,PaymentsBox.checkOffers())},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(e),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(e)})}static showConfirm(){cur.votesAmountsVal=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radioval)("payments_getvotes_amounts"):0;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num").value,10):0;if(void 0===cur.votesAmountsVal)return;cur.votesAmountsVal&&null==cur.votesAmountsData[cur.votesAmountsVal]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")&&!e&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("votes_num");let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_spasibo_rules_accept");if(t&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(t)){let e={text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_spasibo_rules_not_accepted"),dir:"auto",className:"payments_terminal_tt",hasover:1};return cur.paymentsWideBox&&(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(e,{shift:[-30,10]})),void(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(t,e)}if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().changed=!0,"sms"===cur.votesType){cur.isResetCheckedMaxSmsVotesValue&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_msg").innerHTML=cur.votesAmountsData.confirm_msg_again,cur.isResetCheckedMaxSmsVotesValue=!1);const t=cur.votesAmountsData.confirm_type;if(2==t&&null!=cur.votesAmountsData.checked_max_sms_votes_val&&(cur.votesAmountsVal=cur.votesAmountsData.checked_max_sms_votes_val,cur.votesAmountsData.checked_max_sms_votes_val=0,cur.isResetCheckedMaxSmsVotesValue=!0),null==cur.votesAmountsData[cur.votesAmountsVal]&&e){if(!t)return void PaymentsBox.getVotesCharge(e,!0);cur.votesAmountsData[-1]=[e,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",cur._otherAmount),cur.votesAmountsData[0][2],0],cur.votesAmountsVal=-1}void 0===cur.votesAmountsData[cur.votesAmountsVal]&&(cur.votesAmountsVal=0);const s=cur.votesAmountsData[cur.votesAmountsVal][0],n=cur.votesAmountsData[cur.votesAmountsVal][1],a=cur.votesAmountsData[cur.votesAmountsVal][2],r=cur.votesAmountsData[cur.votesAmountsVal][3],d=cur.votesAmountsData[cur.votesAmountsVal][6];if(0==a){cur.smsChkData={oid:r,qid:0,hash:cur.votesAmountsData.check_hash};let e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_to_get_send_sms",s);cur.paymentsWideBox||(e+=`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost")}`);const t=cur.votesAmountsData[cur.votesAmountsVal];if(e=e.replace("{number}",cur.votesAmountsData[cur.votesAmountsVal][4]),e=e.replace("{text}",`<nobr>${cur.votesAmountsData[cur.votesAmountsVal][5]}${vk.id}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),t.invoice_hash&&cur.statSessionId){PaymentsBox.showWaiting("");const n={act:"a_getvotes_invoice",type:cur.votesType,oid:r,votes:s,invoice_hash:t.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",n,{onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_msg").innerHTML=e},onFail:function(e){return clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0}})}else PaymentsBox.showWaiting(e)}else if(5==a||6==a||8==a)PaymentsBox.getVotesCharge();else if(7==a){PaymentsBox.getVotesCharge(),cur._popup_text=PaymentsBox.popupHtml(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_cards_redirect"),"",""),cur._popup_callback=!1,cur._popup_href=!1;const e="/payments?act=go_gate&type=sms",t=Math.floor(window.screen.width/2)-350,s=Math.floor(window.screen.height/2)-300;(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(e),cur._popup=window.open(e,"_blank",`scrollbars=1, resizable=1, menubar=0, left=${t}, top=${s}, width=700, height=600`)}else if(1!=a&&4!=a&&1!=t)PaymentsBox.getVotesCharge(!1,!0);else{if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",d),3==r&&(PaymentsBox.checkStatusCallback=function(e){cur.isResetCheckedMaxSmsVotesValue=!1,cur.checkedMaxVotes=e,PaymentsBox.getVotesAmounts(!0)}),2==t&&s<=cur.votesAmountsData.confirm_max_votes){if(cur.paymentsWideBox)return void PaymentsBox.getVotesCharge();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_confcode_wrap"),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.getVotesCharge,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),PaymentsBox.showVotesAmounts)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.smsGetCode();cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[r]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_comm",cur.votesAmountsData.confirm_wait_comment[r]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm_comm_wrap")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_comm_wrap"))}}else{let t;t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][0]:e,cur.checkoutEnabled?PaymentsBox.submitDmrCheckout(t):"card"===cur.votesType?PaymentsBox.submitCard(t):PaymentsBox.submitPaymentSystem(t)}}static offerOnLoad(html,js){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_offers_list");let offerView=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offer_view");if(offerView){offerView.innerHTML=html,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(offerView);try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}}}static showWaiting(e){const t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][3]:0;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_msg").innerHTML=e,t&&cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting_comm")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_waiting_comm")),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),cur.paymentsWideBox&&cur.votesAmountsData[cur.votesAmountsVal]&&cur.votesAmountsData[cur.votesAmountsVal][7]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_amount").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][6],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_phone").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][7],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting_mo")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_waiting_mo"),delete cur.paymentsWaitingCache[cur.votesType],cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,cur.smsChkData),2e3)}static showPhoneForm(e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("_msg","payments_getvotes_phone").innerHTML=t||_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_input_phone"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone").value="",PaymentsBox.refreshBox(),t&&cur.paymentsWideBox?PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_save_phone"),PaymentsBox.saveSmsPhone):PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_save_phone"),PaymentsBox.saveSmsPhone,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),2==e?PaymentsBox.getVotesAmounts:e?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_phone");const s=cur.uiPhoneCountry.container;if("spasibo"===cur.votesType)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix","+79");else{const e=cur.uiPhoneCountry.selectedItems();if(e.length>0)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix",e[0][3]);else for(let e=0,t=cur.countries.length;e<t;++e)cur.countries[e][0]==cur.defCountry&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix",cur.countries[e][3]);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(s)}return cur.paymentsBoxClass=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box").className,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_box","payments_phone_form"),!1}static showPaySystemsList(){return PaymentsBox.refreshBox(),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_ps_list_title_header").innerText),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_ps","payments_votes_vkpay_promo_banner"),cur.votesType=!1,PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!1}static showVotesAmounts(){return PaymentsBox.refreshBox(),cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):"card"!==cur.votesType&&cur.psList[cur.votesType]&&!cur.psList[cur.votesType].in_menu?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_go_ps_list"),PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_cont","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&cur.paymentsOrderNotice&&((0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)("payments_box_error",cur.paymentsOrderNotice,"info_msg",null),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_error")),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_6__.updateAriaElements)(),delete cur.votesAmountsData.appoveCode,!1}static showTypes(){if(cur.paymentsWideBox)return PaymentsBox.showVotesAmounts(),!1;if(PaymentsBox.refreshBox(),cur.votesAmountsVal=void 0,cur.votesAmountsData=[],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_method","payments_votes_vkpay_promo_banner"),cur.paymentBoxTitle){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().setOptions({title:cur.paymentBoxTitle})}return!1}static setButtons(e,t,s,n){if(!cur.paymentsWideBox||e){if(e){let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_submit");s&&(s.innerHTML=e,s.onclick=t,s.dataset.taskClick="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(s,"payments_getvotes_buttons"))}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons");if(cur.paymentsWideBox){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_back");e&&(e.innerHTML="",s&&e.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("div",{className:"button",innerHTML:s,onclick:n,"data-task-click":""})))}else{let e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();e&&(cur.paymentBoxTitle||(cur.paymentBoxTitle=e.getOptions().title),s?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("box_title",e.titleWrap).innerHTML=`<div class="back"><span class="back__icon">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_20__.getIcon24BrowserBack)().icon}</span>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_box_title_back")}</div>`,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("back",e.titleWrap).onclick=n,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("back",e.titleWrap).dataset.taskClick=""):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("box_title",e.titleWrap).innerHTML=cur.paymentBoxTitle)}}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons")}static showBoxError(e,t){if("object"==typeof e&&(e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error_occured")),e&&cur.paymentsWideBox&&cur.checkoutEnabled){let t=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.MessageBox({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error"),hideButtons:!0}),s=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();s&&s.hide(),t.content(e).show()}else{if(e){let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_error");s&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(s,""),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)(s,e,t||"error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(s))}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_wrap"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.hideRowProgress(),PaymentsBox.enablePaymentTypesRows()}}static showProgress(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_progress_msg","string"==typeof e?e:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_waiting_payment_complete")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_error","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_progress_link"):e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_progress")}static hideRowProgress(){["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"].forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_active_row",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(e)).forEach((t=>{"payments_box_menu"!==e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(t,"payments_getvotes_active_row"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(t,"payments_progress")}))}))}static refreshBox(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress","payments_box_error","payments_getvotes_method","payments_getvotes_cont","payments_getvotes_phone","payments_getvotes_confirm","payments_getvotes_waiting","payments_getvotes_other","payments_getvotes_terminals","payments_getvotes_ps","payments_getvotes_foreign_cards_warning","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_wrap"),cur.smsChkStatInt&&!cur.paymentsWideBox&&clearInterval(cur.smsChkStatInt),cur.paymentsBoxClass&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box").className=cur.paymentsBoxClass,cur.paymentsBoxClass=""),cur.votesType&&"card"!==cur.votesType||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning"),PaymentsBox.enablePaymentTypesRows()}static saveSmsPhone(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("phone")),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_phone_prefix")||{})||"");e&&(cur.paymentsWaitingCache.sms&&(clearInterval(cur.paymentsWaitingCache.sms[2]),delete cur.paymentsWaitingCache.sms),cur.newSmsPhone=t+e,PaymentsBox.getVotesAmounts())}static startFormMeasure(){cur.formMeasureTime=Date.now(),vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(cur.formMeasureTime)}static finishFormMeasure(e){if(cur.formMeasureTime){const t=Date.now()-cur.formMeasureTime;vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(t),delete cur.formMeasureTime,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments_frame_load_time",t,e)}}static frameMessage(e){if(!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?paymentgate\.ru$/)&&!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)&&!e.origin.match(/^https?:\/\/co\.vkpay\.io$/))return!1;let t={};if(e.data){switch(typeof e.data){case"object":t=e.data;break;case"string":"{"===e.data.substr(0,1)&&(t=(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__.parseJSON)(e.data))}if("billing"!==t.type)return!1}if("pageLoad"===t.action||"formLoad"===t.action)cur.paymentsIgnoreResize=!1;else if("paySuccess"===t.action||"closeWindow"==t.action&&"ok"==t.action_params.status)cur.paymentsIgnoreResize=!0,cur.checkoutEnabled&&(PaymentsBox.showProgress(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_iframe_container"));else if("submit"===e.data||"3dsPage"===t.action)setTimeout(PaymentsBox.frameHeight.pbind(600,!0),200),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("3dsFinish"===t.action)PaymentsBox.frameHeight(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("resizeFrame"===t.action)if(t.action_params.height<10&&cur.paymentsIgnoreResize)cur.paymentsIgnoreResize=!1;else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(e,"payments_threeds_checkout_frame")&&setTimeout(PaymentsBox.frameHeight.pbind(t.action_params.height),200)}else"putPixel"===t.action&&"page_load"===t.action_params.alias?(PaymentsBox.finishFormMeasure("dmr"),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_loaded")):"session_fail"===t.action?(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_session_fail"):("payError"===t.action||"closeWindow"==t.action&&["error","cancel"].includes(t.action_params.status))&&cur.checkoutEnabled?PaymentsBox.checkoutDecline(t.action_params):"typePaymentMethod"===t.action&&cur.checkoutEnabled&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame"),t.action_params&&t.action_params.system&&PaymentsBox.checkoutPayMethodChanged(t.action_params.system))}static frameHeight(e,t){let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");s&&(e?(cur.prevFrameHeight=s.style.height,s.style.height=e+"px"):(s.style.height=cur.prevFrameHeight,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame")));let n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");n&&(cur.paymentsWideBox&&!cur.checkoutEnabled||t||(n.style.height=(e||cur.prevFrameHeight)+(cur.checkoutEnabled?0:10)+"px"),n.scrollTop=0)}static paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,PaymentsBox.frameHeight()}static checkoutDecline(e){let t=e||{};t.act="checkout_decline",t.qid=cur.smsChkData.qid,t.hash=cur.smsChkData.declineHash,ajax.post("payments",t,{onDone:function(e){return PaymentsBox.stopCheckAndShowError(e),!0},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}})}static checkoutPayMethodChanged(e){e&&ajax.post("payments",{act:"checkout_ps_choose",qid:cur.smsChkData.qid,pay_method:e})}static stopCheckAndShowError(e){clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e)}static complete(e,t){cur.paymentCompleteParams=t,cur.isPaymentComplete=!0}static checkStatus(e,t,s,n){if("sms"===e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&!cur.paymentsWideBox&&7!=cur.votesAmountsData[cur.votesAmountsVal][2])if(15==cur.smsChkStatCnt)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_progress_msg").innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_waiting_payment_complete_still");else if(cur.smsChkStatCnt>30){return clearInterval(cur.smsChkStatInt),cur.isPaymentAttemted=!0,(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),void(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_internet_getting_votes"),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_delay"))}let a={act:"a_getvotes_check",type:e,votes_purchase:cur.isPaymentsAppOrder||cur.paymentsWideBox||cur.paymentsInstantPayType?0:1};t&&(t.oid||t.qid)?(a.oid=t.oid,a.qid=t.qid,a.hash=t.hash):a.hash=cur.psList[e].check_hash,0==cur.smsChkStatCnt&&(a.start=1),cur.statSessionId&&(a.stat_session_id=cur.statSessionId),t.test&&(a.test=1);let r=n||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();ajax.post("al_payments.php",a,{onDone:function(s,n,a){if("sms"===e&&cur._popup&&cur._popup.closed)return clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),void PaymentsBox.setConfirmButtons();if(s){if(1==s){if(window.cur.paymentSuccess=!0,"mailmoney_vkpay"===e&&WkView&&(r._show(),cur.onExternalAppDone=null,WkView.hide(!1,!0)),cur.isPaymentAttemted=!0,PaymentsBox.needContinue&&(cur.needContinue=1,PaymentsBox.needContinue=0),cur.paymentsHideLastBoxOnly)boxQueue.hideLast(!1),delete cur.paymentsHideLastBoxOnly;else for(;boxQueue.count();)boxQueue.hideLast(!1);if(n&&!cur.isPaymentsAppOrder&&(!cur.paymentsTryCompleteOrder||!r.onDone)){let e=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.MessageBox({width:400,hideButtons:!0,bodyStyle:"padding: 0; border-radius: 8px;"});e.content(n),e.show()}a&&(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__.updateMoney)(a)}else if(2==s||10==s)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_iframe_container")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(n);else if(3==s){let s="sms"===e;cur.votesAmountsData[cur.votesAmountsVal]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",cur.votesAmountsData[cur.votesAmountsVal][0]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",cur.votesAmountsData[cur.votesAmountsVal][1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",s?cur.votesAmountsData[cur.votesAmountsVal][6]:cur.votesAmountsData[cur.votesAmountsVal][1])):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",cur._otherVotes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str))),s||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_ps_enter_code")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_amount")),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t.oid]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t.oid],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm_comm_wrap")):s&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_comm_wrap")),"spasibo"===e&&(cur.updateTnxHash=n),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap","payments_getvotes_confirm"),s&&n&&PaymentsBox.showBoxError(n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").onkeypress=s?"":PaymentsBox.checkPinKeyPress,PaymentsBox.setButtons(cur.payments_get_votes,s?PaymentsBox.smsSendCode:PaymentsBox.confirmPinCode,cur.paymentsChangeType,PaymentsBox.showTypes)}else{if(4==s){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")&&!cur.paymentsWaitingCache.sms){let e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_to_get_send_sms",cur.votesAmountsData[cur.votesAmountsVal][0]);cur.paymentsWideBox||(e+=`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost")}`),e=e.replace("{number}",n.service_number),e=e.replace("{text}",`<nobr>${n.message_text}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),PaymentsBox.showWaiting(e)}return}if(5==s)PaymentsBox.refreshBox(),PaymentsBox.showConfirm();else if(6==s)delete cur.votesAmountsData.oauth_url,delete cur.paymentsInstantPayType,PaymentsBox.showVotesAmounts(),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_instant_pay_amount_limit_error")),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_remember_wallet",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_getvotes_confirm_descr","payments_getvotes_cont"));else{if(7==s)return void(cur._popup&&!cur._popup_href&&(cur._popup_href=n,cur._popup.location.href=n));if(8==s)return void PaymentsBox.checkStatusCallback(n);if(9==s)return void PaymentsBox.show3DsFrame(n,a)}}clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0}},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}}),cur.smsChkStatCnt++}static checkStatusCallback(e){}static getVotesCharge(e,t){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;if(!((e=parseInt(e,10))||null!=cur.votesAmountsVal&&cur.votesAmountsData[cur.votesAmountsVal]))return;let s={act:"a_getvotes_charge",type:cur.votesType,hash:cur.paymentsHash,stat_session_id:cur.statSessionId};const n=PaymentsBox.getEmail();""!==n&&(n&&(s.email=n),t?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"):PaymentsBox.showProgress(),e?(s.pid=-1,s.votes=e):(s.pid=cur.votesAmountsVal,-1==cur.votesAmountsVal&&(s.votes=cur.votesAmountsData[cur.votesAmountsVal][0])),cur.isResetCheckedMaxSmsVotesValue&&(s.pay_by_repay_status=1),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",s,{onDone:(s,n,a,r)=>{PaymentsBox.setCurMidas(r),PaymentsBox.votesChargeOnDone(s,e,t)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0)}))}static votesChargeOnDone(e,t,s){if(e)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),-1==e)PaymentsBox.getVotesAmounts(!0);else if(e.qid)if(cur.smsChkData=e,s){const e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_for_get_n_votes",t||cur.votesAmountsData[cur.votesAmountsVal][0]);let s=cur.votesAmountsData.confirm_wait_msg.replace("{amount}",e);if(s+=t?`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost_rubles",cur._otherAmount)}`:`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost").replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1])}`,cur.paymentsWideBox){s+=`<br><br/><a onclick="return PaymentsBox.showPhoneForm(1);">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_change_phone_number")}</a>`}PaymentsBox.showWaiting(s)}else cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,e),2e3)}static getVotesAmounts(e,t,s){if(null!=t&&cur.paymentsWideBox){if(cur.votesType==t&&cur.votesTypeInit!=t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_cont")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_terminals")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_ps")))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")?cur.paymentsWaitingCache[cur.votesType]=[(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting").innerHTML,cur.smsChkStatInt]:cur.smsChkStatInt&&!cur.paymentsWaitingCache[t]&&clearInterval(cur.smsChkStatInt),cur.votesType=t}else null!=t&&(cur.votesType=t);if(!cur.votesType)return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning");if(cur.paymentsWideBox&&!s&&(s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_method_"+cur.votesType,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_menu")))),cur.paymentsWideBox&&cur.paymentsTypesSum&&cur.paymentsTypesSum[t]){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_summary_bill");e?e.innerHTML=cur.paymentsTypesSum[t]:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_order_sum",cur.paymentsTypesSum[t]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_tt"),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(t)}))}let n="term"===cur.votesType||"ps"===cur.votesType;if(n){PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_method");let e="";if("term"===cur.votesType?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_terminals"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_votes_vkpay_promo_banner"),e="payments_terminals_title_header"):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_ps"),e="payments_ps_list_title_header"),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(e).innerText),PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!cur.paymentsWideBox)return}const a=["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"];for(let t=0;t<a.length;t++){let r=a[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)(r)||cur.paymentsWideBox&&!s||"payments_box_menu"===r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_ps")&&s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(s.parentNode,"payments_getvotes_ps_list"))continue;let d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(r),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_active_row",d);if(!e&&l.length&&!cur.paymentsWideBox)return;l.forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(e,"payments_getvotes_active_row"),cur.paymentsWideBox&&!n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(e,"payments_progress")}))}if(s&&(!cur.paymentsWideBox||"payments_box_menu"!==s.parentNode.id||n||e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)(s,"payments_progress"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)(s,"payments_getvotes_active_row")),cur.paymentsWideBox&&cur.paymentsWaitingCache[t])return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=cur.paymentsWaitingCache[t][0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting").innerHTML=cur.paymentsWaitingCache[t][1],PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting","payments_getvotes_title"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),void PaymentsBox.hideRowProgress();if(n)return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_buttons")&&!cur.paymentsWideBox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let r={act:"a_getvotes_amounts",type:cur.votesType,prefer_votes:cur.paymentsPreferVotes,hash:cur.paymentsHash};if(cur.statSessionId&&(r.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId,cur.paymentsOrderBillPeriod&&(r.bill_period=cur.paymentsOrderBillPeriod),cur.paymentsOrderDiscount&&(r.discount=cur.paymentsOrderDiscount)),"sms"===r.type)cur.checkedMaxVotes&&(r.checked_max_votes=cur.checkedMaxVotes,cur.checkedMaxVotes=0),cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.isCorpPhone&&(r.corp=cur.isCorpPhone,cur.isCorpPhone=!1);else if("offers"===r.type){const e=(0,_shared_apps_MiniAppsService_utils_getCurrentApp__WEBPACK_IMPORTED_MODULE_19__.getCurrentApp)();if(e?.options&&(r.isAppOrder=cur.paymentsOfferApp?1:0,r.aid=e.options.aid,r.orderBox=cur.isPaymentsAppOrder?1:0),cur.paymentsPreload)return PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsPreload),cur.paymentsPreload=!1,void(cur.paymentsOfferPreload&&(PaymentsBox.offerOnLoad.apply(this,cur.paymentsOfferPreload),cur.paymentsOfferPreload=!1,cur.paymentsOneOffer=!0))}else if("spasibo"===r.type)cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.needContinue&&(r.continue=1,cur.needContinue=0);else if(cur.psList[r.type]&&cur.psList[r.type].simple_redirect)return PaymentsBox.hideRowProgress(),void PaymentsBox.submitPaymentSystem();ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:e=>(PaymentsBox.showBoxError(e),!0)})}static getVotesAmountsOnDone(result,html,data,js,title){if(PaymentsBox.hideRowProgress(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),cur.paymentsWideBox&&(title&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_title",title),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_title")),data&&data.menu_money)){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_summary_bill");e?e.innerHTML=data.menu_money:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(`payments_method_${cur.votesType}_descr`,data.menu_money)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_votes_vkpay_promo_banner"),-1==result)return void PaymentsBox.showPhoneForm();if(-2==result)return void PaymentsBox.showPhoneForm(!1,html);if(-3==result){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt","payments_box_menu");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_getvotes_active_row","payments_box_menu"));for(let t=0;t<e.length;t++){let s=e[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(s,"payments_getvotes_active_row")){s.onclick();break}}return}if(!result)return PaymentsBox.showProgress(""),void(cur.smsAmountsInt=setTimeout((()=>{PaymentsBox.getVotesAmounts(!0)}),1e3));if(!html)return;let other;if(2==result?(other=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_other"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(other,html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_cont",html),cur.votesAmountsData=data,(cur.fromInstantPay&&2==cur.votesAmountsData.confirm_type||2!=cur.votesAmountsData.confirm_type||!cur.votesAmountsData.checked_max_sms_votes_val)&&PaymentsBox.showVotesAmounts(),cur.votesType&&"card"!==cur.votesType?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_foreign_cards_warning"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning"),cur.paymentsPreload&&"offers"===cur.votesType?PaymentsBox.setButtons(!1):"offers"===cur.votesType?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):cur.paymentsPreload&&PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")))},data.confirm_msg&&data.confirm_type&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",data.confirm_msg),2==result&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(other)),js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}cur.instantNeedCVV&&(PaymentsBox.showConfirm(),cur.instantNeedCVV=!1),cur.paymentsEmailInput=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_receipt_email"),cur.paymentsEmailCheckbox=!!cur.paymentsEmailInput&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("_checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)(cur.paymentsEmailInput))}static popupHtml(e,t,s){return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n        body {font-family:tahoma,verdana,arial,sans-serif,Lucida Sans; font-size:11px;}\n        .text {position:relative; top:40%; text-align:center; line-height:24px;}\n        .text img {margin-bottom:8px;}\n        .text_container {position:absolute; top:0; left:0; right:0; bottom:0; line-height:150%; height: 100%;}\n    </style>\n    <script type="text/javascript">\n      if (!window.vk) window.vk = {loginscheme: '${vk.loginscheme}', ip_h: '${vk.ip_h}', __domain: '${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_4__.getHostName)()}'};\n    <\/script>\n    <script type="text/javascript" src="${window.stManager.getCompiledPath(window.jsc("web/payments_legacy.js"))}"><\/script>\n</head>\n<body>\n${t}\n<div id="wait_text_container" class="text_container">\n    <div class="text">\n        <img src="/images/progress.gif" /><br/>${e}\n    </div>\n</div>\n<script type="text/javascript">\n  var st = setTimeout(function() {try {${s}; clearTimeout(st)} catch(e) {}}, 100)\n<\/script>\n</body>\n</html>`}static viewOffer(e){this.setButtons(e,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("start_offer").submit(),PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_back_to_offers_list"),PaymentsBox.backToOffersList,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel"),PaymentsBox.backToOffersList)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel"),PaymentsBox.backToOffersList)}static backToOffersList(){if(cur.paymentsOneOffer)return(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_offer_view"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_offers_list"),cur.votesTypeInit||!1===cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes)}static initializeOfferChecker(e,t,s,n){cur.offersOffset=e,cur.offersAppCurrency=t,PaymentsBox.checkOffersList=[],PaymentsBox.checkOffersDo=()=>{if(s)return;const e=PaymentsBox.checkOffersList.join(",");PaymentsBox.checkOffersList=[],ajax.post("al_payments.php",{act:"a_offers_stat",offers:e,hash:n}),PaymentsBox.checkOffersTO=!1},PaymentsBox.checkOffers(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static removeCheckOffersEvent(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__.removeEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static checkOffers(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_offer",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offers_wrap")),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap").scrollTop,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.getSize)("box_layer_wrap")[1];e.forEach((e=>{const n=e,a=n.offsetTop;a+30<t+s&&a+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.getSize)(n)[1]-20>t&&!n.getAttribute("checked")&&(n.setAttribute("checked",1),PaymentsBox.checkOffersList.push(n.id.substr(15)),PaymentsBox.checkOffersTO||(PaymentsBox.checkOffersTO=setTimeout(PaymentsBox.checkOffersDo,1e3)))}))}static offersRemoveButtons(){cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(cur.paymentsChangeType,PaymentsBox.showTypes,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_close"),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide)}static disablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++){let s=e[t];s.classList.contains("payments_getvotes_active_row")?s.classList.add("payments_getvotes_noevents_row"):s.classList.add("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}}static enablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++)e[t].classList.remove("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}static handlePaymentCompleteMessage(e){e.origin==window.origin&&e.data.type&&"paymentCompleteMessage"===e.data.type&&window.PaymentsBox.complete(e.data.newUrl,e.data.params)}static setCurMidas(e){"object"==typeof e&&"isMidas"in e&&("cur"in window||(window.cur={}),window.cur.isMidas=Boolean(e.isMidas))}}},880789:(e,t,s)=>{"use strict";s.d(t,{initSettingsAddressBox:()=>_});var n=s(754866),a=s(593159),r=s(972332),d=s(342879),l=s(683234),c=s(866467),u=s(952661);function _(e,t){e.setOptions({title:c.getLang("settings_addrbox_title")});const s=document.querySelector("#settdbx_addr"),_=document.querySelector("#settdbx_addr_tt_place");s.onfocus=function(){-2===cur.addrChecked&&(0,d.showTooltip)(_,{text:c.getLang("settings_addrbox_hint"),dir:"left",slideX:15,className:"settings_pwd_tt",shift:[-12,-15,0],onCreate:function(){(0,r.removeEvent)(_,"mouseout")}})},s.onblur=function(){_.tt&&_.tt.hide()},(0,n.elfocus)(s),setTimeout(n.elfocus.pbind(s),100),(0,n.setStyle)(s,{width:230-(0,n.ge)("settdbx_base").offsetWidth-8}),(0,a.extend)(cur,{settDomainCheckAddress:function(e){clearTimeout(cur.addressCheckTO),cur.lastAddress!==(0,n.val)("settdbx_addr")&&(cur.addressCheckTO=setTimeout(cur.settDomainDoCheckAddress,e||0))},settDomainDoCheckAddress:function(){let e=document.querySelector("#settdbx_submit"),t=document.querySelector("#settdbx_advices");cur.lastAddress=(0,n.val)("settdbx_addr"),ajax.post("al_settings.php",{act:"a_check_address",name:cur.lastAddress,from:"box"},{onDone:function(s){cur.addrChecked=1,u.FlatButton.setLabel(e,s),u.FlatButton.setDisabled(e,!1),(0,n.val)(t,"")},onFail:function(a){let r=(a=a.split("<*>"))[1],d=a[2];return a=a[0],d?(cur.addrChecked=-2,s.onfocus()):(cur.addrChecked=-1,s.onblur()),u.FlatButton.setLabel(e,a),u.FlatButton.setDisabled(e,!0),(0,n.val)(t,r),!0}})},settDomainAdvisedAddress:function(e){(0,n.val)("settdbx_addr",e),cur.settDomainCheckAddress()},settDomainAddressSubmit:function(e){if(1!==cur.addrChecked)return void(0,l.notaBene)("settings_addr");let s=(0,n.val)("settdbx_addr"),a={act:"a_change_address",hash:t,name:s};u.FlatButton.lock(e),window.ajax.post("al_settings.php",a,{onDone:function(e){nav.go(s,!1,{params:{from:"address_box"}})},showProgress:()=>u.FlatButton.lock(e),hideProgress:()=>u.FlatButton.unlock(e)})}})}},443291:(e,t,s)=>{"use strict";s.d(t,{showNextPaymentsHistory:()=>d});var n=s(683234),a=s(575753),r=s(754866);const d=(e,t)=>{if((0,n.isButtonLocked)(e))return;let s,d;return(0,n.lockButton)(e),t||(t="votes"),void 0===cur.historyOffset[t]&&(cur.historyOffset[t]=5),"transfer"===t?(s={act:"a_transfer_history"},d=(0,r.ge)("settings_transfer_history")):"subscriptions"===t?(s={act:"a_payments_subsciptions"},d=(0,r.ge)("settings_payments_subscriptions")):"games"===t?(s={act:"a_payments_games"},d=(0,r.ge)("settings_payments_games")):"goods_orders"===t?(s={act:"a_payments_goods_orders"},d=(0,r.ge)("settings_payments_goods_orders")):(s={act:"a_votes_history"},d=(0,r.ge)("settings_votes_history")),s.offset=d.rows.length,"subscriptions"===t&&(s.extra_items_count=cur.historyExtraItemsSubscriptions),ajax.post("al_settings.php",s,{onDone:function(s,l,c){const u=d.tBodies[0];if(s){if((0,n.unlockButton)(e),a.browser.msie){const e=(0,r.se)("<table>"+s+"</table>");Array.from((0,r.geByTag)("tr",e)).forEach((e=>{1===e.nodeType&&u.appendChild(e)}))}else u.insertAdjacentHTML("beforeEnd",s);"subscriptions"===t&&c&&(cur.historyExtraItemsSubscriptions=c)}s&&!l||((0,r.addClass)(u.lastChild,"settings_votes_history_last"),(0,r.hide)(e))}}),!1}},428374:(e,t,s)=>{"use strict";s.d(t,{InlineDropdown:()=>_});var n=s(754866),a=s(575753),r=s(604723),d=s(972332),l=s(600222),c=s(898848),u=s(593159);function _(e,t){if(this.constructor!==_)throw new Error("InlineDropdown was called without 'new' operator");if(!(e=(0,n.ge)(e)))return;if(!e.nodeType)throw new Error("First argument not a DOM element");if((0,n.hasClass)(e,"idd_wrap"))return;if(this._opts=t||{},this._items=t.items?(0,u.clone)(t.items):JSON.parse(e.getAttribute("data-items")),!this._items)throw new Error("No items provided");this._title=t.keepTitle?t.title||e.innerHTML:"",this._selectable=!t.keepTitle||t.keepSelected,this._disableCancelClickEvent=!!t.disableCancelClickEvent&&!!t.disableCancelClickEvent;const{icon:s}=(0,l.getIcon12Dropdown)();this._iddEl=(0,n.se)(`<div class="idd_wrap" id="${e.id}">\n    <div class="idd_selected_value" tabindex="0" role="button">\n      ${e.innerHTML}\n    </div>\n    ${t.withArrow?`<div class="idd_chevron">${s}</div>`:""}\n    <input type="hidden" id="${e.id}_input" name="${e.getAttribute("name")||e.id}" />\n  </div>`);let a=this;if((0,c.each)(e.className.split(" "),(function(e,t){(0,n.addClass)(a._iddEl,t)})),(0,c.each)(e.attributes,(function(e,t){0==t.name.indexOf("data-")&&a._iddEl.setAttribute(t.name,t.value)})),e.parentNode.replaceChild(this._iddEl,e),this._els={valueEl:(0,n.geByClass1)("idd_selected_value",this._iddEl),itemsContentEl:(0,n.geByClass1)("idd_items_content",this._iddEl),hiddenInputEl:(0,n.geByTag1)("input",this._iddEl)},this._opts.autoShow){let e=!1;const t=function(){e=!0,clearTimeout(a._autoShowTimeout),a._autoShowTimeout=setTimeout((function(){e&&a._onClick()}),100)},s=function(){clearTimeout(a._autoShowTimeout),e=!1};(0,d.addEvent)(this._iddEl,"mouseenter",t),(0,d.addEvent)(this._iddEl,"mouseleave",s),(0,d.addEvent)(this._iddEl,"keydown",(e=>"Enter"===e.key&&e.target.getAttribute("class").includes("idd_selected_value")?t():null))}else(0,d.addEvent)(this._iddEl,"click",this._onClick.bind(this)),(0,d.addEvent)(this._iddEl,"keydown",(e=>"Enter"===e.key&&e.target.getAttribute("class").includes("idd_selected_value")?this._onClick.call(this):null));this._rebuildDropdown();let r=!1;void 0!==t.selected?r=t.selected:e.hasAttribute("data-value")&&(r=e.getAttribute("data-value")),!1!==r&&this.select(r,!0)}_.IDD_HEADER_CORRECTION_LEFT=-10,_.IDD_HEADER_CORRECTION_TOP=-8,_.prototype._rebuildDropdown=function(){let e=this._opts.withIcon?"idd_with_icon":"",t=this._opts.idPrefix?this._opts.idPrefix:"",s=this._opts.idItemPrefix?this._opts.idItemPrefix:"",r=this,u=this._opts.ariaLabel||"";const{icon:p}=(0,l.getIcon12Dropdown)();let m=`<div class="idd_header_wrap ${e}">\n    <div class="idd_header" id="${t}${this._items[0][0]}"></div>\n      ${this._opts.withArrow?`<div class="idd_chevron">${p}</div>`:""}\n    </div>`,y=`<div class="idd_items_wrap"><div class="idd_items_content" role="list" aria-label="${u}">`;(0,c.each)(this._items,(function(t,n){y+="separator"===n?'<div class="idd_separator"></div>':function(t,n){n=n||"";let a=r._opts.sublists&&r._opts.sublists[t[0]]?"idd_sublist":"";return`<div class="idd_item ${n} ${e} ${a}" id="${s}idd_item_${t[0]}" data-testid="${s+"idd_item_"+t[0]}" data-id="${t[0]}" tabindex="0" role="button">\n      ${r._opts.withIcon?'<div class="idd_item_icon" id="'+t[0]+'"></div>':""}\n      <div class="idd_item_name">${r._opts.html?r._opts.html(t):t[1]}</div>\n    </div>`}(n)})),y+="</div></div>",this._els.popupItems=(0,n.se)(y),this._els.popupHeader=(0,n.se)(m),(0,d.addEvent)(this._els.popupItems,"click",(function(e){let t=e.target;if("a"!=t.tagName.toLowerCase()){for(;t&&!(0,n.hasClass)(t,"idd_item");)t=t.parentNode;t&&(r.select(t.getAttribute("data-id"))?r._hide():r._hoverItem(t)),(0,d.cancelEvent)(e)}else setTimeout((function(){r._hide()}))})),(0,c.each)((0,n.geByClass)("idd_item",this._els.popupItems),(function(e,t){(0,d.addEvent)(t,"mouseenter",(function(e){_._preventMouseHover||r._hoverItem(e.currentTarget)})),(0,d.addEvent)(t,"mouseleave",(function(e){_._preventMouseHover||r._unhoverItem(e.currentTarget,e)}))})),(0,d.addEvent)(this._els.popupItems,"mouseenter",function(){(0,d.addEvent)(this._els.popupItems,a.browserFeatures.wheelEvent,this._onWheel.bind(this))}.bind(this)),(0,d.addEvent)(this._els.popupItems,"mouseleave",function(){(0,d.removeEvent)(this._els.popupItems,a.browserFeatures.wheelEvent,this._onWheel.bind(this))}.bind(this))},_.prototype._onClick=function(e){if((0,n.isVisible)(this._els.popupEl))return void this._hide();_._currIDD&&_._currIDD._hide(),_._currIDD=this,window.tooltips&&tooltips.hideAll();let t=this;let s=this._els.popupEl=(0,n.se)('<div class="idd_popup"></div>');this._opts.alignLeft&&(0,n.addClass)(s,"idd_align_left"),this._opts.popupClass&&(0,n.addClass)(s,this._opts.popupClass),this.openToUp=1==this._opts.forceDir||"up"==this._opts.forceDir||-1!=this._opts.forceDir&&"down"!=this._opts.forceDir&&(0,n.getXY)(t._iddEl)[1]-((window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0))+200>window.innerHeight,this.openToUp?(s.appendChild(this._els.popupItems),s.appendChild(this._els.popupHeader),(0,n.addClass)(s,"idd_popup_up")):(s.appendChild(this._els.popupHeader),s.appendChild(this._els.popupItems));let a=(0,n.geByClass1)("idd_header",this._els.popupHeader);this._opts.keepTitle?a.innerHTML=this._title:a.innerHTML=this._selected?this._selected[1]:"",s.id="idd_"+this._iddEl.id,this._iddEl.appendChild(s);let r=(0,n.getSize)(s),l=(0,n.getSize)(this._els.valueEl),c=0;this.openToUp&&(c=-(0,n.getSize)(this._els.popupItems)[1]);let u={marginTop:(this._opts.headerTop||_.IDD_HEADER_CORRECTION_TOP)-l[1]+c,width:r[0]+8,opacity:1};this._opts.alignLeft?u[vk.rtl?"marginRight":"marginLeft"]=l[0]-_.IDD_HEADER_CORRECTION_LEFT:u.marginLeft=(this._opts.headerLeft||_.IDD_HEADER_CORRECTION_LEFT)-(this._opts.withIcon?20:0),(0,n.setStyle)(s,u),this._unhoverItem(),this._highlightItem(),this._initOutEvent(),this._initKeypressEvent(),this._opts.onShow&&this._opts.onShow(this.ddEl),this._disableCancelClickEvent||(0,d.cancelEvent)(e)},_.prototype._hide=function(){(0,n.re)(this._els.popupEl),this._els.popupEl=null,(0,n.removeClass)(this._hoveredItem,"idd_hover"),this._hoveredItem=null,this._deinitEvents(),this._hideSubmenu(),clearTimeout(this._hideSubmenuTimeout),this._opts.onHide&&this._opts.onHide()},_.prototype._highlightItem=function(e){if(!this._selectable)return;if(!this._els.popupEl)return;if(void 0===e){if(!this._selected)return;e=this._selected[0]}let t=(0,n.geByClass1)("idd_hl",this._els.popupEl);t&&(0,n.removeClass)(t,"idd_hl");let s=(0,n.ge)("idd_item_"+e);(0,n.addClass)(s,"idd_hl");let a=this;(0,c.each)((0,n.geByClass)("idd_item",this._els.popupItems),(function(e,t){if(t==s)return a._els.popupItems.scrollTop=(e+1)*(0,n.getSize)(t)[1]-(0,n.getSize)(a._els.popupItems)[1]/2,!1}))},_.prototype._onWheel=function(e){let t=(0,n.getSize)((0,n.geByClass1)("idd_items_content",this._els.popupItems))[1],s=(0,n.getSize)(this._els.popupItems)[1];t!=s&&(0==this._els.popupItems.scrollTop&&e.deltaY<0||this._els.popupItems.scrollTop==t-s&&e.deltaY>0)&&(0,d.cancelEvent)(e)},_.prototype._onKeyDown=function(e){switch(e.keyCode){case 9:case 38:case 40:case 13:case 27:this._onKey(e.keyCode,e)}},_.prototype._onKeyPress=function(e){this._onKey(e.which,e)},_.prototype._hideSubmenu=function(){(0,n.removeClass)(this._currSubmenuItem,"idd_hover_sublist_parent"),(0,n.re)(this._els.currCascade),delete this._currSubmenuItem,this._hoveredItem&&this._showSubmenu(this._hoveredItem)},_.prototype._showSubmenu=function(e){if(clearTimeout(this._hideSubmenuTimeout),!e)return;let t=this,s=e.getAttribute("data-id");if(this._opts.sublists&&this._opts.sublists[s]){if((0,n.addClass)(e,"idd_hover_sublist_parent"),this._currSubmenuItem==e)return void clearTimeout(this._submenuHideTimeout);let a=this._opts.sublists[s],l='<div class="idd_popup"><div class="idd_items_wrap"><div class="idd_items_content">',u=a.withIcon?"idd_with_icon":"";function p(e,t){return'<div class="idd_item '+(t=t||"")+" "+u+'" id="idd_item_'+e[0]+'" data-id="'+e[0]+'" role="button" tabindex="0">'+(a.withIcon?'<div class="idd_item_icon" id="'+e[0]+'"></div>':"")+'<div class="idd_item_name">'+(a.html?a.html(e):e[1])+"</div></div>"}(0,c.each)(a.items,(function(e,t){l+=p(t)})),l+="</div></div></div>",this._els.currCascade=(0,n.se)(l),this._iddEl.appendChild(this._els.currCascade);{let m=(0,n.getSize)(this._els.popupEl),y=(0,n.getSize)(e),f=(0,n.getSize)(this._els.currCascade),g=0,E=e;for(;null!=(E=E.previousSibling);)g++;let A=m[0]+(this._opts.headerLeft||_.IDD_HEADER_CORRECTION_LEFT)-1;(0,n.setStyle)(this._els.currCascade,{marginLeft:A-3,marginTop:y[1]*g+6-(this.openToUp?m[1]:0),"z-index":200,width:f[0]+30}),setTimeout((function(){(0,r.cssAnim)(t._els.currCascade,{marginLeft:A,opacity:1},{duration:140})}),10)}(0,c.each)((0,n.geByClass)("idd_item",this._els.currCascade),(function(e,s){(0,d.addEvent)(s,"mouseenter",(function(e){t._isInSubmenu=!0,_._preventMouseHover||t._hoverItem(e.currentTarget,null,!0)})),(0,d.addEvent)(s,"mouseleave",(function(e){t._isInSubmenu=!1,_._preventMouseHover||t._unhoverItem()}))})),(0,d.addEvent)(this._els.currCascade,"click",(function(e){let s=e.target;if("a"!=s.tagName.toLowerCase()){for(;s&&!(0,n.hasClass)(s,"idd_item");)s=s.parentNode;if(s){let e=!0,r=s.getAttribute("data-id"),d=(0,n.geByClass1)("idd_item_name",s).innerHTML;a.onSelect?e=a.onSelect(r,d):t._opts.onSelect&&(e=t._opts.onSelect(r,d)),e&&t._hide()}(0,d.cancelEvent)(e)}else setTimeout((function(){t._hide()}))})),this._currSubmenuItem=e}},_.prototype._hoverItem=function(e,t,s){let a=this;if(this._unhoverItem(),(0,n.addClass)(e,"idd_hover"),this._hoveredItem=e,t&&e){let t=e.getAttribute("id"),s=this;(0,c.each)((0,n.geByClass)("idd_item"),(function(a,r){if(r.getAttribute("id")==t)return s._els.popupItems.scrollTop=(0,n.getSize)(e)[1]*(a+1)-(0,n.getSize)(s._els.popupItems)[1]/2,clearTimeout(_._preventMouseHover),_._preventMouseHover=setTimeout((function(){_._preventMouseHover=null}),100),!1}))}if(clearTimeout(this._hideSubmenuTimeout),s)(0,n.addClass)(this._currSubmenuItem,"idd_hover_sublist_parent");else{let t=this._currSubmenuItem==e;this._currSubmenuItem&&!t&&(this._hideSubmenuTimeout=setTimeout((function(){a._hideSubmenu()}),200)),this._currSubmenuItem||this._showSubmenu(e),(0,n.removeClass)(this._currSubmenuItem,"idd_hover_sublist_parent")}},_.prototype._unhoverItem=function(e,t){this._hoveredItem&&(0,n.removeClass)(this._hoveredItem,"idd_hover"),this._hoveredParentItem&&(0,n.removeClass)(this._hoveredParentItem,"idd_hover"),clearTimeout(_._preventMouseHover)},_.prototype._onKey=function(e,t){if(38==e||40==e){let s=this,a=this._hoveredItem||(0,n.geByClass1)("idd_hl",this._els.popupItems)||(0,n.geByClass1)("idd_item",this._els.popupItems);return a=38==e?a.previousSibling:a.nextSibling,s._hoverItem(a,!0),(0,d.cancelEvent)(t),!1}if(9==e){let e=this,s=(0,n.geByClass1)("idd_items_content",this._els.popupItems),a=t.target;return a=t.target.getAttribute("class").includes("idd_item")?t.shiftKey?a.previousSibling:a.nextSibling:t.shiftKey?s.lastChild:s.firstChild,e._hoverItem(a,!0),!1}13==e?this._hoveredItem&&this.select(this._hoveredItem.getAttribute("data-id"))&&this._hide():27==e?this._hide():this._quickSearch(e)},_.prototype._quickSearch=function(e){let t=this;if(void 0!==e){let s=String.fromCharCode(e).toLowerCase();if(!s)return;setTimeout((function(){t._currSearchStr=""}),600),this._currSearchStr=this._currSearchStr||"",this._currQuickSearchIndex=this._currQuickSearchIndex||0,1==this._currSearchStr.length&&this._currSearchStr[0]==s||(this._currSearchStr+=s)}let s=this._items;for(let t=this._currQuickSearchIndex;t<s.length;t++){let a=s[t][1].toLowerCase();if(1==this._currSearchStr.length&&this._currSearchStr==a[0]||this._currSearchStr.length>1&&a.indexOf(this._currSearchStr)>=0){this._currQuickSearchIndex=t+1,this._hoverItem((0,n.ge)("idd_item_"+s[t][0]),!0),t==s.length-1&&(this._currQuickSearchIndex=0);break}t==s.length-1&&(this._currQuickSearchIndex=0,e&&this._quickSearch())}},_.prototype._deinitEvents=function(){(0,d.removeEvent)(window,"click",_._window_onOuterClick),(0,d.removeEvent)(window,"keypress",_._window_onKeyPress),(0,d.removeEvent)(window,"keydown",_._window_onKeyDown)},_.prototype._initKeypressEvent=function(){(0,d.addEvent)(window,"keypress",_._window_onKeyPress=this._onKeyPress.bind(this)),(0,d.addEvent)(window,"keydown",_._window_onKeyDown=this._onKeyDown.bind(this))},_.prototype._onOuterClick=function(e){let t=e.target,s=!0;for(;t&&t!=document;){if((0,n.hasClass)(t,"idd_popup")){s=!1;break}t=t.parentNode}s&&this._hide()},_.prototype._initOutEvent=function(){let e=this;setTimeout((function(){(0,d.addEvent)(window,"click",_._window_onOuterClick=e._onOuterClick.bind(e))})),this._opts.autoHide>0&&((0,d.addEvent)(this._iddEl,"mouseleave",(function(){clearTimeout(e._leaveTimeout),e._leaveTimeout=setTimeout((function(){e._isInSubmenu||e._hide()}),e._opts.autoHide)})),(0,d.addEvent)(this._iddEl,"mouseenter",(function(){clearTimeout(e._leaveTimeout)})))},_.prototype.deinit=function(){this._deinitEvents()},_.prototype.setItems=function(e){this._items=(0,u.clone)(e),this.select(e[0][0],!0),this._rebuildDropdown()},_.prototype.getElement=function(){return this._iddEl},_.prototype.getSelected=function(){return this._selected},_.prototype.select=function(e,t){if(this._opts.sublists&&this._opts.sublists[e])return;let s=!1;if((0,c.each)(this._items,(function(t,n){if(n[0]==e)return s=n,!1})),!1===s)throw new Error("No item found for selection");this._selected=s,this._opts.keepTitle||(this._els.valueEl.innerHTML=s[1]),(0,n.val)(this._els.hiddenInputEl,e);let a=!0;if(!t&&this._opts.onSelect)try{a=!this._opts.onSelect(s[0],s)}catch(e){console.error(e)}return a},_.prototype.val=function(e,t){return void 0!==e?this.select(e,t):this.getSelected()?this.getSelected()[0]:""}},270262:(e,t,s)=>{"use strict";s.d(t,{AdBlockDetector:()=>d,getAdblockState:()=>l});var n=s(540462),a=s(210909),r=s(558137);class d{get hasResult(){return void 0!==this.reason}async detect(e=!1){return this.hasResult&&!e||(this.reason=await(0,a.isAdblockDetected)(),this.detected=!!this.reason),this.detected}}const l=(0,r.makeSharedState)("adblock_protection/detector",(()=>{const e=new d;return e.detect(),e}),{version:1});((0,n.partConfigEnabled)("post_adblock_protection_promo")||(0,n.partConfigEnabled)("tgb_adblock_protection"))&&l()},525815:(e,t,s)=>{"use strict";s.d(t,{lifecycle:()=>c});var n=s(558137),a=s(32489),r=s(303790);const d=e=>({create:e.createEvent("create/app"),updateConfig:e.createEvent("create/app"),remount:e.createEvent("remount/app"),close:e.createEvent("close/app"),unmount:e.createEvent("unmount/app")}),l=e=>{const t=e.createStore([]),s=(0,a.combine)(t,(([e])=>e??null)),n=e.createStore({startTime:void 0});return{stack:t,currentAppId:s,apps:e.createStore(new Map),bridges:e.createStore(new Map),performance:n}},c=(0,n.makeSharedState)("MiniAppsSDKLifecycle",(()=>{const e=(0,a.createDomain)("MiniAppsSDK_lifecycle"),t=e.createEvent("resetLifecycleEvent");return{resetLifecycleHandlersEvent:t,beforeStart:(0,r.generateLifecycleHooks)("beforeStart",e,t),afterStart:(0,r.generateLifecycleHooks)("afterStart",e,t),afterMount:(0,r.generateLifecycleHooks)("afterMount",e,t),afterInit:(0,r.generateLifecycleHooks)("afterInit",e,t),afterUnmount:(0,r.generateLifecycleHooks)("afterUnmount",e,t),beforeClose:(0,r.generateLifecycleHooks)("beforeClose",e,t),intents:d(e),miniApp:l(e)}}),{version:1})()},303790:(e,t,s)=>{"use strict";s.d(t,{generateLifecycleHooks:()=>d});var n=s(32489),a=s(506856);const r=({handlers:e,data:t})=>{e.forEach((e=>{e(t)}))};const d=(e,t,s)=>{const d=t.createEvent(`add/${e}`),l=t.createEvent(`remove/${e}`),c=t.createEvent(`fire/${e}`),u=t.createEvent(`complete/${e}`),_=t.createStore(new Set,{name:e}),p=t.createEffect(r),m=t.createEffect((e=>t=>{throw(0,a.error)(`MiniAppsSDK/lifecycle/handler/${e}`,t.params,t.error),new Error(`MiniAppsSDK/lifecycle/handler/${e}: ${t.error.message}`)})(e)),y=t.createEffect({name:`add/${e}`,handler:({handlers:e,handler:t})=>{e.add(t)}}),f=t.createEffect({name:`add/${e}`,handler:({handlers:e,handler:t})=>{e.delete(t)}});_.reset(s),(0,n.sample)({clock:d,source:_,fn:(e,t)=>({handlers:e,handler:t}),target:y}),(0,n.sample)({clock:l,source:_,fn:(e,t)=>({handlers:e,handler:t}),target:f}),(0,n.sample)({clock:c,source:_,fn:(e,t)=>({handlers:e,data:t}),target:p}),(0,n.sample)({clock:p.done,fn:({params:e})=>e.data,target:u}),(0,n.sample)({clock:p.fail,target:m});const g=function(e,t){return s=>(e(s),()=>{t(s)})}(d,l);return{add:g,remove:l,fire:c,complete:u}}},670053:(e,t,s)=>{"use strict";s.d(t,{getCurrentApp:()=>r});var n=s(525815),a=s(540462);function r(){if(!(0,a.partConfigEnabled)("mini_apps_replace_cur_app_with_get_current_app"))return window.cur.app;const e=n.lifecycle.miniApp.apps.getState(),[t]=n.lifecycle.miniApp.stack.getState();return e.get(t)?.app??null}},63057:(e,t,s)=>{"use strict";s.d(t,{AudioHlsNode:()=>m});var n=s(994506),a=s(434810),r=s(201659),d=s(262022),l=s(39816),c=s(166583),u=s(43866),_=s(469004),p=s(540462);class m{get isFullyLoaded(){return this.fullyLoaded}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get src(){return this.url}get hls(){return this.hlsInstance||null}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=e}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=e}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}play(){return(0,u.wrapAudioPlay)(this.audioElement).catch((e=>{switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}))}pause(){this.audioElement.pause()}addEventListeners(e){this.audioElement.addEventListener("pause",(()=>e.onPause())),this.audioElement.addEventListener("play",(()=>e.onPlay())),this.audioElement.addEventListener("progress",(()=>{if(e.onBufferUpdate(),!this.hlsInstance){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&(this.fullyLoaded=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{e.onProgressUpdate&&e.onProgressUpdate()})),this.audioElement.addEventListener("ended",(()=>{e.onEnd&&e.onEnd()})),this.onFail=e.onFail||(()=>{}),this.audioElement.addEventListener("error",(()=>{this.onFail()})),this.audioElement.addEventListener("canplay",(()=>{e.onCanPlay&&e.onCanPlay()})),this.audioElement.addEventListener("durationchange",(()=>{e.onDurationChange&&e.onDurationChange()}))}static isHlsUrl(e){const t=(0,a.audioUnmaskSource)(e).includes(".m3u8");if(!(0,n.isAudioPWAFeature)())return t;const s=(0,d.checkIsDownloadedUrl)(e);return t||s}setUrl(e){if(this.url=e,m.isHlsUrl(this.url)&&!m.shouldUseNativeHls()&&"function"==typeof window.MediaSource)return this.initHls(this.url).catch((()=>this.onFail()));this.hlsInstance&&this.hlsInstance.destroy();const t=this.audioElement.firstElementChild;return t.src=this.url,m.isHlsUrl(this.url)?t.type="application/vnd.apple.mpegurl":(0,p.partConfigEnabled)("music_clear_media_type")&&t.removeAttribute("type"),this.audioElement.load(),Promise.resolve()}static shouldUseNativeHls(){const[e]=window.browser.version.split("."),t=parseInt(e);return window.browser.safari||window.browser.msie_edge&&t>11&&t<78}initHls(e){return m.loadHls().then((({default:t})=>new Promise((s=>{let n=!1;const a=!!_.ls.get("_audio_hls_debug");this.hlsInstance&&this.hlsInstance.destroy();const d=new t({debug:a,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});d.on(t.Events.BUFFER_EOS,(()=>this.fullyLoaded=!0)),d.on(t.Events.ERROR,((e,s)=>{(a||s.fatal)&&console.log("audio hls error",e,s),s.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(n=!0,d.stopLoad(),d.startLoad()),s.fatal&&this.onFail({type:s.type,details:s.details,url:s.frag&&s.frag.url||s.context&&s.context.url,code:s.networkDetails?s.networkDetails.status:0})})),d.on(t.Events.FRAG_BUFFERED,((e,t)=>{const s=(0,r.getCurrentAudio)(),a={owner_id:s.ownerId,audio_id:s.id,fragment_id:t.frag.sn.toString(),fragment_duration:Math.ceil(1e3*t.frag.duration).toString(),time_to_first_byte:Math.ceil(t.stats.loading.first-t.stats.loading.start).toString(),time_to_first_frame:Math.ceil(t.stats.loading.end-t.stats.loading.start).toString(),buffering_time:Math.ceil(t.stats.buffering.end-t.stats.buffering.start).toString(),http_request_host:new URL(t.frag.baseurl).host};n&&(n=!1,this.audioNetworkStatCollector.logEvent({...a,event_type:l.AudioNetworkType.FRAGMENT_STALLED},c.default.getConnectionType(),c.default.getConnectionEffectiveType())),this.audioNetworkStatCollector.logEvent({...a,event_type:l.AudioNetworkType.FRAGMENT_LOADED},c.default.getConnectionType(),c.default.getConnectionEffectiveType())})),d.loadSource(e),d.attachMedia(this.audioElement),this.hlsInstance=d,s()}))))}static loadHls(){return s.e(45458).then(s.bind(s,164945))}constructor(e,t){this.fullyLoaded=!1,this.url="",this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,this.addEventListeners(e),t&&this.setUrl(t).then((()=>{this.audioElement.load()}));const s=new l.NetworkStatCollector;this.audioNetworkStatCollector=new l.AudioNetworkStatCollector(s)}}},706278:(e,t,s)=>{"use strict";s.d(t,{AudioMediaSession:()=>u});var n=s(392358),a=s(423015),r=s(251458),d=s(8520),l=s(636576),c=s(628459);class u{init(){this.mediaSession&&(this.player.subscribe(n.AudioPlayerEventType.PLAY,this.handlePlay),this.player.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlaylistChange))}async updateMediaSessionControls(){const{mediaSession:e}=this;if(e)if(this.player.ads?.isActive)e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause),e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null),e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null);else{e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause);const t=this.player.getCurrentAudio();if(this.player.isPlaying()?(e.setActionHandler("seekbackward",this.seekBackward),e.setActionHandler("seekforward",this.seekForward)):(e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null)),t&&!(0,r.isPodcast)(t))try{const[t,s]=await this.getPrevAndNextAudio();t?e.setActionHandler("previoustrack",this.previousTrack):e.setActionHandler("previoustrack",null),s?e.setActionHandler("nexttrack",this.nextTrack):e.setActionHandler("nexttrack",null)}catch(t){e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}else e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}}getPrevAndNextAudio(){return Promise.all([this.player.getPrevAudio().catch((()=>null)),this.player.getNextAudio().catch((()=>null))])}constructor(e,t){this.handlePlay=()=>{const{mediaSession:e}=this;if(!e)return;const t=this.player.getCurrentAudio(),s=(0,a.audioTupleToAudioObject)(t);if(!s)return;const n=(0,d.decodeHTMLEntities)(s.title+(s.subTitle?` (${s.subTitle})`:"")).replace(/<[^>]*>?/gm,""),r=(0,d.decodeHTMLEntities)(s.performer||"").replace(/<[^>]*>?/gm,""),l=this.player.getCurrentPlaylist(),u=l?(0,d.decodeHTMLEntities)(l.getTitle&&l.getTitle()||"").replace(/<[^>]*>?/gm,""):"",_=s.coverUrl_p||s.coverUrl_l,p=_?[{sizes:"160x160",src:_}]:[];this.updateMediaSessionControls(),(0,c.updateMediaSessionMetadata)({title:n,artist:r,album:u,artwork:p},e)},this.handlePlaylistChange=()=>{this.player&&!this.player.getCurrentAudio()&&(0,c.clear)()},this.play=()=>{this.player.play(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","play")},this.pause=()=>{this.player.pause(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","pause")},this.previousTrack=()=>{this.player.prev(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","previous_track")},this.nextTrack=()=>{this.player.next(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","next_track")},this.seekBackward=()=>{const e=(0,a.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,s=(this.player.getCurrentProgress()||0)*t,n=Math.max(0,(s-10)/t);n>0?this.player.seek(n):this.player.prev(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","seek_backward")},this.seekForward=()=>{const e=(0,a.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,s=(this.player.getCurrentProgress()||0)*t,n=Math.min(1,(s+10)/t);n<1?this.player.seek(n):this.player.next(),(0,l.statlogsValueEvent)("global_media_controls","audio_player","seek_forward")},this.player=e,this.mediaSession=t??c.DEFAULT_MEDIA_SESSION}}},392358:(e,t,s)=>{"use strict";var n;s.d(t,{AudioPlayerEventType:()=>n,events:()=>a}),function(e){e.CURRENT_CHANGED="curr",e.PLAY="start",e.PLAY_REQUESTED="request_play",e.IMPL_PLAY="impl_play",e.PAUSE="pause",e.STOP="stop",e.UPDATE="update",e.LOADED="loaded",e.ENDED="ended",e.FAILED="failed",e.BUFFERED="buffered",e.PROGRESS="progress",e.VOLUME="volume",e.PLAYLIST_CHANGED="plchange",e.PLAYLIST_CLEAR_REQUESTED="playlist_clear_requested",e.PLAYLIST_CLEARED="playlist_cleared",e.ADDED="added",e.REMOVED="removed",e.FREQ_UPDATE="freq",e.SEEK="seek",e.PLAY_NEXT="play_next",e.AD_READY="ad_ready",e.AD_DEINITED="ad_deinit",e.AD_STARTED="ad_started",e.AD_COMPLETED="ad_completed",e.PLAYER_IS_AD_CHANGED="player_is_ad_changed",e.PLAYER_IS_PLAYING_CHANGED="player_is_playing_changed",e.START_LOADING="start_load",e.CAN_PLAY="actual_start",e.SELECT="select",e.DESELECT="deselect",e.EMPTY_PLAYLIST="empty_playlist",e.NOT_FOUND_PLAYLIST="not_found_playlist",e.INIT="init",e.REQUEST_EXPANDED="request_expanded",e.PLAYLIST_START_LOADING="playlist_start_loading",e.MUSIC_AUDIOS_ADD="music_audios_add",e.MUSIC_AUDIOS_DELETE="music_audios_delete",e.MUSIC_PLAYLISTS_ADD="music_playlists_add",e.MUSIC_OWNERS_FOLLOW="music_owners_follow",e.MUSIC_OWNERS_UNFOLLOW="music_owners_unfollow",e.CURATOR_FOLLOW="curator_follow",e.CURATOR_UNFOLLOW="curator_unfollow",e.RADIOSTATION_FOLLOW="radiostation_follow",e.RADIOSTATION_UNFOLLOW="radiostation_unfollow",e.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE="current_radiostation_update",e.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE="current_audio_dislike_status_update",e.AUDIO_RESTORE_BY_DISLIKE_ACTION="audio_restore_by_dislike_action",e.AUDIO_DELETE_BY_DISLIKE_ACTION="audio_delete_by_dislike_action",e.PLACEHOLDER_REMOVE="placeholder_remove",e.PLAY_TRACK_FROM_AUTOPLAY="play_track_from_autoplay",e.CLEAN_AUTOPLAY_QUEUE="clean_autoplay_queue",e.PLAY_PREVIEW="play_preview",e.STOP_PREVIEW="stop_preview",e.END_PREVIEW="end_preview",e.PROGRESS_PREVIEW="progress_preview",e.PREVIEW_BUFFERED="preview_buffered",e.PLAY_SNIPPET="play_snippet",e.STOP_SNIPPET="stop_snippet",e.PROGRESS_SNIPPET="progress_snippet",e.SNIPPET_BUFFERED="snippet_buffered",e.SNIPPET_PLAYER_STATE_CHANGED="snippet_player_state_changed",e.SNIPPET_PLAYER_FAIL="snippet_player_fail",e.SNIPPET_PLAYER_PLAY_NEXT_SNIPPET="snippet_player_play_next_snippet",e.SNIPPET_PLAYER_PLAY_PREV_SNIPPET="snippet_player_play_prev_snippet",e.SNIPPET_PLAYER_SNIPPET_PLAYING_END="snippet_player_snippet_playing_end",e.SNIPPET_PLAYER_CHANGE_SOURCE="snippet_player_change_source",e.SNIPPET_PLAYER_PAUSED_BY_INCOMING_CALL="snippet_player_paused_by_incoming_call",e.SNIPPET_PLAYER_PAUSED_BY_VISIBILITY="snippet_player_paused_by_visibility",e.NAVIGATE_TO_SECTION="navigate_to_section"}(n||(n={}));const a=n},679937:(e,t,s)=>{"use strict";s.d(t,{AudioMixPlaylist:()=>f,PLAYLIST_CONTEXT_VKMIX:()=>p,PLAYLIST_TYPE_VKMIX:()=>_});var n=s(434518),a=s(763812),r=s(346127),d=s(488150),l=s(702130),c=s(955141),u=s(540462);const _="vkmix",p="vkmix:vk_mix";var m=(0,a._)("_items"),y=(0,a._)("_isSessionLaunched");class f extends l.AudioList{get isSessionLaunched(){return(0,n._)(this,y)[y]}get infinite(){return!0}get items(){return(0,n._)(this,m)[m]}get length(){return this.items.length}audioAt(e){return this.items.at(e)}async fetchAt(e,{range:t=0}={}){const s=this.ensureAbsIndex(e),n=this.audioAt(s),a=s+t+1-this.length;if(n&&a<=0)return n;const[r]=await this.fetchNext(a);if(!r)throw new Error("fetchNext have not return audios");return r}async fetchNext(e=1){const t=(0,u.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{id:s,isSessionLaunched:n}=this,a=(await this.service.fetchNextFx({id:s,count:e,isSessionLaunched:n,isSessionFeatureEnabled:t})).map((e=>function(e){return{mediaMetadata:{},...(0,r.mapAPIAudioToMusicAudioData)(d.AudioType.MusicTrack,e),apiAudio:e}}(e)));return this.items.push(...a),a}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");(0,n._)(this,y)[y]=!0}breakSession(){this.items.length=0,(0,n._)(this,y)[y]=!1}constructor({id:e,title:t,items:s=[],context:a}){super(),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,n._)(this,y)[y]=!1,this.fetchable=null,this.service=(0,c.createAudioVkMixPlaylistService)(),(0,n._)(this,m)[m]=[...s],this.type=_,this.title=t,this.id=e,this.context=a}}},955141:(e,t,s)=>{"use strict";s.d(t,{createAudioVkMixPlaylistService:()=>r});var n=s(32489),a=s(241024);function r(){const e=(0,n.createDomain)("audio/playlist/vkmix"),{$lists:t,fetchNextFx:s}=(0,a.createAudioVkMixService)(e);return{$lists:t,$loading:s.pending,fetchNextFx:s}}},82467:(e,t,s)=>{"use strict";s.d(t,{AudioMixPlaylist:()=>n.AudioMixPlaylist,PLAYLIST_CONTEXT_VKMIX:()=>n.PLAYLIST_CONTEXT_VKMIX,PLAYLIST_TYPE_VKMIX:()=>n.PLAYLIST_TYPE_VKMIX});var n=s(679937)},972623:(e,t,s)=>{"use strict";s.d(t,{AudioStats:()=>Y,SUBTYPE_OFF:()=>H,SUBTYPE_ON:()=>W,SUBTYPE_PLAYLIST:()=>V,SUBTYPE_UPLOAD:()=>U,TYPE_ADDED:()=>m,TYPE_BROADCASTING:()=>C,TYPE_REMOVED:()=>y,TYPE_SHARE_AUDIO:()=>E,TYPE_SHOW_ALBUM:()=>g});var n=s(7240),a=s(740342),r=s(636576),d=s(418562),l=s(469004),c=s(346723),u=s(314309),_=s(540462),p=s(317216);const m="added",y="removed",f="recommendation_removed",g="show_album",E="share_audio",A="start",b="stop",P="volume",I="rewind",T="play_further",C="broadcast",O="curator",M="default",S="next_track",D="prev_track",k="auto",L="interruption",x="continue_from_pause",R="new",B="close_app",F="queue",N="pause",U="upload",W="on",H="off",K="follow",j="unfollow",V="playlist",$="session_end",G={[A]:1,[b]:2,[P]:3,[I]:4,[T]:5,[m]:6,[y]:7,[f]:8,[g]:9,[E]:10,[C]:11,[O]:12,[p.RADIO_STATION_EVENT_ITEM]:13},q={[M]:1,[S]:2,[D]:3,[k]:4,[L]:5,[x]:6,[R]:7,[B]:8,[F]:9,[N]:10,[U]:11,[W]:12,[H]:13,[K]:14,[j]:15},z="audio_unique_unauth_id";class Y{listenOnBeforeUnload(){window.addEvent(window,"beforeunload",this.onPageClose)}stopListenOnBeforeUnload(){window.removeEvent(window,"beforeunload",this.onPageClose)}logEvent(e){return this.actionStatCollector.logEvent(e)}canOperate(){return null!==this.playerAdapter&&!(this.playerAdapter.isPodcast()||this.playerAdapter.isExternalStream()||this.playerAdapter.isAdPlaying()||this.playerAdapter.isMarusiaTrack())}getCurrentAudioParams(){if(!this.playerAdapter)return{};const e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){const[t,s]=e.split("_");return{ownerId:t,audioId:s,trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}getEnvParams(){if(this.playerAdapter)return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&window.vk.widget?String(window.cur.widgetReferrer||"").substring(0,20):""}}getListenedTime(){return this.playerAdapter&&Math.round(this.playerAdapter.getListenedTime())||0}getPlaySubtype(){if(!this.playerAdapter)return"";if(this.playerAdapter.isAutoPlayed())return k;const e=this.playerAdapter.getSequence();if(e)return e>0?S:D;const t=this.pausedAudioId,s=this.playerAdapter.getAudioId();return t&&s===t?x:R}onRadioOn(e){(0,_.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:p.RADIO_STATION_EVENT_ITEM,[p.RADIO_STATION_EVENT_ITEM]:{event_type:W,radio_station_id:e.id,track_code:e.trackCode}}):this.sendAudioEvent({type:p.RADIO_STATION_EVENT_ITEM,subtype:W,playlistId:e.id,trackCode:e.trackCode})}onRadioOff(e){(0,_.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:p.RADIO_STATION_EVENT_ITEM,[p.RADIO_STATION_EVENT_ITEM]:{event_type:H,radio_station_id:e.id,duration:this.getListenedTime(),track_code:e.trackCode}}):this.sendAudioEvent({type:p.RADIO_STATION_EVENT_ITEM,subtype:H,playlistId:e.id,listened:this.getListenedTime(),trackCode:e.trackCode})}onTrackSwitch(e,t){if(!e||!this.playerAdapter)return;let s=R;const n=this.playerAdapter.getSequence(),[a,r]=e.fullId.split("_");this.playerAdapter.isAutoPlayed()?s=k:n&&(s=n>0?S:D),this.sendCurrentAudioEvent({type:b,subtype:s,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:Number(a),audioId:Number(r)}),this.wasEnded=!0,this.collectListenedData(e),this.collectListenedDataSwitch();const d=this.listenedData;this.listenedData=null,this.sendListenedData(d)}onPageClose(){this.playerAdapter&&this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:b,subtype:B}),this.sendListenedData())}collectListenedDataSwitch(){if(this.listenedData){if(this.listenedData.end_stream_reason===$||!this.playerAdapter)return;const e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),s=this.playerAdapter.getSequence();let n=null;s&&!e?n=s>0?"next_btn":"prev":this.playlistChanged&&(n="playlist_change"),!n&&e&&(n="playlist_next"),this.listenedData.end_stream_reason=n||"new",t&&(this.listenedData.listened=t)}}collectListenedData(e=null){const t=e||this.currentAudio;if(!this.canOperate()||!t||!this.playerAdapter)return null;const s=t.fullId,n=t.trackCode||this.playerAdapter.getAudioTrackCode(),a=this.getListenedTime(),r=t.urlHash;if(r||console.log("no url hash"),!a||!r)return null;let d={audio_id:s,listened:a,context:this.playerAdapter.getContext(),hash:r};return window.cur&&window.vk.widget&&(d.ref=window.cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(d.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(d.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(d.shuffled=1)),n&&(d.track_code=n),this.playerAdapter.isRepeatCurrentAudio()?d.repeat="one":this.playerAdapter.isRepeatAll()&&(d.repeat="all"),this.playerAdapter.isAutoPlayed()&&(d.auto=1),this.playerAdapter.hasPrevAudio()&&(d.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(d.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(d.end_stream_reason="stop_btn"),d.state=document.hidden?"background":"app",this.listenedData=d,this.sendListenedDataDelayed(1e4,d),d}sendListenedData(e=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout);const t=e||this.listenedData;this.listenedData=null,t&&t.listened&&this.playerAdapter&&(this.uniqueUserId&&(t.unique_id=this.uniqueUserId),this.playerAdapter.sendListenedData(t))}sendListenedDataDelayed(e=0,t=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout((()=>this.sendListenedData(t)),e)}serializeEvent(e){const t=[G[e.type],q[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(n.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter&&this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter&&this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(""),e.targetOwnerId?t.push(e.targetOwnerId):t.push(0),this.uniqueUserId?t.push(this.uniqueUserId):t.push(""),e.positionTo?t.push(e.positionTo):t.push(null),t}sendEvent(e){this.debug&&(console.log("[audio stats event]",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),(0,r.statlogsValueEvent)("audio_sts",...this.serializeEvent(e))}sendCurrentAudioEvent(e){if(!this.playerAdapter)return;const t=this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0;this.sendEvent({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:t,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId(),...this.getEnvParams(),...this.getCurrentAudioParams(),...e})}sendAudioEvent(e){const t={...e,...this.getEnvParams()};!window.vk.id&&this.uniqueUserId&&(t.uniqueUnauthId=this.uniqueUserId),this.sendEvent(t)}destroy(){this.playerAdapter.events.off("play",this.handlePlay).off("pause",this.handlePause).off("stop",this.handlePause).off("progress",this.handleProgress).off("volume",this.handleVolume).off("seekLegacy",this.handleSeek).off("playlistChanged",this.handlePlaylistChanged).off("ended",this.handleEnded).off("playNext",this.handlePlayNext).off("adCompleted",this.handleAdCompleted),this.stopListenOnBeforeUnload(),this.listenedData=null,null!==this.sendTimeout&&clearTimeout(this.sendTimeout)}constructor(e){if(this.handlePlay=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOn(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void c.marusiaAudioStats.onPlay(this.playerAdapter);if(!this.canOperate())return;const e=this.playerAdapter.getAudio();if(!e)return;const t=e.fullId,s=this.currentAudioId===t||!this.currentAudioId,n=this.currentAudioId!==this.pausedAudioId;let a=this.playerAdapter.getListenedTime();!s&&n&&this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=Date.now(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,a=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=a,this.sendCurrentAudioEvent({type:A,subtype:this.getPlaySubtype(),position:this.currentPosition,listened:a}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1,this.listenOnBeforeUnload()},this.handlePause=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOff(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void c.marusiaAudioStats.onPause(this.playerAdapter);const e=this.playerAdapter.getAudioId();if(!this.canOperate()||!e)return;const t=this.collectListenedData();this.sendListenedDataDelayed(1e3,t),setTimeout((()=>{if(this.currentAudio&&e!==this.currentAudio.fullId)return;if(Date.now()-this.playedTime<150)return;if(!this.playerAdapter)return;this.pausedAudioId=e;const t=this.playerAdapter.getPausedBy();this.sendCurrentAudioEvent({type:b,subtype:t?t===F?F:L:N})}),100),this.stopListenOnBeforeUnload()},this.handleProgress=()=>{this.playerAdapter&&(this.playerAdapter.getProgress()<.01||!this.playerAdapter.isPlaying()||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&Date.now()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:A,subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1)))},this.handleVolume=(0,a.debounce)((()=>{this.canOperate()&&this.sendCurrentAudioEvent({type:P,subtype:M})}),300),this.handleSeek=()=>{if(!this.canOperate()||!this.playerAdapter)return;const e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent({type:I,subtype:M,...e})},this.handlePlaylistChanged=()=>{this.canOperate()&&(this.playlistChanged=!0)},this.handleEnded=()=>{this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason=$),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:b,subtype:k}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)},this.handlePlayNext=({audioFullId:e})=>{if(!this.canOperate()||!e)return;const[t,s]=e.split("_");this.sendAudioEvent({type:T,subtype:M,ownerId:Number(t),audioId:Number(s)})},this.handleAdCompleted=()=>{this.adsCompleted=!0},this.handleBroadcastStatusToggled=({status:e,targetOwnerId:t})=>{this.sendCurrentAudioEvent({type:C,subtype:e?W:H,targetOwnerId:t.toString()})},this.playerAdapter=e,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,window.vk.id)this.uniqueUserId=null;else{const e=l.ls.get(z);e?this.uniqueUserId=e:(this.uniqueUserId=(0,d.default)(),l.ls.set(z,this.uniqueUserId))}this.debug=e.isDebug(),this.playerAdapter.events.on("play",this.handlePlay).on("pause",this.handlePause).on("stop",this.handlePause).on("progress",this.handleProgress).on("volume",this.handleVolume).on("seekLegacy",this.handleSeek).on("playlistChanged",this.handlePlaylistChanged).on("ended",this.handleEnded).on("playNext",this.handlePlayNext).on("adCompleted",this.handleAdCompleted).on("broadcastStatusToggled",this.handleBroadcastStatusToggled),this.onPageClose=this.onPageClose.bind(this),this.productionStatCollector=new u.ProductionStatCollector,this.actionStatCollector=new u.ActionStatCollector(this.productionStatCollector)}}},315283:(e,t,s)=>{"use strict";s.d(t,{AudioStatsPlayerAdapter:()=>l,FULL_SCREEN_STATE:()=>d,UNKNOWN_STATE:()=>r});var n=s(392358),a=s(426389);const r=0,d=2;class l{destory(){this.unlistenPlayer()}get events(){return this.emitter.listenable}getPausedBy(){return null}getState(){return document.hidden?1:3}getProgress(){return this.player.playerGetProgress()}getProgressInSeconds(){return this.player.getProgressInSeconds()}getVolume(){return this.player.getVolume()}getAudioId(){return this.player.getAudioId()}getAudio(){return this.player.getAudio()}getAudioTrackCode(){return this.player.getAudioTrackCode()}getPrevAudioId(){return this.player.getPrevAudioId()}getPrevPlaylistId(){return this.player.getPrevPlaylistId()}getPlaylistId(){return this.player.getPlaylistId()}getContext(){return this.player.getContext()}getSequence(){return this.player.getSequence()}getType(){return this.player.getType()}getListenedTime(){return isNaN(this.player.getListenedTime())?0:Math.round(this.player.getListenedTime())}getSearchParams(){return this.player.getSearchParams()}isPlaying(){return this.player.isPlaying()}isPaused(){return this.player.isPaused()}isAutoPlayed(){return this.player.isAutoPlayed()}isRepeatCurrentAudio(){return this.player.isRepeatCurrentAudio()}isRepeatAll(){return this.player.isRepeatAll()}isShuffledPlaylist(){return this.player.isShuffledPlaylist()}isRealPlaylist(){return this.player.isRealPlaylist()}isRealPrevPlaylist(){return this.player.isRealPrevPlaylist()}isPodcast(){return this.player.isPodcast()}isExternalStream(){return this.player.isExternalStream()}isRadio(){return this.player.isRadio()}isMarusiaTrack(){return this.player.isMarusiaTrack()}isAdPlaying(){return this.player.ads.isActive}isLastTrack(){return this.player.isLastTrack()}getTrackPosition(){return this.player.getTrackPosition()}hasPrevAudio(){return this.player.hasPrevAudio()}hasPrevPlaylist(){return this.player.hasPrevPlaylist()}hasPlaylist(){return this.player.hasPlaylist()}hasSearchParams(){return this.player.hasSearchParams()}isDebug(){return!1}sendListenedData(e){return this.player.sendListenedData(e)}getPlaylistQueue(){return null}getCurrentAudio(){return this.player.getCurrentAudioData()}getPlayingAudio(){return this.isPlaying()||this.isPaused()?this.getCurrentAudio():null}listenPlayer(){this.player.subscribe(n.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.subscribe(n.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.subscribe(n.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.subscribe(n.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.subscribe(n.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.subscribe(n.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.subscribe(n.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.subscribe(n.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.subscribe(n.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.on&&(e.on("playAudio",this.handlePlayerPlayMarked),e.on("pauseAudio",this.handlePlayerPauseMarked),e.on("stopAudio",this.handlePlayerStopMarked),e.on("playAdv",this.handlePlayerPlayAdv),e.on("pauseAdv",this.handlePlayerPauseAdv),e.on("stopAdv",this.handlePlayerStopAdv),e.on("seek",this.handlePlayerSeek),e.on("stateRestore",this.handlePlayerStateRestore),e.on("broadcastStatusToggled",this.handlePlayerBroadcastStatusToggled))}unlistenPlayer(){this.player.unsubscribe(n.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.unsubscribe(n.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.unsubscribe(n.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.unsubscribe(n.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.unsubscribe(n.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.unsubscribe(n.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.unsubscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.unsubscribe(n.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.unsubscribe(n.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.unsubscribe(n.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.off&&(e.off("playAudio",this.handlePlayerPlayMarked),e.off("pauseAudio",this.handlePlayerPauseMarked),e.off("stopAudio",this.handlePlayerStopMarked),e.off("playAdv",this.handlePlayerPlayAdv),e.off("pauseAdv",this.handlePlayerPauseAdv),e.off("stopAdv",this.handlePlayerStopAdv),e.off("seek",this.handlePlayerSeek),e.off("stateRestore",this.handlePlayerStateRestore))}constructor(e,t){this.emitterFactory=t,this.emitter=this.emitterFactory.create(),this.handlePlayerPlay=()=>{this.emitter.emit("play")},this.handlePlayerPlayMarked=e=>{const{audio:t,reason:s,progressTime:n}=e;m(t),function(e){if(!c.includes(e))throw new Error(`Invalid play reason: ${e}`)}(s),y(n),this.emitter.emit("playAudio",{audio:t,reason:s,progressTime:n})},this.handlePlayerPause=()=>{this.emitter.emit("pause")},this.handlePlayerPauseMarked=e=>{const{audio:t,reason:s,progressTime:n}=e;m(t),function(e){if(!u.includes(e))throw new Error(`Invalid pause reason: ${e}`)}(s),y(n),this.emitter.emit("pauseAudio",{audio:t,reason:s,progressTime:n})},this.handlePlayerStop=()=>{this.emitter.emit("stop")},this.handlePlayerStopMarked=e=>{const{audio:t,reason:s,progressTime:n}=e;m(t),function(e){if(!_.includes(e))throw new Error(`Invalid stop reason: ${e}`)}(s),y(n),this.emitter.emit("stopAudio",{audio:t,reason:s,progressTime:n})},this.handlePlayerProgress=()=>{this.emitter.emit("progress")},this.handlePlayerVolume=()=>{this.emitter.emit("volume")},this.handlePlayerSeekLegacy=()=>{this.emitter.emit("seekLegacy")},this.handlePlayerSeek=e=>{const{audio:t,reason:s,progressTime:n,fromTime:a}=e;m(t),function(e){if(!p.includes(e))throw new Error(`Invalid seek reason: ${e}`)}(s),y(n),y(a),this.emitter.emit("seek",{audio:t,reason:s,progressTime:n,fromTime:a})},this.handlePlayerPlaylistChanged=()=>{this.emitter.emit("playlistChanged")},this.handlePlayerEnded=()=>{this.emitter.emit("ended")},this.handlePlayerPlayNext=(e,t)=>{this.emitter.emit("playNext",{currentAudio:e,audioFullId:t})},this.handlePlayerAdCompleted=()=>{this.emitter.emit("adCompleted")},this.handlePlayerPlayAdv=e=>{this.emitter.emit("playAdv",e)},this.handlePlayerPauseAdv=e=>{this.emitter.emit("pauseAdv",e)},this.handlePlayerStopAdv=e=>{this.emitter.emit("stopAdv",e)},this.handlePlayerStateRestore=e=>{const{audio:t,progressTime:s}=e;t&&m(t),y(s),this.emitter.emit("stateRestore",{audio:t,progressTime:s})},this.handlePlayerBroadcastStatusToggled=e=>{this.emitter.emit("broadcastStatusToggled",e)},this.player=e,this.listenPlayer()}}const c=Object.values(a.AudioPlayerPlayAudioEventReason),u=Object.values(a.AudioPlayerPauseAudioEventReason),_=Object.values(a.AudioPlayerStopAudioEventReason),p=Object.values(a.AudioPlayerSeekEventReason);function m(e){if(!e||"object"!=typeof e)throw new Error(`Invalid TrackedAudioData: ${e}`);if(!Number.isFinite(e.id))throw new Error(`Invalid TrackedAudioData (id is not finite): ${e.id}`);if(!Number.isFinite(e.ownerId))throw new Error(`Invalid TrackedAudioData (ownerId is not finite): ${e.ownerId}`);if("string"!=typeof e.trackCode)throw new Error("Invalid TrackedAudioData (trackCode is not string): "+typeof e.trackCode)}function y(e){if("number"!=typeof e)throw new Error(`Value is not number (given: ${typeof e})`)}},7240:(e,t,s)=>{"use strict";s.d(t,{AudioStatsPlayerAdapter:()=>n.AudioStatsPlayerAdapter,FULL_SCREEN_STATE:()=>n.FULL_SCREEN_STATE,UNKNOWN_STATE:()=>n.UNKNOWN_STATE});var n=s(315283)},956648:(e,t,s)=>{"use strict";s.d(t,{AudioTaskManager:()=>r,TaskName:()=>n});var n,a=s(762701);!function(e){e.URL="url",e.PLAYBACK_RATE="playback_rate",e.DELAY="delay",e.SEEK="seek",e.PAUSE="pause",e.PLAY="play",e.VOL_SET="vol_set",e.VOL_UP="vol_up",e.VOL_DOWN="vol_down"}(n||(n={}));class r{newTask(e,t){let s,n;const a=new Promise(((e,t)=>{s=e,n=t}));return this.tasks.push({name:e,fn:()=>t().then(s).catch(n),id:`${e}_${this.taskIDCounter++}`}),this.doTasks(),a}clearAllTasks(){this.taskAbort=this.taskInProgress,this.taskInProgress=null,this.tasks=[]}clearTask(e){this.tasks=this.tasks||[],this.tasks=this.tasks.filter((t=>t.name!==e))}doTasks(){if(this.taskInProgress)return;const e=this.tasks.shift();e&&(this.taskInProgress=e.id,this.ensureImplReady().then((()=>e.fn())).then((()=>{this.taskAbort!==e.id?(this.taskInProgress=null,this.doTasks()):this.taskAbort=null})))}ensureImplReady(){return new Promise((e=>this.impl.onReady(e)))}delay(e){return this.newTask("delay",(()=>new Promise((t=>(0,a.setWorkerTimeout)(t,e)))))}setUrl(e){return this.newTask("url",(()=>new Promise((t=>this.impl.setUrl(e,t)))))}seekImmediate(e){this.impl.seek(e)}seek(e){return this.clearTask("seek"),this.newTask("seek",(()=>new Promise((t=>{this.seekImmediate(e),t()}))))}pause(){return this.newTask("pause",(()=>new Promise((e=>{this.impl.pause(),e()}))))}play(){return window.browser.safari&&this.impl.play(),this.newTask("play",(()=>new Promise(((e,t)=>{this.impl.play().then(e).catch(t)}))))}setVolume(e,t,s=null){if(t){const t=e?"vol_up":"vol_down";return this.newTask(t,(()=>new Promise((t=>this.impl.fadeVolume(e,s,(()=>t()))))))}return this.newTask("vol_set",(()=>new Promise((t=>{this.impl.setVolume(e),t()}))))}updatePlaybackRate(e){return this.newTask("playback_rate",(()=>new Promise((t=>{this.impl.setPlaybackRate(e),t()}))))}constructor(e){this.impl=e,this.taskIDCounter=1,this.tasks=[],this.taskInProgress=null,this.taskAbort=null}}},653192:(e,t,s)=>{"use strict";s.d(t,{AutoplayQueue:()=>u});var n=s(8520),a=s(867366),r=s(392358),d=s(519290),l=s(18058),c=s(730640);class u{get list(){return this._list}get length(){return this._list.length}get enabled(){return this.service.$enabled.getState()}hasSource(e){const t=(0,c.clearObject)({...e,offset:void 0});return this.sources.some((e=>(0,n.isEqual)(t,(0,c.clearObject)({...e,offset:void 0}))))}setSource(e){this.hasSource(e)||(this.sources=[(0,c.clearObject)(e)],this.nextFrom=null,this._list=[],this.hasMore=!0,this.fetchNextAudios())}async fetchNextAudios(){try{const e=this.nextFrom??this.sources[0];if(!e)return[];const t=await this.fetchService.getAutoplayAudioIdsBySource(e);if(!t)return[];const{next_from:s,audios:n}=t;if(this.nextFrom=s,this.hasSource(s)||this.sources.push(s),!n||!n.length)return this.hasMore=!1,[];const r=n.map((e=>e.audio_raw_id)).join(","),l=await this.fetchService.reloadAudios(r),c=this.getCurrentQueueAudioIds(),u=l.map(((e,t)=>(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=n[t]?.access_key||"",e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=n[t]?.track_code||"",e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]="autoplay",e))).filter((e=>!c.some((t=>t.includes((0,d.getAudioFullId)(e))))));return this._list.push(...u),u}catch(e){console.log(e)}}async getNextAudios(e=0){const t=Math.min(e+10,this._list.length);if(e>this._list.length-1){const t=await this.fetchNextAudios();return t&&t.length>0?this.getNextAudios(e):[]}return this._list.slice(e,t)}getAudioById(e){return this._list.find((t=>e.includes((0,d.getAudioFullId)(t))))}indexOf(e){const t=(0,d.getAudioFullId)(e);return this._list.findIndex((e=>(0,d.getAudioFullId)(e)===t))}spliceHead(e){return this._list.splice(0,e+1)}clean(){this._list=[],this.sources=[],this.nextFrom=null,this.hasMore=!1,this.eventBus.emit(r.AudioPlayerEventType.CLEAN_AUTOPLAY_QUEUE)}constructor(e,t,s){this._list=[],this.sources=[],this.nextFrom=null,this.service=(0,l.ensureAutoplayService)(),this.hasMore=!0,this.fetchService=e,this.getCurrentQueueAudioIds=s,this.eventBus=t,this.service.init()}}},726680:(e,t,s)=>{"use strict";s.d(t,{EventBus:()=>n});class n{subscribe(e,t){return Array.isArray(e)&&e.forEach((e=>this.subscribe(e,t))),this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(this.subscriptions[e]){const s=this.subscriptions[e].indexOf(t);s>=0&&this.subscriptions[e].splice(s,1)}}emit(e,...t){this.precheck&&!this.precheck(e,...t)||(this.onAnyCallBack&&setTimeout((()=>this.onAnyCallBack(e,...t))),this.subscriptions[e]&&this.subscriptions[e].forEach((e=>setTimeout((()=>e(...t))))))}constructor(){this.subscriptions={}}}},269808:(e,t,s)=>{"use strict";var n,a;s.d(t,{PlaylistSourceType:()=>n,PlaylistType:()=>a,isAutoplayEnabledForPlaylist:()=>d}),function(e){e.CATALOG="catalog",e.MESSAGE="im",e.FEED="feed",e.WALL="wall",e.ALBUM="album",e.CURATOR="curator",e.PLAYLIST="playlist",e.VKMIX="vkmix",e.PODCAST="podcast"}(n||(n={})),function(e){e.TYPE_CURRENT="current",e.TYPE_PLAYLIST="playlist",e.TYPE_MY="my",e.TYPE_ALBUM="album",e.TYPE_TEMP="temp",e.TYPE_RECOM="recoms",e.TYPE_SEARCH="search",e.TYPE_LIVE="live",e.TYPE_WALL="wall",e.TYPE_RECENT="recent",e.TYPE_RADIO="radio",e.TYPE_ARTICLE_TTS="article_tts",e.TYPE_VKMIX="vkmix"}(a||(a={}));const r=["radio","article_tts"],d=e=>!r.includes(e.getType())},673269:(e,t,s)=>{"use strict";s.d(t,{PlaylistQueue:()=>B});var n=s(327813),a=s(8520),r=s(540462),d=s(898848),l=s(667545),c=s(867366),u=s(423015),_=s(653192),p=s(392358),m=s(269808),y=s(223009),f=s(590733),g=s(213236),E=s(105330),A=s(519290),b=s(482310),P=s(137590),I=s(768035);const{AUDIO_ITEM_INDEX_OWNER_ID:T,AUDIO_ITEM_INDEX_TRACK_CODE:C,AUDIO_ITEM_INDEX_ID:O,AUDIO_QUEUE_MAX_AUDIOS_COUNT:M,AUDIO_ITEM_INDEX_URL:S,AUDIO_ITEM_INDEX_TITLE:D,AUDIO_ITEM_INDEX_PERFORMER:k,AUDIO_ITEM_INDEX_EXTRA:L,AUDIO_ITEM_ACCESS_KEY:x,AUDIO_ITEM_INDEX_CONTEXT:R}=c.AUDIO_PLAYER_ENUMS;class B{get isAutoplayEnabled(){return this._autoplayQueue?.enabled??!1}get list(){return this._list}get shuffled(){return this._shuffled}get eventBus(){return this._eventBus}get source(){return this._source}get autoplayQueue(){return this.isAutoplaySupported?this._autoplayQueue:null}setSortedQueue(e,t){Array.isArray(e)&&(this._shuffled=!1,this._list=[],this.originalList=[],this.addToList(e),t&&this.setSource(t))}async setSortedQueueByPlaylist(e){return this.clean(),this.addPlaylist(e)}setSource(e){this._source=e}setAutoplaySourceFromPlaylist(e){if(!this.isAutoplaySupported)return;const t=(0,y.getPlaylistRawSource)(e),s=(0,g.getAutoplayPlaylistSource)(t);this.setAutoplaySource(s)}setAutoplaySource(e){this._autoplayQueue?.setSource({...e,offset:0})}getAudioIds(e){return"string"==typeof e?e.split("_"):"object"!=typeof e||Array.isArray(e)?[e[T],e[O]]:[e.ownerId,e.id]}compareAudiosIds(e,t){return!(!Array.isArray(e)||e.length<2||!t)&&(e[0]==t[T]&&e[1]==t[O])}fetchAudios(e){let t=e;return Array.isArray(t)&&(t=t.join(",")),this.fetchService.reloadAudios(t)}findAndFetchEmptyAudiosFrom(e){const t=[],s=[],n=this._list;let a=e+M;a=a<n.length?a:n.length-1;for(let r=e;r<=a;r++){const e=n[r];if(this.isEmptyAudio(e)&&e){const n=`${e[T]}_${e[O]}_${e[x]}`;t.push(n),s.push(r)}}return t.length<1?Promise.resolve({counter:0,successful:!0}):this.fetchAudios(t).then((e=>{if(e){let a=this.syncAndRemoveUnmatchedAudios(t,e,n);return this.truncateArray(s,a),s.forEach(((t,s)=>{if(e[s]){const a=(0,b.getAudioExtra)(e[s]);if(a){const r=(0,b.getAudioExtra)(n[t]);if(r){const t=(0,P.mergeAudioExtra)(r,a);t&&(e[s][L]=t)}else e[s][L]=n[t][L]}else e[s][L]=n[t][L];e[s][C]=n[t][C],n[t]=e[s]}})),{counter:a,successful:!0}}return{counter:0,successful:!1}})).catch((()=>({counter:0,successful:!1})))}truncateArray(e,t){return e.length=Math.max(e.length-t,0),e}syncAndRemoveUnmatchedAudios(e,t,s){if(e.length===t.length)return 0;let n=0;const a=t.map((e=>e[O]));return e.forEach((e=>{const t=Number(e.split("_")[1]);if(!a.includes(t)){const[t,a]=e.split("_"),r=s.find((e=>Number(e[O])===Number(a)&&Number(e[T])===Number(t)));r&&(n++,this.removeAudio(r))}})),n}getAudio(e){if(!e)return Promise.resolve(null);let t=null,s=null;const n=this.getAudioIds(e);return this._list.find(((e,a)=>!!this.compareAudiosIds(n,e)&&(s=a,t=e,!0))),t&&null!==s?this.isEmptyAudio(t)?this.findAndFetchEmptyAudiosFrom(s).then((({successful:e})=>e&&null!==s?Promise.resolve(this._list[s]):Promise.resolve(null))).catch((()=>Promise.resolve(null))):Promise.resolve(t):Promise.resolve(null)}async getFirstAudio(e){const t=await this.getAudioAt(0);return t&&e&&(0,u.audioTupleToAudioObject)(t).isClaimed?this.getNextAudio(t,{repeat:!1,ignoreClaimed:e}):t}async getLastAudio(e){const t=this.length-1;if(t<0)return null;const s=await this.getAudioAt(t);return s&&e&&(0,u.audioTupleToAudioObject)(s).isClaimed?this.getPrevAudio(s,{repeat:!1,ignoreClaimed:e}):s}async getPrevAudio(e,t={}){const{ignoreClaimed:s}=t,n=this.indexOfAudio(e);if(n<0)return null;const a=n-1;if(a<0)return t.repeat?this.getLastAudio(s):null;const r=await this.getAudioAt(a);return r&&s&&(0,u.audioTupleToAudioObject)(r).isClaimed?this.getPrevAudio(r,t):r}async getNextAudio(e,t={}){const{autoplayQueue:s}=this,{ignoreClaimed:n}=t,a=this.indexOfAudio(e);if(a<0)return null;const r=a+1;if(r>=this.length){if(t.repeat)return this.getFirstAudio(n);if(s?.enabled){const e=s.list;if(e.length>0)return e[0]}return null}const d=await this.getAudioAt(r);return d&&n&&(0,u.audioTupleToAudioObject)(d).isClaimed?this.getNextAudio(d,t):d}indexOfAudio(e){if(!e)return-1;let t=this.getAudioIds(e);return this._list?this._list.findIndex((e=>this.compareAudiosIds(t,e))):-1}getAudioAt(e){return!Array.isArray(this._list)||this._list.length<=e?Promise.resolve(null):e<0?this.findAndFetchEmptyAudiosFrom(0).then((()=>this._list[0])):this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list[e]))}async getPrevAndNextAudios(e){if(!e)return[null,null];let t=null,s=null;const n=this._list.findIndex((t=>t[C]===e[C]));let a=n-1,r=n+1;if(a>=0&&(t=this._list[a]),r<this._list.length&&(s=this._list[r]),t&&this.isEmptyAudio(t)||s&&this.isEmptyAudio(s))try{await this.findAndFetchEmptyAudiosFrom(a>0?a:n)}catch(e){}return[t,s]}getAudios(e,t){return Number.isInteger(e)&&Number.isInteger(t)?(e<0&&(e=0),e>this._list.length?Promise.resolve(null):(t-e>M&&(t=e+M),t>this._list.length&&(t=this._list.length),this.findAndFetchEmptyAudiosFrom(e).then((({counter:s})=>this._list.slice(e,t+1-s))))):Promise.resolve(null)}removeAudio(e){let t=this.indexOfAudio(e);return t>=0?(this._list.splice(t,1),t):-1}addToList(e,t,s){const n=this._list;let a=e;void 0!==t||s?a.forEach((e=>{const t=this.indexOfAudio(e);t>=0&&n.splice(t,1)})):a=a.filter((e=>-1===this.indexOfAudio(e))),a.forEach((e=>{null===e[L]&&(e[L]="[]"),e[D]=(0,d.clean)((0,d.replaceEntities)(e[D]).replace(/(<em>|<\/em>)/g,"")),e[k]=(0,d.clean)((0,d.replaceEntities)(e[k]).replace(/(<em>|<\/em>)/g,""))})),void 0===t?(this.shuffled&&this.originalList.push(...a),n.push(...a)):(this.shuffled&&this.originalList.push(...a),n.splice(t,0,...a))}addAudio(e,t){this.isArrayOfAudioTuples(e)?this.addToList(e,t):e?.length&&this.addToList([e],t)}isArrayOfAudioTuples(e){return Array.isArray(e)&&Array.isArray(e[0])}addEmptyAudios(e){const t=e.map((e=>{const{audio_raw_id:t,access_key:s,track_code:n}=e,{ownerId:a,id:r}=(0,I.parseRawId)(t),d=[];return d[T]=a,d[O]=r,d[x]=s,d[C]=n,d}));this.addToList(t,void 0,!0)}async addNoConsecutivePlaylist(e,t){const s=(0,y.getPlaylistRawSource)(e),n=(0,f.getPlaylistSource)(s),a=(0,g.getAutoplayPlaylistSource)(s,(0,A.getAudioFullId)(t));return"autoplay"===t[R]||this._autoplayQueue?.hasSource(a)||(this.setSource(n),this.setAutoplaySource(a),this._list=[],this.addToList([t])),!0}async addPlaylist(e){if(this.isAutoplayEnabledForPlaylist=(0,m.isAutoplayEnabledForPlaylist)(e),!this.isAutoplayEnabledForPlaylist){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}const{isAutoplaySupported:t}=this,s=(0,y.getPlaylistRawSource)(e),n=(0,f.getPlaylistSource)(s);if((0,a.isEqual)(n,this._source)){if(t&&this.length){const e=(0,g.getAutoplayPlaylistSource)(s);this.setAutoplaySource(e)}return!0}if(this.setSource(n),n.source===m.PlaylistSourceType.VKMIX){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}if(e.isLive()||e?.isLoadable())return this._autoplayQueue?.clean(),!0;if(t){const t=(0,g.getAutoplayPlaylistSource)(s);if(!this._source)return!1;try{const{audioIds:s}=await this.fetchService.getAudioIdsBySource(n);if(!Array.isArray(s)||0===s.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(s),this.setAutoplaySource(t),!0}catch{return!1}}try{const t=await e.getAudioIds();if(!Array.isArray(t)||0===t.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(t),!0}catch{return!1}}moveAudio(e,t){let s=this._list.splice(e,1);e<t&&(t-=1),this._list.splice(t,0,s[0])}clean(){this._list=[],this.originalList=[],this._shuffled=!1,this._source=null}moveAudioAtFirstPosition(e){let t=this.indexOfAudio(e);-1!==t?(this._list.splice(t,1),this._list.unshift(e)):this._list.unshift(e)}removeSortedList(){this.originalList&&(this._list=[].concat(this.originalList)),this._shuffled=!1}get length(){return this.list.length}isEmpty(){return!this.length}shuffle(e,t){if(!(e&&this.shuffled||!e&&!this.shuffled)){if(e){const[e]=this._list;this.originalList=[...this._list],this._list=function(e){let t=e.length;for(;t>0;){const s=Math.floor(Math.random()*t);t--;const n=e[t];e[t]=e[s],e[s]=n}return e}([...this._list]),!t&&e&&this.moveAudioAtFirstPosition(e),this._shuffled=!0}else this._list=[...this.originalList],this._shuffled=!1;return!0}}resetShuffle(){this.shuffle(!1)}constructor(e,t){if(this._autoplayQueue=null,this.isAutoplaySupported=(0,r.partConfigEnabled)("autoplay_web")&&!(0,E.isMvk)(),this.isEmptyAudio=e=>!(e&&(e[S]||(0,l.isClaimedAudio)(e))),B.instance)return B.instance;if(this.fetchService=e,this._list=[],this.originalList=[],this._source=null,this._shuffled=!1,this._eventBus=t,this.isAutoplaySupported){const s=new _.AutoplayQueue(e,t,(()=>this._list.map(A.getAudioFullId)));this._autoplayQueue=s,this.isAutoplayEnabledForPlaylist=!0,this._eventBus.subscribe(p.AudioPlayerEventType.PLAY_TRACK_FROM_AUTOPLAY,(e=>{const t=s.indexOf(e);if(t>=0){const e=s.spliceHead(t);this.addToList(e)}}))}B.instance=this,(0,r.partConfigEnabled)("audio_mobx")&&(0,n.makeObservable)(this,{_list:n.observable,_shuffled:n.observable,setSortedQueue:n.action,setSortedQueueByPlaylist:n.action,shuffle:n.action,resetShuffle:n.action,clean:n.action,removeAudio:n.action,addPlaylist:n.action,moveAudio:n.action,removeSortedList:n.action})}}},233297:(e,t,s)=>{"use strict";s.d(t,{SpecialProjectController:()=>c});var n,a=s(503628),r=s(119864),d=s(445798);let l;!function(e){e.Opened="opened",e.Closed="closed"}(n||(n={}));class c{static get(){if(!l)throw new Error("SpecialProjectController must be initialized.");return l}static init(e){if(!e)throw new Error("SpecialProjectController must be initialized with showModal.");return l||(l=new c(e),l)}showModal(e,t){this.showCurrentModal&&this.showCurrentModal(t,this.tryToSendCloseReason(e))}constructor(e){this.projects={},this.statCollector=null,this.wasProjectShown=e=>!!this.projects[e],this.tryModal=async(e,t)=>{if(!this.wasProjectShown(e))try{const s=await this.getSpecialProject(e);this.showModal(e,s),this.statCollector?.open(+e,t)}catch(e){}finally{this.projects[e]="opened"}},this.tryToSendCloseReason=e=>t=>{"closed"!==this.projects[e]&&(this.consumeSpecialProject(e,t),this.statCollector?.close(),this.projects[e]="closed")},this.getSpecialProject=async e=>{const t=await(0,a.getSpecialProject)({special_project_id:e});return(0,d.mapSpecialProjectData)(t)},this.consumeSpecialProject=(e,t)=>(0,a.consumeSpecialProject)({special_project_id:e,reason:t}),this.statCollector=new r.SpecialProjectStatCollector,this.showCurrentModal=e}}},119864:(e,t,s)=>{"use strict";s.d(t,{SpecialProjectStatCollector:()=>r});var n=s(317216),a=s(314309);class r{open(e,t){if(this.openedModal)throw new Error("Modal must be closed before opening");this.openedModal={id:e,trackCode:t,startView:this.productCollector.getCurrentTime()}}close(){const{openedModal:e}=this;if(!e)throw new Error("Modal must be open before closing");this.sendView(e),this.openedModal=null}sendView(e){const t={end_view:this.productCollector.getCurrentTime(),start_view:e.startView,type:n.ViewProductionStatEventTypes.TYPE_CATALOG_SPECIAL_PROJECT_ITEM},s={type:n.EventItemType.AUDIO_SPECIAL_PROGECT_MODAL,id:e.id,track_code:e.trackCode};this.viewCollector.logEvent(t,s)}constructor(){this.openedModal=null,this.productCollector=new a.ProductionStatCollector,this.viewCollector=new a.ViewStatCollector(this.productCollector)}}},514871:(e,t,s)=>{"use strict";s.d(t,{SpecialProjectHeader:()=>u});var n=s(474848),a=s(296540),r=s(612196),d=s(8520),l=s(551009);const c=e=>{const[t]=e.filter((e=>!!e&&!!e.url)).map((e=>e.url));return t},u=(0,a.memo)((({style:e,image:t=[],className:s,backgroundImage:a=[]})=>{const u=c(a),_=c(t);return(0,n.jsx)("div",{className:(0,d.classNames)(l.default.root,s,{[l.default.singleImage]:"image"===e}),style:{backgroundImage:`url(${"avatar"===e?u:_})`},children:"avatar"===e&&(0,n.jsx)(r.Avatar,{noBorder:!0,src:_,size:72})})}))},445798:(e,t,s)=>{"use strict";s.d(t,{mapSpecialProjectData:()=>n});const n=e=>({...e,backgroundImage:e.background_image})},423769:(e,t,s)=>{"use strict";function n(e){const t=e?.options;if(!t)return[];const s=[];for(const e of t)switch(e.type){case"copy":{const{name:t,copyText:n}=e;if(!t||!n)break;const a=()=>{navigator.clipboard.writeText(n)};s.push({type:"action",label:t,action:a});break}case"default":{const{name:t,clickLink:n}=e;if(!t)break;if(n){s.push({type:"link",label:t,href:n});break}break}}return s}s.d(t,{makeChoicesFromAdman:()=>n})},255818:(e,t,s)=>{"use strict";s.d(t,{makeAudioAdFromAdman:()=>a});var n=s(423769);function a(e){return{id:e.banner_id,choices:(0,n.makeChoicesFromAdman)(e.adChoices)}}},216577:(e,t,s)=>{"use strict";function n(e){return new Promise(((t,s)=>{window.ajax.post("al_audio.php",{act:"get_lyrics",aid:e.audio_id},{onDone:t,onFail:e=>(s(e),!0)})}))}s.d(t,{getLyrics:()=>n})},503628:(e,t,s)=>{"use strict";s.d(t,{consumeSpecialProject:()=>r,getSpecialProject:()=>a});var n=s(897630);const a=(0,n.createMethod)("audio.getSpecialProject"),r=(0,n.createMethod)("audio.consumeSpecialProject")},897630:(e,t,s)=>{"use strict";s.d(t,{createMethod:()=>a});var n=s(957994);function a(e){return t=>(0,n.api)(e,t)}},867366:(e,t,s)=>{"use strict";var n,a;s.d(t,{AUDIO_PLAYER_ENUMS:()=>r,AudioPlaylistContext:()=>d,EAudioFlagBit:()=>a,EAudioTupleIndex:()=>n}),function(e){e[e.ID=0]="ID",e[e.OWNER_ID=1]="OWNER_ID",e[e.URL=2]="URL",e[e.TITLE=3]="TITLE",e[e.PERFORMER=4]="PERFORMER",e[e.DURATION=5]="DURATION",e[e.ALBUM_ID=6]="ALBUM_ID",e[e.AUTHOR_LINK=8]="AUTHOR_LINK",e[e.LYRICS=9]="LYRICS",e[e.FLAGS=10]="FLAGS",e[e.CONTEXT=11]="CONTEXT",e[e.EXTRA=12]="EXTRA",e[e.HASHES=13]="HASHES",e[e.COVER_URL=14]="COVER_URL",e[e.ADS=15]="ADS",e[e.SUBTITLE=16]="SUBTITLE",e[e.MAIN_ARTISTS=17]="MAIN_ARTISTS",e[e.FEAT_ARTISTS=18]="FEAT_ARTISTS",e[e.ALBUM=19]="ALBUM",e[e.TRACK_CODE=20]="TRACK_CODE",e[e.RESTRICTION=21]="RESTRICTION",e[e.ALBUM_PART=22]="ALBUM_PART",e[e.IS_NEW_STATS=23]="IS_NEW_STATS",e[e.ACCESS_KEY=24]="ACCESS_KEY",e[e.CHART_INFO=25]="CHART_INFO",e[e.TRACK_PAGE_ID=26]="TRACK_PAGE_ID",e[e.IS_ORIGINAL_SOUND=27]="IS_ORIGINAL_SOUND",e[e.ADMIN_URL=28]="ADMIN_URL",e[e.UMA_QUERY_URL=29]="UMA_QUERY_URL"}(n||(n={})),function(e){e[e.HAS_LYRICS=1]="HAS_LYRICS",e[e.CAN_ADD=2]="CAN_ADD",e[e.CLAIMED=4]="CLAIMED",e[e.QUEUE=8]="QUEUE",e[e.HQ=16]="HQ",e[e.LONG_PERFORMER=32]="LONG_PERFORMER",e[e.UMA=128]="UMA",e[e.REPLACEABLE=512]="REPLACEABLE",e[e.EXPLICIT=1024]="EXPLICIT",e[e.SHOW_INFO=8192]="SHOW_INFO"}(a||(a={}));const r={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_CHART_INFO_INDEX:25,AUDIO_ITEM_INDEX_TRACK_PAGE_ID:26,AUDIO_ITEM_INDEX_IS_ORIGINAL_SOUND:27,AUDIO_ITEM_INDEX_ADMIN_URL:28,AUDIO_ITEM_INDEX_UMA_QUERY_URL:29,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_QUEUE_BIT:8,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ITEM_SHOW_INFO_BIT:8192,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',AUDIO_QUEUE_MAX_AUDIOS_COUNT:35,LOG_LS_KEY:"audiolog",ONBOARDING_ARTISTS_LS_KEY:"artists_onboarding",AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY:"audio_recoms_onboarding_need_skip"};var d;!function(e){e.USER_WALL="user_wall",e.GROUP_WALL="group_wall",e.WALL="wall",e.FEED="feed"}(d||(d={}))},766194:(e,t,s)=>{"use strict";s.d(t,{setAudioLastListRefCookie:()=>u,setAudioLastListRefCookieDebounced:()=>_});var n=s(8520),a=s(873900),r=s(396858),d=s(540462);const l="remixaudio_last_list_ref",c=1/24/60;function u({ref:e,list:t,index:s}){if(!(0,d.partConfigEnabled)("audio_player_stats_ref_web"))return;const u={list_id:(0,a.getIdentityRawId)(t),ref:e};(0,n.isNumber)(s)&&(u.index=s);const _=JSON.stringify(u);(0,r.setCookie)(l,_,c)}const _=(0,n.debounce)(u,50)},18058:(e,t,s)=>{"use strict";s.d(t,{ensureAutoplayService:()=>l});var n=s(32489),a=s(978746),r=s(540462);let d;function l(){return d||(d=function(){const e=(0,n.createDomain)("audio/autoplay"),t=(0,a.ensureAccountInfoService)(),{$accountInfo:s,setInfoFx:d}=t,l=(0,r.partConfigEnabled)("autoplay_web_toggle"),c=e.createStore(l),u=e.createStore(!1),_=e.createEffect((e=>d({query:{name:"audio_autoplay",value:e}})));return{$toggleSupported:c,$enabled:u,setEnabledFx:_,init:function(){c.on(s,((e,{audio_autoplay:t})=>l&&void 0!==t)),(0,n.sample)({source:{accountInfo:s,toggleSupported:c},fn:({accountInfo:e,toggleSupported:t})=>!t||(e.audio_autoplay??!1),target:u}),t.initEvent()}}}()),d}},262022:(e,t,s)=>{"use strict";s.d(t,{checkIsDownloadedUrl:()=>a});var n=s(434810);function a(e){return(0,n.audioUnmaskSource)(e).includes("blob:http")}},730640:(e,t,s)=>{"use strict";s.d(t,{clearObject:()=>r});var n=s(596034),a=s(269592);function r(e){return(0,n.default)(e,a.default)}},310619:(e,t,s)=>{"use strict";s.d(t,{decodeHTML:()=>r});var n=s(8520);const a={"amp;":"&","#38;":"&","lt;":"<","#60;":"<","gt;":">","#62;":">","apos;":"'","#39;":"'","quot;":'"',"#34;":'"',"copy;":"©"};function r(e){return(0,n.decodeHTMLEntities)(e,a)}},482310:(e,t,s)=>{"use strict";s.d(t,{getAudioExtra:()=>r});var n=s(898848),a=s(867366);function r(e){if(!e)return null;let t;if((0,n.isObject)(e)){t=e.extra}else{t=e[a.EAudioTupleIndex.EXTRA]}if((0,n.isObject)(t))return t;try{return JSON.parse(t||"{}")}catch(e){return null}}},519290:(e,t,s)=>{"use strict";s.d(t,{getAudioFullId:()=>a});var n=s(867366);const a=e=>e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]},213236:(e,t,s)=>{"use strict";s.d(t,{getAutoplayPlaylistSource:()=>n});const n=(e,t="")=>{const{entity_id:s,...n}=e;return{...n,audio_id:t}}},201659:(e,t,s)=>{"use strict";s.d(t,{getCurrentAudio:()=>r});var n=s(423015),a=s(105330);function r(){const e={id:0,ownerId:0};try{return(0,a.isMvk)()?window.audio.getCurrent()||e:(0,n.audioTupleToAudioObject)(window.getAudioPlayer().getCurrentAudio())||e}catch(t){return e}}},223009:(e,t,s)=>{"use strict";s.d(t,{getPlaylistRawSource:()=>a});var n=s(269808);const a=e=>{const t=e.getContext(),s=e.getBlockId(),a=e.getFullId();if(s)return{source:n.PlaylistSourceType.CATALOG,section_id:s,entity_id:s,playlist_id:a};if(e.getType()===n.PlaylistSourceType.CURATOR)return{source:n.PlaylistSourceType.CURATOR,section_id:s,entity_id:s,playlist_id:a};const{sourceType:r,id:d}=(e=>{if(e){const[t,s]=e.split(":");return{sourceType:t,id:s}}return{sourceType:"",id:""}})(t);if(r.includes("wall"))return{source:n.PlaylistSourceType.WALL,entity_id:d,owner_id:d};switch(r){case n.PlaylistSourceType.CATALOG:return{source:n.PlaylistSourceType.CATALOG,section_id:d,entity_id:d,playlist_id:a,block_id:s};case n.PlaylistSourceType.MESSAGE:return{source:n.PlaylistSourceType.MESSAGE,entity_id:`_${d}`};case n.PlaylistSourceType.FEED:return{source:n.PlaylistSourceType.FEED,entity_id:d,owner_id:d};case n.PlaylistSourceType.ALBUM:return{source:n.PlaylistSourceType.ALBUM,entity_id:d};case n.PlaylistSourceType.VKMIX:return{source:n.PlaylistSourceType.VKMIX,entity_id:d};default:return{source:n.PlaylistSourceType.PLAYLIST,entity_id:a,playlist_id:a}}}},590733:(e,t,s)=>{"use strict";s.d(t,{getPlaylistSource:()=>a});var n=s(269808);const a=e=>{let t;return t=e.source===n.PlaylistSourceType.CATALOG&&!1===e.block_id?{source:n.PlaylistSourceType.PLAYLIST,entity_id:e.playlist_id}:{source:e.source||"",entity_id:e.entity_id||""},t}},947779:(e,t,s)=>{"use strict";s.d(t,{getSpecialProjectId:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return t?.specialProjectId??null}},219095:(e,t,s)=>{"use strict";s.d(t,{isArticleTts:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.articleTts}},994506:(e,t,s)=>{"use strict";s.d(t,{isAudioPWAFeature:()=>a});var n=s(540462);function a(){return(0,n.partConfigEnabled)("mvk_music_pwa")}},667545:(e,t,s)=>{"use strict";s.d(t,{isClaimedAudio:()=>r});var n=s(423015),a=s(867366);function r(e){return!!e&&!!((e=(0,n.audioTupleToAudioObject)(e)).flags&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT)}},690027:(e,t,s)=>{"use strict";s.d(t,{isExternalStream:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.externalStream}},388952:(e,t,s)=>{"use strict";s.d(t,{isMarusiaTale:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.marusiaTale}},103293:(e,t,s)=>{"use strict";s.d(t,{isMarusiaTrack:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.voiceAssistant}},22021:(e,t,s)=>{"use strict";s.d(t,{isRadio:()=>a});var n=s(482310);function a(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.radio}},137590:(e,t,s)=>{"use strict";function n(e,t){return e&&t?{...e,...t}:null}s.d(t,{mergeAudioExtra:()=>n})},315621:(e,t,s)=>{"use strict";s.d(t,{mergeAudioTupleWithoutContext:()=>a});var n=s(867366);function a(e,t){const s=[...e];return Object.assign(s,t),s[n.EAudioTupleIndex.CONTEXT]=e[n.EAudioTupleIndex.CONTEXT],s}},303354:(e,t,s)=>{"use strict";s.d(t,{AudioLyricsProvider:()=>_});var n=s(825127),a=s(203763),r=s(216577),d=s(660617),l=s(423015),c=s(474201),u=s(174736);class _{get(e){return this.lyrics.get(e)||{status:u.EAudioLyricsStatus.Pending}}listen(e,t){return this.eventEmitter.on(e,t),()=>{this.eventEmitter.off(e,t)}}setLoading(e){const t={status:u.EAudioLyricsStatus.Loading};this.lyrics.set(e,t),this.eventEmitter.emit(e,t)}setLoaded(e,t){const s={status:u.EAudioLyricsStatus.Loaded,data:t};this.lyrics.set(e,s),this.eventEmitter.emit(e,s)}setError(e,t){const s={status:u.EAudioLyricsStatus.Error,errorMessage:t};this.lyrics.set(e,s),this.eventEmitter.emit(e,s)}constructor(){this.lyrics=new Map,this.eventEmitter=new n.default,this.fetch=(0,a.dedupeAsyncCallback)((async e=>{const t=(0,l.audioTupleToAudioObject)(e),{fullId:s,hasLyrics:n}=t;try{const e=this.lyrics.get(s);if(e&&e.status===u.EAudioLyricsStatus.Loaded)return e.data||null;if(!n)return this.setLoaded(s,null),null;this.setLoading(s);const t=await(0,r.getLyrics)({audio_id:s}),a=(0,c.mapLyricsResponse)(t);return this.setLoaded(s,a),a}catch(e){throw this.setError(s,e.message||"unknown"),e}}),(e=>(0,d.getAudioTupleFullId)(e)))}}},474201:(e,t,s)=>{"use strict";s.d(t,{mapLyricsResponse:()=>a});var n=s(310619);function a(e){if(Array.isArray(e))return null;const{credits:t,lyrics:s}=e;if(!s)return null;const{text:a,timestamps:r,ugc:d}=s||{},l={};return r&&(l.karaoke=function(e){return e.map((e=>{const{line:t,...s}=e;return t?{...s,text:(0,n.decodeHTML)(t)}:s}))}(r)),a&&(l.static=a.map((e=>({text:(0,n.decodeHTML)(e)})))),d&&(l.ugc=d.map((e=>({text:(0,n.decodeHTML)(e)})))),l.karaoke?.length||l.static?.length||l.ugc?.length?{lines:l,credits:t&&(0,n.decodeHTML)(t)}:null}},174736:(e,t,s)=>{"use strict";var n;s.d(t,{EAudioLyricsStatus:()=>n}),function(e){e[e.Pending=0]="Pending",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}(n||(n={}))},92968:(e,t,s)=>{"use strict";s.d(t,{audioObjectToApiAudio:()=>r});var n=s(898848),a=s(482310);const r=e=>{if(!e)return null;const{id:t,owner_id:s,ads:r,url:l,title:c,duration:u,subTitle:_,albumId:p,album:m,trackCode:y,restrictionStatus:f,albumPart:g,accessKey:E="",mainArtists:A,featArtists:b,performer:P="",urlHash:I="",chartInfo:T,coverUrl_l:C,coverUrl_p:O}=e,M=(0,a.getAudioExtra)(e);return{access_key:E||I||"",ads:r,artist:(0,n.unclean)(P||""),id:t,owner_id:s,url:l,title:(0,n.unclean)(c),performer:(0,n.unclean)(P),duration:u,album_id:p,subtitle:(0,n.unclean)(_),main_artists:A||void 0,featured_artists:b||void 0,album:m?{owner_id:m[0],id:m[1],access_key:m[2],title:"",thumb:d(C??O)}:void 0,track_code:y,content_restricted:f,album_part_number:g,audio_chart_info:T||void 0,dislike:M?.dislike}};function d(e){const t=e.match(/size=(\d+)x(\d+)/);if(t){const s=parseInt(t[1],10);return{width:s,height:parseInt(t[2],10),[`photo_${s}`]:e}}}},423015:(e,t,s)=>{"use strict";s.d(t,{audioTupleToAudioObject:()=>u});var n=s(898848),a=s(867366),r=s(349581),d=s(660617),l=s(22021);const c=Symbol("audioObjectSymbol");function u(e){if(!e)return null;if("string"==typeof e)return{id:e};if(!Array.isArray(e))return e.__audioObject!==c&&console.warn("audioTupleToAudioObject get audio object that not marked as audioObjectSymbol",{audio:e}),e;const t=e[a.EAudioTupleIndex.FLAGS],s=(e[a.EAudioTupleIndex.HASHES]||"").split("/"),u=(e[a.EAudioTupleIndex.COVER_URL]||"").split(/(,(?!\d))/g).filter((e=>","!==e));return u.length<2&&(0,l.isRadio)(e)&&u.push(e[a.EAudioTupleIndex.COVER_URL],e[a.EAudioTupleIndex.COVER_URL]),{id:(0,n.intval)(e[a.EAudioTupleIndex.ID]),owner_id:(0,n.intval)(e[a.EAudioTupleIndex.OWNER_ID]),ownerId:(0,n.intval)(e[a.EAudioTupleIndex.OWNER_ID]),fullId:(0,d.getAudioTupleFullId)(e),title:e[a.EAudioTupleIndex.TITLE]||"",subTitle:e[a.EAudioTupleIndex.SUBTITLE],performer:(0,r.getAudioPerformers)(e,!1),mainArtists:e[a.EAudioTupleIndex.MAIN_ARTISTS],featArtists:e[a.EAudioTupleIndex.FEAT_ARTISTS],authorLink:e[a.EAudioTupleIndex.AUTHOR_LINK],duration:(0,n.intval)(e[a.EAudioTupleIndex.DURATION]),lyrics:e[a.EAudioTupleIndex.LYRICS],url:e[a.EAudioTupleIndex.URL],context:e[a.EAudioTupleIndex.CONTEXT],extra:e[a.EAudioTupleIndex.EXTRA],accessKey:e[a.EAudioTupleIndex.ACCESS_KEY],addHash:s[0]||"",editHash:s[1]||"",actionHash:s[2]||"",deleteHash:s[3]||"",replaceHash:s[4]||"",urlHash:s[5]||"",restoreHash:s[6]||"",canEdit:!!s[1],canDelete:s[3]===e[a.EAudioTupleIndex.ACCESS_KEY]?window.vk.id===e[a.EAudioTupleIndex.OWNER_ID]:Boolean(s[3]),flags:t,isOriginalSound:e[a.EAudioTupleIndex.IS_ORIGINAL_SOUND],hasLyrics:!!(t&a.EAudioFlagBit.HAS_LYRICS),isLongPerformer:!!(t&a.EAudioFlagBit.LONG_PERFORMER),isClaimed:!!(t&a.EAudioFlagBit.CLAIMED),isFromQueue:!!(t&a.EAudioFlagBit.QUEUE),isExplicit:!!(t&a.EAudioFlagBit.EXPLICIT),isUMA:!!(t&a.EAudioFlagBit.UMA),isReplaceable:!!(t&a.EAudioFlagBit.REPLACEABLE),canAdd:!!(t&a.EAudioFlagBit.CAN_ADD),showInfo:!!(t&a.EAudioFlagBit.SHOW_INFO),coverUrl_s:u[1],coverUrl_p:u[1],coverUrl_l:u[0],hasTrackPage:!!e[a.EAudioTupleIndex.TRACK_PAGE_ID],trackPageId:e[a.EAudioTupleIndex.TRACK_PAGE_ID],ads:e[a.EAudioTupleIndex.ADS],album:e[a.EAudioTupleIndex.ALBUM],albumId:(0,n.intval)(e[a.EAudioTupleIndex.ALBUM_ID]),albumPart:(0,n.intval)(e[a.EAudioTupleIndex.ALBUM_PART]),trackCode:e[a.EAudioTupleIndex.TRACK_CODE],restrictionStatus:e[a.EAudioTupleIndex.RESTRICTION],chartInfo:e[a.EAudioTupleIndex.CHART_INFO],adminUrl:e[a.EAudioTupleIndex.ADMIN_URL]||"",umaQueryUrl:e[a.EAudioTupleIndex.UMA_QUERY_URL]||"",__audioObject:c}}},660617:(e,t,s)=>{"use strict";s.d(t,{getAudioTupleFullId:()=>a});var n=s(867366);function a(e){return`${e[n.EAudioTupleIndex.OWNER_ID]}_${e[n.EAudioTupleIndex.ID]}`}},213921:(e,t,s)=>{"use strict";s.d(t,{toSnippetAudioData:()=>n.toSnippetAudioData,toTrackedAudioData:()=>n.toTrackedAudioData});var n=s(338536);s(289286)},338536:(e,t,s)=>{"use strict";s.d(t,{toSnippetAudioData:()=>l,toTrackedAudioData:()=>d});var n=s(488150),a=s(423015),r=s(482310);function d(e){if(!e||"object"!=typeof e)return;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return t?function(e){const t=e.extra??"{}",s="string"==typeof t?JSON.parse(t):t,a={id:e.id,ownerId:e.ownerId,accessKey:e.accessKey};let d={...a,identity:a,title:e.title,author:{raw:e.performer,main:[],feat:[]},url:e.url,duration:e.duration,isExplicit:e.isExplicit,trackCode:e.trackCode??"",artwork:[]};if(s.podcast)return{...d,type:n.AudioType.PodcastEpisode,podcastId:d.ownerId};if(s.radio)return{...d,type:n.AudioType.Radio};return{...d,type:n.AudioType.MusicTrack,hasLyrics:e.hasLyrics??!1,disliked:(0,r.getAudioExtra)(e)?.dislike??!1}}(t):void 0}function l(e){if(e&&"object"==typeof e)return{...e,identity:e.identity,title:e.title,artwork:[...e.artwork],id:e.identity.id,ownerId:e.identity.ownerId,author:e.authors,hasLyrics:e.hasLyrics,trackCode:e.context.trackCode??"",disliked:!1}}},289286:(e,t,s)=>{"use strict";s(139612),s(867366)},582218:(e,t,s)=>{"use strict";s.d(t,{QueueListener:()=>n});class n{constructor(e){this.queueHandler=e}}},901775:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToAudioProvideParams:()=>n.mapAnyAudioToAudioProvideParams});s(919989),s(510692),s(735578),s(933383);var n=s(624565)},919989:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToMusicAudioContext:()=>c,mapAnyAudioToPodcastAudioContext:()=>d,mapAnyAudioToRadiostationContext:()=>l});var n=s(423015),a=s(251458),r=s(22021);function d(e){if(!(0,a.isPodcast)(e))return null;return{trackCode:(Array.isArray(e)?(0,n.audioTupleToAudioObject)(e):e).trackCode}}function l(e){if(!(0,r.isRadio)(e))return null;return{trackCode:(Array.isArray(e)?(0,n.audioTupleToAudioObject)(e):e).trackCode}}function c(e){if((0,a.isPodcast)(e)||(0,r.isRadio)(e))return null;return{trackCode:(Array.isArray(e)?(0,n.audioTupleToAudioObject)(e):e).trackCode}}},510692:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToMusicTrackData:()=>_,mapAnyAudioToPodcastData:()=>c,mapAnyAudioToRadiostationData:()=>u});var n=s(588357),a=s(423015),r=s(251458),d=s(22021),l=s(92968);function c(e){if(!(0,r.isPodcast)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e,s=p(t),d=(0,l.audioObjectToApiAudio)(t);return d?{title:t.title,url:t.url,duration:t.duration,isExplicit:t.isExplicit,artwork:s,isBlocked:t.isClaimed,type:n.AudioType.PodcastEpisode,identity:{id:t.id,ownerId:t.ownerId,accessKey:t.accessKey,podcastId:t.ownerId},apiAudio:d,releaseDate:null,authors:{raw:t.performer,main:t.mainArtists?t.mainArtists:[],feat:t.featArtists?t.featArtists:[]}}:null}function u(e){if(!(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e,s=p(t),r=(0,l.audioObjectToApiAudio)(t);return r?{title:t.title,url:t.url,duration:t.duration,isExplicit:t.isExplicit,artwork:s,isBlocked:t.isClaimed,type:n.AudioType.Radio,apiAudio:{...r,name:t.title},identity:{id:t.id},authors:{raw:t.performer,main:t.mainArtists?t.mainArtists:[],feat:t.featArtists?t.featArtists:[]}}:null}function _(e){if((0,r.isPodcast)(e)||(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e,s=p(t),c=(0,l.audioObjectToApiAudio)(t);return c?{title:t.title,url:t.url,duration:t.duration,isExplicit:t.isExplicit,artwork:s,isBlocked:t.isClaimed,type:n.AudioType.MusicTrack,identity:{id:t.id,ownerId:t.ownerId,accessKey:t.accessKey},authors:{raw:t.performer,main:t.mainArtists?t.mainArtists:[],feat:t.featArtists?t.featArtists:[]},isFocusTrack:!1,subtitle:t.subTitle,apiAudio:c,hasLyrics:t.hasLyrics??!1,album:{id:t.albumId,ownerId:t.ownerId,title:""},releaseAudioIdentity:{id:t.id,ownerId:t.ownerId,accessKey:t.accessKey}}:null}function p(e){return[e.coverUrl_l,e.coverUrl_p||e.coverUrl_s].map((e=>function(e){const t=/size=(\d+)x(\d+)/,s=e.match(t);if(!s)return null;return{size:parseInt(s[1],10),src:e}}(e??""))).filter((e=>null!==e))}},735578:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToMusicAudioIdentity:()=>_,mapAnyAudioToPodcastAudioIdentity:()=>c,mapAnyAudioToRadiostationIdentity:()=>u});var n=s(20085),a=s(423015),r=s(251458),d=s(22021),l=s(70148);function c(e){if(!(0,r.isPodcast)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return new n.PodcastAudioIdentity({id:t.id,ownerId:t.ownerId,accessKey:t.accessKey,podcastId:t.ownerId})}function u(e){if(!(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return{id:t.id,fullId:t.id}}function _(e){if((0,r.isPodcast)(e)||(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return new l.OwnedIdentity({id:t.id,ownerId:t.ownerId,accessKey:t.accessKey})}},624565:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToAudioProvideParams:()=>u});var n=s(510692),a=s(919989),r=s(735578),d=s(933383),l=s(251458),c=s(22021);function u(e){return(0,l.isPodcast)(e)?function(e){const t=(0,r.mapAnyAudioToPodcastAudioIdentity)(e),s=(0,n.mapAnyAudioToPodcastData)(e),l=(0,d.mapAnyAudioToPodcastStateData)(e),c=(0,a.mapAnyAudioToPodcastAudioContext)(e);return t&&s&&l&&c?{identity:t,data:s,state:l,context:c}:null}(e):(0,c.isRadio)(e)?function(e){const t=(0,r.mapAnyAudioToRadiostationIdentity)(e),s=(0,n.mapAnyAudioToRadiostationData)(e),l=(0,d.mapAnyAudioToRadiostationStateData)(e),c=(0,a.mapAnyAudioToRadiostationContext)(e);return t&&s&&l&&c?{identity:t,data:s,state:l,context:c}:null}(e):function(e){const t=(0,r.mapAnyAudioToMusicAudioIdentity)(e),s=(0,n.mapAnyAudioToMusicTrackData)(e),l=(0,d.mapAnyAudioToMusicAudioStateData)(e),c=(0,a.mapAnyAudioToMusicAudioContext)(e);return t&&s&&l&&c?{identity:t,data:s,state:l,context:c}:null}(e)}},933383:(e,t,s)=>{"use strict";s.d(t,{mapAnyAudioToMusicAudioStateData:()=>u,mapAnyAudioToPodcastStateData:()=>l,mapAnyAudioToRadiostationStateData:()=>c});var n=s(482310),a=s(423015),r=s(251458),d=s(22021);function l(e){if(!(0,r.isPodcast)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return{isFavorite:(0,n.getAudioExtra)(t)?.fave}}function c(e){if(!(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return{isFollowed:(0,n.getAudioExtra)(t)?.fave}}function u(e){if((0,r.isPodcast)(e)||(0,d.isRadio)(e))return null;const t=Array.isArray(e)?(0,a.audioTupleToAudioObject)(e):e;return{hasLyrics:t.hasLyrics,disliked:(0,n.getAudioExtra)(t)?.dislike}}},797251:(e,t,s)=>{"use strict";s.d(t,{mapAudioTupleToMusicAudioIdentity:()=>n.mapAudioTupleToMusicAudioIdentity});var n=s(960518)},960518:(e,t,s)=>{"use strict";s.d(t,{mapAudioTupleToMusicAudioIdentity:()=>n.mapAudioTupleToMusicAudioIdentity});var n=s(220436)},220436:(e,t,s)=>{"use strict";s.d(t,{mapAudioTupleToMusicAudioIdentity:()=>r});var n=s(867366),a=s(70148);function r(e){return new a.OwnedIdentity({id:e[n.EAudioTupleIndex.ID],ownerId:e[n.EAudioTupleIndex.OWNER_ID],accessKey:e[n.EAudioTupleIndex.ACCESS_KEY]})}},943223:(e,t,s)=>{"use strict";s.d(t,{mapAudioTupleToMusicAudioIdentity:()=>n.mapAudioTupleToMusicAudioIdentity});var n=s(797251)},227997:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToMusicMixIdentity:()=>n.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>n.mapPlaylistToMusicPlaylistIdentity});var n=s(874903)},874903:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToMusicMixIdentity:()=>n.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>n.mapPlaylistToMusicPlaylistIdentity});var n=s(998082)},998082:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToMusicMixIdentity:()=>n.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>a.mapPlaylistToMusicPlaylistIdentity});var n=s(736722),a=s(764144)},736722:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToMusicMixIdentity:()=>a});var n=s(843161);function a(e){const t=e.getPlaylistId();if(!t)throw new Error("There is no identity in the music mix");return new n.SingleIdentity({id:t})}},764144:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToMusicPlaylistIdentity:()=>r});var n=s(35215),a=s(70148);function r(e){const t=e.getPlaylistId(),s=e.getOwnerId?.();if(!t||!s)throw new Error("There is no identity in the music playlist");const r=parseInt(t),d=parseInt(s);if(!(0,n.isNumber)(r)||!(0,n.isNumber)(d))throw new Error("There is no identity in the music playlist");return new a.OwnedIdentity({id:r,ownerId:d})}},280494:(e,t,s)=>{"use strict";s.d(t,{mapAudioTupleToMusicAudioIdentity:()=>n.mapAudioTupleToMusicAudioIdentity,mapPlaylistToMusicMixIdentity:()=>a.mapPlaylistToMusicMixIdentity,mapPlaylistToMusicPlaylistIdentity:()=>a.mapPlaylistToMusicPlaylistIdentity});var n=s(943223),a=s(227997)},880804:(e,t,s)=>{"use strict";var n,a,r,d;s.d(t,{AudioPlayerPauseAudioEventReason:()=>a,AudioPlayerPlayAudioEventReason:()=>n,AudioPlayerSeekEventReason:()=>d,AudioPlayerStopAudioEventReason:()=>r}),function(e){e.PlayButton="PLAY_BUTTON",e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.NextMediaSession="NEXT_MEDIA_SESSION",e.PrevMediaSession="PREV_MEDIA_SESSION",e.MixAndPlayButton="MIX_AND_PLAY_BUTTON",e.ListButton="LIST_BUTTON",e.AudioButton="AUDIO_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.QueueContinuationAfterError="QUEUE_CONTINUATION_AFTER_ERROR",e.Autoplay="AUTOPLAY",e.Repeat="REPEAT",e.Voice="VOICE",e.NextVoice="NEXT_VOICE",e.PrevVoice="PREV_VOICE",e.ChannelAutoResume="CHANNEL_AUTO_RESUME",e.Unknown="UNKNOWN"}(n||(n={})),function(e){e.PauseButton="PAUSE_BUTTON",e.MediaSession="MEDIA_SESSION",e.ChannelAutoPause="CHANNEL_AUTO_PAUSE",e.Voice="VOICE",e.Paywall="PAYWALL",e.Unknown="UNKNOWN"}(a||(a={})),function(e){e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.Adv="ADV",e.Repeat="REPEAT",e.ChangeQueue="CHANGE_QUEUE",e.Clear="CLEAR",e.Error="ERROR",e.Unknown="UNKNOWN"}(r||(r={})),function(e){e.SliderForward="SLIDER_FORWARD",e.SliderBack="SLIDER_BACK",e.TapForward="TAP_FORWARD",e.TapBack="TAP_BACK",e.DoubleTapForward="DOUBLE_TAP_FORWARD",e.DoubleTapBack="DOUBLE_TAP_BACK",e.Unknown="UNKNOWN"}(d||(d={}))},294718:(e,t,s)=>{"use strict";s.d(t,{createAudioPlayerEventEmitter:()=>a});var n=s(26530);function a(e){return e.resolve(n.EmitterFactory).create()}},198994:(e,t,s)=>{"use strict";s.d(t,{getStopReasonForPlayReason:()=>a});var n=s(880804);function a(e){switch(e){case n.AudioPlayerPlayAudioEventReason.QueueContinuation:return n.AudioPlayerStopAudioEventReason.QueueContinuation;case n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError:return n.AudioPlayerStopAudioEventReason.Error;case n.AudioPlayerPlayAudioEventReason.NextButton:case n.AudioPlayerPlayAudioEventReason.NextMediaSession:case n.AudioPlayerPlayAudioEventReason.NextVoice:return n.AudioPlayerStopAudioEventReason.NextButton;case n.AudioPlayerPlayAudioEventReason.PrevButton:case n.AudioPlayerPlayAudioEventReason.PrevMediaSession:case n.AudioPlayerPlayAudioEventReason.PrevVoice:return n.AudioPlayerStopAudioEventReason.PrevButton;case n.AudioPlayerPlayAudioEventReason.MixAndPlayButton:case n.AudioPlayerPlayAudioEventReason.ListButton:case n.AudioPlayerPlayAudioEventReason.AudioButton:case n.AudioPlayerPlayAudioEventReason.Voice:return n.AudioPlayerStopAudioEventReason.ChangeQueue;case n.AudioPlayerPlayAudioEventReason.Repeat:return n.AudioPlayerStopAudioEventReason.Repeat;case n.AudioPlayerPlayAudioEventReason.Unknown:return n.AudioPlayerStopAudioEventReason.Unknown;default:return}}},913735:(e,t,s)=>{"use strict";s.d(t,{createAudioPlayerEventEmitter:()=>n.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>a.getStopReasonForPlayReason});var n=s(294718),a=s(198994)},426389:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerPauseAudioEventReason:()=>n.AudioPlayerPauseAudioEventReason,AudioPlayerPlayAudioEventReason:()=>n.AudioPlayerPlayAudioEventReason,AudioPlayerSeekEventReason:()=>n.AudioPlayerSeekEventReason,AudioPlayerStopAudioEventReason:()=>n.AudioPlayerStopAudioEventReason,createAudioPlayerEventEmitter:()=>a.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>a.getStopReasonForPlayReason});var n=s(880804),a=s(913735)},771979:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerStatsListener:()=>k});var n=s(434518),a=s(763812),r=s(488150),d=s(694132),l=s(107885),c=s(985890),u=s(851636),_=(0,a._)("_stats"),p=(0,a._)("_handlePlayAudio"),m=(0,a._)("_handlePlayAdv"),y=(0,a._)("_handlePauseAudio"),f=(0,a._)("_handlePauseAdv"),g=(0,a._)("_handleStopAudio"),E=(0,a._)("_handleStopAdv"),A=(0,a._)("_handleSeek"),b=(0,a._)("_handleStateRestore"),P=(0,a._)("_handlePageClose"),I=(0,a._)("_makeAdvEventData"),T=(0,a._)("_makeAudioEventData"),C=(0,a._)("_makeEventData"),O=(0,a._)("_canOperate"),M=(0,a._)("_getPlayedTime"),S=(0,a._)("_handleRadioHeartbeat"),D=(0,a._)("_radioHeartbeat");class k{destroy(){window.removeEventListener("beforeunload",(0,n._)(this,P)[P]),this.playerAdapter.events.off("playAudio",(0,n._)(this,p)[p]).off("pauseAudio",(0,n._)(this,y)[y]).off("stopAudio",(0,n._)(this,g)[g]).off("playAdv",(0,n._)(this,m)[m]).off("pauseAdv",(0,n._)(this,f)[f]).off("stopAdv",(0,n._)(this,E)[E]).off("seek",(0,n._)(this,A)[A]).off("stateRestore",(0,n._)(this,b)[b])}constructor(e){Object.defineProperty(this,I,{value:L}),Object.defineProperty(this,T,{value:x}),Object.defineProperty(this,C,{value:R}),Object.defineProperty(this,O,{value:B}),Object.defineProperty(this,M,{value:F}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),this.playerAdapter=e,(0,n._)(this,_)[_]=new l.AudioPlayerStatsCollector(new d.AudioNavScreenProvider),(0,n._)(this,p)[p]=({reason:e,audio:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,T)[T](t,s);(0,n._)(this,_)[_].play((0,c.mapPlayReasonToSubtype)(e),a),t.type===r.AudioType.Radio&&(0,n._)(this,D)[D].start(t)},(0,n._)(this,m)[m]=({reason:e,advId:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,I)[I](t,s);(0,n._)(this,_)[_].play((0,c.mapPlayReasonToSubtype)(e),a)},(0,n._)(this,y)[y]=({reason:e,audio:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,T)[T](t,s);(0,n._)(this,_)[_].pause((0,c.mapPauseReasonToSubtype)(e),a),t.type===r.AudioType.Radio&&(0,n._)(this,D)[D].stop(t)},(0,n._)(this,f)[f]=({reason:e,advId:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,I)[I](t,s);(0,n._)(this,_)[_].pause((0,c.mapPauseReasonToSubtype)(e),a)},(0,n._)(this,g)[g]=({reason:e,audio:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,T)[T](t,s);(0,n._)(this,_)[_].end((0,c.mapStopReasonToSubtype)(e),a),t.type===r.AudioType.Radio&&(0,n._)(this,D)[D].stop(t)},(0,n._)(this,E)[E]=({reason:e,advId:t,progressTime:s})=>{if(!(0,n._)(this,O)[O]())return;const a=(0,n._)(this,I)[I](t,s);(0,n._)(this,_)[_].end((0,c.mapStopReasonToSubtype)(e),a)},(0,n._)(this,A)[A]=({reason:e,audio:t,progressTime:s,fromTime:a})=>{if(!(0,n._)(this,O)[O]())return;const r=(0,n._)(this,T)[T](t,a);(0,n._)(this,_)[_].pause((0,c.mapSeekPauseReasonToSubtype)(e),r);const d=(0,n._)(this,T)[T](t,s);(0,n._)(this,_)[_].play((0,c.mapSeekPlayReasonToSubtype)(e),d)},(0,n._)(this,b)[b]=({audio:e,progressTime:t})=>{if(!e||!(0,n._)(this,O)[O]())return;const s=(0,n._)(this,T)[T](e,t);(0,n._)(this,_)[_].pause(l.PauseEventSubtype.StateRestore,s),(0,n._)(this,D)[D].clear()},(0,n._)(this,P)[P]=()=>{const e=this.playerAdapter.getPlayingAudio();if(!e||!(0,n._)(this,O)[O]())return;const t=(0,n._)(this,T)[T](e,(0,n._)(this,M)[M]());(0,n._)(this,_)[_].end(l.StopEventSubtype.Close,t),(0,n._)(this,D)[D].clear()},(0,n._)(this,S)[S]=e=>{const t=(0,n._)(this,T)[T](e,(0,n._)(this,M)[M]());(0,n._)(this,_)[_].play(l.PlayEventSubtype.Heartbeat,t)},(0,n._)(this,D)[D]=new u.AudioHeartbeatTimer({ms:1e4,onBeat:(0,n._)(this,S)[S]}),this.playerAdapter=e,window.addEventListener("beforeunload",(0,n._)(this,P)[P]),this.playerAdapter.events.on("playAudio",(0,n._)(this,p)[p]).on("pauseAudio",(0,n._)(this,y)[y]).on("stopAudio",(0,n._)(this,g)[g]).on("playAdv",(0,n._)(this,m)[m]).on("pauseAdv",(0,n._)(this,f)[f]).on("stopAdv",(0,n._)(this,E)[E]).on("seek",(0,n._)(this,A)[A]).on("stateRestore",(0,n._)(this,b)[b])}}function L(e,t){const s=(0,l.makeAdvListeningData)(e),a=Math.round(t/1e3);return{...(0,n._)(this,C)[C](),timeline:a,trackCode:"",...s}}function x(e,t){const s=(0,c.mapAudioDataToListeningData)(e),a=Math.round(t/1e3);return{...(0,n._)(this,C)[C](),trackCode:e.trackCode,timeline:a,...s}}function R(){return{shuffle:Boolean(this.playerAdapter.isShuffledPlaylist()),repeatMode:this.playerAdapter.isRepeatCurrentAudio()?l.RepeatMode.One:this.playerAdapter.isRepeatAll()?l.RepeatMode.All:l.RepeatMode.Off,volume:this.playerAdapter.getVolume(),speed:100,streamingType:l.StreamingType.Online,playerInitId:null,layer:!0,autorecoms:!0}}function B(){return!this.playerAdapter.isMarusiaTrack()}function F(){return 1e3*Math.round(this.playerAdapter.getListenedTime())||0}},818212:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerStatsCollector:()=>A});var n=s(434518),a=s(763812),r=s(314309),d=s(540462),l=s(975106),c=s(847154),u=s(674234);const _=["audio","podcast"];var p=(0,a._)("_eventTimelines"),m=(0,a._)("_actionCollector"),y=(0,a._)("_audioNavScreenProvider"),f=(0,a._)("_log"),g=(0,a._)("_debug"),E=(0,a._)("_getNavScreen");class A{play(e,t){(0,n._)(this,f)[f]({category:l.EventCategory.Play,type:l.PlayEventType.Start,subtype:e},t)}pause(e,t){(0,n._)(this,f)[f]({category:l.EventCategory.Stop,type:l.StopEventType.Pause,subtype:e},t)}end(e,t){(0,n._)(this,f)[f]({category:l.EventCategory.Stop,type:l.StopEventType.End,subtype:e},t)}constructor(e){Object.defineProperty(this,f,{value:b}),Object.defineProperty(this,g,{get:P,set:void 0}),Object.defineProperty(this,E,{value:I}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,n._)(this,p)[p]=new Map,(0,n._)(this,m)[m]=new r.ActionStatCollector(new r.ProductionStatCollector),(0,n._)(this,y)[y]=e}}function b(e,t){const s=(0,n._)(this,E)[E](),a=(0,u.getEventDataKey)(t),r=(0,c.makeEventItem)(e,t,(0,n._)(this,p)[p].get(a)??0,s);if((0,n._)(this,m)[m].logEvent({type:l.EVENT_ITEM_TYPE,[l.EVENT_ITEM_TYPE]:r},{screen:s.screen}),(0,n._)(this,g)[g]){const e=r.event.type,t=r.event[e];console.log([["event_category",e],["event_type",t.type],["event_subtype",t.subtype],["screen",s.screen]].map((([e,t])=>`${e}: ${t}`)).join("\n"),r)}e.category===l.EventCategory.Stop&&e.type===l.StopEventType.End?(0,n._)(this,p)[p].delete(a):(0,n._)(this,p)[p].set(a,t.timeline)}function P(){return(0,d.partConfigEnabled)("audio_player_stats_debug")}function I(){let e=window.cur.module,t=null;return _.includes(e)?((0,d.partConfigEnabled)("audio_player_stats_extra_screens")&&(e=(0,n._)(this,y)[y].screen??e),t=(0,n._)(this,y)[y].catalogSectionId):(0,n._)(this,y)[y].clearPage(),{screen:e,catalogSectionId:t}}},761372:(e,t,s)=>{"use strict";var n,a,r,d,l,c,u,_;s.d(t,{ListeningType:()=>n,MusicContentType:()=>a,PauseEventSubtype:()=>u,PlayEventSubtype:()=>c,PodcastContentType:()=>r,RepeatMode:()=>d,StopEventSubtype:()=>_,StreamingType:()=>l}),function(e){e.Music="type_audio_audio_listening_item",e.Podcast="type_audio_podcast_listening_item",e.Book="type_audio_book_listening_item",e.Adv="type_audio_adv_listening_item",e.Radio="type_audio_radio_listening_item"}(n||(n={})),function(e){e.Track="music_track",e.Snippet="music_snippet"}(a||(a={})),function(e){e.Episode="podcast_episode",e.Trailer="podcast_trailer"}(r||(r={})),function(e){e.Off="off",e.One="one",e.All="all"}(d||(d={})),function(e){e.Online="online",e.OnlineCache="online_cache"}(l||(l={})),function(e){e.PlayButton="play_btn",e.NextButton="next_btn",e.PrevButton="prev_btn",e.NextMediaSession="next_by_system",e.PrevMediaSession="prev_by_system",e.MixAndPlayButton="mix_and_play_btn",e.FastplayListButton="fastplay_list_btn",e.FastplayAudioButton="fastplay_audio_btn",e.QueueContinuation="autoplay",e.QueueContinuationAfterError="autoplay_error",e.Autoplay="autoplay",e.Repeat="repeat",e.Voice="voice",e.NextVoice="next_voice",e.PrevVoice="prev_voice",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.ChannelAutoResume="session_terminated_autostart",e.Heartbeat="heartbeat",e.Unknown="unhandled_on_client"}(c||(c={})),function(e){e.PauseButton="pause_btn",e.MediaSession="pause_by_system",e.ChannelAutoPause="session_terminated",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.Voice="voice",e.Paywall="paywall_pause",e.StateRestore="client_restore",e.Error="error",e.Unknown="unhandled_on_client"}(u||(u={})),function(e){e.NextButton="next",e.PrevButton="prev",e.Autoplay="autoplay",e.Adv="adv",e.Repeat="repeat",e.ChangeSource="change_source",e.Close="close",e.Error="error",e.Unknown="unhandled_on_client"}(_||(_={}))},805711:(e,t,s)=>{"use strict";s.d(t,{makeAdvListeningData:()=>n.makeAdvListeningData});var n=s(69095)},69095:(e,t,s)=>{"use strict";s.d(t,{makeAdvListeningData:()=>a});var n=s(761372);function a(e){return{listeningType:n.ListeningType.Adv,contentType:"audio_adv",advId:e}}},107885:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerStatsCollector:()=>n.AudioPlayerStatsCollector,ListeningType:()=>a.ListeningType,MusicContentType:()=>a.MusicContentType,PauseEventSubtype:()=>a.PauseEventSubtype,PlayEventSubtype:()=>a.PlayEventSubtype,PodcastContentType:()=>a.PodcastContentType,RepeatMode:()=>a.RepeatMode,StopEventSubtype:()=>a.StopEventSubtype,StreamingType:()=>a.StreamingType,makeAdvListeningData:()=>r.makeAdvListeningData});var n=s(818212),a=s(761372),r=s(805711)},975106:(e,t,s)=>{"use strict";s.d(t,{AppState:()=>y,AudioEventLayer:()=>_,Autorecoms:()=>m,EVENT_ITEM_TYPE:()=>d,EventCategory:()=>l,PLAYER_INIT_ID:()=>r,PlayEventType:()=>c,Shuffle:()=>p,StopEventType:()=>u});var n=s(418562),a=s(553608);const r=(()=>{const e="AUDIO_PLAYER_INIT_ID",t=(0,a.getSessionStorage)();let s=t.getItem(e);return s||(s=(0,n.default)(),t.setItem(e,s)),s})(),d="type_audio_listening_item";var l,c,u,_,p,m,y;!function(e){e.Play="play",e.Stop="stop"}(l||(l={})),function(e){e.Start="start"}(c||(c={})),function(e){e.Pause="pause",e.End="end"}(u||(u={})),function(e){e.Not="not",e.Layer="layer"}(_||(_={})),function(e){e.Off="off",e.On="on"}(p||(p={})),function(e){e.Off="off",e.On="on"}(m||(m={})),function(e){e.Active="active",e.Inactive="inactive"}(y||(y={}))},674234:(e,t,s)=>{"use strict";s.d(t,{getEventDataKey:()=>a});var n=s(761372);function a(e){return`${function(e){switch(e.listeningType){case n.ListeningType.Music:{const{contentType:t,audioId:s,ownerId:n}=e;return`${t}/${n}_${s}`}case n.ListeningType.Adv:{const{contentType:t,advId:s}=e;return`${t}/${s}`}case n.ListeningType.Podcast:{const{contentType:t,podcastId:s,ownerId:n,episodeId:a}=e;return`${t}/${n}_${s}_${a}`}case n.ListeningType.Book:{const{contentType:t,bookId:s,chapterId:n}=e;return`${t}/${s}${n?"_":""}${n}`}case n.ListeningType.Radio:{const{contentType:t,radioId:s}=e;return`${t}/${s}`}}}(e)}/${e.trackCode}`}},847154:(e,t,s)=>{"use strict";s.d(t,{getClientServerTime:()=>n.getClientServerTime,getClientTime:()=>n.getClientTime,makeEventItem:()=>n.makeEventItem});s(982727);var n=s(187847)},187847:(e,t,s)=>{"use strict";s.d(t,{getClientServerTime:()=>c,getClientTime:()=>l,makeEventItem:()=>d});var n=s(540462),a=s(975106),r=s(982727);function d(e,t,s,n){const d=l(),u=function({category:e,type:t,subtype:s}){const n={type:e};return{[e]:{type:t,subtype:s},...n}}(e),{catalogSectionId:_}=n;return{event:u,client_time:d,client_server_time:c(d),layer:t.layer?a.AudioEventLayer.Layer:a.AudioEventLayer.Not,autorecoms:t.autorecoms?a.Autorecoms.On:a.Autorecoms.Off,track_code:t.trackCode,timeline:t.timeline,timeline_from:s,player_init_id:a.PLAYER_INIT_ID,volume:t.volume,speed:t.speed,shuffle:t.shuffle?a.Shuffle.On:a.Shuffle.Off,app_state:document.hidden?a.AppState.Inactive:a.AppState.Active,streaming_type:t.streamingType,repeat_mode:t.repeatMode,..._?{nav_info:{section_id:_}}:void 0,...(0,r.mapListeningData)(t)}}function l(){return Math.floor(Date.now()/1e3)}function c(e=l()){return e-(Number.isFinite(window.vk?.dt)?window.vk.dt:(0,n.calculateTimeOffsets)())}},982727:(e,t,s)=>{"use strict";s.d(t,{mapListeningData:()=>a});var n=s(761372);function a(e){switch(e.listeningType){case n.ListeningType.Music:return function({listeningType:e,...t}){return{listening_type:e,[e]:{audio_id:t.audioId,audio_owner_id:t.ownerId,content_type:t.contentType}}}(e);case n.ListeningType.Podcast:return function({listeningType:e,...t}){return{listening_type:e,[e]:{podcast_id:t.podcastId,podcast_owner_id:t.ownerId,episode_id:t.episodeId,podcast_authors_ids:t.authorIds,content_type:t.contentType}}}(e);case n.ListeningType.Book:return function({listeningType:e,...t}){return{listening_type:e,[e]:{book_id:t.bookId,chapter_id:t.chapterId,content_type:"audiobook_chapter"}}}(e);case n.ListeningType.Radio:return function({listeningType:e,...t}){return{listening_type:e,[e]:{radio_id:t.radioId,content_type:"radio"}}}(e);case n.ListeningType.Adv:return function({listeningType:e,...t}){return{listening_type:e,[e]:{adv_id:t.advId,content_type:"audio_adv"}}}(e)}}},123965:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerMediascopeListener:()=>n.AudioPlayerMediascopeListener,AudioPlayerMyTrackerListener:()=>a.AudioPlayerMyTrackerListener,AudioPlayerStatsListener:()=>r.AudioPlayerStatsListener});var n=s(888090),a=s(405188),r=s(771979)},851636:(e,t,s)=>{"use strict";s.d(t,{AudioHeartbeatTimer:()=>y});var n=s(434518),a=s(763812),r=s(478455),d=s(86909),l=(0,a._)("_ms"),c=(0,a._)("_onBeat"),u=(0,a._)("_clearIntervalFn"),_=(0,a._)("_currentAudio"),p=(0,a._)("_clearInterval"),m=(0,a._)("_isActive");class y{start(e){if((0,n._)(this,m)[m])throw new Error("HeartbeatTimer is already started");const t=(0,n._)(this,c)[c];(0,n._)(this,p)[p](),(0,n._)(this,_)[_]=e,(0,n._)(this,u)[u]=(0,d.setStableInterval)((()=>{t(e)}),(0,n._)(this,l)[l],{name:"AudioHeartbeatTimer"})}stop(e){if(!(0,n._)(this,m)[m])throw new Error("HeartbeatTimer is not started");const t=(0,n._)(this,_)[_]&&(0,r.getAudioFullId)((0,n._)(this,_)[_]);if((0,r.getAudioFullId)(e)!==t)throw new Error("Trying to pause another audio");(0,n._)(this,p)[p](),(0,n._)(this,_)[_]=null}clear(){(0,n._)(this,p)[p](),(0,n._)(this,_)[_]=null}constructor(e){Object.defineProperty(this,p,{value:f}),Object.defineProperty(this,m,{get:g,set:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,n._)(this,u)[u]=null,(0,n._)(this,_)[_]=null,(0,n._)(this,l)[l]=e.ms,(0,n._)(this,c)[c]=e.onBeat}}function f(){(0,n._)(this,u)[u]&&((0,n._)(this,u)[u](),(0,n._)(this,u)[u]=null)}function g(){return!!(0,n._)(this,u)[u]}},985890:(e,t,s)=>{"use strict";s.d(t,{mapAudioDataToListeningData:()=>n.mapAudioDataToListeningData,mapPauseReasonToSubtype:()=>a.mapPauseReasonToSubtype,mapPlayReasonToSubtype:()=>a.mapPlayReasonToSubtype,mapSeekPauseReasonToSubtype:()=>a.mapSeekPauseReasonToSubtype,mapSeekPlayReasonToSubtype:()=>a.mapSeekPlayReasonToSubtype,mapStopReasonToSubtype:()=>a.mapStopReasonToSubtype});var n=s(936112),a=s(530887)},936112:(e,t,s)=>{"use strict";s.d(t,{mapAudioDataToListeningData:()=>l});var n=s(488150),a=s(107885);const r={[n.AudioType.MusicTrack]:a.MusicContentType.Track,[n.AudioType.MusicSnippet]:a.MusicContentType.Snippet},d={[n.AudioType.PodcastTrailer]:a.PodcastContentType.Trailer,[n.AudioType.PodcastEpisode]:a.PodcastContentType.Episode};function l(e){const{id:t,ownerId:s,type:l}=e;switch(l){case n.AudioType.MusicTrack:case n.AudioType.MusicSnippet:return{listeningType:a.ListeningType.Music,contentType:r[l],audioId:t,ownerId:s};case n.AudioType.PodcastEpisode:case n.AudioType.PodcastTrailer:return{listeningType:a.ListeningType.Podcast,contentType:d[l],episodeId:t,ownerId:s,podcastId:e.podcastId};case n.AudioType.Radio:return{listeningType:a.ListeningType.Radio,contentType:"radio",radioId:t}}}},530887:(e,t,s)=>{"use strict";s.d(t,{mapPauseReasonToSubtype:()=>p,mapPlayReasonToSubtype:()=>_,mapSeekPauseReasonToSubtype:()=>y,mapSeekPlayReasonToSubtype:()=>f,mapStopReasonToSubtype:()=>m});var n=s(426389),a=s(107885);const r={[n.AudioPlayerPlayAudioEventReason.PlayButton]:a.PlayEventSubtype.PlayButton,[n.AudioPlayerPlayAudioEventReason.NextButton]:a.PlayEventSubtype.NextButton,[n.AudioPlayerPlayAudioEventReason.PrevButton]:a.PlayEventSubtype.PrevButton,[n.AudioPlayerPlayAudioEventReason.NextMediaSession]:a.PlayEventSubtype.NextMediaSession,[n.AudioPlayerPlayAudioEventReason.PrevMediaSession]:a.PlayEventSubtype.PrevMediaSession,[n.AudioPlayerPlayAudioEventReason.MixAndPlayButton]:a.PlayEventSubtype.MixAndPlayButton,[n.AudioPlayerPlayAudioEventReason.ListButton]:a.PlayEventSubtype.FastplayListButton,[n.AudioPlayerPlayAudioEventReason.AudioButton]:a.PlayEventSubtype.FastplayAudioButton,[n.AudioPlayerPlayAudioEventReason.QueueContinuation]:a.PlayEventSubtype.QueueContinuation,[n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError]:a.PlayEventSubtype.QueueContinuationAfterError,[n.AudioPlayerPlayAudioEventReason.Autoplay]:a.PlayEventSubtype.Autoplay,[n.AudioPlayerPlayAudioEventReason.Repeat]:a.PlayEventSubtype.Repeat,[n.AudioPlayerPlayAudioEventReason.Voice]:a.PlayEventSubtype.Voice,[n.AudioPlayerPlayAudioEventReason.NextVoice]:a.PlayEventSubtype.NextVoice,[n.AudioPlayerPlayAudioEventReason.PrevVoice]:a.PlayEventSubtype.PrevVoice,[n.AudioPlayerPlayAudioEventReason.ChannelAutoResume]:a.PlayEventSubtype.ChannelAutoResume,[n.AudioPlayerPlayAudioEventReason.Unknown]:a.PlayEventSubtype.Unknown},d={[n.AudioPlayerPauseAudioEventReason.PauseButton]:a.PauseEventSubtype.PauseButton,[n.AudioPlayerPauseAudioEventReason.MediaSession]:a.PauseEventSubtype.MediaSession,[n.AudioPlayerPauseAudioEventReason.ChannelAutoPause]:a.PauseEventSubtype.ChannelAutoPause,[n.AudioPlayerPauseAudioEventReason.Voice]:a.PauseEventSubtype.Voice,[n.AudioPlayerPauseAudioEventReason.Paywall]:a.PauseEventSubtype.Paywall,[n.AudioPlayerPauseAudioEventReason.Unknown]:a.PauseEventSubtype.Unknown},l={[n.AudioPlayerStopAudioEventReason.NextButton]:a.StopEventSubtype.NextButton,[n.AudioPlayerStopAudioEventReason.PrevButton]:a.StopEventSubtype.PrevButton,[n.AudioPlayerStopAudioEventReason.QueueContinuation]:a.StopEventSubtype.Autoplay,[n.AudioPlayerStopAudioEventReason.Adv]:a.StopEventSubtype.Adv,[n.AudioPlayerStopAudioEventReason.Repeat]:a.StopEventSubtype.Repeat,[n.AudioPlayerStopAudioEventReason.ChangeQueue]:a.StopEventSubtype.ChangeSource,[n.AudioPlayerStopAudioEventReason.Clear]:a.StopEventSubtype.Close,[n.AudioPlayerStopAudioEventReason.Error]:a.StopEventSubtype.Error,[n.AudioPlayerStopAudioEventReason.Unknown]:a.StopEventSubtype.Unknown},c={[n.AudioPlayerSeekEventReason.SliderForward]:a.PauseEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:a.PauseEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:a.PauseEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:a.PauseEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:a.PauseEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:a.PauseEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:a.PauseEventSubtype.Unknown},u={[n.AudioPlayerSeekEventReason.SliderForward]:a.PlayEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:a.PlayEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:a.PlayEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:a.PlayEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:a.PlayEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:a.PlayEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:a.PlayEventSubtype.Unknown};function _(e){return r[e??n.AudioPlayerPlayAudioEventReason.Unknown]}function p(e){return d[e??n.AudioPlayerPauseAudioEventReason.Unknown]}function m(e){return l[e??n.AudioPlayerStopAudioEventReason.Unknown]}function y(e){return c[e??n.AudioPlayerPauseAudioEventReason.Unknown]}function f(e){return u[e??n.AudioPlayerPauseAudioEventReason.Unknown]}},599653:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerMediascopeListener:()=>p});var n=s(434518),a=s(763812),r=(0,a._)("_player"),d=(0,a._)("_counter"),l=(0,a._)("_handlePlayAudio"),c=(0,a._)("_handlePauseAudio"),u=(0,a._)("_handleStopAudio"),_=(0,a._)("_canOperate");class p{destroy(){(0,n._)(this,r)[r].events.off("playAudio",(0,n._)(this,l)[l]).off("pauseAudio",(0,n._)(this,c)[c]).off("stopAudio",(0,n._)(this,u)[u])}constructor(e,t){Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=()=>{(0,n._)(this,_)[_]()&&(0,n._)(this,d)[d].start()},(0,n._)(this,c)[c]=()=>{(0,n._)(this,_)[_]()&&(0,n._)(this,d)[d].stop()},(0,n._)(this,u)[u]=()=>{(0,n._)(this,_)[_]()&&(0,n._)(this,d)[d].stop()},(0,n._)(this,r)[r]=e,(0,n._)(this,d)[d]=t.ensureActivityCounter({type:"service",events:{start:{code:"632121"},stop:{code:"652121"},heartbeat:{code:"642121",msInterval:3e4}}}),(0,n._)(this,r)[r].events.on("playAudio",(0,n._)(this,l)[l]).on("pauseAudio",(0,n._)(this,c)[c]).on("stopAudio",(0,n._)(this,u)[u])}}function m(){return!(0,n._)(this,r)[r].isMarusiaTrack()}},888090:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerMediascopeListener:()=>n.AudioPlayerMediascopeListener});var n=s(599653)},164374:(e,t,s)=>{"use strict";s.d(t,{AudioListenedDAUCounter:()=>y});var n=s(434518),a=s(763812);var r=(0,a._)("_onReach"),d=(0,a._)("_startedAt"),l=(0,a._)("_timeout"),c=(0,a._)("_listenedTime"),u=(0,a._)("_reached"),_=(0,a._)("_reach"),p=(0,a._)("_clear"),m=(0,a._)("_clearTimeout");class y{start(){(0,n._)(this,u)[u]||this.started||((0,n._)(this,d)[d]=Date.now(),(0,n._)(this,l)[l]=setTimeout((()=>{(0,n._)(this,_)[_](),(0,n._)(this,l)[l]=null}),3e4-(0,n._)(this,c)[c]))}pause(){this.started&&((0,n._)(this,m)[m](),(0,n._)(this,c)[c]+=Date.now()-(0,n._)(this,d)[d],(0,n._)(this,c)[c]>=3e4&&(0,n._)(this,_)[_]())}reset(){this.pause(),(0,n._)(this,p)[p]()}get started(){return null!==(0,n._)(this,l)[l]}constructor(e){Object.defineProperty(this,_,{value:f}),Object.defineProperty(this,p,{value:g}),Object.defineProperty(this,m,{value:E}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,d)[d]=-1,(0,n._)(this,l)[l]=null,(0,n._)(this,c)[c]=0,(0,n._)(this,u)[u]=!1,(0,n._)(this,r)[r]=e}}function f(){(0,n._)(this,u)[u]=!0,(0,n._)(this,r)[r]()}function g(){(0,n._)(this,m)[m](),(0,n._)(this,d)[d]=-1,(0,n._)(this,c)[c]=0,(0,n._)(this,u)[u]=!1}function E(){const e=(0,n._)(this,l)[l];e&&(clearTimeout(e),(0,n._)(this,l)[l]=null)}},977e3:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerActivityCounter:()=>A});var n=s(434518),a=s(763812),r=s(478455),d=s(540462),l=s(261793),c=s(164374),u=(0,a._)("_type"),_=(0,a._)("_timespent"),p=(0,a._)("_dau"),m=(0,a._)("_listenedCounter"),y=(0,a._)("_currentAudio"),f=(0,a._)("_debug"),g=(0,a._)("_logDebug"),E=(0,a._)("_isCurrentAudio");class A{get isActiveTimespent(){return(0,n._)(this,_)[_].isActiveTimespent}start(e){(0,n._)(this,E)[E](e)||((0,n._)(this,y)[y]=e,(0,n._)(this,m)[m].reset()),(0,n._)(this,g)[g](`start ${(0,r.getAudioFullId)(e.identity)}`),(0,n._)(this,m)[m].start(),(0,n._)(this,_)[_].startTimespent()}pause(e){(0,n._)(this,E)[E](e)&&(0,n._)(this,m)[m].pause(),(0,n._)(this,_)[_].stopTimespent(),(0,n._)(this,g)[g](`pause ${(0,r.getAudioFullId)(e.identity)}`)}stop(e){(0,n._)(this,E)[E](e)&&(0,n._)(this,m)[m].reset(),(0,n._)(this,_)[_].stopTimespent(),(0,n._)(this,g)[g](`stop ${(0,r.getAudioFullId)(e.identity)}`)}constructor({myTracker:e,type:t,strict:s}){Object.defineProperty(this,f,{get:b,set:void 0}),Object.defineProperty(this,g,{value:P}),Object.defineProperty(this,E,{value:I}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,n._)(this,m)[m]=new c.AudioListenedDAUCounter((()=>{(0,n._)(this,p)[p].increment(),(0,n._)(this,g)[g]("increment")})),(0,n._)(this,y)[y]=null,(0,n._)(this,u)[u]=t,(0,n._)(this,_)[_]=T(e,l.TIMESPENT_ACTIVITY_MAP[t],s),(0,n._)(this,p)[p]=T(e,l.DAU_ACTIVITY_MAP[t],s)}}function b(){return(0,d.partConfigEnabled)("audio_player_stats_debug")}function P(e){(0,n._)(this,f)[f]&&console.log(`[AudioPlayerActivityCounter][${(0,n._)(this,u)[u]}] ${e}`)}function I(e){const t=(0,n._)(this,y)[y];return!!t&&(0,r.getAudioFullId)(e.identity)===(0,r.getAudioFullId)(t.identity)}function T(e,t,s){return e.ensureActivityCounter({activityId:t,timespentType:"service",strict:s})}},660857:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerMyTrackerListener:()=>f});var n=s(434518),a=s(763812),r=s(261793),d=s(977e3),l=(0,a._)("_player"),c=(0,a._)("_counters"),u=(0,a._)("_handlePlayAudio"),_=(0,a._)("_handlePauseAudio"),p=(0,a._)("_handleStopAudio"),m=(0,a._)("_getCounter"),y=(0,a._)("_canOperate");class f{destroy(){(0,n._)(this,l)[l].events.off("playAudio",(0,n._)(this,u)[u]).off("pauseAudio",(0,n._)(this,_)[_]).off("stopAudio",(0,n._)(this,p)[p])}constructor(e,t){Object.defineProperty(this,m,{value:g}),Object.defineProperty(this,y,{value:E}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,u)[u]=e=>{if(!(0,n._)(this,y)[y]())return;const{audio:t}=e;(0,n._)(this,m)[m](t.type).start(t)},(0,n._)(this,_)[_]=e=>{if(!(0,n._)(this,y)[y]())return;const{audio:t}=e;(0,n._)(this,m)[m](t.type).pause(t)},(0,n._)(this,p)[p]=e=>{if(!(0,n._)(this,y)[y]())return;const{audio:t}=e;(0,n._)(this,m)[m](t.type).stop(t)},(0,n._)(this,l)[l]=e,(0,n._)(this,c)[c]=function(e){const t=t=>new d.AudioPlayerActivityCounter({myTracker:e,type:t,strict:!1});return{[r.AudioPlayerActivityCounterType.Music]:t(r.AudioPlayerActivityCounterType.Music),[r.AudioPlayerActivityCounterType.MusicSnippets]:t(r.AudioPlayerActivityCounterType.MusicSnippets),[r.AudioPlayerActivityCounterType.Podcasts]:t(r.AudioPlayerActivityCounterType.Podcasts),[r.AudioPlayerActivityCounterType.Audiobooks]:t(r.AudioPlayerActivityCounterType.Audiobooks),[r.AudioPlayerActivityCounterType.Radio]:t(r.AudioPlayerActivityCounterType.Radio)}}(t),(0,n._)(this,l)[l].events.on("playAudio",(0,n._)(this,u)[u]).on("pauseAudio",(0,n._)(this,_)[_]).on("stopAudio",(0,n._)(this,p)[p])}}function g(e){const t=r.AUDIO_TYPE_ACTIVITY_TYPE_MAP[e];return(0,n._)(this,c)[c][t]}function E(){return!(0,n._)(this,l)[l].isMarusiaTrack()}},261793:(e,t,s)=>{"use strict";s.d(t,{AUDIO_TYPE_ACTIVITY_TYPE_MAP:()=>d,AudioPlayerActivityCounterType:()=>n,DAU_ACTIVITY_MAP:()=>c,TIMESPENT_ACTIVITY_MAP:()=>l});var n,a=s(571355),r=s(488150);!function(e){e.Music="music",e.MusicSnippets="music_snippets",e.Podcasts="podcasts",e.Audiobooks="audiobooks",e.Radio="radio"}(n||(n={}));const d={[r.AudioType.MusicTrack]:"music",[r.AudioType.MusicSnippet]:"music_snippets",[r.AudioType.PodcastEpisode]:"podcasts",[r.AudioType.PodcastTrailer]:"podcasts",[r.AudioType.Radio]:"radio"},l={music:a.MyTrackerActivityId.MusicListen,music_snippets:a.MyTrackerActivityId.MusicSnippetsListen,podcasts:a.MyTrackerActivityId.PodcastsListen,audiobooks:a.MyTrackerActivityId.AudiobooksListen,radio:a.MyTrackerActivityId.RadioListen},c={music:a.MyTrackerActivityId.MusicTrackListenedDAU,music_snippets:a.MyTrackerActivityId.MusicSnippetListenedDAU,podcasts:a.MyTrackerActivityId.PodcastEpisodeListenedDAU,audiobooks:a.MyTrackerActivityId.AudiobookListenedDAU,radio:a.MyTrackerActivityId.RadiostationListenedDAU}},405188:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerMyTrackerListener:()=>n.AudioPlayerMyTrackerListener});var n=s(660857)},220347:(e,t,s)=>{"use strict";function n(e){const t={};return e&&e.length&&e.filter((e=>!!e)).map((e=>e.queues&&e.queues[0])).forEach((e=>t[e.type]=e)),t}s.d(t,{unpackQueues:()=>n})},43899:(e,t,s)=>{"use strict";s.d(t,{renderAvatarToString:()=>c});var n=s(474848),a=s(440961),r=s(751268),d=s(575753),l=s(106605);function c(e,t,s,c="",u,_,p,m,y,f){let g;u&&(g="online"),d.mobPlatforms[u]&&(g="online-mobile");const E=null!==s&&s?"a":"span",A=document.createElement(E);void 0!==_&&A.setAttribute("onclick",_),f&&A.classList.add("nft_avatar_wrap"),c&&(Array.isArray(c)?A.classList.add(...c):A.classList.add(c)),s&&(A.href=s),a.render((0,n.jsxs)(r.RichAvatar,{className:l.default.root,alt:y,src:e,size:t,nft:f,children:[p&&(0,n.jsx)(r.RichAvatar.Outline,{"data-outline-id":m,appearance:"accent"}),g&&(0,n.jsx)(r.RichAvatar.BadgeWithPreset,{preset:g})]}),A);const b=A.outerHTML;return a.unmountComponentAtNode(A),b}},175819:(e,t,s)=>{"use strict";s.d(t,{OUR_DOMAINS:()=>d,RE_DOMAIN_PATTERN:()=>c,TOP_DOMAINS:()=>a,VK_DOMAIN:()=>l});var n=s(105330);const a=[..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))],r=n.VK_HOST_REGEX_GROUP_UNSAFE.source,d=new RegExp(`^([a-zA-Z0-9\\.\\_\\-]+\\.)?(${r}|vk\\.cc)$`),l=new RegExp(`^(?:https?:\\/\\/)?(?:${n.VK_SITES_REGEX_SOURCE_UNSAFE})?\\/([a-zA-Z0-9\\._]+)\\??$`),c="((?:[a-z0-9_]*[a-z0-9])?(?:(?:\\.[a-z](?:[a-z0-9_]+[a-z0-9])?)*\\.[a-z][a-z0-9_]{2,40}[a-z0-9])?)"},470403:(e,t,s)=>{"use strict";s.d(t,{EMAIL:()=>a});var n=s(828758);const a=new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+n.RE_URL_DOMAIN_NAME+n.RE_URL_DOMAIN_TOP+"))","ig")},846145:(e,t,s)=>{"use strict";s.d(t,{FREE_MENTION:()=>r,FREE_MENTION_LINK:()=>d,MENTION:()=>a});var n=s(105330);const a=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,r=/\[([^\$\[\]]+?)\|([^\]]+?)\]/g,d=new RegExp(`\\[((?:https?:\\/\\/)?(?:(?:m\\.|dev\\.)?(?:${n.VK_HOST_REGEX_GROUP_UNSAFE.source}|vk\\.me))(?!\\/\\/)(?!\\/doc[\\d\\-])(?!\\/page[\\d\\-])(?!\\/away[\\.\\?])(?:\\/[-\\._~:\\/?#\\[\\]@!\\$&'\\(\\)\\*\\+,;=%.\\w]*)*)\\|([^\\]\\n\\t]*)\\]`)},828758:(e,t,s)=>{"use strict";s.d(t,{RE_URL_DOMAIN_NAME:()=>a,RE_URL_DOMAIN_TOP:()=>r,RE_URL_PATTERN:()=>d});const n="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј",a="((?:["+n+"\\—\\-\\_]+\\.){1,5})",r="([A-Za-zа-яА-Я\\-\\d]{2,22})",d="(https?:\\/\\/)?"+("("+a+r+"(?:\\:(\\d{2,5}))?)")+("(([\\/?#])(?:\\&|\\&#\\d{2,6};|,[_%]|!|,*[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$.~=;:'ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯*]+|"+("(?:\\(|\\[)["+n+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?")},701563:(e,t,s)=>{"use strict";s.d(t,{logDonutEvent:()=>d});var n=s(93642),a=s(317216),r=s(261910);function d(e,t){const{type:s,type_property:d,params:l}=(0,r.parseJSON)(e);d===a.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM?n.donutStats.logEventAction({event_type:l.event_type,source:l.source,owner_id:l.owner_id}):t&&s===a.ProductionStatEventTypes.TYPE_NAVGO&&function(e,{params:t,typeProperty:s}){if(s===a.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM){const e=t.owner_id,s=t.track_code;if(!t||"number"!=typeof e||"string"!=typeof s)return;n.donutStats.logEventDescriptionClick({ownerId:e,trackCode:s})}}(0,{typeProperty:d,params:l})}},93642:(e,t,s)=>{"use strict";s.d(t,{donutStats:()=>l});var n=s(314309),a=s(317216),r=s(301374);class d{logEventAction(e){return this.actionStatCollector.logEvent(d.createDonutActionStatEvent(e))}logEventActionView(e){return this.logEventAction({...e,event_type:r.DonutActionEventType.PAYMENT_FORM})}logEventDescriptionClick(e){this.navStatCollector.logEvent({...d.createNavStatEventBase(),...d.createDescriptionClickStatEvent(e)})}static createDonutActionStatEvent(e){return{type:a.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM]:e}}static createNavStatEventBase(){return{screen:"wall",subtype:a.NavigationProductionStatEventTypes.GO}}static createDescriptionClickStatEvent(e){return{item:d.processClickParamsToEventItem(e),type:a.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM,[a.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM]:{}}}static processClickParamsToEventItem(e){return{type:a.EventItemType.BROWSER,owner_id:e.ownerId,track_code:e.trackCode}}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.actionStatCollector=new n.ActionStatCollector(this.productionStatCollector),this.navStatCollector=new n.NavigationStatCollector(this.productionStatCollector)}}const l=new d},907678:(e,t,s)=>{"use strict";s.d(t,{usePageBlockOffset:()=>a});var n=s(276426);const a=()=>(0,n.useNumericVariableValue)(document.body,"--page-block-offset")},650353:(e,t,s)=>{"use strict";s.d(t,{convertAttachesToPhpMedia:()=>y,convertKludgesToAttaches:()=>m,isEventForMarusia:()=>E,isOnboardingFindFriendsLink:()=>g,isPinnedSortId:()=>f});var n=s(898848),a=s(312641),r=s(105330),d=s(89473),l=s(182622);function c(e,t=[]){const[s,n]=e.split("_");return[s,n,t]}function u(e,t,s=0,n=0){if(n>50)return[[],e.length];const a=[];let r="";for(;s<e.length;){const d=e[s];if("id"===d)r=t[s];else if(","===d&&r)a.push(c(r)),r="";else if("("===d){const[d,l]=u(e,t,s+1,n+1);s=l,a.push(c(r,d)),r=""}else if(")"===d)return""!==r&&a.push(c(r)),[a,s];s++}return r&&a.push(c(r)),[a,s]}let _={};function p(e){if(_[e])return _[e];const t=e?e.length:0,s=[],n=[];let a="";for(let r=0;r<t;r++){const t=e[r],d=t.charCodeAt(0);d>=48&&d<=57||"_"===t||"-"===t?a+=t:"("!==t&&")"!==t&&":"!==t&&","!==t||(""!==a&&(n.push(a),s.push("id"),a=""),n.push(t),s.push(t))}a.length>0&&(n.push(a),s.push("id"));const[r]=u(s,n);return Object.keys(_).length>300&&(_={}),_[e]=r,r}function m(e,t){const s=[];e.fwd_count?s.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&s.push({type:"mail",id:-t,object:{fwd_count:p(e.fwd).length}});for(let t=1;e[`attach${t}_type`];++t)switch(e[`attach${t}_type`]){case"call":s.push({type:e[`attach${t}_type`],id:e[`attach${t}`],initiatorId:(0,n.intval)(e[`attach${t}_call_initiator_id`]),state:e[`attach${t}_call_state`],duration:(0,n.intval)(e[`attach${t}_call_duration`]),receiverId:(0,n.intval)(e[`attach${t}_call_receiver_id`])});break;case"doc":if("audiomsg"===e[`attach${t}_kind`]){const n=e.attachments?JSON.parse(e.attachments)[0]:{};s.push({type:e[`attach${t}_type`],kind:"audio_message",id:e[`attach${t}`],audio_message:n.audio_message});break}default:s.push({type:e[`attach${t}_type`],id:e[`attach${t}`],kind:e[`attach${t}_kind`],productId:e[`attach${t}_product_id`]})}return e.geo&&s.push({type:"geo",id:e.geo}),s}function y(e){return e.map((e=>{const t="audiomsg"===e[2]?"audio_message":e[2];return`${e[0]}:${e[1]}:${t}`})).join(",")}function f(e){return e>0&&(e|a.PINNED_CONVERSATION_BIT_MASK)===a.PINNED_CONVERSATION_BIT_MASK}function g(e){return new RegExp(`(^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${r.VK_SITE_REGEX_SOURCE_UNSAFE})?\\/onboarding_find_friends`).test(decodeURIComponent(e))}function E(e){return e.type===d.ADD_MESSAGE&&(0,l.isMarusiaPeer)(e.peerId)}},979805:(e,t,s)=>{"use strict";s.d(t,{getMessageFromTuple:()=>d,hasUserMentions:()=>l});var n=s(12473),a=s(650353),r=s(810068);const d=([e,t,s,d,l,c,u,_,p,m])=>{const y=Object.assign({},c||{},u||{});return Array.isArray(y.marked_users)&&(y.marked_users=y.marked_users.filter((e=>Object.values(n.MARKED_TYPE).includes(e[0])))),{messageId:e,flags:t,peerId:s,date:d,attaches:(0,a.convertKludgesToAttaches)(y,e),subject:y.title||"",text:l,kludges:y,randomId:_,userId:r.Ranges.isChatOrChannelPeer(s)?Number(y.from)||0:s,update_time:m,chat_local_id:p}};function l(e,t){return!!e.kludges&&(e.kludges.marked_users||[]).some((e=>{if(e[0]!==n.MARKED_TYPE.MENTIONS)return!1;switch(e[1]){case"all":return!0;case"online":return e[2].includes(t);default:return e[1].includes(t)}}))}},89473:(e,t,s)=>{"use strict";s.d(t,{ADD_MESSAGE:()=>_,CHANGE_PEER:()=>N,CHANGE_TAB:()=>U,CONVERSATION_UPDATED:()=>A,CONVO_MAJOR_ID_CHANGED:()=>X,CONVO_MINOR_ID_CHANGED:()=>Q,DELETE_DIALOG:()=>K,EDIT_MESSAGE:()=>j,FAILED_MESSAGE:()=>W,FLAG_AUDIO_MESSAGE_LISTENED:()=>re,FLAG_DELETED:()=>se,FLAG_DELETE_BY_TTL:()=>de,FLAG_HAS_REACTIONS:()=>le,FLAG_HAS_REPLY:()=>ae,FLAG_IMPORTANT:()=>ie,FLAG_OUTBOUND:()=>te,FLAG_SPAM:()=>oe,FLAG_STEALTH:()=>ne,FOLDER_AD_TAG:()=>pe,FOLDER_HAS_BANNER:()=>_e,FOLDER_IMPORTANT:()=>ue,INVALIDATE_MESSAGE:()=>$,KEYBOARD_CALLBACK_RECEIVED:()=>O,MAIL_CHAT_FLAG_DISABLE_STICKERS_POPUP_AUTOPLAY:()=>ce,MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED:()=>he,MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED:()=>Ee,MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED:()=>Ae,MAIL_CHAT_UPDATE_TYPE_BUSINESS_NOTIFY_DATA_CHANGED:()=>Ie,MAIL_CHAT_UPDATE_TYPE_CALL_IN_PROGRESS_CHANGED:()=>Te,MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED:()=>Pe,MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED:()=>me,MAIL_CHAT_UPDATE_TYPE_IS_NEW_CHANGED:()=>Ce,MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED:()=>we,MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED:()=>be,MAIL_CHAT_UPDATE_TYPE_PINNED:()=>ye,MAIL_CHAT_UPDATE_TYPE_USER_JOINED:()=>fe,MAIL_CHAT_UPDATE_TYPE_USER_KICKED:()=>ve,MAIL_CHAT_UPDATE_TYPE_USER_LEFT:()=>ge,MESSAGE_REQUEST_STATUS_ACCEPTED:()=>Oe,MESSAGE_REQUEST_STATUS_NEW:()=>Se,MESSAGE_REQUEST_STATUS_REJECTED:()=>Me,MUTEX:()=>F,NOTIFY_SETTINGS_CHANGED:()=>C,PEER_PROFILE_TAGS_CHANGED_EVENT:()=>J,PEER_TAGS_CHANGED_EVENT:()=>Z,REACTION_CREATE_OR_EDIT_EVENT:()=>ee,READ_INBOUND:()=>p,READ_INBOUND_BY_CMID:()=>y,READ_OUTBOUND:()=>m,READ_OUTBOUND_BY_CMID:()=>g,RECONNECTED:()=>z,RECONNECTING:()=>q,RECORDING_AUDIO:()=>P,REFRESH_LP_KEY:()=>x,REPLACE_DIRECTORIES:()=>D,REPLACE_FLAGS:()=>c,REPLACE_MESSAGE:()=>V,RESEND:()=>H,RESET_DIRECTORIES:()=>S,RESET_FLAGS:()=>u,RESET_PEER:()=>B,RESYNC:()=>L,SET_DIRECTORIES:()=>k,SET_FLAGS:()=>l,TRANSITION:()=>R,TYPING:()=>b,UNREAD_COUNT:()=>T,UNREAD_REACTIONS:()=>f,WAITING_FOR_RECONNECT:()=>G,constructEvent:()=>r,mutexEvent:()=>Be,readInboundByCmidEvent:()=>xe,readInboundEvent:()=>De,resetDirectoriesEvent:()=>ke,resyncEvent:()=>Re,setDirectoriesEvent:()=>Le});var n=s(979805),a=s(898848);function r(e){switch(e[0]){case 0:return function([,e]){return{type:d,localId:e}}(e);case 1:return function([,e,t,s]){return{type:c,messageId:e,mask:t,peerId:s}}(e);case 2:return function([,e,t,s]){return{type:l,messageId:e,flags:t,peerId:s}}(e);case 3:return function([,e,t,s]){return{type:u,messageId:e,flags:t,peerId:s}}(e);case 4:return function([,e,t,s,a,r,d,l,c,u,p,m]){return{type:_,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(a),Number(r),d,l,c,u,p,m]),minorSortId:s}}(e);case 5:return function([,e,t,s,a,r,d,l,c,u,_]){return{type:j,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(s),Number(a),r,d,l,c,u,_])}}(e);case 6:return De(e);case 7:return function([,e,t,s]){return{type:m,peerId:e,upToId:t,unread:s}}(e);case 10:return ke(e);case 11:return function([,e,t]){return{type:D,peerId:e,mask:t}}(e);case 12:return Le(e);case 13:return function([,e,t,s]){return{type:K,peerId:e,localId:t,leaveChat:s}}(e);case 18:return function([,e,t,s,a,r,d,l,c,u,_]){return{type:V,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(s),Number(a),r,d,l,c,u,_])}}(e);case 19:return function([,e]){return{type:$,messageId:e}}(e);case 20:return function([,e,t]){return{type:X,peerId:e,majorId:t}}(e);case 21:return function([,e,t]){return{type:Q,peerId:e,minorId:t}}(e);case 23:return function([,e,t]){return{type:Z,peerId:e,peerTagsMask:t}}(e);case 51:return function([,e,t]){return{type:E,chatId:e,self:t}}(e);case 52:return function([,e,t,s]){return{type:A,peerId:t,updateType:e,updateArg:s}}(e);case 63:return function([,e,t,s,n]){return{type:b,peerId:e,userIds:t,totalCount:s,ts:n}}(e);case 64:return function([,e,t,s,n]){return{type:P,peerId:e,userIds:t,totalCount:s,ts:n}}(e);case 70:return function([,e,t]){return{type:I,userId:e,callId:t}}(e);case 80:return function([,e,t,s,n,a,r,d,l,c]){return{type:T,count:e,countNotMuted:t,showOnlyNotMuted:s,businessNotifyUnread:n,headerTotalUnread:a,headerNotMutedUnread:r,archiveUnreadCount:d,archiveUnreadUnmutedCount:l,archiveMentionsCount:c}}(e);case 114:return function([,e]){const{peer_id:t,sound:s,disabled_until:n}=e||{};return{type:C,peerId:t,sound:s,disabledUntil:n}}(e);case 115:return function([,e]){return{type:Y,payload:e}}(e);case 119:return function([,e]){const{event_id:t,owner_id:s,peer_id:n,action:a}=e;return{type:O,event_id:t,owner_id:s,peer_id:n,action:a}}(e);case 120:return function([]){return{type:J}}(e);case 601:return function([,e,...t]){const s=[],n=1===e?t.splice(2,1).pop():void 0,[a,r,d,...l]=t;for(let e=0;e<d;e++){const e=l.shift(),[t,n,,...a]=l.splice(0,e);s.push({reaction_id:t,count:n,...a?{user_ids:a}:void 0})}return{type:ee,subtype:e,peerId:a,cmid:r,reactionsCount:d,reactionCounters:s,...n?{reactionId:n}:void 0}}(e);case 602:return function([,e,t,...s]){return{type:f,peerId:e,totalCount:t,cmids:s}}(e);case 10006:return xe(e);case 10007:return function([,e,t,s]){return{type:g,peerId:e,upToCmid:t,unread:s}}(e);case-1:return Re();case-2:return function([,e,t]){return{type:x,key:e,url:t}}(e);case-3:return function([,e]){return{type:G,timeout:e}}(e);case-4:return{type:q};case-5:return{type:z};default:return function(e){return{type:M,params:e}}(e)}}const d="event_delete",l="event_set_flags",c="event_replace_flags",u="event_reset_flags",_="event_add_message",p="event_read_inbound",m="event_read_outbound",y="event_read_inbound_by_cmid",f="event_unread_reactions",g="event_read_outbound_by_cmid",E="event_chat_changed",A="event_chat_updated",b="event_typing",P="event_recoding_audio",I="event_video_call",T="event_unread_count",C="event_notify_settings_changed",O="event_keyboard_callback_received",M="event_empty",S="event_reset_directories",D="event_replace_directories",k="event_set_directories",L="event_resync",x="event_refresh_lp_key",R="transition_event",B="reset_peer",F="mutex",N="change_peer",U="event_change_tab",W="event_failed_message",H="event_resend",K="event_delete_dialog",j="event_edit_message",V="event_replace_message",$="event_invalidate_event",G="event_waiting_for_reconnect",q="event_reconnecting",z="event_reconnected",Y="incoming_call",X="event_convo_major_id_changed",Q="event_convo_minor_id_changed",Z="peer_tags_changed",J="peer_profile_tags_changed",ee="reaction_create_or_edit",te=2,ie=8,oe=64,se=128,ne=65536,ae=1<<21,re=4096,de=1<<22,le=1<<24,ce=549755813888,ue=1,_e=8,pe=32768,he=3,me=4,ye=5,fe=6,ge=7,ve=8,Ee=9,Ae=10,we=11,be=12,Pe=13,Ie=14,Te=19,Ce=22,Oe=1,Me=2,Se=3;function De([,e,t,s]){return{type:p,peerId:e,upToId:t,unread:s}}function ke([,e,t,s=!1]){return{type:S,peerId:e,mask:t,local:s}}function Le([,e,t,s=!1]){return{type:k,peerId:e,mask:t,local:s}}function xe([,e,t,s]){return{type:y,peerId:e,upToCmid:t,unread:s}}function Re(){return{type:L}}function Be([,e,t,s,n,r]){return{type:F,free:!!(0,a.intval)(e)||(0,a.intval)(n)===window.vk.id,resource:t,peerId:(0,a.intval)(s),who:(0,a.intval)(n),name:r}}},12473:(e,t,s)=>{"use strict";var n,a;s.d(t,{AttachmentType:()=>a,MARKED_TYPE:()=>n}),function(e){e[e.MENTIONS=1]="MENTIONS",e[e.CASPER=2]="CASPER"}(n||(n={})),function(e){e.REPLY="reply",e.DOCUMENT="doc",e.MAIL="mail",e.CALL="call",e.STICKER="sticker",e.UGC_STICKER="ugc_sticker"}(a||(a={}))},725669:(e,t,s)=>{"use strict";s.d(t,{asyncComponent:()=>r});var n=s(296540),a=s(8520);function r(e,t){return(0,n.lazy)((()=>(0,a.asyncImportLoader)(e,3).then((e=>({default:t(e)})))))}},695847:(e,t,s)=>{"use strict";function n(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(a(e),Promise.resolve())}function a(e){const t=document.createElement("input"),s=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),s.focus()}s.d(t,{_copyWithFakeElement:()=>a,copyToClipboard:()=>n})},353557:(e,t,s)=>{"use strict";function n(e,t){let s;e=Math.max(e,0);const n=Math.floor(e%60);s=n<10?"0"+n:n;const a=(e=Math.floor(e/60))%60;return s=a+":"+s,((e=Math.floor(e/60))>0||t)&&(a<10&&(s="0"+s),s=e+":"+s),s}s.d(t,{formatTime:()=>n})},203763:(e,t,s)=>{"use strict";s.d(t,{dedupeAsyncCallback:()=>a});var n=s(8520);function a(e,t=((...e)=>e)){const s=new Map;return(...a)=>{const r=t(...a);for(const[e,t]of s.entries())if((0,n.isEqual)(r,e))return t;const d=e(...a);return s.set(r,d),d.finally((()=>{s.delete(r)})),d}}},194025:(e,t,s)=>{"use strict";s.d(t,{NarrativeAnalyticEventType:()=>n,NarrativeAnalyticNavScreen:()=>a,sendNarrativeAnalytic:()=>l});var n,a,r=s(636576),d=s(540462);function l(e,t,s="other"){const n=t?.title||void 0,a=t?.customCover?0:t?.coverStoryId||0,l=t?.id||0,c=t?.ownerId||0;let u=t?.storyIds;u?.length||(u=t?.stories?.map((e=>e.id)));const _={event_type:e,nav_screen:s,narrative_owner_id:c,narrative_id:l,narrative_title:n,story_ids:u?.length?u:void 0,cover_story_id:a};(0,r.statlogsValueEvent)("narrative_product_analytic",_),(0,d.partConfigEnabled)("narratives_web_analytic_debug")&&console.log("-- narrative analytic",_)}!function(e){e.clickToAddToNarrative="click_to_add_to_narrative",e.addStoryToNarrative="add_story_to_narrative",e.openNarrativeList="open_narrative_list",e.close="close",e.changeSort="change_sort",e.publishNarrative="publish_narrative",e.createNarrative="create_narrative",e.deleteNarrative="delete_narrative",e.clickToEditNarrative="click_to_edit_narrative",e.editNarrative="edit_narrative",e.addToBookmarks="add_to_bookmarks",e.shareNarrative="share_narrative",e.seeMore="see_more",e.addToNarrativeFromActionSheet="add_to_narrative_from_action_sheet"}(n||(n={})),function(e){e.storyArchive="story_archive",e.storyViewer="story_viewer",e.profile="profile",e.feedBlock="narratives_feed_block",e.club="club",e.other="other"}(a||(a={}))},342018:(e,t,s)=>{"use strict";function n(e){window.cur&&window.cur.destroy&&window.cur.destroy.push(e)}s.d(t,{pushNavDestroy:()=>n})},261910:(e,t,s)=>{"use strict";s.d(t,{parseJSON:()=>a});var n=s(298077);function a(e){try{return JSON.parse(e)}catch(t){const s={environment:"parseJsonError",breadcrumb:{message:"Uncaught json parse error",data:{json:e},category:"custom"}};return(0,n.logError)(t,s),{}}}},680960:(e,t,s)=>{"use strict";s.d(t,{logQuestionError:()=>n});const n=(0,s(339328).createSentryLogger)({debugPrefix:"[Questions Sentry Logger]"})},961209:(e,t,s)=>{"use strict";s.d(t,{QuestionsStatCollector:()=>c});var n=s(314309),a=s(317216),r=s(540462),d=s(148230),l=s(419222);class c{logClickEvent(e,t={}){const s={type:a.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM,[a.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM]:{type:e,screen:t.navScreen||window.cur.module||""}};t.questionReceiverId&&(s[a.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_receiver_id=t.questionReceiverId),t.questionAuthorId&&(s[a.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_author_id=t.questionAuthorId),t.questionText&&(s[a.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_text=t.questionText);const n={type:a.EventItemType.QUESTION,id:t.questionId||0};(0,r.partConfigEnabled)("profile_questions_analytic_debug")&&console.log(`--${e}`,s,n),this.clickStatCollector.logEvent(s,n)}logOpeningEvent(e,t,s){let n;switch(t){case l.QuestionsBoxRef.STORY:n=s===d.QuestionAnalyticBoxName.askQuestion?d.QuestionAnalyticEventType.openAskQuestionFromStory:d.QuestionAnalyticEventType.openMyQuestionsFromStory;break;case l.QuestionsBoxRef.SNIPPET:n=s===d.QuestionAnalyticBoxName.askQuestion?d.QuestionAnalyticEventType.openAskQuestionFromSnippet:d.QuestionAnalyticEventType.openMyQuestionsFromSnippet;break;default:n=s===d.QuestionAnalyticBoxName.askQuestion?d.QuestionAnalyticEventType.openAskQuestionFromUrl:d.QuestionAnalyticEventType.openMyQuestionsFromUrl}const a={questionReceiverId:e};s===d.QuestionAnalyticBoxName.askQuestion&&(a.questionAuthorId=window.vk.id),this.logClickEvent(n,a)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.clickStatCollector=new n.ClickStatCollector(this.productionStatCollector)}}},508611:(e,t,s)=>{"use strict";s.d(t,{logQuestionsClickEvent:()=>a,logQuestionsOpeningEvent:()=>r});const n=new(s(961209).QuestionsStatCollector);function a(e,t={}){n.logClickEvent(e,t)}function r(e,t,s){n.logOpeningEvent(e,t,s)}},148230:(e,t,s)=>{"use strict";var n,a;s.d(t,{QuestionAnalyticBoxName:()=>a,QuestionAnalyticEventType:()=>n}),function(e){e.clickToQuestion="click_to_question",e.reply="reply",e.replyAgain="reply_again",e.sharing="sharing",e.shareToStory="share_to_story",e.shareToWall="share_to_wall",e.shareToGroup="share_to_group",e.shareToIm="share_to_im",e.copyLink="copy_link",e.openStory="open_story",e.callFriends="call_friends",e.openSettings="open_settings",e.openProfile="open_profile",e.block="block",e.unblock="unblock",e.deleteAllQuestions="delete_all_questions",e.delete="delete",e.cancelDelete="cancel_delete",e.cancelDeleteAllAuthorQuestions="cancel_delete_all_author_questions",e.cancelDeleteAllAnonymousQuestions="cancel_delete_all_anonymous_questions",e.next="next",e.close="close",e.clickToSend="click_to_send",e.sendQuestion="send_question",e.cancelSendQuestion="cancel_send_question",e.cancelWriteAnswer="cancel_write_answer",e.closeMyQuestions="close_my_questions",e.openMyQuestionsFromUrl="open_my_questions_from_url",e.openAskQuestionFromUrl="open_ask_question_from_url",e.openMyQuestionsFromSnippet="open_my_questions_from_snippet",e.openAskQuestionFromSnippet="open_ask_question_from_snippet",e.openMyQuestionsFromStory="open_my_questions_from_story",e.openAskQuestionFromStory="open_ask_question_from_story"}(n||(n={})),function(e){e[e.askQuestion=0]="askQuestion",e[e.myQuestions=1]="myQuestions"}(a||(a={}))},142278:(e,t,s)=>{"use strict";s.d(t,{createReactInitiator:()=>n.createReactInitiator,createReactLazyInitiator:()=>n.createReactLazyInitiator});var n=s(260152)},260152:(e,t,s)=>{"use strict";s.d(t,{createReactInitiator:()=>n.createReactInitiator,createReactLazyInitiator:()=>n.createReactLazyInitiator});var n=s(356656)},356656:(e,t,s)=>{"use strict";s.d(t,{createReactInitiator:()=>d,createReactLazyInitiator:()=>l});var n=s(474848),a=s(53266),r=s(540462);function d(e,t=null,s){const r=(0,a.createBasicReactInitiator)(t,s);return{...r,render:function(t){return r.render((0,n.jsx)(e,{...t}))}}}function l(e,t=null,s){const d=(0,a.createBasicReactInitiator)(t,s),l=!t;let c;return{...d,render:async function(s,a){const u=new Error("Async render error");if(!c){if(c=await e(),a?.abortSignal.aborted)return;const s=(0,r.partConfigEnabled)("react_lazy_initiator_abort_render"),n=Boolean("function"==typeof t?t():t);if(s&&!l&&!n)return void console.warn("Target container not found. Verify that it exists before render.")}return d.render((0,n.jsx)(c,{...s}),{asyncBaseError:u})}}}},53266:(e,t,s)=>{"use strict";s.d(t,{createBasicReactInitiator:()=>l});var n=s(440961),a=s(205338),r=s(342018),d=s(62208);function l(e=null,t={}){const{onRendered:s,onMounted:l,onUpdated:u,onUnmounted:_,destroyAfterNavigation:p=!0,useReact18Root:m}=t,y=!e;let f=null;function g(){if(e)return e;const t=(0,d.createReactContainer)();return document.body.appendChild(t),t}let E=null;if(m){const e=g();if("function"==typeof e)throw new Error("Function container getter is not allowed while using useReact18Root option");const t=c(e);E=(0,a.createRoot)(t)}function A(){if(!f)return!1;let e=!0;return E?E.unmount():e=n.unmountComponentAtNode(f),y&&f.remove(),f=null,_?.(e),e}return{render:function(e,t={}){let a=!1;try{f||(a=!0,f=c(g())),m?E?.render(e):n.render(e,f)}catch(e){throw t.asyncBaseError?new Error(e.message,{cause:t.asyncBaseError}):e}if(s?.(A),a){const e=f;p&&(0,r.pushNavDestroy)((()=>{e===f&&A()})),l?.(A)}else u?.(A)},unmount:A,getContainer:function(){return f},isMounted:function(){return!!f}}}function c(e){if("function"!=typeof e)return e;const t=e();if(!t)throw new Error("Target container not found. Verify that it exists before render.");return t}},62208:(e,t,s)=>{"use strict";function n(){const e=document.createElement("div");return e.id=`${a}_${r++}`,e}s.d(t,{createReactContainer:()=>n});const a=`rc_${(0,s(898848).srand)()}`;let r=0},444024:(e,t,s)=>{"use strict";s.d(t,{parseReactWikiLinks:()=>p});var n=s(474848),a=s(296540),r=s(279734),d=s(34231);const l={target:"_self",withVKUILink:!1,withNewRegex:!1,wrapAwayIfExternal:!1},c=new RegExp(`\\[?(${/(?:http(s)?:\/\/)/.source}?${/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.source})${/(?:\|([\wёЁА-я ]{1,}))/.source}?\\]?`),u=new RegExp(`(${c.source}|${/\[(id|public|club|event)-?[\d]{1,}\|[\wёЁА-я ]{1,}\]/.source})`,"gi"),_=/^(http(s)?:\/\/)?vk.(com|ru)/gi;function p(e,t=l){const{target:s=l.target,withVKUILink:c=l.withVKUILink}=t,p=e.match(t.withNewRegex?u:/\[(.*?)\]/g),m=p?p.map((e=>e.replace(/\[|(.*?)\]/g,"$1"))):[];if(!p||!m.length)return(0,n.jsx)(a.Fragment,{children:e});const y=c?r.Link:"a",f=m.map(((e,a)=>{const[r,l]=e.split("|");let c=t.hrefMap?.[r]||(_.test(r)?r.replace(_,""):r);const u=t.onClickMap?.[r];return t.wrapAwayIfExternal&&(c=(0,d.wrapAwayIfExternal)(c)),(0,n.jsx)(y,{href:c,target:s,onClick:u,children:l||r},a)})),g=[];return p.forEach(((t,s)=>{const n=e.indexOf(t);g.push(e.substr(0,n)),g.push(f[s]),e=e.slice(n+t.length)})),g.push(e),(0,n.jsx)(a.Fragment,{children:g})}},598129:(e,t,s)=>{"use strict";function n(e,t){let s,n=t.timeout,a=t.onLoad,r=t.onError,d=document.createElement("script");if(d.addEventListener("load",l),d.addEventListener("readystatechange",l),d.addEventListener("error",c),t.attributes)for(const[e,s]of Object.entries(t.attributes))null==s||("boolean"==typeof s?d.toggleAttribute(e,s):d.setAttribute(e,s));function l(){d.readyState&&"loaded"!==d.readyState&&"complete"!==d.readyState||(u(),a&&a())}function c(){u(),r&&r()}function u(){clearTimeout(s),d.removeEventListener("load",l),d.removeEventListener("readystatechange",l),d.removeEventListener("error",c)}return d.src=e,document.head.appendChild(d),n&&(s=setTimeout(c,n)),{destroy:function(){u()}}}s.d(t,{loadScript:()=>n})},346723:(e,t,s)=>{"use strict";s.d(t,{marusiaAudioStats:()=>c});var n=s(540462),a=s(482310),r=s(793722),d=s(121246);class l{startLoop(){this.stopLoop(),this.sendIsPlayingInterval=setInterval(this.sendTrackPlaying.bind(this),l.SEND_IS_PLAYING_INTERVAL),this.currentTrackStartPlayTimeMs=this.getCurrentTime()}getCurrentTime(){return(new Date).getTime()}stopLoop(){this.sendIsPlayingInterval&&(clearInterval(this.sendIsPlayingInterval),this.sendIsPlayingInterval=null),this.currentTrackStartPlayTimeMs=null}sendTrackPlaying(){if(!this.playerAdapter)return void this.stopLoop();if(!this.playerAdapter.isMarusiaTrack())return void this.stopLoop();const e=this.playerAdapter.getAudio();e?(this.sendDeviceStatEvent(d.PlayerDeviceStatEventType.TRACK_PLAYING,d.ActivationSource.playback,e),this.sendPlayerStatusEvent("PLAY",e)):this.stopLoop()}sendPlayerStatusEvent(e,t){if(!this.playerAdapter||!this.currentTrackStartPlayTimeMs)return;const s=(0,a.getAudioExtra)(t)?.voiceAssistant;if(!s)return;const n=s.source?.url??t.url,r=s.source?.skill_name??l.GLOBAL,d={meta:{source:s.source,title:t.title,url:n},url:n,volume:this.playerAdapter.getVolume(),repeat:this.playerAdapter.isRepeatCurrentAudio(),state:e,updated:(new Date).getTime()/1e3,position:this.playerAdapter.getTrackPosition(),elapsed:this.playerAdapter.getProgressInSeconds(),duration:t.duration,created:this.currentTrackStartPlayTimeMs,skill:r,random:this.playerAdapter.isShuffledPlaylist()};this.api.sendPlayerStatus(r,d)}sendDeviceStatEvent(e,t,s){if(!s||!this.playerAdapter)return;const n=(0,a.getAudioExtra)(s)?.voiceAssistant;if(!n)return;const r={type:e,phrase_id:n.source?.phrase_id??"",timestamp:Math.round((new Date).getTime()/1e3),data:{track_id:n.track_id??"",position:this.playerAdapter.getProgress(),duration:this.playerAdapter.getAudio().duration,activated_by:t,source_type:n.source?.type??"",flags:n.flags??"",playback_duration:this.playerAdapter.getListenedTime(),audio_type:n.source?.media_type??""}};this.api.sendDeviceStat([r])}getActivatedBy(e,t){switch(e){case d.PlayerDeviceStatEventType.TRACK_STOP:return d.ActivationSource.os_system;case d.PlayerDeviceStatEventType.TRACK_START:case d.PlayerDeviceStatEventType.TRACK_RESUME:if(t.isAutoPlayed())return d.ActivationSource.playback;return t.getSequence()?d.ActivationSource.playback:d.ActivationSource.app_ui;default:return d.ActivationSource.os_system}}onPlay(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();if(!t)return;const s=t.fullId,a=this.currentAudioId===s;this.currentAudioId=s,!a&&this.currentAudio&&this.onEnded(e,this.currentAudio),this.currentAudio=t;const r=a?d.PlayerDeviceStatEventType.TRACK_RESUME:d.PlayerDeviceStatEventType.TRACK_START,l=e.isAutoPlayed()?d.ActivationSource.playback:d.ActivationSource.app_ui;this.sendDeviceStatEvent(r,l,t),this.sendPlayerStatusEvent("PLAY",t),this.startLoop()}onPause(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();t&&(this.sendDeviceStatEvent(d.PlayerDeviceStatEventType.TRACK_PAUSE,d.ActivationSource.os_system,t),this.sendPlayerStatusEvent("PAUSE",t),this.stopLoop())}onEnded(e,t){(0,n.partConfigEnabled)("marusia_web_music_stats")&&(this.playerAdapter=e,t&&(this.sendDeviceStatEvent(d.PlayerDeviceStatEventType.TRACK_STOP,d.ActivationSource.os_system,t),this.sendPlayerStatusEvent("STOP",t),this.stopLoop()))}constructor(){this.api=new r.MarusiaSharedApi,this.sendIsPlayingInterval=null,this.playerAdapter=null,this.currentTrackStartPlayTimeMs=null,this.currentAudioId=null,this.currentAudio=null}}l.SEND_IS_PLAYING_INTERVAL=15e3,l.GLOBAL="__global__";const c=new l},793722:(e,t,s)=>{"use strict";s.d(t,{MarusiaSharedApi:()=>u});var n=s(957994),a=s(812527),r=s(40147),d=s(461742),l=s(474284);const c="https://vc.go.mail.ru";class u{generateDeviceId(){return(0,r.generateDeviceId)("vk_web",this.debug)}processBackendCommands(e,t){const s={phrase_id:e,command_ids:JSON.stringify(t)};return(0,n.api)("marusia.processCommands",s)}getSuggests(e){const t={has_unread_messages:Number(e)};return(0,n.api)("marusia.getSuggests",t)}getWebStatic(){return(0,n.api)("marusia.getWebStatic",{})}getWebSession(e){const t={device_id:e};return(0,n.api)("marusia.getWebSession",t)}revokeWebSession(e){const t={device_id:e};return(0,n.api)("marusia.revokeWebSession",t)}getLastMessageCommands(){return(0,n.api)("marusia.getLastMessageCommands",{})}sendStartSessionEvent(){return(0,n.api)("marusia.sendStartSessionEvent",{})}getOnboarding(){return(0,n.api)("marusia.getOnboarding",{})}async isBackendCommand(e){const t=(await this.getInitConfig()).marusiaBackendCommands?.commands;return!t||t.some((t=>"media"===e.type?"vk"===e.meta?.source?.type&&(e.type===t.type&&e.media_type===t.media_type):("playlist"!==e.type||"vk"===e.tracks[0]?.meta?.source?.type)&&e.type===t.type))}getInitConfig(){return null===this.initConfigCache&&(this.initConfigCache=(0,n.api)("marusia.getInitConfig",{device_id:this.generateDeviceId(),tts_type:"mp3"})),this.initConfigCache}sendMessage(e,t,s){return(0,n.api)("messages.send",{peer_id:e,random_id:Math.round(2147483647*Math.random()),payload:JSON.stringify(s),message:t})}reloadAudios(e){return Promise.resolve([])}getApiHost(){return this.getInitConfig().then((e=>e.marusiaServerType?e.marusiaServerType:{server_url:c,skill:""}))}async makeRequest(e,t={},s={}){const n=await(0,a.getSession)(this),r=await this.getApiHost(),l=r.server_url,u=this.generateDeviceId(),_=(await this.getInitConfig()).maskedChatId,p={...t,dialog_mode:"vk_bot",session_id:n.session_id,device_id:u,chat_id:":vk:chat:"+_};l!==c&&(p.skillserver_type=r.skill);const m=new URLSearchParams(p).toString();let y=!0,f=null;try{f=await fetch(`${l}/${e}?${m}`,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.session_secret}`},...s}),400===f.status&&(y=!1,f=null)}catch{}if(!y)return await(0,a.revokeSession)(this),this.makeRequest(e,t,s);if(!f)throw new Error(d.MarusiaError.API_ERROR);return f.json()}async getPreparedCapabilities(){const e=(await this.getInitConfig()).capabilities.capabilities2;let t={};return e&&(t=e.reduce(((e,t)=>({...e,[t.capability]:t.enabled})),{})),t}async getDefaultOptions(e){const t=await this.getPreparedCapabilities();return{body:JSON.stringify({...e,capabilities2:{capabilities:t}})}}async addChunk(e,t,s=!1,n,a){const r={last:s?1:0,phrase_id:e,chunk_num:t},d={signal:a,body:n};return(await this.makeRequest("phrase/add",r,d)).result}async createAsrPhrase(e,t){const s={};e&&(s.player_data=e);const n=await this.getDefaultOptions(s);return t&&(n.signal=t),this.makeRequest("phrase/create",{no_kw:1},n)}async phraseCreateText(e,t,s){const n={text:e,refuse_tts:1},a=t??{};s&&(a.player_data=s);const r=await this.getDefaultOptions(a);return this.makeRequest("phrase/create/text",n,r)}async phraseCreateEvent(e,t,s){const n={event:e,refuse_tts:1},a=t??{};s&&(a.player_data=s);const r=await this.getDefaultOptions(a);return this.makeRequest("phrase/create/event",n,r)}async getPhraseResult(e){const t={phrase_id:e,capabilities2:JSON.stringify({capabilities:await this.getPreparedCapabilities()})};return this.makeRequest("phrase/result",t,{method:"GET"})}async upgradeToken(e){const t={app_id:l.MARUSIA_APP_ID},s={body:JSON.stringify({phrase_info:e.phrase_info})};return this.makeRequest("account/vk/upgrade_token",t,s)}sendDeviceStat(e){const t={body:JSON.stringify({events:e})};return this.makeRequest("device/stat",{},t)}sendPlayerStatus(e,t){const s={as_global:1,skill_id:e},n={body:JSON.stringify(t)};return this.makeRequest("player/status",s,n)}skillList(e){const t={category:e,size:10,page:0,use_all_platforms:0};return this.makeRequest("skill_list",t,{method:"GET"})}skillListCategories(){return this.makeRequest("skill_list/categories",{add_featured:1,use_all_platforms:0},{method:"GET"})}constructor(e){this.debug=!1,this.initConfigCache=null,this.debug=!!e}}},474284:(e,t,s)=>{"use strict";s.d(t,{MARUSIA_APP_ID:()=>n});const n=6463690},40147:(e,t,s)=>{"use strict";s.d(t,{generateDeviceId:()=>d});var n=s(8520),a=s(75745);const r="marusia-device-id";function d(e,t){let s=n.localStorage.getItem(r);if(!s){s=`:${t?"d":"c"}:${"chat"}:${e}:${(0,a.uuid)(32)}`,n.localStorage.setItem(r,s)}return s}},812527:(e,t,s)=>{"use strict";let n;s.d(t,{getSession:()=>r,revokeSession:()=>l});let a=3;async function r(e){if(!n){const t=e.generateDeviceId();n=e.getWebSession(t)}try{return await n}catch(t){if(console.error("get session error",t),a<3)return a+=1,d(),r(e);throw new Error("get session error")}}function d(){n=void 0}function l(e){return d(),e.revokeWebSession(e.generateDeviceId())}},461742:(e,t,s)=>{"use strict";var n,a;s.d(t,{CommunicationType:()=>n,MarusiaError:()=>a}),function(e){e.kws="kws",e.listen_command="listen_command",e.button="button",e.text="text",e.suggest="suggest",e.skill="skill",e.widget="widget",e.other="other"}(n||(n={})),function(e){e.HIDDEN="HIDDEN",e.BACKEND_COMMAND_TIMEOUT="BACKEND_COMMAND_TIMEOUT",e.USER_INTERRUPT="USER_INTERRUPT",e.ATTACH_LOAD_TIMEOUT="ATTACHES_LOAD_TIMEOUT",e.API_ERROR="API_ERROR"}(a||(a={}))},794070:(e,t,s)=>{"use strict";var n;s.d(t,{MarusiaMediaType:()=>n}),function(e){e[e.music=1]="music",e[e.radio=2]="radio",e[e.noise=3]="noise",e[e.tale=4]="tale",e[e.podcast=5]="podcast",e[e.books=6]="books",e[e.video=8]="video"}(n||(n={}))},121246:(e,t,s)=>{"use strict";var n,a;s.d(t,{ActivationSource:()=>a,PlayerDeviceStatEventType:()=>n}),function(e){e.TRACK_START="player.track_start",e.TRACK_STOP="player.track_stop",e.TRACK_RESUME="player.track_resume",e.TRACK_PAUSE="player.track_pause",e.TRACK_PLAYING="player.track_playing"}(n||(n={})),function(e){e.playback="playback",e.backend_new_media="backend_new_media",e.backend_controls="backend_controls",e.os_ui="os_ui",e.os_system="os_system",e.app_ui="app_ui",e.playback_limit="playback_limit"}(a||(a={}))},75745:(e,t,s)=>{"use strict";s.d(t,{MARUSIA_PEER_ID:()=>n,disableMarusiaTextInput:()=>l,enableMarusiaTextInput:()=>c,getSuggestContentForApi:()=>_,isPayloadForCommand:()=>r,isSuggestCommand:()=>d,parseBase64JSON:()=>u,replaceSpecialPhrases:()=>p,uuid:()=>a});s(794070),s(89473);const n=-194070336;function a(e=32){return[...Array(e).keys()].reduce((e=>`${e}${Math.floor(16*Math.random()).toString(16)}`),"")}function r(e,t){if(!e.voice_assistant)return!1;const s=e.voice_assistant;return!(s.phrase_id!==t.phraseId||(n=s.command_ids,a=t.commandIds,n.length!==a.length||!n.every((e=>a.includes(e)))));var n,a}function d(e){return["text_suggest","event_suggest","url_suggest"].includes(e.type)}function l(e){e.contentEditable="false",e.classList.add("im-chat-input--text_disabled")}function c(e){e.contentEditable="true",e.classList.remove("im-chat-input--text_disabled")}function u(e){let t=null;if(e)try{t=JSON.parse(atob(e))}catch(e){console.error("Failed to parse JSON")}return t}function _(e){let t="";return"event_suggest"===e.type&&(t=e.text),"text_suggest"===e.type&&(t=e.payload),p(t)}function p(e){return e.replace("#DISLIKE#","👎🏻").replace("#LIKE#","👍🏻")}},683852:(e,t,s)=>{"use strict";s.d(t,{areResourcesBlocked:()=>a});var n=s(952492);async function a(){const e=new AbortController;try{await Promise.all(n.URLS.map((t=>fetch(t,{method:"HEAD",mode:"no-cors",signal:e.signal}))))}catch{return e.abort(),!0}return!1}},210909:(e,t,s)=>{"use strict";s.d(t,{isAdblockDetected:()=>p});var n=s(540462),a=s(636576),r=s(170022),d=s(433367),l=s(952492),c=s(683852),u=s(636111);const _={RESOURCE:"resource",ADVERT:"advert",BOTH:"both"};async function p(){const[e,t]=await Promise.all([(0,c.areResourcesBlocked)(),(0,u.isAdvertBlocked)()]);return e&&t?_.BOTH:e?_.RESOURCE:!!t&&_.ADVERT}(0,n.partConfigEnabled)("unique_adblock_users")&&requestIdleCallback((async()=>{const e=new d.CooldownManager(window.vk?.id,r.METRICS_SCOPE.ADBLOCK_STATS,l.DEFAULT_ADBLOCK_STATS_COOLDOWN_MS);if(!e.isMetricOnCoolDown()){const t=await p();(0,a.statlogsValueEvent)(l.ADBLOCK_CONFIG_KEY,window.vk.id,window.vk.statsMeta.platform,Boolean(t).toString(),t||void 0,window.cur.module||void 0),e.updateMetricTimestamp()}}),{timeout:5e3})},530888:(e,t,s)=>{"use strict";s.d(t,{STORY_TECH_STATS_STORAGE_NAME:()=>n,StoryErrorType:()=>d,StoryEventType:()=>l,StoryEventTypeDebugTypes:()=>c,StoryTypeNext:()=>r,StoryTypeOpen:()=>a});const n="story_tech_stats_storage";var a,r,d,l;!function(e){e.OPEN_STORY_BY_CLICK="OPEN_STORY_BY_CLICK",e.NEXT_OPEN_STORY="NEXT_OPEN_STORY",e.UNKNOWN="UNKNOWN"}(a||(a={})),function(e){e.NEXT_STORY="NEXT_STORY",e.PREV_STORY="PREV_STORY",e.RESET_STORY="RESET_STORY",e.NEXT_CONTAINER_STORY="NEXT_CONTAINER_STORY"}(r||(r={})),function(e){e.DOWNLOAD="download",e.UPLOAD="upload"}(d||(d={})),function(e){e.STORY_FEED_BLOCK_START_LOADING="story_feed_block_start_loading",e.STORY_FEED_BLOCK_CHUNK_LOADED="story_feed_block_chunk_loaded",e.STORY_FEED_BLOCK_DATA_LOADED="story_feed_block_data_loaded",e.STORY_FEED_BLOCK_DATA_LOADED_BEFORE_FEED_RENDERED="story_feed_block_data_loaded_before_feed_rendered",e.STORY_FEED_BLOCK_DATA_LOADED_AFTER_FEED_RENDERED="story_feed_block_data_loaded_after_feed_rendered",e.STORY_FEED_BLOCK_LOADING="story_feed_block_loading",e.FEED_RENDERED="feed_rendered",e.STORY_FEED_BLOCK_RENDERED="story_feed_block_rendered",e.STORY_FEED_BLOCK_RENDERED_WITHOUT_FEED="story_feed_block_rendered_without_feed",e.STORY_OPENING_START="story_opening_start",e.STORY_OPENED="story_opened",e.STORY_VIEWER_CLOSED="story_viewer_closed",e.STORY_CLOSED="story_closed",e.SHOW_VIEWER_LOADER="show_viewer_loader",e.HIDE_VIEWER_LOADER="hide_viewer_loader",e.DOWNLOAD="download",e.DOWNLOAD_START="download_start",e.UPLOAD_START="upload_start",e.UPLOAD="upload",e.VIDEO_STALL="video_stall",e.PLAYING_VIDEO_ERROR="playing_video_error"}(l||(l={}));const c=new Set(["story_feed_block_start_loading","story_opening_start","show_viewer_loader","download_start","upload_start","story_viewer_closed","story_closed"])},364038:(e,t,s)=>{"use strict";s.d(t,{AudioNetworkStatCollector:()=>a});var n=s(595649);class a{logEvent(e,t,s){const a={network_type:t,network_effective_type:s,type:n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM,[n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM]:e};this.networkStatCollector.logEvent(a)}constructor(e){this.networkStatCollector=e}}},39816:(e,t,s)=>{"use strict";s.d(t,{AudioNetworkStatCollector:()=>a.AudioNetworkStatCollector,AudioNetworkType:()=>r.AudioNetworkType,NetworkStatCollector:()=>n.NetworkStatCollector});var n=s(613946),a=s(364038),r=s(595649)},851727:(e,t,s)=>{"use strict";s.d(t,{TooltipStatCollector:()=>d});var n=s(317216),a=s(314309);const r="unknown";class d{logEvent(e,t,s){const a={action:e,hint_id:t,duration:s||0},r={...this.productionStatCollector.getBaseEvent(this.getScreen(this.getModule())),type:n.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM,[n.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM]:a};this.actionStatCollector.logEvent(r,{force:!0})}getModule(){return window.cur?.module??r}getScreen(e=r){return window.cur?.screen?window.cur.screen===r?e:window.cur.screen:e}constructor(){this.productionStatCollector=new a.ProductionStatCollector,this.actionStatCollector=new a.ActionStatCollector(this.productionStatCollector)}}},301374:(e,t,s)=>{"use strict";var n,a;s.d(t,{DonutActionEventType:()=>n}),function(e){e.PAYMENT_FORM="payment_form",e.PAYMENT_FORM_CLICK_OFFER="payment_form_click_offer",e.PAYMENT_FORM_CLICK_PAY="payment_form_click_pay",e.PAYMENT_FORM_CLICK_CLOSE="payment_form_click_close"}(n||(n={})),function(e){e.PAYMENT_START="payment_start",e.DATA_ACCESS="data_access",e.RESULT_PAYMENT_SUCCESS_OK="result_payment_success_ok",e.RESULT_PAYMENT_SUCCESS_WAITING="result_payment_success_waiting",e.RESULT_PAYMENT_SUCCESS_WAITING_TIMEOUT="result_payment_success_waiting_timeout",e.RESULT_RESUB_SUCCESS_WAITING_OK="result_resub_success_waiting_ok",e.RESULT_PAYMENT_UNAVAILABLE="result_payment_unavailable",e.RESULT_PAYMENT_CANCEL="result_payment_cancel",e.RESULT_ERROR="result_error",e.RESULT_CHANGE_ERROR="result_change_error",e.RESULT_CHANGE_SUCCESS_OK="result_change_success_ok",e.RESULT_CHANGE_SUCCESS_WAITING_TIMEOUT="result_change_success_waiting_timeout",e.UNKNOWN="donut_payment_screen_unknown"}(a||(a={}))},854950:(e,t,s)=>{"use strict";s.d(t,{getImageMinWidth:()=>n});const n=e=>Math.ceil(e*Math.max(window.devicePixelRatio,1))},131393:(e,t,s)=>{"use strict";s.d(t,{banUser:()=>p,deleteFromAuthor:()=>c,deleteQuestion:()=>d,getQuestion:()=>a,getQuestions:()=>r,getUsers:()=>_,reportQuestion:()=>y,restoreAuthorQuestions:()=>u,restoreQuestion:()=>l,unbanUser:()=>m});var n=s(957994);function a(e){return(0,n.api)("questions.getById",{owner_id:window.vk.id,question_id:e,extended:1,fields:"photo_50,photo_100,first_name_gen,last_name_gen,domain"})}function r(e="",t=15){return(0,n.api)("questions.get",{owner_id:window.vk.id,start_from:e,limit:t,extended:1,fields:"photo_50,photo_100,first_name_gen,last_name_gen,domain"})}function d(e){return(0,n.api)("questions.delete",{owner_id:window.vk.id,question_id:e})}function l(e){return(0,n.api)("questions.restore",{owner_id:window.vk.id,question_id:e})}function c(e){return(0,n.api)("questions.deleteFromAuthor",{owner_id:window.vk.id,question_id:e})}function u(e){return(0,n.api)("questions.restoreFromAuthor",{owner_id:window.vk.id,question_id:e})}function _(e){return(0,n.api)("users.get",{user_ids:e.join(","),fields:"photo_50,photo_100,can_ask_anonymous,can_ask_question,first_name_nom,first_name_dat,first_name_gen,last_name_gen,sex"})}function p(e){return(0,n.api)("questions.authorBan",{owner_id:window.vk.id,question_id:e})}function m(e){return(0,n.api)("questions.authorUnBan",{owner_id:window.vk.id,question_id:e})}function y(e){return(0,n.api)("reports.add",{type:"profile_story_question",owner_id:window.vk.id,item_id:e})}},419222:(e,t,s)=>{"use strict";var n;s.d(t,{QuestionsBoxRef:()=>n}),function(e){e.SNIPPET="snippet",e.URL="url",e.STORY="story"}(n||(n={}))},353679:(e,t,s)=>{"use strict";s.d(t,{DEFAULT_CACHE:()=>c,ORDER_ERRORS:()=>_,ORDER_ITEM_ERRORS:()=>p,SAMPLE_RECIPIENT_ID:()=>u,STICKER_ANIMATION:()=>l,STICKER_IMAGE:()=>d,STICKER_PACK_ICON:()=>a,STICKER_PACK_THUMB:()=>r});var n=s(612831);const a={square_png:{id:"square.png",width:104,height:104},square_15x_png:{id:"square_1.5x.png",width:156,height:156},square_2x_png:{id:"square_2x.png",width:208,height:208},square_3x_png:{id:"square_3x.png",width:312,height:312},square_4x_png:{id:"square_4x.png",width:416,height:416}},r={"102_png":{id:"102.png",width:102,height:102,theme:n.Theme.LIGHT},"51_png":{id:"51.png",width:51,height:51,theme:n.Theme.LIGHT},"68_png":{id:"68.png",width:68,height:68,theme:n.Theme.LIGHT},"34_png":{id:"34.png",width:34,height:34,theme:n.Theme.LIGHT},"60_png":{id:"60.png",width:60,height:60,theme:n.Theme.LIGHT},"30_png":{id:"30.png",width:30,height:30,theme:n.Theme.LIGHT},"102b_png":{id:"102b.png",width:102,height:102,theme:n.Theme.DARK},"51b_png":{id:"51b.png",width:51,height:51,theme:n.Theme.DARK},"68b_png":{id:"68b.png",width:68,height:68,theme:n.Theme.DARK},"34b_png":{id:"34b.png",width:34,height:34,theme:n.Theme.DARK},"60b_png":{id:"60b.png",width:60,height:60,theme:n.Theme.DARK},"30b_png":{id:"30b.png",width:30,height:30,theme:n.Theme.DARK},"44_png":{id:"44.png",width:44,height:44},"22_png":{id:"22.png",width:22,height:22}},d={"64_png":{id:"64.png",width:64,height:64,theme:n.Theme.LIGHT},"128_png":{id:"128.png",width:128,height:128,theme:n.Theme.LIGHT},"256_png":{id:"256.png",width:256,height:256,theme:n.Theme.LIGHT},"352_png":{id:"352.png",width:352,height:352,theme:n.Theme.LIGHT},"512_png":{id:"512.png",width:512,height:512,theme:n.Theme.LIGHT},"64b_png":{id:"64b.png",width:64,height:64,theme:n.Theme.DARK},"128b_png":{id:"128b.png",width:128,height:128,theme:n.Theme.DARK},"256b_png":{id:"256b.png",width:256,height:256,theme:n.Theme.DARK},"352b_png":{id:"352b.png",width:352,height:352,theme:n.Theme.DARK},"512b_png":{id:"512b.png",width:512,height:512,theme:n.Theme.DARK}},l={[n.Theme.LIGHT]:"animation.json",[n.Theme.DARK]:"animation.b.json"},c={products:(0,n.createProductsMap)([]),productIdsQueue:new Set,productsPromise:void 0,productPromises:new Map,stickers:new Map},u=-1;var _,p;!function(e){e.NOT_SIGNED_IN="not_signed_in",e.NO_VALID_ITEMS="no_valid_items"}(_||(_={})),function(e){e.DUPLICATE_PRODUCT="duplicate_product"}(p||(p={}))},612831:(e,t,s)=>{"use strict";var n;s.d(t,{ProductsByType:()=>m,Theme:()=>n,UserProductStateKey:()=>l,createProductsMap:()=>d,imageSizeCache:()=>r,imageSizesIndex:()=>a,isBasePack:()=>c,isPackProduct:()=>_,isStyleProduct:()=>u}),function(e){e.LIGHT="light",e.DARK="dark",e.DEFAULT="light"}(n||(n={}));const a=Symbol(),r=Symbol(),d=e=>new Map(e);var l;!function(e){e.IsNew="is_new"}(l||(l={}));const c=e=>void 0!==e.sticker_ids,u=e=>void 0!==e.base_id,_=e=>c(e)&&!u(e);var p;!function(e){e.Pack="pack",e.Style="style"}(p||(p={}));class m{add(e){e&&(_(e)?this.pack.add(e):u(e)&&this.style.add(e))}getPack(){return this.pack.values().next().value}getStyles(){return Array.from(this.style.values())}getCount(){return this.pack.size+this.style.size}constructor(e=[]){this.pack=new Set,this.style=new Set,e.forEach((e=>this.add(e)))}}},847771:(e,t,s)=>{"use strict";s.d(t,{getStickerAnimationUrl:()=>_,getStickerImageUrl:()=>u,getStickerPackIconUrl:()=>p,isSampleOrderItem:()=>m,logStickersError:()=>y});var n=s(612831),a=s(353679),r=s(298077);const d=(e,t,s,a=n.Theme.DEFAULT)=>{const r=window.devicePixelRatio,d=[t*=r,s*=r,a].toString();let l=e[n.imageSizeCache];if(l&&l.has(d)){const e=l.get(d);if(e)return e}l||(l=new Map,e[n.imageSizeCache]=l);const c=(e=>{let t=e[n.imageSizesIndex];return t||(t=Object.values(e).sort(((e,t)=>e.width-t.width||e.height-t.height)),e[n.imageSizesIndex]=t),t})(e).filter((e=>!e.theme||e.theme===a)),u=c.find((e=>e.width>=t&&e.height>=s))||c[c.length-1];return l.set(d,u),u},l=(e,t,s=n.Theme.DEFAULT)=>d(a.STICKER_IMAGE,e,t,s),c=(e,t)=>e.image.base_url+"/"+t.id+(e.image.version?`?${e.image.version}`:"");function u(e,t,s,a=n.Theme.DEFAULT){if(e.render?.images){const{images:n}=e.render;let r;n.sort(((e,t)=>e.width-t.width||e.height-t.height));for(const e of n)if(e.width>=t&&e.height>=s){if(e.theme===a)return e.url;r=e}if(r)return r.url}return c(e,l(t,s,a))}const _=(e,t=n.Theme.DEFAULT)=>e.animation?e.animation.base_url+"/"+a.STICKER_ANIMATION[t]+(e.animation.version?`?${e.animation.version}`:""):"",p=(e,t,s,r=n.Theme.DEFAULT)=>((e,t)=>e.icon.base_url+"/"+t.id+(e.thumb.version?`?${e.thumb.version}`:""))(e,((e,t,s=n.Theme.DEFAULT)=>d(a.STICKER_PACK_ICON,e,t,s))(t,s,r)),m=e=>e.recipient_id===a.SAMPLE_RECIPIENT_ID,y=e=>{(0,r.logError)(new Error(`Stickers: ${e}`),{environment:"stickers"})}},224194:(e,t,s)=>{"use strict";s.d(t,{isPopUpStickersEnabled:()=>d,isPopUpStickersEnabledInVkCom:()=>r});var n=s(105330),a=s(540462);const r=()=>(0,a.partConfigEnabled)("stickers.popup.vkcom"),d=()=>(0,n.isMvk)()?(0,a.partConfigEnabled)("stickers.popup.mvk"):r()},807978:(e,t,s)=>{"use strict";s.d(t,{DAY:()=>l,SECOND:()=>a,getShortPrintableTimeSpan:()=>p});var n=s(866467);const a=1e3,r=60*a,d=60*r,l=24*d,c=7*l,u=30*l,_=12*u;function p(e){return e>=_?(0,n.langNumeric)(Math.floor(e/_),n.getLang("global_short_years_fixed")):e>=u?(0,n.langNumeric)(Math.floor(e/u),n.getLang("global_short_months")):e>=c?(0,n.langNumeric)(Math.floor(e/c),n.getLang("global_short_weeks")):e>=l?(0,n.langNumeric)(Math.floor(e/l),n.getLang("global_short_days")):e>=d?(0,n.langNumeric)(Math.floor(e/d),n.getLang("global_short_hours")):e>=r?(0,n.langNumeric)(Math.floor(e/r),n.getLang("global_short_minutes")):e>=a?(0,n.langNumeric)(Math.floor(e/a),n.getLang("global_short_seconds")):""}},153659:(e,t,s)=>{"use strict";s.d(t,{TooltipsStat:()=>r});var n=s(317216);const a=new(s(851727).TooltipStatCollector);class r{handleShow(){this.showTime=new Date,this.skipShow?a.logEvent(n.ETooltipEventTypes.TOOLTIP_COULD_BE_SHOWN,this.tooltipId,0):a.logEvent(n.ETooltipEventTypes.TOOLTIP_SHOW,this.tooltipId,0)}handleHide(e=n.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){let t=0;this.showTime&&(t=(new Date).getTime()-this.showTime.getTime()),a.logEvent(e,this.tooltipId,t)}static registryShow(e,t=!1){r.tootips[e]=new r(e,t),r.tootips[e].handleShow()}static registryHide(e,t=n.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){(r.tootips[e]||new r(e,!1)).handleHide(t)}constructor(e,t){this.tooltipId=e,this.skipShow=t}}r.tootips={}},222062:(e,t,s)=>{"use strict";s.d(t,{checkOwnerIsNFT:()=>n});const n=e=>{if(e){if("is_nft"in e)return Boolean(e.is_nft);if("is_nft_photo"in e)return Boolean(e.is_nft_photo)}return!1}},339328:(e,t,s)=>{"use strict";s.d(t,{createSentryLogger:()=>d,isApiNetworkError:()=>r});var n=s(626287),a=s(298077);function r(e){return!(!e||"object"!=typeof e)&&e.type===n.APIErrorType.NETWORK_ERROR}const d=({debugPrefix:e="[Sentry Logger]",isConsoleEnabled:t=!1,environment:s,catchNetworkError:n})=>{function d(t,s){return`${e} `+(s?`${s}: ${t}`:t)}return function(l){const{error:c,additionalText:u,extra:_,environment:p}=l,m=p||s;if(t&&console.error(e,{error:c,additionalText:u||"Some error happened",extra:_,environment:m}),n&&r(c)&&n(l))return;const y=_?{environment:p,breadcrumb:{data:{extra:_}}}:{environment:m};if(c instanceof Error){const e=new Error(d(c.message,u));return e.name=c.name,e.stack=c.stack,void(0,a.logError)(e,y)}if("string"!=typeof c)return c instanceof Object?(y.breadcrumb?.data?y.breadcrumb.data.object=c:y.breadcrumb={...y.breadcrumb,data:{object:c}},void(0,a.logError)(new Error(d("Error as object",u)),y)):void(c||!u?(0,a.logError)(new Error(d("Unknown error")),y):(0,a.logError)(new Error(d(u)),y));(0,a.logError)(new Error(d(c,u)),y)}}},641495:(e,t,s)=>{"use strict";s.d(t,{getOwnerName:()=>n});const n=(e,t=!0,s)=>{let n="";return e&&("name"in e?n=e.name||"":!t&&"first_name"in e?n=s?e[`first_name_${s}`]||"":e.first_name||"":("first_name"in e||"last_name"in e)&&(n=s?`${e[`first_name_${s}`]} ${e[`last_name_${s}`]}`:`${e.first_name} ${e.last_name}`)),n}},172479:(e,t,s)=>{"use strict";s.d(t,{getOwnerUrl:()=>n});const n=(e,t="/",s="")=>e?"domain"in e&&"id"in e?`/artist/${e.domain||e.id||""}${s}`:"screen_name"in e&&e.screen_name?`${t}${e.screen_name}${s}`:"first_name"in e?`${t}id${e.id}${s}`:`${t}club${e.id}${s}`:""},841315:(e,t,s)=>{"use strict";s.d(t,{getVideoCopyLink:()=>u,getVideoUrl:()=>c});var n=s(538522),a=s(105330),r=s(826981),d=s(540462),l=s(856289);const c=e=>{const{owner_id:t,id:s}=e;if(void 0===t)return(0,l.getVideoPrefix)("slash");if(void 0===s)return`${(0,l.getVideoPrefix)("doubleSlash")}@id${t}`;return"/"+("short_video"===e.type?"clip":"video")+(0,n.joinRawId)({ownerId:t,itemId:s})+(e.access_key?`?list=${e.access_key}`:"")},u=(e,t,s,n)=>{const l=new URL(c(e),"https://"+(0,a.getHostName)());return t&&l.searchParams.set("t",(0,r.toString)(t)),e.access_key?.startsWith("ln-")?l.searchParams.set("list",e.access_key):l.searchParams.delete("list"),s&&(0,d.partConfigEnabled)("video_player_ref_domain_embed")&&l.searchParams.set("ref_domain",n||window.cur?.mvOpts?.ref_domain||""),l.toString()}},945270:(e,t,s)=>{"use strict";s.d(t,{emailLinksReplacerReact:()=>r,replaceEmailLinks:()=>a});var n=s(470403);function a(e,t){return e.replace(n.EMAIL,t||function(e){return`<a href="mailto:${e}">${e}</a>`})}function r(e){return(t,s)=>e({key:t,url:s})}},148636:(e,t,s)=>{"use strict";s.d(t,{linksReplacer:()=>g,linksReplacerReact:()=>f,replaceHyperLinks:()=>m});var n=s(898848),a=s(105330),r=s(828758),d=s(175819),l=s(34231),c=s(540462);function u(e){if(!e[0]||!e[6])return e;const t=e[0].length-1,s=e[6].length-1;return"."===e[0][t]&&"."===e[6][s]&&(e[0]=e[0].slice(0,t),e[6]=e[6].slice(0,s)),e}function _(e){return{full:e[0],protocol:e[1]||"http://",url:e[2],domain:e[4],query:e[6]||""}}function p(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e,t){const s=new RegExp(r.RE_URL_PATTERN,"ig"),n=d.TOP_DOMAINS.reduce(((e,t)=>Math.max(e,t.length)),0);let a,l=0,c=e;for(;null!==(a=s.exec(e));){a=u(a);const s=a[0].length,r=a.index+s,p=e[a.index-1],m=e[r-1];if("@"===e[r]&&(!a[0]||a[0]&&!a[0].toLowerCase().includes("http")))continue;const y=void 0!==p&&/([\w\$А-Яа-яёЁєЄҐґЇїІіЈј—\-\_@;.])/i.test(p),f=void 0!==m&&/([:;$])/i.test(m);if(!y&&!f){const e=_(a),u=e.domain.toLowerCase();if(u.length<=n&&d.TOP_DOMAINS.includes(u)){const n=t(e);c=c.slice(0,a.index+l)+n+c.slice(r+l),l+=n.length-s}}}return c}function y(e,t){try{e=decodeURIComponent(e)}catch(e){}return e.length>t&&(e=e.substr(0,t-2)+".."),e=p(e).replace(/\n/g," ")}function f(e){return(t,s,r=55)=>{const{url:c,protocol:u,query:_,full:m}=s,f=y(m,r),g=(0,n.replaceEntities)(c+_);if(d.OUR_DOMAINS.test(c)){const s=p(u+c+_),n=m.match(d.VK_DOMAIN);return e({key:t,href:s,mentionId:n?n[1]:"",text:f})}{const s=window.nav?.strLoc?.startsWith("video"),r=((0,a.isPWA)()||s?`https://${(0,a.getHostName)()}`:"")+(0,l.wrapAway)(u+g,!0),d=(0,n.clean)(u+c+_);return e({key:t,href:r,goAwayUrl:d,text:f})}}}function g(e,t=55){let{full:s}=e;const{url:r,protocol:l,query:u}=e;s=y(s,t);const _=(0,n.replaceEntities)(r+u);if(d.OUR_DOMAINS.test(r)){let e="";const t=s.match(d.VK_DOMAIN);if(t){const s=t[1];e=(0,a.isMvk)()?"":` mention_id="${s}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`}return`<a href="${p(l+r+u)}" target="_blank" rel="noopener"${e}>${s}</a>`}const m=window.nav?.strLoc?.startsWith("video"),f=`${(0,a.isPWA)()||m?`https://${(0,a.getHostName)()}/`:(0,c.partConfigEnabled)("link_replacer_start_slash")?"/":""}away.php?utf=1&to=${encodeURIComponent(l+_)}`,g=(0,n.clean)((l+r+u).replace(/'/g,"\\'"));return`<a href="${f}" target="_blank" rel="noopener" ${(0,a.isMvk)()?"":`onclick="return goAway('${g}', {}, event);"`}>${s}</a>`}},839348:(e,t,s)=>{"use strict";s.d(t,{mentionReplaceReact:()=>l,replaceMentions:()=>d});var n=s(846145),a=s(898848),r=s(105330);function d(e,t){return e.replace(n.MENTION,t||function(e,t,s,n,d){const l=(0,r.isMvk)()?"":` mention_id="${(0,a.clean)(t+s)}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`;return`<a href="/${t+s}" class="mem_link" mention="${(0,a.clean)(n||"")}"${l}>${d}</a>`})}function l(e){return(t,s,n,a,r,d)=>e({key:t,mentionId:n+a,mention:r,href:`/${n+a}`,text:d})}},745005:(e,t,s)=>{"use strict";s.d(t,{MenuHelpHintTextTooltip:()=>d});var n=s(474848),a=s(296540),r=s(578392);const d=e=>{const[t,s]=(0,a.useState)(!1);return(0,a.useLayoutEffect)((()=>{const e=setTimeout((()=>s(!0)));return()=>{clearTimeout(e)}}),[]),(0,n.jsx)(r.TextTooltip,{shown:t,...e})}},926326:(e,t,s)=>{"use strict";s.d(t,{MenuHelpHintTooltip:()=>l});var n=s(474848),a=s(296540),r=s(753457),d=s(984745);const l=e=>{const{helpHint:t,onClose:s,...l}=e,[c,u]=(0,a.useState)(!1),_=(0,a.useCallback)((()=>{(0,d.ensureAccountHelpHintsService)().hideHelpHint({hintId:t.id,isOptimistic:!0}),s?.()}),[s]);return(0,a.useLayoutEffect)((()=>{const e=setTimeout((()=>u(!0)));return()=>{clearTimeout(e)}}),[]),(0,n.jsx)(r.OnboardingTooltip,{shown:c,header:t.title,text:t.description,onClose:_,...l})}},664634:(e,t,s)=>{"use strict";s.d(t,{MenuHelpHintTextTooltip:()=>a.MenuHelpHintTextTooltip,MenuHelpHintTooltip:()=>n.MenuHelpHintTooltip});var n=s(926326),a=s(745005)},506596:(e,t,s)=>{"use strict";s.d(t,{getAdditionalInfo:()=>c});var n=s(8520),a=s(856289),r=s(584683),d=s(866467),l=s(807978);const c=e=>{const{partner_text:t,date:s,type:c,release_date:u,genres:_,views:p=1}=e;if("music_video"===c&&_?.length&&u)return`${new Date(u*l.SECOND).getFullYear()} · ${_[0].name}`;if(t)return(0,n.decodeHTMLEntities)(t);const m=e=>(0,n.decodeHTMLEntities)((0,r.getFormattedViews)(e));return s?s>Date.now()/l.SECOND?d.getLang("video_postponed_publication"):(0,a.isLiveVideo)(e)?m(p):`${m(p)} · ${(0,n.decodeHTMLEntities)((0,a.getFormattedUpdatedTime)(s,!0))}`:m(p)}},817339:(e,t,s)=>{"use strict";s.d(t,{getFormattedPostponePublishDateTime:()=>c,getFormattedUpdatedTime:()=>d,getFormattedUpdatedTimeWithPrefix:()=>l});var n=s(898848),a=s(866467);const r=(e,[t,s],r)=>{return r?(0,a.langNumeric)((0,n.intval)(e),s):(d=(0,n.intval)(e),l=t,c=s,(0,n.isArray)(l)&&d<l.length?l[d]:(0,a.langNumeric)(d,c));var d,l,c},d=(e,t)=>{const s=Date.now()/1e3-e;if(s<5)return((e,t)=>t?(0,a.langNumeric)((0,n.intval)(e),a.getLang("video_added_less_than_a_minute_ago")):a.getLang("video_added_now","raw")[0])(s,t);if(s<60)return((e,t)=>t?(0,a.langNumeric)((0,n.intval)(e),a.getLang("video_added_less_than_a_minute_ago","raw")):a.getLang("video_added_less_than_a_minute_ago"))(s,t);if(s<3600){const e=[a.getLang("video_word_mins_ago","raw"),a.getLang("video_mins_ago","raw")];return r(s/60,e,t)}if(s<86400){const e=[a.getLang("video_word_hours_ago","raw"),a.getLang("video_hours_ago","raw")];return r(s/3600,e,t)}if(s<2592e3){const e=[a.getLang("video_word_days_ago","raw"),a.getLang("video_days_ago","raw")];return r(s/86400,e,t)}if(s<31536e3){const e=[a.getLang("video_word_months_ago","raw"),a.getLang("video_months_ago","raw")];return r(s/2592e3,e,t)}const d=[a.getLang("video_word_years_ago","raw"),a.getLang("video_years_ago","raw")];return r(s/31363200,d,t)},l=e=>(0,a.langStr)(a.getLang("video_album_updated_time"),"updated_time_ago",d(e,!0)),c=e=>{const t=1e3*e,s=new Date,n=new Date(t);return(0,a.langDate)(t,s.getFullYear()===n.getFullYear()?a.getLang("video_postponed_publication_date","raw"):a.getLang("video_postponed_publication_full_date","raw"),0,a.getLang("months_sm_of"))}},584683:(e,t,s)=>{"use strict";s.d(t,{getFormattedViews:()=>r});var n=s(866467),a=s(856289);function r(e){return e>999?(0,a.getFormattedBigViewsToShortCase)(e):n.getLang("video_N_views_list",e||1,!0)}},839962:(e,t,s)=>{"use strict";s.d(t,{useOwner:()=>n.useOwner,useVideoInPlaylist:()=>a.useVideoInPlaylist});var n=s(796050),a=s(231867)},796050:(e,t,s)=>{"use strict";s.d(t,{useOwner:()=>r});var n=s(335797),a=s(468073);const r=(e,t,s)=>{const r=(0,n.useEntitiesStore)(t.$entitiesGroups,a.Ranges.convertOwnerIdToGroupId(e.owner_id)),d=(0,n.useEntitiesStore)(s.$entitiesUsers,e.owner_id);return a.Ranges.isGroupId(e.owner_id)&&r?r:a.Ranges.isUserId(e.owner_id)&&d?d:void 0}},231867:(e,t,s)=>{"use strict";s.d(t,{useVideoInPlaylist:()=>a});var n=s(293721);const a=(e,t,s)=>(0,n.useStoreMap)(e,(e=>!(!e||!e[t])&&Boolean(e[t][s])))},856289:(e,t,s)=>{"use strict";s.d(t,{BASE_LOCATION:()=>a.BASE_LOCATION,BOOKMARKS_URL:()=>P.BOOKMARKS_URL,MY_VIDEO_ALBUM_ID:()=>a.MY_VIDEO_ALBUM_ID,MenuHelpHintTextTooltip:()=>n.MenuHelpHintTextTooltip,MenuHelpHintTooltip:()=>n.MenuHelpHintTooltip,PLAYLIST_PAGE_BASE_PATH:()=>a.PLAYLIST_PAGE_BASE_PATH,PLAYLIST_PAGE_REGEXP:()=>a.PLAYLIST_PAGE_REGEXP,PLAYLIST_POPOVER_VERTICAL_OFFSET:()=>a.PLAYLIST_POPOVER_VERTICAL_OFFSET,PLAYLIST_POPOVER_WIDTH:()=>a.PLAYLIST_POPOVER_WIDTH,SECTION_MY_BOOKMARKS:()=>a.SECTION_MY_BOOKMARKS,SECTION_MY_LIKED:()=>a.SECTION_MY_LIKED,SNACKBAR_TIMEOUT:()=>a.SNACKBAR_TIMEOUT,UPLOADED_ALBUM_ID:()=>a.UPLOADED_ALBUM_ID,VIDEO_COMMUNITY_COMMENTS_PATH:()=>a.VIDEO_COMMUNITY_COMMENTS_PATH,VIDEO_PAGE_PATHNAME_REGEXP:()=>a.VIDEO_PAGE_PATHNAME_REGEXP,canAddVideoToCommunityPlaylist:()=>P.canAddVideoToCommunityPlaylist,canCreateClipFromVideo:()=>P.canCreateClipFromVideo,createVideoBindingsService:()=>A.createVideoBindingsService,formatTextWithLinks:()=>P.formatTextWithLinks,get:()=>E.get,getAdditionalInfo:()=>r.getAdditionalInfo,getAllPlaylistURL:()=>P.getAllPlaylistURL,getFormattedBigLikesToShortCase:()=>I.getFormattedBigLikesToShortCase,getFormattedBigSubscribersToShortCase:()=>I.getFormattedBigSubscribersToShortCase,getFormattedBigViewsToShortCase:()=>I.getFormattedBigViewsToShortCase,getFormattedFullVideoViews:()=>I.getFormattedFullVideoViews,getFormattedPostponePublishDateTime:()=>d.getFormattedPostponePublishDateTime,getFormattedUpdatedTime:()=>d.getFormattedUpdatedTime,getFormattedUpdatedTimeWithPrefix:()=>d.getFormattedUpdatedTimeWithPrefix,getFormattedVideoDate:()=>I.getFormattedVideoDate,getFormattedViews:()=>l.getFormattedViews,getOwnerVideosPageBasePath:()=>P.getOwnerVideosPageBasePath,getPlaylistURL:()=>P.getPlaylistURL,getThumbSrc:()=>P.getThumbSrc,getVideoPrefix:()=>P.getVideoPrefix,getWatchLaterPath:()=>P.getWatchLaterPath,isFakeVideoStandalone:()=>u.isFakeVideoStandalone,isLiveVideo:()=>P.isLiveVideo,isPrivacyLocked:()=>g.isPrivacyLocked,isVideoStandalone:()=>_.isVideoStandalone,mapArtistToVideoCardOwner:()=>p.mapArtistToVideoCardOwner,mapPlaylistToPlaylistCardItem:()=>m.mapPlaylistToPlaylistCardItem,mapRestrictions:()=>g.mapRestrictions,mapUserOrGroupToPlaylistCardOwner:()=>y.mapUserOrGroupToPlaylistCardOwner,mapUserOrGroupToVideoCardOwner:()=>f.mapUserOrGroupToVideoCardOwner,mapVideoToSimpleVideoCardItem:()=>g.mapVideoToSimpleVideoCardItem,mapVideoToVideoCardItem:()=>g.mapVideoToVideoCardItem,trackOneStatError:()=>b.trackOneStatError,useOwner:()=>c.useOwner,useVideoInPlaylist:()=>c.useVideoInPlaylist});var n=s(664634),a=s(666384),r=s(506596),d=s(817339),l=s(584683),c=s(839962),u=s(902642),_=s(800361),p=s(483673),m=s(707447),y=s(741444),f=s(361877),g=s(857551),E=s(191977),A=s(497206),b=s(859738),P=s(671112),I=s(891297)},922939:(e,t,s)=>{"use strict";s.d(t,{isPrivacyLocked:()=>n});const n=e=>!!e&&Boolean((e=>e.category&&!["all","any"].includes(e.category))(e)||e.excluded_category?.length||e.lists?.allowed?.length||e.lists?.excluded?.length||e.owners?.allowed?.length||e.owners?.excluded?.length)},557454:(e,t,s)=>{"use strict";s.d(t,{isUpcomingLiveVideo:()=>n});const n=({liveStatus:e,type:t})=>"live"===t&&"upcoming"===e},971517:(e,t,s)=>{"use strict";s.d(t,{isVideoExternal:()=>n});const n=e=>Boolean(e&&e.player&&(e.files?.external||"YouTube"===e.platform))},483673:(e,t,s)=>{"use strict";s.d(t,{mapArtistToVideoCardOwner:()=>u,mapVideoToFeaturedArtists:()=>_});var n=s(641495),a=s(172479),r=s(8520);const d=[50,100,200],l=({photo:e})=>e?d.reduce(((t,s)=>(t[`photo_${s}`]=(0,r.getPhotoSize)(e,s)?.url,t)),{}):{},c=e=>({name:(0,n.getOwnerName)(e),href:(0,a.getOwnerUrl)(e)}),u=e=>{if("music_video"!==e.type||!e.main_artists)return null;const[t]=e.main_artists;return t?{name:(0,n.getOwnerName)(t),href:(0,a.getOwnerUrl)(t),...l(t)}:null},_=e=>e?.featured_artists?e.featured_artists.map(c):void 0},707447:(e,t,s)=>{"use strict";s.d(t,{mapPlaylistToPlaylistCardItem:()=>d});var n=s(671112),a=s(922939),r=s(817339);const d=e=>({id:e.id,href:(0,n.getPlaylistURL)(e.owner_id,e.id),title:e.title,count:e.count,thumbSrc:(0,n.getThumbSrc)(e),isPrivacyLocked:(0,a.isPrivacyLocked)(e.privacy),isThumbBlurred:Boolean(e.image_blur),additionalInfo:(0,r.getFormattedUpdatedTimeWithPrefix)(e.updated_time)})},741444:(e,t,s)=>{"use strict";s.d(t,{mapUserOrGroupToPlaylistCardOwner:()=>d});var n=s(33305),a=s(641495),r=s(172479);const d=(e,t)=>({name:(0,a.getOwnerName)(e),href:(0,r.getOwnerUrl)(e,t),is_nft:(0,n.isOwnerUser)(e)?e.is_nft:e.is_nft_photo,verified:Boolean(e.verified),has_unseen_stories:e.has_unseen_stories,photo_50:e.photo_50,photo_100:e.photo_100,photo_200:e.photo_200})},361877:(e,t,s)=>{"use strict";s.d(t,{mapUserOrGroupToVideoCardOwner:()=>d});var n=s(222062),a=s(641495),r=s(172479);const d=(e,t)=>e?{...e,name:(0,a.getOwnerName)(e),href:(0,r.getOwnerUrl)(e,t),verified:1===e.verified,is_nft:(0,n.checkOwnerIsNFT)(e)}:{name:"",href:""}},857551:(e,t,s)=>{"use strict";s.d(t,{isPrivacyLocked:()=>y,mapRestrictions:()=>g,mapVideoToSimpleVideoCardItem:()=>I,mapVideoToVideoCardItem:()=>P});var n=s(8520),a=s(866467),r=s(807978),d=s(841315),l=s(557454),c=s(483673),u=s(671112),_=s(506596),p=s(584683),m=s(817339);const y=e=>!!e&&((e=>"members"===e.category?"to_subscribers":"by_link"===e.category?"by_link":Boolean(e.category&&!["all","any"].includes(e.category)))(e)||Boolean(e.excluded_category?.length||e.lists?.allowed?.length||e.lists?.excluded?.length||e.owners?.allowed?.length||e.owners?.excluded?.length)),f=e=>{if(!e)return;return{delete_outline:"delete",hide_outline:"hide",recent_outline:"recent",info_outline:"info",lock_outline:"lock",picture_outline:"picture",live_clock_badge_outline:"liveClockBadge",do_not_disturb_outline:"doNotDisturb",users3_outline:"users3",cancle_circle_outline:"cancleCircle"}[e]},g=e=>{const t=e&&(e=>e&&(e.icon_name?.length||e.mute_info_link?.length)?1===e.blur?"blurred":e.mute_info_link&&e.mute_info_link.length>0?"muted":"hidden":null)(e);return t?{title:e.title,mode:t,iconType:f(e.icon_name)}:null},E=e=>{const t=e.title||"",s=e.subtitle||"";return"music_video"===e.type?`${t} ${s}`:t},A=e=>{const t=e.published_at;if(!t)return;const s=t*r.SECOND;return Date.now()>s?void 0:(0,a.langDate)(s,a.getLang("global_short_date_time","raw"),0,a.getLang("months_sm_of","raw"))};function b(e){const t={isUpcoming:(0,l.isUpcomingLiveVideo)({type:e.type,liveStatus:e.live_status}),isInteractive:Boolean(e.interactive_info),badgeText:e.platform};return t.isUpcoming?t.badgeText=a.getLang("global_video_soon"):t.isInteractive&&(t.badgeText=a.getLang("video_interactive_label")),t}const P=e=>{const{isUpcoming:t,isInteractive:s,badgeText:n}=b(e);return{additionalInfo:(0,_.getAdditionalInfo)(e),description:e.description,duration:e.duration,href:(0,d.getVideoUrl)(e),isLive:(0,u.isLiveVideo)(e),isPrivacyLocked:y(e.privacy_view),isProcessing:Boolean(e.processing),ownersRelationText:e.featured_artists?a.getLang("video_feature_relation_text"):void 0,badgeText:n,publishDate:A(e),restriction:g(e.restriction),secondaryOwners:(0,c.mapVideoToFeaturedArtists)(e),thumbSrc:(0,u.getThumbSrc)(e),title:E(e),trailerSrc:e.trailer?.mp4_360,isUpcoming:t,viewedDuration:e.viewed_duration,isInteractive:s}},I=(e,t)=>{const{isUpcoming:s,isInteractive:a,badgeText:r}=b(e);return{title:E(e),isPrivacyLocked:y(e.privacy_view),isLive:(0,u.isLiveVideo)(e),duration:e.duration,viewedDuration:e.viewed_duration,badgeText:r,isUpcoming:s,isInteractive:a,thumbSrc:(0,u.getThumbSrc)(e),restriction:g(e.restriction),href:(0,d.getVideoUrl)(e),views:void 0!==e.views?(0,p.getFormattedViews)(e.views):void 0,date:t||void 0===e.date?void 0:(0,n.decodeHTMLEntities)((0,m.getFormattedUpdatedTime)(e.date,!0))}}},191977:(e,t,s)=>{"use strict";s.d(t,{get:()=>c});var n=s(957994),a=s(805658),r=s(553608);const d="videoplayer_auth_token",l=async({refresh:e=!1,prefetch:t=!1}={})=>{const s=t?a.apiWithPrefetch:n.api,{token:l}=await s("video.getStatsToken",{env:window.__dev?"development":"production",force_refresh:e?1:0});var c;return c=l,r.bestAvailableStorage.setItem(d,c),l},c=async(e={})=>e.refresh?await l(e):r.bestAvailableStorage.getItem(d)??await l(e)},940540:(e,t,s)=>{"use strict";s.d(t,{createVideoBindingsService:()=>r});var n=s(32489),a=s(679005);const r=e=>{const t=e.createEvent(),s=e.createEvent(),r=e.createEvent(),d=e.createStore({});return(0,n.sample)({clock:t,source:d,fn:(e,{album_ids:t,video_id:s})=>(0,a.produce)(e,(e=>{t.forEach((t=>{e[s]||(e[s]={}),e[s][t]=!0}))})),target:d}),(0,n.sample)({clock:s,source:d,fn:(e,{album_id:t,video_id:s})=>{const n=!e[s]||!e[s][t];return(0,a.produce)(e,(e=>{e[s]||(e[s]={}),e[s][t]=n}))},target:d}),(0,n.sample)({clock:r,fn:()=>({}),target:d}),{$entitiesVideoBinding:d,addBindingsEvent:t,toggleBindingEvent:s,resetBindingsEvent:r}}},497206:(e,t,s)=>{"use strict";s.d(t,{createVideoBindingsService:()=>n.createVideoBindingsService});var n=s(940540)},859738:(e,t,s)=>{"use strict";s.d(t,{trackOneStatError:()=>r});var n=s(540462),a=s(636576);const r=(0,n.partConfigEnabled)("video_player_track_onestat_errors")?e=>{const t=e instanceof Error?e.name:String(e);(0,a.statlogsValueEvent)("video_player_insignificant_network_error","onestat",t)}:()=>{}},671112:(e,t,s)=>{"use strict";s.d(t,{BOOKMARKS_URL:()=>P,canAddVideoToCommunityPlaylist:()=>M,canCreateClipFromVideo:()=>D,formatTextWithLinks:()=>O,getAllPlaylistURL:()=>A,getArtistPhotos:()=>I,getOwnerVideosPageBasePath:()=>g,getPlaylistURL:()=>b,getThumbSrc:()=>S,getVideoPrefix:()=>f,getWatchLaterPath:()=>E,isLiveVideo:()=>T});var n=s(898848),a=s(148636),r=s(839348),d=s(945270),l=s(971517),c=s(8520),u=s(854950),_=s(595059),p=s(666384),m=s(873900),y=s(856289);const f=e=>{switch(e){case"at":return(0,y.isVideoStandalone)()?"@":"video/@";case"slash":return(0,y.isVideoStandalone)()?"/":"/video";case"doubleSlash":return(0,y.isVideoStandalone)()?"/":"/video/";case"backSlash":return(0,y.isVideoStandalone)()?"":"video/";case"prevSlash":return(0,y.isVideoStandalone)()?"":"/video";default:return""}},g=()=>`${f("doubleSlash")}@`,E=()=>`${f("doubleSlash")}bookmarks`,A=e=>`${g()}${e}/playlists`,b=(e,t)=>{const s=(0,m.getIdentityRawId)({ownerId:e||0,id:t||0});return`${f("prevSlash")}/playlist/${s}`},P=`${f("doubleSlash")}bookmarks`,I=e=>{const t=[50,100,200],s={};return e.photo?e.photo.reduce(((e,s)=>(t.includes(s.width)&&(e[`photo_${s.width}`]=s.url),e)),s):s},T=({live_status:e})=>Boolean(e&&!["postlive","finished"].includes(e)),C=(e,t,s,n,a)=>a,O=(e,t=!1)=>{let s=(0,n.clean)(e);return s=(0,a.replaceHyperLinks)(s,a.linksReplacer),s=(0,r.replaceMentions)(s,t?C:void 0),s=(0,d.replaceEmailLinks)(s),s},M=e=>"short_video"!==e.type&&(!e.restriction||((0,l.isVideoExternal)(e)?1===e.restriction.can_play:1===e.restriction.can_preview)),S=e=>{const t=(e instanceof _.Video?e.data:e).image||[],s=t.filter((e=>!e.with_padding)),n=s.length?s:t;return(0,c.getPhotoSize)(n,(0,u.getImageMinWidth)(240))?.url},D=(e,t)=>{const{duration:s,type:n,platform:a}=e,r=void 0===t?!!a:t;return s&&s>=p.VIDEO_MIN_DURATION_IN_SECONDS_FOR_VIDEO_TO_CLIP&&!r&&n&&!["live","interactive","short_video"].includes(n)}},891297:(e,t,s)=>{"use strict";s.d(t,{getFormattedBigLikesToShortCase:()=>p,getFormattedBigSubscribersToShortCase:()=>_,getFormattedBigViewsToShortCase:()=>u,getFormattedFullVideoViews:()=>y,getFormattedVideoDate:()=>m});var n=s(866467),a=s(898848),r=s(807978);const d=({count:e,localeOptions:t})=>{const{getMinNumbersLocale:s,getThousandLocale:n,getMillionLocale:r}=t,d=window.langConfig?.locale||"ru";if(e<1e3)return s?s(e):e.toString();let l=1e3,c=n();e>999999&&(l=1e6,c=r());const[u="",_=""]=(e/l).toString().split("."),p=e>=1e5&&e<1e6||0===_.length?0:(0,a.intval)(_.substring(0,1)),m=(0,a.intval)(p)>0?`${u}.${p}`:u;return`${Number(m).toLocaleString(d)}${c}`},l={getMinNumbersLocale:e=>n.getLang("video_N_views_list",e),getThousandLocale:()=>n.getLang("video_N_views_thousand"),getMillionLocale:()=>n.getLang("video_N_views_million")},c={getMinNumbersLocale:e=>n.getLang("video_N_group_members_count",e),getThousandLocale:()=>n.getLang("video_N_subscribers_thousand"),getMillionLocale:()=>n.getLang("video_N_subscribers_million")},u=e=>d({count:e,localeOptions:l}),_=e=>d({count:e,localeOptions:c}),p=e=>d({count:e,localeOptions:{getThousandLocale:()=>n.getLang("video_N_thousand"),getMillionLocale:()=>n.getLang("video_N_million")}}),m=e=>(0,n.langDate)(e*r.SECOND,n.getLang("global_date","raw").slice(0,2),0,n.getLang("months_of","raw")),y=e=>`${e.toLocaleString("ru-RU")} ${n.getLang("video_showcase_N_viewers",e).split(" ")[1]}`},590151:(e,t,s)=>{"use strict";s.d(t,{logSavedUsersAuthStart:()=>l,logSavedUsersDropAccount:()=>c,logSwitcherAccounts:()=>u});var n=s(314309);const a=new n.ProductionStatCollector,r=new n.ActionStatCollector(a),d=new n.RegistrationItemStatCollector(r);function l(e){d.logEvent(n.RegistrationItemEventTypes.AUTH_SAVED_START,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function c(e){d.logEvent(n.RegistrationItemEventTypes.DROP_ACCOUNT_FROM_SAVED,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function u(){d.logEvent(n.RegistrationItemEventTypes.POPUP_OPEN,n.EventScreens.MAIN,n.EventScreens.MULTI_ACC_SWITCHER,{force:!0})}},416362:(e,t,s)=>{"use strict";function n(e,t,s=null){e&&!window.vk?.isBanned&&window.stManager.add([window.jsc("web/article_layer.js"),"article.css"]).then((()=>{window.ArticleLayer.prepare(e,s,t)}))}s.d(t,{articlePrepare:()=>n})},358916:(e,t,s)=>{"use strict";s.d(t,{AudioPageProxy:()=>p});var n=s(434518),a=s(763812),r=s(584053),d=s(558137),l=s(523149),c=(0,a._)("_emitter"),u=(0,a._)("_globalStorage"),_=(0,a._)("_audioPage");class p{get emitter(){return(0,n._)(this,c)[c]}get events(){return(0,n._)(this,c)[c].listenable}get isInitialized(){return Boolean((0,n._)(this,_)[_])}get data(){return(0,n._)(this,_)[_]?._data||null}get readyAudio(){return(0,n._)(this,_)[_]?._readyAudio??null}get currentPlaylist(){return(0,n._)(this,_)[_]?.getPageCurrentPlaylist()}get currentSection(){return(0,n._)(this,_)[_]?._currentSection??null}get audioStartReadyAudio(){return(0,n._)(this,u)[u]?.audioStartReadyAudio??!1}set audioStartReadyAudio(e){(0,n._)(this,u)[u]={audioStartReadyAudio:e}}get ownerId(){return(0,n._)(this,_)[_]?.getOwnerId()??null}get canAddToGroup(){return Boolean((0,n._)(this,_)[_]?.canAddToGroup())}get canEditGroup(){return Boolean((0,n._)(this,_)[_]?.canEditGroup())}get contentBlock(){return(0,n._)(this,_)[_]?._els?.contentBlock??null}destroyReadyAudio(){(0,n._)(this,_)[_]?._destroyReadyAudio()}initAudioRowsAutoList(e){(0,n._)(this,_)[_]?._initAudioRowsAutoList(e)}reloadGeneralSectionData(e){(0,n._)(this,_)[_]?.reloadGeneralSectionData(e)}onUserAction(e,t){(0,n._)(this,_)[_]?.onUserAction(e,t)}constructor(){Object.defineProperty(this,u,{get:m,set:y}),Object.defineProperty(this,_,{get:f,set:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=new r.Emitter}}function m(){return window.cur??null}function y(e){(0,l.default)(window.cur)&&(window.cur={...window.cur,...e})}function f(){return(0,n._)(this,u)[u]?.audioPage??null}p.ensure=(0,d.makeSharedState)("AudioPageProxy",(()=>new p),{version:5})},149510:(e,t,s)=>{"use strict";var n;s.d(t,{AudioRecomsOnboardingShowRequestedEventReason:()=>n}),function(e){e.VibeRecommendationsPlaylistPlayButton="VIBE_RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.RecommendationsPlaylistOpenButton="RECOMMENDATIONS_PLAYLIST_OPEN_BUTTON",e.RecommendationsPlaylistPlayButton="RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.SnippetsBannerOpenSnippetsPageLink="SNIPPETS_BANNER_SNIPPETS_PAGE_LINK",e.Navigation="NAVIGATION",e.AudioPageInit="AUDIO_PAGE_INIT",e.Unknown="UNKNOWN"}(n||(n={}))},275810:(e,t,s)=>{"use strict";var n;s.d(t,{AudioPageEventType:()=>n}),function(e){e.Updated="updated",e.RadioStationFollowed="radioStationFollowed",e.PodcastAddedToFavorites="podcastAddedToFavorites",e.AudioLinkCopied="audioLinkCopied",e.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(n||(n={}))},459899:(e,t,s)=>{"use strict";s.d(t,{AudioPageEventType:()=>a.AudioPageEventType,AudioPageProxy:()=>n.AudioPageProxy,AudioRecomsOnboardingShowRequestedEventReason:()=>r.AudioRecomsOnboardingShowRequestedEventReason});var n=s(358916),a=s(275810),r=s(149510)},997784:(e,t,s)=>{"use strict";s.d(t,{FetchService:()=>_});var n=s(434518),a=s(763812),r=s(761520),d=s(897630),l=s(540462),c=s(139612),u=(0,a._)("_getAudioIdsBySourceApi");class _{async getAudioIdsBySource(e,t={}){const s=(0,l.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{audioListId:a,audioListSource:d,ref:_}=t,p={audioIds:[],lastPlayedAudioRawId:null};try{if(s&&"playlist"===d&&a){const{audios:e,last_listened_audio_id:t=null}=await(0,n._)(this,u)[u]({entity_id:a,source:d,ref:_});return p.audioIds=e.map((e=>({audio_raw_id:e.audio_id,access_key:(0,c.mapAPIRawIdToAudioIdentity)(e.audio_id)?.accessKey??"",track_code:e.track_code}))),t&&(p.lastPlayedAudioRawId=t),p}const t=await r.ajax.promisifiedPost("al_audio.php?act=get_audio_ids_by_source",{...e}),l=t?.[0];Array.isArray(l)&&(p.audioIds=l)}finally{return p}}constructor(){Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,u)[u]=(0,d.createMethod)("audio.getAudioIdsBySource"),this.reloadAudios=e=>new Promise(((t,s)=>{r.ajax.post("al_audio.php?act=reload_audios",{audio_ids:e},{onDone:e=>{t(e)},onFail:e=>(s(e),!1)})})),this.getAutoplayAudioIdsBySource=e=>new Promise(((t,s)=>{r.ajax.post("al_audio.php?act=get_next_audios",{...e},{onDone:e=>{t(e)},onFail:e=>(s(e),!1)})})),this.followRadiostation=(e,t)=>new Promise(((s,n)=>{r.ajax.post("al_audio.php?act=follow_radiostation",{id:e,hash:t},{onDone:e=>{s(e)},onFail:e=>(n(e),!0)})})),this.unfollowRadiostation=(e,t)=>new Promise(((s,n)=>{r.ajax.post("al_audio.php?act=unfollow_radiostation",{id:e,hash:t},{onDone:e=>{s(e)},onFail:e=>(n(e),!0)})}))}}},322100:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioDislikesService:()=>n.ensureMyAudioDislikesService,ensureMyMusicService:()=>n.ensureMyMusicService});var n=s(83113)},589322:(e,t,s)=>{"use strict";s.d(t,{createMyAudioDislikesServiceAdapter:()=>_});var n=s(824501),a=s(246855),r=s(746573),d=s(586049),l=s(873900),c=s(319756),u=s(395654);function _(e){const t=(0,r.getEffectorServiceDomain)(e),s=(0,c.ensureDIRootWebContainer)().resolve(n.MusicService).dislikes,{$fullIdsMap:_,fullIdsMapApi:p}=(0,d.createFullIdsMap)(t),m=t.createEffect((async({identity:e})=>{await s.activate((0,u.toMusicAudioIdentity)(e))})),y=t.createEffect((async({identity:e})=>{await s.deactivate((0,u.toMusicAudioIdentity)(e),{reason:a.MusicDislikeDeactivateReason.MyMusic})}));return s.events.on("activated",(({identity:e})=>{p.add((0,l.getIdentityRawId)(e))})),s.events.on("deactivated",(({identity:e})=>{p.remove((0,l.getIdentityRawId)(e))})),{addFx:m,removeFx:y,$identitiesMap:_}}},802640:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioDislikesService:()=>u});var n=s(498486),a=s(558137),r=s(32489),d=s(589322),l=s(540462);const c=(0,a.makeSharedState)("global/audio/myDislikes/adapter",(()=>(0,d.createMyAudioDislikesServiceAdapter)({domain:(0,r.createDomain)("global/audio/myDislikes/adapter"),name:"global/audio/myDislikes/adapter"})),{version:1}),u=()=>(0,l.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services")?c():(0,n.ensureMyAudioDislikesService)()},391570:(e,t,s)=>{"use strict";s.d(t,{createMyMusicServiceAdapter:()=>y});var n=s(746573),a=s(182464),r=s(46201),d=s(786979),l=s(824501),c=s(873900),u=s(32489),_=s(319756),p=s(395654),m=s(37051);function y(e){const t=(0,n.getEffectorServiceDomain)(e),s=(0,_.ensureDIRootWebContainer)().resolve(l.MusicService).myMusic,{$identitiesMap:y,addedIdentitiesMapApi:f,removedIdentitiesMapApi:g,addToStore:E,removeFromStore:A}=(0,a.createIdentitiesMaps)({domain:t}),b=t.createStore({}),P=(0,u.createApi)(b,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,d.removePairFromMap)(e,t)}),I=t.createEffect((async({trackedIdentity:e})=>{const t=(0,p.toMusicAudioIdentity)(e);await s.add(t,{trackCode:e.trackCode});const n=s.getTarget(t);if(!n)throw new Error("Failed to add audio to my music");return(0,m.toAudioIdentity)(n)})),T=t.createEffect((async({identity:e})=>{await s.delete((0,p.toMusicAudioIdentity)(e))})),C=t.createEffect((async({identity:e})=>{await s.restore((0,p.toMusicAudioIdentity)(e))}));return s.events.on("added",(({source:e})=>{const t=s.getTarget(e)??e;f.add({fullId:(0,c.getIdentityRawId)((0,m.toAudioIdentity)(e)),identity:(0,m.toAudioIdentity)(t)}),P.add({audioFullId:(0,c.getIdentityRawId)((0,m.toAudioIdentity)(t)),value:(0,m.toAudioIdentity)(e)})})),s.events.on("deleted",(({target:e})=>{const t=s.getTarget(e)??e;g.add((0,c.getIdentityRawId)((0,m.toAudioIdentity)(t)))})),s.events.on("restored",(({target:e})=>{const t=s.getTarget(e)??e;g.remove((0,c.getIdentityRawId)((0,m.toAudioIdentity)(t))),f.add({fullId:(0,c.getIdentityRawId)((0,m.toAudioIdentity)(e)),identity:(0,m.toAudioIdentity)(e)})})),{addFx:I,deleteFx:T,restoreFx:C,addToStore:E,removeFromStore:A,$identitiesMap:y,$sourcesMap:b,isOwned:e=>s.isOwned(e)}}},876409:(e,t,s)=>{"use strict";s.d(t,{ensureMyMusicService:()=>u});var n=s(345997),a=s(558137),r=s(32489),d=s(540462),l=s(391570);const c=(0,a.makeSharedState)("global/audio/myMusic/adapter",(()=>(0,l.createMyMusicServiceAdapter)({domain:(0,r.createDomain)("global/audio/myMusic/adapter"),name:"global/audio/myMusic/adapter"})),{version:1}),u=()=>(0,d.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services")?c():(0,n.ensureMyMusicService)()},83113:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioDislikesService:()=>n.ensureMyAudioDislikesService,ensureMyMusicService:()=>a.ensureMyMusicService});var n=s(802640),a=s(876409)},37051:(e,t,s)=>{"use strict";function n(e){return{id:e.id,ownerId:e.ownerId,accessKey:e.accessKey}}s.d(t,{toAudioIdentity:()=>n})},395654:(e,t,s)=>{"use strict";s.d(t,{toMusicAudioIdentity:()=>a});var n=s(70148);function a(e){return new n.OwnedIdentity({id:e.id,ownerId:e.ownerId,accessKey:e.accessKey})}},56885:(e,t,s)=>{"use strict";s.d(t,{hideCatalogBlock:()=>d});var n=s(983567),a=s(392358),r=s(761520);function d(e,t){r.ajax.post("/al_audio.php?act=hide_catalog_block",{block_id:e});const s=t.closest(".CatalogBlock__content");s&&(0,n.getAudioPlayer)().notify(a.events.PLACEHOLDER_REMOVE,s.dataset.id)}},963111:(e,t,s)=>{"use strict";s.d(t,{showAudioLongtapModal:()=>u});var n=s(474848),a=s(296540),r=s(753457),d=s(725669),l=s(211413);const c=(0,d.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(21529),s.e(1715)]).then(s.bind(s,496001))),(({AudioLongtapModal:e})=>e)),u=e=>{(0,l.showMessageBoxModalSuspense)((t=>(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(r.ScreenSpinner,{state:"cancelable",onClick:t.onClose}),children:(0,n.jsx)(c,{...t,audio:e})})),{width:380})}},933583:(e,t,s)=>{"use strict";s.d(t,{showAudioLongtapModalEffector:()=>_});var n=s(474848),a=s(725669),r=s(211413),d=s(58808),l=s(840079),c=s(345997);const u=(0,a.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(21529),s.e(1715)]).then(s.bind(s,803410))),(({AudioLongtapModal:e})=>e)),_=(e,t)=>{const s=l.AudioLongtapModalService.ensure(),a=(0,c.ensureMyMusicService)();s.setAudioElement(t),(0,r.showMessageBoxModalSuspense)((t=>(0,n.jsx)(u,{...t,audioLongtapService:s,previewsService:d.audioPreviewsService,myMusicService:a,audio:e})),{width:380,onDestroy:()=>{s.onCloseModal("click_outside")}})}},423979:(e,t,s)=>{"use strict";s.d(t,{SpecialProjectModal:()=>f});var n=s(474848),a=s(296540),r=s(694244),d=s(753457),l=s(63614),c=s(506782),u=s(308950),_=s(454154),p=s(514871),m=s(444024);const y="SpecialProjectModal__subheader",f=({title:e,text:t,button:s,style:f,image:g,backgroundImage:E,sendCloseReason:A,onClose:b})=>{const P=e=>{"A"===e.target.tagName&&A("link")};return(0,a.useEffect)((()=>{const[e]=document.getElementsByClassName(y);return e.addEventListener("click",P),()=>{e.removeEventListener("click",P)}}),[]),(0,n.jsxs)(r.ModalBox,{children:[(0,n.jsx)(d.ModalDismissButton,{onClick:b}),(0,n.jsx)(p.SpecialProjectHeader,{backgroundImage:E,image:g,style:f}),(0,n.jsxs)(l.ModalBody,{insetLevel:1,children:[(0,n.jsx)(c.ModalTextLayout,{subheader:(0,n.jsx)("span",{className:y,children:(0,m.parseReactWikiLinks)(t)}),subheaderMode:"primary",children:e}),(0,n.jsx)(u.ButtonLayout,{children:(0,n.jsx)(_.Button,{onClick:()=>{A("button"),s.action?.url&&window.nav.go(s.action.url)},size:"l",mode:"primary",children:s.title},"special-project-submit-button")})]})]})}},492065:(e,t,s)=>{"use strict";s.d(t,{showWebSpecialProjectModal:()=>d});var n=s(474848),a=s(211413),r=s(423979);const d=(e,t)=>{(0,a.showMessageBoxModal)((s=>(0,n.jsx)(r.SpecialProjectModal,{...s,...e,sendCloseReason:t})),{width:420,onDestroy:()=>{t("close")}})}},493229:(e,t,s)=>{"use strict";s.d(t,{AUDIO_STORAGE_KEYS_ENUM:()=>n});const n={AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME:"audio_preview_tooltip_show_date_time"}},513467:(e,t,s)=>{"use strict";s.d(t,{createAudioDislikesInMyMusicWebService:()=>C});var n=s(746573),a=s(586049),r=s(478455),d=s(584053),l=s(32489),c=s(278758),u=s(803111),_=s(270935),p=s(392358),m=s(679688),y=s(297420),f=s(630082),g=s(367181),E=s(909436),A=s(518051),b=s(169818),P=s(602337),I=s(322100),T=s(540462);function C(e){const t=(0,n.getEffectorServiceDomain)(e),s=new d.Emitter,A=(0,u.ensureAudioPlayerService)(),b=(0,I.ensureMyAudioDislikesService)(),P=(0,_.ensureMyAudioMusicWebService)(),C=(0,l.createEvent)(),{$fullIdsMap:S,fullIdsMapApi:D}=(0,a.createFullIdsMap)(t),{$fullIdsMap:k,fullIdsMapApi:L}=(0,a.createFullIdsMap)(t),{$fullIdsMap:x,fullIdsMapApi:R}=(0,a.createFullIdsMap)(t),B=(0,l.restore)(C,null),F=(0,l.attach)({source:B,async effect(e){if(!e)throw new Error("Audio not exists");const t=(0,r.getAudioFullId)(e);await Promise.all([P.addFx({audio:e,isNotificationDisabled:!0}),b.removeFx({identity:e})]),R.remove(t),A.updateAudioDislikeStatusFx({audioFullId:t,hasDislike:!1}),A.notifyFx({eventType:p.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[t]}),s.emit(g.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestored,{audio:e})}}),N=(0,l.attach)({source:(0,l.combine)({dislikesIdentitiesMap:b.$identitiesMap,myMusicIdentitiesMap:P.$identitiesMap,dislikeActionInitializedIdentitiesMap:S,myMusicActionInitializedIdentitiesMap:P.$initializedIdentitiesMap,isFinitePlaylist:(0,y.not)((0,f.equals)(A.$currentPlaylist.map((e=>Boolean(e?.isLive()||e?.isLoadable()))),!0)),playerCurrentAudio:A.$currentAudio,playerProgress:A.$progress}),async effect({dislikeActionInitializedIdentitiesMap:e,myMusicActionInitializedIdentitiesMap:t,dislikesIdentitiesMap:n,myMusicIdentitiesMap:a,isFinitePlaylist:d,playerCurrentAudio:l,playerProgress:c},{audio:u,audioEl:y=null,skipDeletionAudioFromMyMusic:f,needReloadTrackCode:E}){if(!u)throw new Error("Audio not exists");const I=(0,r.getAudioFullId)(u),S=l&&I===(0,r.getAudioFullId)(l)?c:0,D=Boolean(e[I]);if((0,m.hasDislike)({audio:u,dislikesIdentitiesMap:n,isDislikeActionInitialized:D}))throw new Error("Audio already disliked");const k=await O({playerService:A,audio:u,audioEl:y});try{let e=u;if(E){const t=await M(u,y);t&&(e={...u,trackCode:t})}await b.addFx({identity:u});if(!f&&(0,_.isMy)({identity:u,myMusicIdentitiesMap:a,isMyMusicActionInitialized:Boolean(t[I]),userId:window.vk.id}))try{const t=(0,T.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services")&&!P?.isOwned?.(u)?a[I]:u;await P.deleteFx({audio:t}),C(u),s.emit(g.AudioDislikesInMyMusicWebServiceEventType.AudioDislikedInMyMusic,{audio:e,playlistIdentity:k,playerProgress:S}),R.add(I),A.updateAudioDislikeStatusFx({audioFullId:I,hasDislike:!0}),A.notifyFx({eventType:p.AudioPlayerEventType.AUDIO_DELETE_BY_DISLIKE_ACTION,params:[I]})}catch(e){throw new Error("Failed to delete audio from MyMusic",{cause:e})}else s.emit(g.AudioDislikesInMyMusicWebServiceEventType.AudioDisliked,{audio:e,playlistIdentity:k,playerProgress:S});const n=A.getPlaylistQueue();if(d&&n&&n?.indexOfAudio?.(u)===n?.length-1)return;A.getCurrentAudio()?.id===u.id&&A.playNextFx()}catch(e){throw new Error("Failed to add dislike to audio",{cause:e})}}}),U=(0,l.attach)({source:(0,l.combine)({dislikesIdentitiesMap:b.$identitiesMap,initializedIdentitiesMap:S,lastDislikedAudioInMyMusic:B,isCancelDeletionLastDislikedAudioInMyMusicFxPending:F.pending,dislikedAudiosInMyMusicMap:x,playerCurrentAudio:A.$currentAudio,playerProgress:A.$progress}),async effect({initializedIdentitiesMap:e,dislikesIdentitiesMap:t,lastDislikedAudioInMyMusic:n,isCancelDeletionLastDislikedAudioInMyMusicFxPending:a,dislikedAudiosInMyMusicMap:d,playerCurrentAudio:l,playerProgress:c},{audio:u,audioEl:_=null,needReloadTrackCode:y}){if(!u)throw new Error("Audio not exists");const f=(0,r.getAudioFullId)(u),E=Boolean(e[f]);if(!(0,m.hasDislike)({audio:u,dislikesIdentitiesMap:t,isDislikeActionInitialized:E}))throw new Error("Audio not disliked");const I=await O({playerService:A,audio:u,audioEl:_}),S=Boolean(n)&&n?.id===u.id;let D=u;if(y){const e=await M(u,_);e&&(D={...u,trackCode:e})}try{!E||!(f in d)||a&&S?await b.removeFx({identity:u}):(S&&(s.emit(g.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton,{audio:u}),C(null)),(0,T.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services")&&P.restoreFx?await Promise.all([P.restoreFx({identity:u}),b.removeFx({identity:u})]):await Promise.all([P.addFx({audio:u,isNotificationDisabled:!0}),b.removeFx({identity:u})]),R.remove(f),A.notifyFx({eventType:p.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[f]})),s.emit(g.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemoved,{audio:D,playlistIdentity:I,playerProgress:l&&f===(0,r.getAudioFullId)(l)?c:0}),A.updateAudioDislikeStatusFx({audioFullId:f,hasDislike:!1})}catch(e){throw new Error("Failed to remove dislike from audio",{cause:e})}}}),W=(0,l.attach)({source:(0,l.combine)({dislikesIdentitiesMap:b.$identitiesMap,dislikeActionInitializedIdentitiesMap:S,playerCurrentAudio:A.$currentAudio,playerProgress:A.$progress}),async effect({dislikesIdentitiesMap:e,dislikeActionInitializedIdentitiesMap:t,playerCurrentAudio:n,playerProgress:a},{audio:d,audioEl:l,needReloadTrackCode:c,...u}){if(!d)throw new Error("Audio not exists");const _=await O({playerService:A,audio:d,audioEl:l}),p=(0,r.getAudioFullId)(d);let y=document.querySelector(`._audio_row_${p}`);y=y==l?null:y;const f=(0,m.hasDislike)({audio:d,dislikesIdentitiesMap:e,isDislikeActionInitialized:p in t});let I=d;if(c){const e=await M(d,l);e&&(I={...d,trackCode:e})}if(f){if((0,T.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services")&&P.restoreFx&&P.isOwned&&P?.isOwned(d))try{await Promise.all([b.removeFx({identity:d}),P.restoreFx({identity:d})]),l&&(l.classList.remove("audio_row__deleted"),E.AudioUtils.onRowOver(l,!1,!0)),y&&(y.classList.remove("audio_row__deleted"),E.AudioUtils.onRowOver(y,!1,!0))}catch(e){throw l&&(l.classList.add("audio_row__deleted"),E.AudioUtils.onRowOver(l,!1,!0)),y&&(y.classList.add("audio_row__deleted"),E.AudioUtils.onRowOver(l,!1,!0)),new Error('Failed to delete audio from "My Music"',{cause:e})}else await Promise.all([b.removeFx({identity:d}),P.addFx({audio:I,needReloadTrackCode:!1,...u})]);A.updateAudioDislikeStatusFx({audioFullId:p,hasDislike:!1}),s.emit(g.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemovedByAddToMyMusicButton,{audio:I,playlistIdentity:_,playerProgress:n&&p===(0,r.getAudioFullId)(n)?a:0})}else await P.addFx({audio:I,audioEl:l,...u})}});return(0,l.sample)({clock:[N.done,U.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,r.getAudioFullId)(e),target:D.add}),(0,l.sample)({clock:[N,U],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,r.getAudioFullId)(e),target:L.add}),(0,l.sample)({clock:[N.finally,U.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,r.getAudioFullId)(e),target:L.remove}),(0,c.reset)({clock:F.done,target:B}),{$dislikesIdentitiesMap:b.$identitiesMap,$dislikesInitializedIdentitiesMap:S,$dislikesLoadingIdentitiesMap:k,addDislikeFx:N,removeDislikeFx:U,$myMusicIdentitiesMap:P.$identitiesMap,$myMusicInitializedIdentitiesMap:P.$initializedIdentitiesMap,$myMusicLoadingIdentitiesMap:P.$loadingIdentitiesMap,addToMyMusicFx:W,deleteFromMyMusicFx:P.deleteFx,cancelDeletionLastDislikedAudioInMyMusicFx:F,events:s.listenable}}async function O({playerService:e,audio:t,audioEl:s}){if(t.album)return{id:t.album[P.AudioPlaylistTupleKeys.Id],ownerId:t.album[P.AudioPlaylistTupleKeys.OwnerId]};const n=e.getCurrentAudio();if(n&&(0,r.getAudioFullId)(n)===(0,r.getAudioFullId)(t)){const t=await e.getCurrentPlaylistFx();if(t){const e=t?.getPlaylistId(),s=t?.getPlaylistId();if(e&&s)return{id:+e,ownerId:+s}}}if(s){let e=E.AudioUtils.getContextPlaylist(s);if(e?.playlist){const t=e.playlist?.getPlaylistId(),s=e.playlist?.getPlaylistId();if(t&&s)return{id:+t,ownerId:+s}}}return null}async function M(e,t){const s=(0,A.getContextPlaylist)(t);if(!s)return null;return await(0,b.getAudioTrackCodeFromPlaylist)(s?.playlist,e)??null}},367181:(e,t,s)=>{"use strict";var n;s.d(t,{AudioDislikesInMyMusicWebServiceEventType:()=>n}),function(e){e.AudioDisliked="audioDisliked",e.AudioDislikedInMyMusic="audioDislikedInMyMusic",e.LastDislikedAudioInMyMusicRestored="lastDislikedAudioInMyMusicRestored",e.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton="lastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton",e.AudioDislikeRemoved="audioDislikeRemoved",e.AudioDislikeRemovedByAddToMyMusicButton="audioDislikeRemovedByAddToMyMusicButton"}(n||(n={}))},761178:(e,t,s)=>{"use strict";s.d(t,{ensureAudioDislikesInMyMusicWebService:()=>l,hasDislike:()=>d.hasDislike});var n=s(558137),a=s(32489),r=s(513467),d=s(679688);s(367181);const l=(0,n.makeSharedState)("global/web/audio/dislikesInMyMusic",(()=>(0,r.createAudioDislikesInMyMusicWebService)({domain:(0,a.createDomain)("global/web/audio/dislikesInMyMusic"),name:"global/web/audio/dislikesInMyMusic"})),{version:3})},550929:(e,t,s)=>{"use strict";s.d(t,{hasDislike:()=>r});var n=s(478455),a=s(482310);function r({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:s}){return!!e&&(!!t[(0,n.getAudioFullId)(e)]||!s&&((0,a.getAudioExtra)(e)?.dislike??!1))}},679688:(e,t,s)=>{"use strict";s.d(t,{hasDislike:()=>n.hasDislike});var n=s(550929)},964076:(e,t,s)=>{"use strict";s.d(t,{createAudioLongtapFetchService:()=>r});var n=s(32489),a=s(345997);function r(e){const t=(0,n.createDomain)("AudioLongtapModal"),s=(0,a.ensureMyMusicService)(),r=t.createStore(!1),d=t.createStore(!1),l=(0,n.attach)({effect:e.fetchAudioPreviewFx}),c=(0,n.attach)({effect:s.addFx}),u=t.createEvent();return d.reset(u),(0,n.sample)({clock:l.failData,fn:()=>!0,target:r}),(0,n.sample)({clock:l,fn:()=>!1,target:r}),(0,n.sample)({clock:c.doneData,fn:()=>!0,target:d}),(0,n.sample)({clock:c,fn:()=>!1,target:d}),{$failFetch:r,$successAddAudio:d,resetAddSuccessResult:u,fetchAudioPreviewFx:l,addAudioFx:c}}},840079:(e,t,s)=>{"use strict";s.d(t,{AudioLongtapModalService:()=>b});var n=s(392358),a=s(317216),r=s(983567),d=s(654671),l=s(927848),c=s(909436),u=s(358926),_=s(58808),p=s(957580),m=s(139612),y=s(345997),f=s(478455),g=s(964076),E=s(540462);let A=null;class b{static ensure(){return A||(A=new b,A)}async fetchPreview(e){await this.fetcher.fetchAudioPreviewFx({identity:(0,m.mapAPIRawIdToAudioIdentity)(e.fullId)}),this.previewPlayer.timelinePosition=0,this.previewPlayer.setCurrentAudio(e)}async play(e){const t={...this.getStatData(),audio:this.previewPlayer.currentAudio};this.statCollector.openModal(t),this.commonAudioWasPlaying=this.commonAudioPlayer.isPlaying(),await this.previewPlayer.play(e,this.commonAudioPlayer.getVolume()),this.commonAudioWasPlaying&&this.commonAudioPlayer.pauseByChangeChannel();const s=l.AudioLongtapTooltip.ensure();this.statCollector.start(this.getStatData()),s.canShow()&&s.disable()}setAudioElement(e){this.audioElement=e}stop(){const e=this.commonAudioPlayer.getCurrentAudio();if(this.previewPlayer.stop(),this.commonAudioWasPlaying&&e){const t=this.commonAudioPlayer.getCurrentPlaylist();this.commonAudioPlayer.resumeChannel({audio:e,playlist:t,context:void 0}),this.commonAudioWasPlaying=!1}}subscribeStop(e){this.previewPlayer.subscribe.call(this.previewPlayer,n.events.STOP_PREVIEW,e),this.previewPlayer.subscribe.call(this.previewPlayer,n.events.END_PREVIEW,e)}unsubscribeStop(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.STOP_PREVIEW,e),this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.END_PREVIEW,e)}subscribeProgress(e){this.previewPlayer.subscribe.call(this.previewPlayer,n.events.PROGRESS_PREVIEW,e)}unsubscribeProgress(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.PROGRESS_PREVIEW,e)}onCloseModal(e){if(this.audioElement)switch(e){case"click_exit":this.statCollector.closeBy(a.EventItemSubType.AUDIO_LONGTAP_CLICK_EXIT,this.getStatData());break;case"click_outside":this.statCollector.closeBy(a.EventItemSubType.AUDIO_LONGTAP_CLICK_OUTSIDE,this.getStatData());break;case"auto_finish":this.statCollector.closeBy(a.EventItemSubType.AUDIO_LONGTAP_AUTO_FINISH,this.getStatData())}this.audioElement=null,this.stop(),this.commonAudioWasPlaying=!1,this.previewPlayer.unsubscribe(n.events.STOP_PREVIEW,this.stop),this.previewPlayer.unsubscribe(n.events.END_PREVIEW,this.stop)}get currentAudio(){return this.previewPlayer.currentAudio}get timelinePosition(){return this.previewPlayer.timelinePosition}get playbackDuration(){return this.previewPlayer.playbackDuration}async addAudio(e){const t=(0,E.partConfigEnabled)("add_audio_to_effector_web");await this.fetcher.addAudioFx({trackedIdentity:{id:e.id,ownerId:e.owner_id,accessKey:e.accessKey,trackCode:e.trackCode},userId:window.vk.id});const s=(0,y.ensureMyMusicService)().$identitiesMap.getState()[(0,f.getAudioFullId)({id:e.id,ownerId:e.ownerId})];(0,r.getAudioPlayer)().notify(n.events.ADDED,e,s.id);const a={...this.getStatData(),audioAddedId:s.id||void 0};if(this.audioElement&&this.audioElement.classList.add("audio_row__added"),!t){c.AudioUtils.getAddRestoreInfo()[e.fullId]={state:"added",addedFullId:(0,f.getAudioFullId)({id:s.id,ownerId:s.ownerId}),audio:e}}this.statCollector.addTrack(a)}getStatData(){const e=this.commonAudioPlayer.getCurrentPlaylist(),t=e?.getPlaylistId()??void 0;return{audio:this.currentAudio,timelinePosition:this.timelinePosition,playlistId:t,playbackDuration:this.playbackDuration,volume:(0,p.unLogF)(this.commonAudioPlayer.getVolume()),snippetLength:this.previewPlayer.previewLength}}goToTrack(e){e&&(this.statCollector.goToTrack(this.getStatData()),window.nav.go(`audio${e}`))}goToArtist(e){e&&(this.statCollector.goToArtist(this.getStatData()),window.nav.go(`artist/${e}`))}constructor(){this.previewPlayer=d.PreviewAudioPlayerEffector.ensure(),this.commonAudioPlayer=(0,r.getAudioPlayer)(),this.statCollector=u.AudioLongtapStatCollectorEffector.ensure(),this.previewPlayer.subscribe(n.events.STOP_PREVIEW,this.stop),this.previewPlayer.subscribe(n.events.END_PREVIEW,this.stop),this.fetcher=(0,g.createAudioLongtapFetchService)(_.audioPreviewsService)}}},358926:(e,t,s)=>{"use strict";s.d(t,{AudioLongtapStatCollectorEffector:()=>l});var n=s(317216),a=s(314309);const r=e=>{if(!e.audio)return{event_category:e.eventCategory};const{trackCode:t,id:s,ownerId:n,albumId:a}=e.audio;return{track_code:t,audio_id:s,audio_owner_id:n,playlist_id:a,playlist_owner_id:void 0,audio_id_new:e.audioAddedId||void 0,timeline_position:e.timelinePosition,playback_duration:e.playbackDuration,volume:Math.round(100*e.volume),audio_length:e.snippetLength,event_category:e.eventCategory}};let d=null;class l{static ensure(){return d||(d=new l,d)}start(e){const t=r({...e,eventCategory:n.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.START,event_subtype:n.EventItemSubType.AUDIO_LONGTAP,...t}})}openModal(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.OPEN,n.EventItemSubType.AUDIO_LONGTAP_OPEN,n.LongtapEventCategory.view,t)}addTrack(e){const t=r({...e,eventCategory:n.LongtapEventCategory.action});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.ADDED,event_subtype:n.EventItemSubType.AUDIO_ADD_AFTER_LONGTAP,...t}})}tipHasShown(){this.sendView(n.EventItemType.HINT,n.EventItemSubType.AUDIO_LONGTAP_HINT,n.LongtapEventCategory.view)}closeBy(e,t){if(!this.audio)return;const s=r({...t,audio:this.audio,eventCategory:n.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.STOP,event_subtype:e,...s}}),this.audio=null}goToTrack(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.LONGTAP_DRILLDOWN,n.EventItemSubType.AUDIO_LONGTAP_GO_TO_TRACK,n.LongtapEventCategory.nav,t)}goToArtist(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.LONGTAP_DRILLDOWN,n.EventItemSubType.AUDIO_LONGTAP_GO_TO_ARTIST,n.LongtapEventCategory.nav,t)}sendView(e,t,s,a){const r={type:n.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{...a,event_type:e,event_subtype:t,event_category:s}},d={type:e,track_code:a?.track_code};this.viewCollector.logEvent(r,d)}constructor(){this.audio=null,this.productCollector=new a.ProductionStatCollector,this.viewCollector=new a.ViewStatCollector(this.productCollector),this.actionStatCollector=new a.ActionStatCollector(this.productCollector)}}},927848:(e,t,s)=>{"use strict";s.d(t,{AudioLongtapTooltip:()=>I});var n=s(434518),a=s(763812),r=s(250598),d=s(553608),l=s(493229),c=s(358926),u=s(984745),_=s(632731),p=s(558137),m=s(459899);var y=(0,a._)("_audioPage"),f=(0,a._)("_hint"),g=(0,a._)("_tooltip"),E=(0,a._)("_isOpen"),A=(0,a._)("_disabled"),b=(0,a._)("_isUserAuthorized"),P=(0,a._)("_getTooltip");class I{getHints(){(0,n._)(this,b)[b]&&(0,n._)(this,y)[y].isInitialized&&(0,u.ensureAccountHelpHintsService)().getHelpHintsFx()}getHint(){const e=(0,u.ensureAccountHelpHintsService)().$helpHints.getState()[_.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB];return(0,n._)(this,f)[f]=e||null,(0,n._)(this,f)[f]}canShow(){if((0,n._)(this,A)[A])return!1;let e=!1;if(this.getHint()){const t=d.vkLocalStorage.getItem(l.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME),s=t?JSON.parse(t):null,n=s?s.firstShow:null;if(n){const t=new Date(+n).getTime(),a=(new Date).getTime(),r=Math.abs(a-t),c=Math.ceil(r/864e5);if(c<=3&&s?.disabledDay!==c){e=!0;const t={firstShow:n,disabledDay:c};d.vkLocalStorage.setItem(l.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}s?.disabledDay===c&&(e=!1)}else{e=!0;const t={firstShow:(new Date).getTime(),disabledDay:1};d.vkLocalStorage.setItem(l.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}}return e}async show(e){e&&((0,n._)(this,g)[g]=(0,n._)(this,P)[P](e),(0,n._)(this,g)[g]&&((0,n._)(this,g)[g].show(),(0,n._)(this,E)[E]=!0,c.AudioLongtapStatCollectorEffector.ensure().tipHasShown()))}disable(){this.getHint()&&(0,u.ensureAccountHelpHintsService)().hideHelpHint({hintId:_.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB}),(0,n._)(this,A)[A]=!0}get isOpen(){return(0,n._)(this,E)[E]}constructor({audioPage:e}){Object.defineProperty(this,b,{get:T,set:void 0}),Object.defineProperty(this,P,{value:C}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),(0,n._)(this,E)[E]=!1,(0,n._)(this,A)[A]=!1,(0,n._)(this,y)[y]=e}}function T(){return Boolean(window?.vk?.id)}function C(e){const t={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip audio_snippet_tooltip",content:(0,n._)(this,f)[f]?.title,align:"right",centerShift:8,appendTo:document.body,autoAdjustToViewport:!0,noAutoHideOnWindowClick:!0,autoHide:!0,onHide:()=>{(0,n._)(this,E)[E]=!1,(0,n._)(this,g)[g]?.destroy()},width:286},s=new r.ElementTooltip(e,t);return window.cur?.destroy?.push((()=>{s?.destroy()})),s}I.ensure=(0,p.makeSharedState)("AudioLongtapTooltip",(()=>new I({audioPage:m.AudioPageProxy.ensure()})),{version:1})},267009:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>c});var n=s(32489),a=s(746573),r=s(46201),d=s(786979),l=s(30899);const c=(0,s(558137).makeSharedState)("global/audio/audioPage/myPlaylists",(()=>function({config:e,myAudioPlaylistsService:t}){const s=(0,a.getEffectorServiceDomain)(e),n=s.createStore({}),l=s.createEffect((async e=>await t.createFx({...e}))),c=s.createEffect((async e=>{await t.deleteFx({...e})}));return n.on(l.done,((e,{params:t,result:s})=>(0,r.addPairToMap)(e,{key:t.blockId,value:s}))),n.on(c.done,((e,{params:t})=>(0,d.removePairFromMap)(e,t.blockId))),{createFx:l,deleteFx:c,setUserId:t.setUserId,$myAudioPlaylistsIdentitiesMap:n}}({config:{domain:(0,n.createDomain)("global/audio/audioPage/myPlaylists"),name:"global/audio/audioPage/myPlaylists"},myAudioPlaylistsService:(0,l.ensureMyAudioPlaylistsService)()})),{version:1})},785410:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>n.ensureAudioPageMyAudioPlaylistsService});var n=s(267009)},427187:(e,t,s)=>{"use strict";s.d(t,{createAudioPageService:()=>L});var n=s(746573),a=s(586049),r=s(478455),d=s(97295),l=s(35215),c=s(468073),u=s(205337),_=s(815733),p=s(761178),m=s(32489),y=s(270935),f=s(459899),g=s(898848),E=s(909436),A=s(138586),b=s(270959),P=s(866467),I=s(593159),T=s(683234),C=s(983567),O=s(761520),M=s(261472),S=s(322100),D=s(873900),k=s(540462);function L(e){const t=(0,k.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services"),s=(0,n.getEffectorServiceDomain)(e),c=f.AudioPageProxy.ensure(),u=(0,S.ensureMyMusicService)(),L=(0,p.ensureAudioDislikesInMyMusicWebService)(),N=(0,_.ensureGroupsAudioMusicWebService)(),U=s.createEvent(),W=(0,m.restore)(U,null),{$fullIdsMap:H,fullIdsMapApi:K}=(0,a.createFullIdsMap)(s),{$fullIdsMap:j,fullIdsMapApi:V}=(0,a.createFullIdsMap)(s),{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:$,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:G}=(0,M.createDeleteAudiosFromMyMusicForLastWeekDataIdentities)(s),q=s.createEffect((({audioEl:e,inProgress:t})=>{e&&(e.dataset["in-progress"]=(0,g.intval)(t).toString())})),z=s.createEffect((({elements:e,inProgress:t,state:s})=>{e.forEach((e=>{if(!e)return;q({audioEl:e,inProgress:t});const n=Boolean(e.closest(".CatalogBlock__group_audios")),a=Boolean(e.closest(".CatalogBlock__my_audios_block")||e.closest(".CatalogBlock__my_audios")||n);switch(s){case"added":return void(a?n?(e.classList.add("audio_row__added"),E.AudioUtils.onRowOver(e,!1,!1)):(e.classList.remove("audio_row__deleted"),E.AudioUtils.onRowOver(e,!1,!0)):(e.classList.add("audio_row__added"),E.AudioUtils.onRowOver(e,!1,!1)));case"deleted":return void(a&&!n?(e.classList.add("audio_row__deleted"),E.AudioUtils.onRowOver(e,!1,!0)):(e.classList.remove("audio_row__added"),E.AudioUtils.onRowOver(e,!1,!1)));default:return}}))})),Y=(0,m.attach)({source:(0,m.combine)({myMusicIdentitiesMap:L.$myMusicIdentitiesMap,myMusicInitializedIdentitiesMap:L.$myMusicInitializedIdentitiesMap,deletedFromMyMusicAudiosIdentitiesMap:H,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:$}),async effect({myMusicIdentitiesMap:e,myMusicInitializedIdentitiesMap:t,deletedFromMyMusicAudiosIdentitiesMap:s,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:n},{audio:a,audioEl:d,playlist:l,audioRef:u}){if(!a)throw new Error("Audio not exists");const _=(0,r.getAudioFullId)(a),p=(0,y.isMy)({identity:a,myMusicIdentitiesMap:e,isMyMusicActionInitialized:_ in t,userId:window.vk.id});try{p?await L.deleteFromMyMusicFx({audioEl:d,audio:a,audioRef:u,needReloadTrackCode:!0}):(l&&c.onUserAction(a,l),await L.addToMyMusicFx({audioEl:d,audio:a,audioRef:u,isNotificationDisabled:!0,needReloadTrackCode:!0}),p?K.add(_):(_ in s&&K.remove(_),_ in n&&G.remove(_)),!p&&_ in s?K.remove(_):p&&K.add(_))}catch(e){throw new Error(`${p?'Failed to delete audio from "My Music"':'Failed to add audio to "My music"'}`,{cause:e})}}}),X=(0,m.attach)({source:N.$identitiesMap,async effect(e,{audioEl:t,audio:s,groupId:n,playlist:a}){if(!s)throw new Error("Audio not exists");const r=(0,_.isAddedToGroup)({identity:s,groupsMusicIdentitiesMap:e,groupId:n});try{r?await N.deleteFx({audioEl:t,groupId:n,audio:s}):(a&&c.onUserAction(s,a),await N.addFx({audioEl:t,groupId:n,audio:s}),V.remove((0,d.getGroupAudioFullId)(s,n)))}catch(e){throw new Error(`${r?"Failed to delete audio from group with id":"Failed to add audio to group with id"} ${n}`,{cause:e})}}}),Q=(0,m.attach)({source:W,async effect(e,{audioEl:t,audio:s,audioRef:n=""}){if(!R(e))return window.vk&&window.vk.widget&&window.Widgets?void window.Widgets.oauth():void console.error("The user is not authorized, it is impossible to add or delete audio");if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(B(t))return;const a=s||E.AudioUtils.getAudioFromEl(s,!0);if(!a)throw new Error("Audio not exists");const r=c.currentPlaylist,d=x(c),u=(0,l.isNumber)(d),_=u&&t&&!t.classList.contains("audio_row__deleted")&&Boolean(t.closest(".CatalogBlock__group_audios"));!u||_?await Y({audioEl:t,audio:a,playlist:r,audioRef:n}):await X({audioEl:t,audio:a,groupId:d,playlist:r})}}),Z=(0,m.attach)({source:$,async effect(e,{audioEl:t,audio:s}){if(!s)throw new Error("Audio not exists");const n=(0,r.getAudioFullId)(s),a=e[n];if(!a)throw new Error("Audio is not ready to delete all audio from the last week in My Music");(0,b.showFastBox)({title:P.getLang("audio_delete_all_title"),onHide:()=>{q({audioEl:t,inProgress:!1})}},a.message||"",P.getLang("global_delete"),(function(e){let t=(0,I.extend)({act:"delete_all"},a.data);O.ajax.post("al_audio.php",t,{showProgress:()=>(0,T.lockButton)(e),onDone:function(){let e=(0,C.getAudioPlayer)().getPlaylist(A.AudioPlaylist.TYPE_PLAYLIST,a.data.from_id,A.AudioPlaylist.DEFAULT_PLAYLIST_ID);(0,C.getAudioPlayer)().deletePlaylist(e),K.remove(n),window.nav.reload()},onFail:()=>!0})}),P.getLang("global_cancel"))}}),J=(0,m.attach)({source:(0,m.combine)({userId:W,myMusicInitializedIdentitiesMap:L.$myMusicInitializedIdentitiesMap,myMusicIdentitiesMap:L.$myMusicIdentitiesMap,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:$}),async effect({userId:e,myMusicIdentitiesMap:s,myMusicInitializedIdentitiesMap:n,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:a},{audio:u,audioEl:_}){if(!R(e))return void console.error("The user is not authorized, it is impossible to add or delete audio");if(!u)throw new Error("Audio not exists");if(B(_))return;window.tooltips&&window.tooltips.hideAll();const p=(0,r.getAudioFullId)(u);if(p in a)return void await Z({audioEl:_,audio:u});const m=x(c),f=(0,l.isNumber)(m)&&u.ownerId===m;if(!(0,y.isMy)({identity:u,myMusicIdentitiesMap:s,isMyMusicActionInitialized:p in n,userId:e})&&!f)throw new Error("Audio not added");if(u.isClaimed&&_?.remove(),f)return await N.deleteFx({audioEl:_,groupId:m,audio:u,needShowDeletedAudioRowState:!0}),u.isClaimed&&E.AudioUtils.deleteDeletedAudios(),t||q({audioEl:_,inProgress:!1}),void V.add((0,d.getGroupAudioFullId)(u,m));const[g,A]=await O.ajax.promisifiedPost("al_audio.php",{act:"delete_audio",oid:u.ownerId,aid:u.id,hash:u.deleteHash,restore:1,track_code:u.trackCode});g&&G.add({audioFullId:p,value:{data:g,message:A||""}}),await L.deleteFromMyMusicFx({audio:u,audioEl:_,forceRemoveFromStoreParams:{oldIdentity:u,newIdentity:u}}),K.add(p),u.isClaimed&&E.AudioUtils.deleteDeletedAudios(),t||q({audioEl:_,inProgress:!1})}});return t&&u.restoreFx&&u.$sourcesMap?((0,m.sample)({clock:u.addFx,fn:({trackedIdentity:e})=>({elements:F(e),inProgress:!0,state:"added"}),target:z}),(0,m.sample)({clock:u.addFx.done,fn:({params:{trackedIdentity:e}})=>({elements:F(e),inProgress:!1}),target:z}),(0,m.sample)({clock:u.addFx.fail,source:u.$sourcesMap,fn:(e,{params:{trackedIdentity:t}})=>{const s=(0,D.getIdentityRawId)(t);return{elements:F(t).length?F(t):F(e[s]),inProgress:!0,state:"deleted"}},target:z}),(0,m.sample)({clock:u.deleteFx,source:u.$sourcesMap,fn:(e,{identity:t})=>{const s=(0,D.getIdentityRawId)(t);return{elements:F(t).length?F(t):F(e[s]),inProgress:!0,state:"deleted"}},target:z}),(0,m.sample)({clock:u.deleteFx.done,source:u.$sourcesMap,fn:(e,{params:{identity:t}})=>{const s=(0,D.getIdentityRawId)(t);return{elements:F(t).length?F(t):F(e[s]),inProgress:!1,state:"deleted"}},target:z}),(0,m.sample)({clock:u.deleteFx.fail,fn:({params:{identity:e}})=>({elements:F(e),inProgress:!1,state:"added"}),target:z}),(0,m.sample)({clock:u.restoreFx.done,fn:({params:{identity:e}})=>({elements:F(e),inProgress:!1,state:"added"}),target:z}),(0,m.sample)({clock:u.restoreFx.fail,fn:({params:{identity:e}})=>({elements:F(e),inProgress:!1,state:"deleted"}),target:z}),(0,m.sample)({clock:J,fn:({audioEl:e})=>({elements:[e],inProgress:!0,state:"deleted"}),target:z}),(0,m.sample)({clock:J.done,fn:({params:{audioEl:e}})=>({elements:[e],inProgress:!1}),target:z}),(0,m.sample)({clock:J.fail,fn:({params:{audioEl:e}})=>({elements:[e],inProgress:!1,state:"added"}),target:z})):((0,m.sample)({clock:[Q,J],fn:({audioEl:e})=>({audioEl:e,inProgress:!0}),target:q}),(0,m.sample)({clock:Q.finally,fn:({params:{audioEl:e}})=>({audioEl:e,inProgress:!1}),target:q})),{$myMusicIdentitiesMap:L.$myMusicIdentitiesMap,$deletedFromMyMusicAudiosIdentitiesMap:H,$deletedFromGroupAudiosIdentitiesMap:j,$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:$,toggleAddAudioFx:Q,deleteAudioLegacyFx:J,setUserId:U}}function x(e){if(!(0,l.isNumber)(e.ownerId))return null;return Boolean(e.ownerId&&(0,l.isNumber)(e.ownerId)&&c.Ranges.isGroupId(e.ownerId)&&e.canAddToGroup)?(0,u.convertToGroupMusicId)(e.ownerId):null}function R(e){return(0,l.isNumber)(e)&&c.Ranges.isUserId(e)}function B(e){return Boolean(e?.dataset?.["in-progress"])}function F(e){return Array.from(document.querySelectorAll(`._audio_row_${(0,r.getAudioFullId)(e)}`))}},145855:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPageService:()=>d});var n=s(558137),a=s(32489),r=s(427187);const d=(0,n.makeSharedState)("global/audio/audioPage/service",(()=>(0,r.createAudioPageService)({domain:(0,a.createDomain)("global/audio/audioPage/service"),name:"global/audio/audioPage/service"})),{version:2})},261472:(e,t,s)=>{"use strict";s.d(t,{createDeleteAudiosFromMyMusicForLastWeekDataIdentities:()=>d});var n=s(32489),a=s(46201),r=s(786979);function d(e){const t=e.createStore({});return{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:t,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,a.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},655146:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>n.ensureAudioPageMyAudioPlaylistsService,ensureAudioPageService:()=>a.ensureAudioPageService});var n=s(785410),a=s(145855)},43769:(e,t,s)=>{"use strict";s.d(t,{createAudioPlayerService:()=>m});var n=s(32489),a=s(983567),r=s(392358),d=s(596901),l=s(423015),c=s(746573),u=s(264874),_=s(749438),p=s(8520);function m(e){const t=(0,c.getEffectorServiceDomain)(e),s=t.createEvent(),m=()=>{const e=(0,a.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");return e.getPlaylistQueue()??null},y=t.createEvent(),f=t.createEvent(),g=t.createEvent(),E=t.createEvent(),A=t.createEvent(),b=t.createEvent(),P=t.createEvent(),I=t.createEvent(),T=t.createEvent(),C=t.createEvent(),O=t.createEvent(),M=t.createEvent(),S=t.createEvent(),D=t.createEvent(),k=t.createEvent(),L=t.createEvent(),x=t.createEvent(),R=t.createEvent(),B=t.createEvent(),F=(0,n.restore)(y,null),N=t.createStore(null,{updateFilter:(e,t)=>!(0,p.isEqual)(e,t)}),U=N.map((e=>e&&(0,l.audioTupleToAudioObject)(e)||null)),W=(0,n.restore)(f,!1),H=(0,n.restore)(C,!1),K=(0,n.restore)(O,null),j=(0,n.restore)(g,null),V=(0,n.restore)(A,0),$=(0,n.restore)(b,0),G=(0,n.restore)(P,0),q=(0,n.restore)(I,0),z=(0,n.restore)(T,1),Y=(0,n.restore)(M,!1),X=(0,n.restore)(S,!1),Q=(0,n.restore)(D,!1),Z=(0,n.restore)(k,!1),J=(0,n.restore)(L,!1),ee=t.createEffect((()=>{const e=(0,a.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");f(e.isPlaying()),C(e.ads.isActive||!1),O(e.ads.getCurrentAd()||null),g(e.getCurrentPlaylist()||null),E(e.getCurrentAudio()||null),A(e.getCurrentProgress()??0),b(0),P(e.getCurrentBuffered()??0),I(e.getVolume()||0),T(d.AudioPlayer.podcastGetPlaybackRate()||1),M(Boolean(d.AudioPlayer.getDurationType())),S(Boolean(m()?.shuffled)),D(Boolean(e.isRepeatCurrentAudio())),k(Boolean(e.isRepeatAll())),e.subscribe(r.AudioPlayerEventType.PLAYER_IS_PLAYING_CHANGED,(e=>{f(e)})),e.subscribe(r.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{g(e.getCurrentPlaylist()||null)})),e.on(this,r.AudioPlayerEventType.PLAYLIST_CLEAR_REQUESTED,(()=>{R()})),e.on(this,r.AudioPlayerEventType.PLAYLIST_CLEARED,(()=>{g(e.getCurrentPlaylist()||null),M(Boolean(d.AudioPlayer.getDurationType())),S(m()?.shuffled??!1),T(d.AudioPlayer.podcastGetPlaybackRate()||1),D(Boolean(e.isRepeatCurrentAudio())),k(Boolean(e.isRepeatAll()))})),e.subscribe(this,r.AudioPlayerEventType.PLAYER_IS_AD_CHANGED,(t=>{C(t||!1),O(e.ads.getCurrentAd()||null)})),e.on(this,[r.AudioPlayerEventType.AD_STARTED,r.AudioPlayerEventType.AD_READY,r.AudioPlayerEventType.AD_DEINITED,r.AudioPlayerEventType.AD_COMPLETED],(()=>{C(e.ads.isActive||!1),O(e.ads.getCurrentAd()||null)})),e.on(this,[r.AudioPlayerEventType.PLAY,r.AudioPlayerEventType.PLAY_REQUESTED],(()=>{x()})),e.on(this,[r.AudioPlayerEventType.PLAY,r.AudioPlayerEventType.PLAY_REQUESTED,r.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,r.AudioPlayerEventType.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE,r.AudioPlayerEventType.PLAYLIST_CLEARED,r.AudioPlayerEventType.CURRENT_CHANGED,r.AudioPlayerEventType.UPDATE],(e=>{E(e||null)})),e.subscribe(r.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,(e=>{B(e)})),e.subscribe(r.AudioPlayerEventType.CURRENT_CHANGED,(()=>{A(0)})),e.subscribe(r.AudioPlayerEventType.PROGRESS,((t,s)=>{L(!1),A(e.ads?.isActive?e.ads.getCurrentProgress():t),b(s)})),e.subscribe(r.AudioPlayerEventType.BUFFERED,(t=>{P(e.ads?.isActive?0:t)})),e.subscribe(r.AudioPlayerEventType.VOLUME,(e=>{I(e)})),e.on(this,r.AudioPlayerEventType.UPDATE,(()=>{M(Boolean(d.AudioPlayer.getDurationType()))})),e.on(this,r.AudioPlayerEventType.START_LOADING,(()=>{L(!0)})),e.on(this,r.AudioPlayerEventType.CAN_PLAY,(()=>{L(!1)})),e.on(this,r.AudioPlayerEventType.ENDED,(()=>{L(!1)})),e.on(this,r.AudioPlayerEventType.FAILED,(()=>{L(!1)})),y(e)})),te=(0,_.attachPlayer)(F,(async(e,t)=>{if(!t)return void e.playAudioItem();const{audio:s,playlist:n,context:a,byPlayerButton:r=!1}=t;e[r?"playByButton":"playAudioItem"].bind(e)({audio:s,playlist:n,context:a})})),ie=(0,_.attachPlayer)(F,((e,t)=>{if(!t)return void e.pauseByButton();const{byChangeChannel:s=!1}=t;e[s?"pauseByChangeChannel":"pauseByButton"].bind(e)()})),oe=(0,_.attachPlayer)(F,(e=>{e.resume()})),se=(0,_.attachPlayer)(F,(e=>{e.playNext()})),ne=(0,_.attachPlayer)(F,(e=>{e.playPrev()})),ae=(0,_.attachPlayer)(F,(e=>{e.playNextByButton()})),re=(0,_.attachPlayer)(F,(e=>{e.playPrevByButton()})),de=(0,_.attachPlayer)(F,((e,{audioEl:t,audio:s})=>{e.setNext(t,s)})),le=(0,_.attachPlayer)(F,((e,t)=>{e.seek(t)})),ce=(0,_.attachPlayer)(F,((e,t)=>{e.seekBySlider(t)})),ue=(0,_.attachPlayer)(F,((e,t)=>{e.setVolume(t)})),_e=(0,_.attachPlayer)(F,(e=>{e.toggleDurationType()})),pe=t.createEffect((()=>{S(m()?.shuffled??!1)})),he=(0,_.attachPlayer)(F,(e=>{e.toggleRepeatCurrentAudio(),D(Boolean(e.isRepeatCurrentAudio())),k(Boolean(e.isRepeatAll()))})),me=(0,_.attachPlayer)(F,(e=>{e.toggleRepeatAll(),D(Boolean(e.isRepeatCurrentAudio())),k(Boolean(e.isRepeatAll()))})),ye=(0,n.attach)({source:(0,n.combine)({ap:F,prevSpeed:z}),effect({ap:e,prevSpeed:t},s){if(!e)throw new Error("Audio player does not initialize");t!==s&&(e.podcastChangePlaybackRate(1!==s&&s<t),T(d.AudioPlayer.podcastGetPlaybackRate()??1))}}),fe=(0,_.attachPlayer)(F,(e=>e.getCurrentPlaylist()??null)),ge=(0,_.attachPlayer)(F,((e,{audio:t,actionType:s,ref:n="",refEl:a=null})=>{e.podcastSetActionRef(t,s,n,a)})),ve=(0,_.attachPlayer)(F,((e,{audioFullId:t,hasDislike:s})=>{e.updateAudioDislikeStatus(t,s)})),Ee=(0,_.attachPlayer)(F,((e,t)=>e?.emitter?.emit(t.eventName,t.data))),Ae=(0,_.attachPlayer)(F,((e,{eventType:t,params:s})=>e.notify(t,...s)));return(0,n.sample)({clock:(0,u.once)(s),target:ee}),(0,n.sample)({clock:E,target:N}),{$isPlaying:W,$isAd:H,$currentAd:K,$currentPlaylist:j,$currentAudio:U,$currentAudioTuple:N,$progress:V,$duration:$,$loadingProgress:G,$volume:q,$negativeDurationTypeEnabled:Y,$isShuffled:X,$isRepeatCurrentAudio:Q,$isRepeatAll:Z,$playbackSpeed:z,$isPending:J,playFx:te,pauseFx:ie,resumeFx:oe,playNextFx:se,playPrevFx:ne,playNextByButtonFx:ae,playPrevByButtonFx:re,setNextFx:de,seekFx:le,seekBySliderFx:ce,updateVolumeFx:ue,toggleNegativeDurationTypeFx:_e,updatedIsShuffledFx:pe,toggleRepeatCurrentAudioFx:he,toggleRepeatAllFx:me,updatePlaybackSpeedFx:ye,getCurrentPlaylistFx:fe,podcastSetActionRefFx:ge,updateAudioDislikeStatusFx:ve,emitFx:Ee,notifyFx:Ae,notifyAudioStartedPlaying:x,notifyPlaylistClearRequested:R,notifyCurrentRadioStationFollowStatusUpdate:B,init:s,getCurrentAudio:()=>{const e=(0,a.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");const t=e.getCurrentAudio();return t?(0,l.audioTupleToAudioObject)(t):null},getPlaylistQueue:m,getPlaylist:({type:e,ownerId:t,albumId:s,accessHash:n,blockId:r})=>{const d=(0,a.getAudioPlayer)();if(!d)throw new Error("Audio player does not initialize");return d.getPlaylist(e,t,s,n,r)||null}}}},803111:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerPodcastActionType:()=>d.AudioPlayerPodcastActionType,ensureAudioPlayerService:()=>l});var n=s(558137),a=s(32489),r=s(43769),d=s(807346);const l=(0,n.makeSharedState)("global/web/audio/player",(()=>(0,r.createAudioPlayerService)({domain:(0,a.createDomain)("global/web/audio/player"),name:"audio/web/audio/player"})),{version:3})},749438:(e,t,s)=>{"use strict";s.d(t,{attachPlayer:()=>a});var n=s(32489);function a(e,t){return(0,n.attach)({source:e,effect(e,s){if(!e)throw new Error("Audio player does not initialize");return t(e,s)}})}},807346:(e,t,s)=>{"use strict";s.d(t,{AudioPlayerPodcastActionType:()=>n});var n,a=s(390578);!function(e){e[e.Play=a.ACTION_PLAY]="Play",e[e.Pause=a.ACTION_PAUSE]="Pause",e[e.Seek=a.ACTION_SEEK]="Seek",e[e.TimeMaker=a.ACTION_TIME_MARKER]="TimeMaker",e[e.Heartbeat=a.ACTION_HEARTBEAT]="Heartbeat"}(n||(n={}))},829071:(e,t,s)=>{"use strict";s.d(t,{createAudioPodcastsFaveAdapter:()=>d});var n=s(20085),a=s(746573),r=s(586049);function d(e,t){const s=(0,a.getEffectorServiceDomain)(e),d=s.createEffect((async e=>{await t.activate(_(e.identity))})),l=s.createEffect((async e=>{await t.deactivate(_(e.identity))})),{fullIdsMapApi:c,$fullIdsMap:u}=(0,r.createFullIdsMap)(s);function _(e){return new n.PodcastAudioIdentity(e)}return t.events.on("activated",(({identity:e})=>{const{fullId:t}=_(e);c.add(t)})),t.events.on("deactivate",(({identity:e})=>{const{fullId:t}=_(e);c.remove(t)})),{$identitiesMap:u,deleteFx:l,addFx:d}}},767072:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPodcastsFavoritesService:()=>_});var n=s(32489),a=s(558137),r=s(425354),d=s(540462),l=s(319756),c=s(560756),u=s(829071);const _=(0,a.makeSharedState)("global/audio/podcasts/favoritesService",(()=>(0,d.partConfigEnabled)("podcast_episode_favorites_service_mobx_web")?(0,u.createAudioPodcastsFaveAdapter)({domain:(0,n.createDomain)("global/audio/podcasts/favoritesService"),name:"global/audio/podcasts/favoritesService"},(0,l.ensureDIRootWebContainer)().resolve(r.PodcastEpisodeFavoritesService)):(0,c.ensureAudioPodcastsFaveService)()),{version:1})},706226:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPodcastsFavoritesService:()=>n.ensureAudioPodcastsFavoritesService});var n=s(767072)},58808:(e,t,s)=>{"use strict";s.d(t,{audioPreviewsService:()=>n});const n=(0,s(983327).ensureAudioPreviewsService)()},943503:(e,t,s)=>{"use strict";s.d(t,{createGroupsMusicWebService:()=>g});var n=s(746573),a=s(466915),r=s(586049),d=s(478455),l=s(97295),c=s(32489),u=s(641633),_=s(71696),p=s(803111),m=s(392358),y=s(138586),f=s(909436);function g(e){const t=(0,n.getEffectorServiceDomain)(e),s=(0,a.ensureGroupsMusicService)(),g=(0,p.ensureAudioPlayerService)(),{$fullIdsMap:E,fullIdsMapApi:A}=(0,r.createFullIdsMap)(t),b=(0,c.attach)({source:(0,c.combine)({groupsMusicIdentitiesMap:s.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:n,audioEl:a=null}){if(!t)throw new Error("Audio not exists");if((0,u.isAddedToGroup)({identity:t,groupsMusicIdentitiesMap:e,groupId:n}))throw new Error(`Audio already in group with id ${n}`);const r=(0,d.getAudioFullId)(t);let l=document.querySelector(`._audio_row_${r}`);l=l==a?null:l;try{n!==t.ownerId&&a&&a.classList.add("audio_row__added"),n!==t.ownerId&&l&&l.classList.add("audio_row__added"),g.notifyFx({eventType:m.AudioPlayerEventType.ADDED,params:[r]}),await s.addFx({groupId:n,trackedIdentity:t}),a&&(a.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(a,!1,!0)),l&&(l.classList.remove("audio_row__deleted"),f.AudioUtils.onRowOver(l,!1,!0)),g.notifyFx({eventType:m.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[t,Boolean(a)&&{audioElement:a}]})}catch(e){throw n!==t.ownerId&&a&&a.classList.remove("audio_row__added"),n!==t.ownerId&&l&&l.classList.remove("audio_row__added"),new Error(`Failed to add audio to group with id ${n}`,{cause:e})}}}),P=(0,c.attach)({source:(0,c.combine)({groupsMusicIdentitiesMap:s.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:n,audioEl:a=null,needShowDeletedAudioRowState:r}){if(!t)throw new Error("Audio not exists");const c=(0,l.getGroupAudioFullId)(t,n),u=(0,_.isGroupAudio)({identity:t,groupsMusicIdentitiesMap:e,groupId:n}),p=e[c];if(!u&&!p)throw new Error(`Audio not found in group with id ${n}`);const E=(0,d.getAudioFullId)(t),A=(0,d.getAudioFullId)(p??t);let b=document.querySelector(`._audio_row_${E}`);b=b==a?null:b;try{a&&!r&&a.classList.remove("audio_row__added"),b&&!r&&b.classList.remove("audio_row__added"),g.notifyFx({eventType:m.AudioPlayerEventType.REMOVED,params:[E,A]}),await s.deleteFx({groupId:n,audioId:p?p.id:t.id}),a&&r&&(a.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(a,!1,!0),a.classList.remove("audio_row__added")),b&&r&&(b.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(b,!1,!0),b.classList.remove("audio_row__added"));const e=g.getPlaylist({type:y.AudioPlaylist.TYPE_PLAYLIST,ownerId:n,albumId:y.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(A),g.notifyFx({eventType:m.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[t,Boolean(a)&&{audioElement:a}]})}catch(e){throw a&&a.classList.add("audio_row__added"),a&&r&&(a.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(a,!1,!0)),b&&b.classList.add("audio_row__added"),b&&r&&(b.classList.add("audio_row__deleted"),f.AudioUtils.onRowOver(b,!1,!0)),new Error(`Failed to delete audio from group with id ${n}`,{cause:e})}}});return(0,c.sample)({clock:[b,P],filter:({audio:e})=>Boolean(e),fn:({audio:e,groupId:t})=>(0,l.getGroupAudioFullId)(e,t),target:A.add}),(0,c.sample)({clock:[b.finally,P.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e,groupId:t}})=>(0,l.getGroupAudioFullId)(e,t),target:A.remove}),{$loadingIdentitiesMap:E,$identitiesMap:s.$identitiesMap,addFx:b,deleteFx:P}}},815733:(e,t,s)=>{"use strict";s.d(t,{ensureGroupsAudioMusicWebService:()=>l,isAddedToGroup:()=>d.isAddedToGroup});var n=s(558137),a=s(32489),r=s(943503),d=s(641633);const l=(0,n.makeSharedState)("global/web/audio/groupsMusic",(()=>(0,r.createGroupsMusicWebService)({domain:(0,a.createDomain)("global/web/audio/groupsMusic"),name:"global/web/audio/groupsMusic"})),{version:3})},641633:(e,t,s)=>{"use strict";s.d(t,{isAddedToGroup:()=>r});var n=s(35215),a=s(97295);function r({identity:e,groupsMusicIdentitiesMap:t,groupId:s}){if(!e||!(0,n.isNumber)(s))return!1;return(0,a.getGroupAudioFullId)(e,s)in t}},71696:(e,t,s)=>{"use strict";s.d(t,{isGroupAudio:()=>d});var n=s(35215),a=s(205337),r=s(641633);function d({identity:e,groupsMusicIdentitiesMap:t,groupId:s}){return!(!e||!(0,n.isNumber)(s))&&(e.ownerId===(0,a.convertToGroupMusicId)(s)||(0,r.isAddedToGroup)({identity:e,groupsMusicIdentitiesMap:t,groupId:s}))}},995022:(e,t,s)=>{"use strict";s.d(t,{createMusicAudioMyDislikesService:()=>d});var n=s(478455),a=s(32489),r=s(761178);function d({domain:e,$audio:t,$audioEl:s}){const d=(0,r.ensureAudioDislikesInMyMusicWebService)(),l=s??e.createStore(null),c=t.map((e=>e&&e.id&&e.ownerId?{id:e.id,ownerId:e.ownerId,trackCode:e.trackCode}:null)),u=(0,a.combine)({identity:c,fullIdsMap:d.$dislikesInitializedIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,n.getAudioFullId)(e)])));return{$isAudioDisliked:(0,a.combine)({audio:t,myAudioDislikesIdentitiesMap:d.$dislikesIdentitiesMap,isDislikeActionInitialized:u}).map((({audio:e,myAudioDislikesIdentitiesMap:t,isDislikeActionInitialized:s})=>(0,r.hasDislike)({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:s}))),$isDislikeActionLoading:(0,a.combine)({identity:c,fullIdsMap:d.$dislikesLoadingIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,n.getAudioFullId)(e)]))),addFx:(0,a.attach)({source:(0,a.combine)({audio:t,audioEl:l}),async effect({audio:e,audioEl:t},s){await d.addDislikeFx({audio:e,audioEl:t,skipDeletionAudioFromMyMusic:s?.skipDeletionAudioFromMyMusic,needReloadTrackCode:s?.needReloadTrackCode})}}),removeFx:(0,a.attach)({source:(0,a.combine)({audio:t,audioEl:l}),async effect({audio:e,audioEl:t},s){await d.removeDislikeFx({audio:e,audioEl:t,needReloadTrackCode:s?.needReloadTrackCode})}})}}},674522:(e,t,s)=>{"use strict";s.d(t,{createMusicAudioMyDislikesService:()=>n.createMusicAudioMyDislikesService});var n=s(995022)},477227:(e,t,s)=>{"use strict";s.d(t,{createMyMusicWebService:()=>T});var n=s(746573),a=s(586049),r=s(478455),d=s(584053),l=s(32489),c=s(803111),u=s(392358),_=s(678531),p=s(432582),m=s(138586),y=s(909436),f=s(752740),g=s(972623),E=s(169818),A=s(518051),b=s(322100),P=s(540462),I=s(395654);function T(e){const t=(0,P.partConfigEnabled)("enabled_mm_and_dislikes_mobx_services"),s=(0,n.getEffectorServiceDomain)(e),E=(0,b.ensureMyMusicService)(),A=(0,c.ensureAudioPlayerService)(),T=new d.Emitter,{$fullIdsMap:O,fullIdsMapApi:M}=(0,a.createFullIdsMap)(s),{$fullIdsMap:S,fullIdsMapApi:D}=(0,a.createFullIdsMap)(s),k=(0,l.attach)({source:(0,l.combine)({myMusicIdentitiesMap:E.$identitiesMap,initializedIdentitiesMap:O}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:s},{audio:n,audioEl:a=null,isNotificationDisabled:d,forceAddToStoreParams:l,needReloadTrackCode:c,audioRef:m}){if(!n)throw new Error("Audio not exist");const f=Boolean(s[(0,r.getAudioFullId)(n)]);if((0,_.isMy)({identity:n,myMusicIdentitiesMap:e,isMyMusicActionInitialized:f,userId:window.vk.id}))throw new Error('Audio already in "My Music"');const g=(0,r.getAudioFullId)(n);let b=document.querySelector(`._audio_row_${g}`);b=b==a?null:b;let P=!1,O=!1;try{t||(a&&(a.closest(".CatalogBlock__my_audios_block")||a.closest(".CatalogBlock__my_audios"))&&(P=!0),b&&(b.closest(".CatalogBlock__my_audios_block")||b.closest(".CatalogBlock__my_audios"))&&(O=!0),a&&!P&&a.classList.add("audio_row__added"),b&&!O&&b.classList.add("audio_row__added")),A.notifyFx({eventType:u.AudioPlayerEventType.ADDED,params:[g]});let e=n.trackCode;const s=n.context;if(c){const t=await C(n,a,m);t&&(e=t)}const r=async()=>{l?E.addToStore(l):await E.addFx({userId:window.vk.id,trackedIdentity:{...n,ref:s,trackCode:e}})};t&&E.isOwned?E.isOwned((0,I.toMusicAudioIdentity)(n))&&E.restoreFx?await E.restoreFx({identity:n}):await r():l?E.addToStore(l):await r(),t||(a&&P&&(a.classList.remove("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0)),b&&O&&(b.classList.remove("audio_row__deleted"),y.AudioUtils.onRowOver(b,!1,!0))),d||T.emit(p.MyMusicWebServiceEventType.AudioAddedToMyMusic),A.notifyFx({eventType:u.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[n,Boolean(a)&&{audioElement:a}]})}catch(e){throw t||(a&&(a.classList.remove("audio_row__added"),P&&(a.classList.add("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0))),b&&(b.classList.remove("audio_row__added"),O&&(b.classList.add("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0)))),new Error('Failed to add audio to "My Music"',{cause:e})}}}),L=(0,l.attach)({source:(0,l.combine)({myMusicIdentitiesMap:E.$identitiesMap,initializedIdentitiesMap:O}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:s},{audio:n,audioEl:a=null,forceRemoveFromStoreParams:d,audioRef:l,needReloadTrackCode:c}){if(!n)throw new Error("Audio not exist");const p=(0,r.getAudioFullId)(n),b=Boolean(s[p]),P=(0,_.isMy)({identity:n,myMusicIdentitiesMap:e,isMyMusicActionInitialized:b,userId:window.vk.id}),I=e[p];if(!P&&!I)throw new Error('Audio not found in "My Music"');let T=document.querySelector(`._audio_row_${p}`);T=T==a?null:T;let O=!1,M=!1;t||(a&&(a.closest(".CatalogBlock__my_audios_block")||a.closest(".CatalogBlock__my_audios"))&&(O=!0),T&&(T.closest(".CatalogBlock__my_audios_block")||T.closest(".CatalogBlock__my_audios"))&&(M=!0));const S=(0,r.getAudioFullId)(I??n);try{t||(a&&a.classList.remove("audio_row__added"),T&&T.classList.remove("audio_row__added")),A.notifyFx({eventType:u.AudioPlayerEventType.REMOVED,params:[p,S]}),d?E.removeFromStore(d):await E.deleteFx({identity:I??n}),c?C(n,a,l).then((e=>{(0,f.onAdditionalEvent)(a,n,{type:g.TYPE_REMOVED,trackCode:e||n.trackCode})})):(0,f.onAdditionalEvent)(a,n,{type:g.TYPE_REMOVED,trackCode:n.trackCode}),t||(a&&O&&(a.classList.add("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0)),T&&M&&(T.classList.add("audio_row__deleted"),y.AudioUtils.onRowOver(T,!1,!0)));const e=A.getPlaylist({type:m.AudioPlaylist.TYPE_PLAYLIST,ownerId:window.vk.id,albumId:m.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(S),A.notifyFx({eventType:u.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[n,Boolean(a)&&{audioElement:a}]})}catch(e){throw t||(a&&(O?(a.classList.remove("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0)):a.classList.add("audio_row__added")),T&&(M?(T.classList.remove("audio_row__deleted"),y.AudioUtils.onRowOver(a,!1,!0)):T.classList.add("audio_row__added"))),new Error('Failed to delete audio from "My Music"',{cause:e})}}});return(0,l.sample)({clock:[k.done,L.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,r.getAudioFullId)(e),target:M.add}),(0,l.sample)({clock:[k,L],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,r.getAudioFullId)(e),target:D.add}),(0,l.sample)({clock:[k.finally,L.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,r.getAudioFullId)(e),target:D.remove}),{$initializedIdentitiesMap:O,$loadingIdentitiesMap:S,$identitiesMap:E.$identitiesMap,addFx:k,deleteFx:L,events:T.listenable,restoreFx:E.restoreFx,isOwned:E.isOwned}}async function C(e,t,s){const n=(0,A.getContextPlaylist)(t)??{context:s,playlist:null};return await(0,E.getAudioTrackCodeFromPlaylist)(n?.playlist,e)??null}},432582:(e,t,s)=>{"use strict";var n;s.d(t,{MyMusicWebServiceEventType:()=>n}),function(e){e.AudioAddedToMyMusic="audioAddedToMyMusic"}(n||(n={}))},270935:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioMusicWebService:()=>l,isMy:()=>d.isMy});var n=s(558137),a=s(32489),r=s(477227),d=s(678531);const l=(0,n.makeSharedState)("global/web/audio/myMusic",(()=>(0,r.createMyMusicWebService)({domain:(0,a.createDomain)("global/web/audio/myMusic"),name:"global/web/audio/myMusic"})),{version:3})},678531:(e,t,s)=>{"use strict";s.d(t,{isMy:()=>a});var n=s(478455);function a({identity:e,myMusicIdentitiesMap:t,isMyMusicActionInitialized:s,userId:a}){if(!e)return!1;return(0,n.getAudioFullId)(e)in t||!s&&e.ownerId===a}},41523:(e,t,s)=>{"use strict";s.d(t,{RadiostationStatCollector:()=>l});var n=s(558137),a=s(317216),r=s(314309),d=s(847154);class l{constructor(){this.logAddAudioToMyMusic=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logDeleteAudioFromMyMusic=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logAddAudioToMyMusicInFullList=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logDeleteAudioFromMyMusicInFullList=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logAddAudioToMyMusicInFollowed=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_FOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},source_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logDeleteAudioFromMyMusicInFollowed=e=>{this.actionCollector.logEvent({type:a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM,[a.ActionProductionStatEventTypes.TYPE_AUDIO_TAP_EVENT_ITEM]:{tap_event:{action:a.EventItemType.AUDIO_RADIOSTATION_UNFOLLOW,from_player:!1},event:{nav_info:{track_code:e?.sourceInfo},source_info:{track_code:e?.sourceInfo},...c(e)}}})},this.logClickGoto=e=>{const t={type:a.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM,[a.ClickProductionStatEventTypes.TYPE_AUDIO_TAP_GOTO_EVENT_ITEM]:{...u(e)}};this.clickCollector.logEvent(t,{type:a.EventItemType.MUSIC_AUDIO})},this.logNavigationEventsRadiostations=e=>{const t={screen:"audio_catalog",screen_to:"audio_catalog",subtype:a.NavigationProductionStatEventTypes.GO,item:{type:a.EventItemType.CATALOG_ITEM,track_code:e.item},destination_item:{type:a.EventItemType.CATALOG_ITEM,track_code:e.destinationItem},type:a.NavigationProductionStatEventTypes.TYPE_AUDIO_DOMAIN_EVENT_ITEM,[a.NavigationProductionStatEventTypes.TYPE_AUDIO_DOMAIN_EVENT_ITEM]:{client_server_time:(0,d.getClientServerTime)((0,d.getClientTime)())}};this.navigationCollector.logEvent(t)},this.productCollector=new r.ProductionStatCollector,this.actionCollector=new r.ActionStatCollector(this.productCollector),this.clickCollector=new r.ClickStatCollector(this.productCollector),this.navigationCollector=new r.NavigationStatCollector(this.productCollector)}}function c(e){return{client_server_time:(0,d.getClientServerTime)((0,d.getClientTime)()),entities:[{type:"radio",id:e.radioStationId}],pos_ids:[e.radioPositionIndex]}}function u(e){return{event:{client_server_time:(0,d.getClientServerTime)((0,d.getClientTime)()),nav_info:{track_code:e?.navInfo},source_info:{track_code:e?.sourceInfo}},target_nav_info:{url:e?.targetInfo}}}l.ensure=(0,n.makeSharedState)("RadioStatCollector",(()=>new l),{version:1})},555870:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistLayerListener:()=>O});var n=s(434518),a=s(763812),r=s(70148),d=s(391751),l=s(384810),c=s(983567),u=s(280494),_=s(519290),p=(0,a._)("_emitter"),m=(0,a._)("_player"),y=(0,a._)("_playlistIdentity"),f=(0,a._)("_trackTuples"),g=(0,a._)("_trackRows"),E=(0,a._)("_playButton"),A=(0,a._)("_isCurrentPlayerPlaylist"),b=(0,a._)("_getCurrentPlayerTrackIdentity"),P=(0,a._)("_queryPlayButton"),I=(0,a._)("_connectEvents"),T=(0,a._)("_handlePlayButtonClick"),C=(0,a._)("_handleTrackRowClick");class O{get events(){return(0,n._)(this,p)[p].listenable}constructor({emitterFactory:e,playlistIdentity:t,trackTuples:s,trackRows:a,container:d,playButtonClassName:O}){Object.defineProperty(this,A,{get:M,set:void 0}),Object.defineProperty(this,b,{value:S}),Object.defineProperty(this,P,{value:D}),Object.defineProperty(this,I,{value:k}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),(0,n._)(this,T)[T]=()=>{if(!(0,n._)(this,m)[m].isPaused())try{let e;const t=(0,n._)(this,b)[b]();if(t)e=t;else{const t=(0,n._)(this,f)[f].at(0);t&&(e=r.OwnedIdentity.fromRawId((0,_.getAudioFullId)(t)))}if(!e)return;(0,n._)(this,p)[p].emit("play",{playlistIdentity:(0,n._)(this,y)[y],trackIdentity:e})}catch(e){console.error(e)}},(0,n._)(this,C)[C]=(e,t)=>{if(!(0,n._)(this,m)[m].isPaused())try{const s=(0,l.getAudioFromEl)(e,!1);if(!s)return;const a=(0,u.mapAudioTupleToMusicAudioIdentity)(s);(0,n._)(this,p)[p].emit("playTrack",{playlistIdentity:(0,n._)(this,y)[y],trackIdentity:a,trackPosition:t})}catch(e){console.error(e)}},(0,n._)(this,y)[y]=t,(0,n._)(this,f)[f]=s,(0,n._)(this,g)[g]=a,(0,n._)(this,E)[E]=(0,n._)(this,P)[P](d,O),(0,n._)(this,m)[m]=(0,c.getAudioPlayer)(),(0,n._)(this,p)[p]=e.create(),(0,n._)(this,I)[I]()}}function M(){const e=(0,n._)(this,m)[m].getCurrentPlaylist();if(e)try{const t=(0,u.mapPlaylistToMusicPlaylistIdentity)(e);(0,d.compareIdentities)((0,n._)(this,y)[y],t)}catch{return!1}}function S(){if(!(0,n._)(this,A)[A])return null;try{const e=(0,n._)(this,m)[m].getCurrentAudio();return e?(0,u.mapAudioTupleToMusicAudioIdentity)(e):null}catch(e){return console.error(e),null}}function D(e,t){return e.querySelector(`.${t}`)}function k(){(0,n._)(this,E)[E]&&(0,n._)(this,E)[E].addEventListener("click",(0,n._)(this,T)[T]),(0,n._)(this,g)[g].forEach(((e,t)=>{const s=t+1;e.addEventListener("click",(()=>{(0,n._)(this,C)[C](e,s)}))}))}},984578:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistLayerListener:()=>n.MusicPlaylistLayerListener});var n=s(555870)},233696:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistStatsCollector:()=>P});var n=s(434518),a=s(763812),r=s(331635),d=s(132028),l=s(694132),c=s(550490),u=s(317216),_=s(726483),p=s(298005),m=s(251234),y=s(749903),f=s(314309),g=(0,a._)("_actionCollector"),E=(0,a._)("_clickCollector"),A=(0,a._)("_logCommonPlay"),b=(0,a._)("_getSource");class P{logOpen({playlistIdentity:e}){const t={event:(0,_.collectOpenData)({playlistIdentity:e,source:(0,n._)(this,b)[b](e),navScreenProvider:this.navScreenProvider}),target_nav_info:[]},s={type:u.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO,[u.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO]:t};(0,n._)(this,E)[E].logEvent(s,{type:u.EventItemType.MUSIC_PLAYLIST_GOTO})}logPlay({playlistIdentity:e,trackIdentity:t}){const s=(0,p.collectPlayData)({playlistIdentity:e,source:(0,n._)(this,b)[b](e),navScreenProvider:this.navScreenProvider,trackIdentity:t});(0,n._)(this,A)[A](s)}logPlayTrack({playlistIdentity:e,trackIdentity:t,trackPosition:s}){const a=(0,m.collectPlayTrackData)({playlistIdentity:e,trackIdentity:t,trackPosition:s,source:(0,n._)(this,b)[b](e),navScreenProvider:this.navScreenProvider});(0,n._)(this,A)[A](a)}constructor(e,t){Object.defineProperty(this,A,{value:I}),Object.defineProperty(this,b,{value:T}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),this.cookie=e,this.navScreenProvider=t;const s=new f.ProductionStatCollector;(0,n._)(this,g)[g]=new f.ActionStatCollector(s),(0,n._)(this,E)[E]=new f.ClickStatCollector(s)}}function I(e){const t={event:e,type:u.EventItemSubType.MUSIC_PLAYLIST_START,target_nav_info:[]},s={type:u.ActionProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_PLAY,[u.ActionProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_PLAY]:t};(0,n._)(this,g)[g].logEvent(s)}function T({accessRawId:e}){return(0,y.getOwnedAudioListSource)(e,{cookie:this.cookie})}P=(0,r.__decorate)([d.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===c.Cookie?Object:c.Cookie,void 0===l.AudioNavScreenProvider?Object:l.AudioNavScreenProvider])],P)},735754:(e,t,s)=>{"use strict";s.d(t,{collectCommonData:()=>a});var n=s(847154);function a({navScreenProvider:e,playlistIdentity:t,source:s}){return{client_server_time:(0,n.getClientServerTime)(),source_info:{track_code:s?.ref||void 0},nav_info:{track_code:e.catalogSectionId??void 0},entities:r(t)}}function r(e){return[{type:"playlist",id:e.accessRawId}]}},726483:(e,t,s)=>{"use strict";s.d(t,{collectOpenData:()=>r});var n=s(8520),a=s(735754);function r(e){return{...(0,a.collectCommonData)(e),pos_ids:function(e){const t=e?.index;return(0,n.isNumber)(t)?[t+1]:void 0}(e.source)}}},298005:(e,t,s)=>{"use strict";s.d(t,{collectPlayData:()=>a});var n=s(735754);function a(e){const t=(0,n.collectCommonData)(e);return{...t,entities:[...t.entities??[],(s=e.trackIdentity,{type:"audio",id:s.accessRawId})]};var s}},251234:(e,t,s)=>{"use strict";s.d(t,{collectPlayTrackData:()=>a});var n=s(298005);function a(e){return{...(0,n.collectPlayData)(e),pos_ids:[e.trackPosition]}}},348191:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistStatsCollector:()=>n.MusicPlaylistStatsCollector});var n=s(233696)},197689:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipApplication:()=>d});var n=s(474848),a=s(865708),r=s(530928);function d({target:e,portalRoot:t,onShownChange:s}){return(0,n.jsx)(a.AppRootProvider,{children:(0,n.jsx)(r.AudioRowMoreTooltipContainer,{onShownChange:s,target:e,portalRoot:t})})}},377360:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipController:()=>f});var n=s(434518),a=s(763812),r=s(142278),d=s(197689),l=s(584053),c=s(558137),u=s(270559),_=(0,a._)("_initiator"),p=(0,a._)("_emitter"),m=(0,a._)("_target"),y=(0,a._)("_handleShownChange");class f{get isMounted(){return this.checkIsMounted()}get events(){return(0,n._)(this,p)[p].listenable}mount(e,t){this.checkIsMounted(e)||((0,n._)(this,m)[m]=e),this.isShown=!0,(0,n._)(this,_)[_].render({target:e,portalRoot:t,onShownChange:(0,n._)(this,y)[y]})}unmount(){this.checkIsMounted()&&(0,n._)(this,_)[_].unmount(),(0,n._)(this,m)[m]=null,this.isShown=!1,(0,n._)(this,p)[p].emit(u.AudioRowMoreTooltipControllerEventType.Closed)}checkIsMounted(e){return(!e||e===(0,n._)(this,m)[m])&&(0,n._)(this,_)[_].isMounted()}constructor(){Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),this.isShown=!1,(0,n._)(this,_)[_]=(0,r.createReactInitiator)(d.AudioRowMoreTooltipApplication),(0,n._)(this,p)[p]=new l.Emitter,(0,n._)(this,m)[m]=null,(0,n._)(this,y)[y]=e=>{this.isShown=e,e||(this.unmount(),(0,n._)(this,p)[p].emit(u.AudioRowMoreTooltipControllerEventType.Closed))}}}f.ensure=(0,c.makeSharedState)("audio/audioPage/audioRow/moreTooltip/controller",(()=>new f),{version:2})},189942:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>a.AudioRowMoreTooltipControllerEventType});var n=s(377360),a=s(270559)},270559:(e,t,s)=>{"use strict";var n;s.d(t,{AudioRowMoreTooltipControllerEventType:()=>n}),function(e){e.Closed="closed"}(n||(n={}))},269229:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipContainer:()=>R});var n=s(474848),a=s(507852),r=s(723723),d=s(161134),l=s(575489),c=s(485749),u=s(203788),_=s(223173),p=s(136017),m=s(715782),y=s(684540),f=s(490363),g=s(694430),E=s(168799),A=s(293721),b=s(235447),P=s(296540),I=s(866467),T=s(540462),C=s(836141),O=s(545549),M=s(35215),S=s(90345);const D=(0,T.partConfigEnabled)("audio_tooltip_copy_link_web"),k=(0,T.partConfigEnabled)("dislikes_web_enabled")||(0,T.partConfigEnabled)("redesign_audio_player_tooltip_dislikes_web_enabled"),L=(0,b.ensureAudioRowMoreTooltipService)(),{dislikesService:x}=L;function R({target:e,portalRoot:t=null,onShownChange:s}){const b=(0,A.useUnit)(L.setIsShowTooltip),T=(0,A.useUnit)(L.$audio),R=(0,A.useUnit)(L.$isAudioClaimed),B=(0,A.useUnit)(L.$isEpisode),F=(0,A.useUnit)(L.$isAlbum),N=(0,A.useUnit)(L.$isCurrentAlbumSnippet),U=(0,A.useUnit)(L.$isAudioHasSnippet),W=(0,A.useUnit)(L.$audioPlaylists),H=(0,A.useUnit)(L.$isShowAllPlaylists),K=(0,A.useUnit)(L.$isAudioPlaylistsFetching),j=(0,A.useUnit)(L.$loadingAddToPlaylistFullIdsMap),V=(0,A.useUnit)(L.$addedPlaylistsFullIdsMap),$=(0,A.useUnit)(L.$initializedPlaylistsFullIdsMap),G=(0,A.useUnit)(L.$currentGroupId),q=(0,A.useUnit)(x.$isAudioDisliked),z=(0,A.useUnit)(x.$isDislikeActionLoading),Y=U,X=D&&!R&&!B,Q=k&&!R&&!B,Z=!R&&F&&!N,J=!R&&!B,ee=(0,A.useUnit)(L.copyAudioLinkFx),te=(0,A.useUnit)(L.shareAudioFx),ie=(0,A.useUnit)(L.openEpisodeFx),oe=(0,A.useUnit)(L.openAlbumFx),se=(0,A.useUnit)(L.setNextInPlayerQueueFx),ne=(0,A.useUnit)(x.addFx),ae=(0,A.useUnit)(x.removeFx),re=(0,A.useUnit)(L.addAudioToNewPlaylistFx),de=(0,A.useUnit)(L.toggleAddAudioToPlaylistFx),le=(0,A.useUnit)(L.showAllPlaylistsFx),ce=(0,P.useMemo)((()=>q?"audio-show-more-tooltip-remove-dislike-button":"audio-show-more-tooltip-add-dislike-button"),[q]);return(0,P.useEffect)((()=>(b(!0),()=>{b(!1)})),[]),(0,n.jsx)(a.DropdownActionSheet,{usePortal:t??!1,width:235,trigger:"hover",restoreFocus:!1,placement:"auto-end",content:(0,n.jsxs)(n.Fragment,{children:[Y&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:(0,n.jsx)(l.Icon20ListPlayOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.LISTEN_NEXT,T?.trackCode),se()),"data-testid":"audio-row-more-tooltip-set-next-audio",children:I.getLang("audio_set_next_audio")}),X&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:(0,n.jsx)(c.Icon20CopyOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.COPY_LINK,T?.trackCode),ee()),"data-testid":"audio-row-more-tooltip-copy-audio-link",keepOpen:!0,children:I.getLang("audio_copy_audio_link")}),B&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:(0,n.jsx)(u.Icon20PodcastOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:ie,"data-testid":"audio-row-more-tooltip-podcast-open-episode",children:I.getLang("audio_podcast_open_episode")}),!R&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:(0,n.jsx)(_.Icon20ShareOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.SHARE,T?.trackCode),te()),"data-testid":"audio-row-more-tooltip-share-audio",children:I.getLang("audio_share_audio")}),Q&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:q?(0,n.jsx)(p.Icon20ThumbsDown,{className:(0,r.getColorClass)("color_icon_secondary")}):(0,n.jsx)(m.Icon20ThumbsDownOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),keepOpen:q,onClick:()=>{if(q)return(0,S.logSearchAudioClick)(S.SearchClickActionMap.REMOVE_DISLIKE,T?.trackCode),void ae({needReloadTrackCode:!0});(0,S.logSearchAudioClick)(S.SearchClickActionMap.DISLIKE,T?.trackCode),ne({skipDeletionAudioFromMyMusic:(0,M.isNumber)(G),needReloadTrackCode:!0})},disabled:z,"data-testid":ce,children:I.getLang("audio_action_dislike")}),Z&&(0,n.jsx)(a.DropdownActionSheet.Item,{before:(0,n.jsx)(y.Icon20VinylOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.OPEN_ALBUM,T?.trackCode),oe()),"data-testid":"audio-row-more-tooltip-open-album",children:I.getLang("audio_open_album")}),J&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.DropdownActionSheet.Separator,{}),(0,n.jsx)(d.DropdownActionSubSheet,{before:(0,n.jsx)(f.Icon20ListPlusOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),disabled:K,shown:!0,sheet:(0,n.jsx)(n.Fragment,{children:K?(0,n.jsx)(d.DropdownActionSubSheet.Item,{loading:!0,disabled:!0,keepOpen:!0,children:I.getLang("audio_action_sub_sheet_additional_loading")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.DropdownActionSubSheet.Item,{before:(0,n.jsx)(g.Icon24Add,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.ADD_TO_PLAYLIST,T?.trackCode),re()),"data-testid":"audio-row-more-tooltip-add-to-new-playlist",children:I.getLang("audio_add_to_new_pl")}),W?.map(((e,t)=>{if(!T||!e)return null;const s=(0,C.getAudioPlaylistId)(T.id,e.id),a=s in $?s in V:e.hasTargetAudio;return(0,n.jsx)(P.Fragment,{children:(0,n.jsx)(d.DropdownActionSubSheet.Item,{keepOpen:!0,loading:!!T&&s in j,before:a?(0,n.jsx)(E.Icon20Check,{className:(0,r.getColorClass)("color_icon_secondary")}):null,onClick:()=>((0,S.logSearchAudioClick)(S.SearchClickActionMap.ADD_TO_PLAYLIST,T?.trackCode),de(e)),"data-testid":"audio-row-more-tooltip-add-to-playlist",children:e.title??""})},null===e.id?t:e.id)})),H&&(0,n.jsx)(d.DropdownActionSubSheet.Item,{onClick:le,"data-testid":"audio-row-more-tooltip-show-all-playlists",children:I.getLang("audio_row_show_all_playlists")})]})}),children:I.getLang("audio_add_to_playlist")})]})]}),shown:!0,onShownChange:s,children:(0,n.jsx)(O.ForwardElementRef,{element:e})})}},541840:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=s(269229)},530928:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=s(541840)},357319:(e,t,s)=>{"use strict";s.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>n.AudioRowMoreTooltipControllerEventType,ensureAudioRowMoreTooltipService:()=>a.ensureAudioRowMoreTooltipService});var n=s(189942),a=s(235447)},2884:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsDataService:()=>C});var n=s(761520),a=s(459899),r=s(8520),d=s(32489),l=s(810068),c=s(921832),u=s(30899),_=s(478455),p=s(586049),m=s(163374),y=s(625523),f=s(602337),g=s(909436),E=s(752740),A=s(972623),b=s(270959),P=s(30052),I=s(836141),T=s(278758);function C({domain:e,$audio:t,$audioTuple:s,$audioEl:f,$isShowTooltip:C}){const S=a.AudioPageProxy.ensure(),D=(0,u.ensureMyAudioPlaylistsService)(),k=e.createEvent(),L=t.map((e=>e&&e.id&&e.ownerId?(0,_.getAudioFullId)({id:e.id,ownerId:e.ownerId}):null)),{$audioPlaylistsDataMap:x,audioPlaylistsDataMapApi:R}=(0,c.createAudioPlaylistsDataMap)(e),{$fullIdsMap:B,fullIdsMapApi:F}=(0,p.createFullIdsMap)(e),{$fullIdsMap:N,fullIdsMapApi:U}=(0,p.createFullIdsMap)(e),{$fullIdsMap:W,fullIdsMapApi:H}=(0,p.createFullIdsMap)(e),{$fullIdsMap:K,fullIdsMapApi:j}=(0,p.createFullIdsMap)(e),V=(0,d.combine)({audioFullId:L,audioPlaylistsDataMap:x}).map((({audioFullId:e,audioPlaylistsDataMap:t})=>Boolean(e)&&(0,r.isString)(e)?t[e]??null:null)),{$audioPlaylists:$,$isShowAllPlaylists:G,$newPlaylistHash:q}=(0,y.reshape)({source:V,shape:{$audioPlaylists:e=>e?.playlists||[],$isShowAllPlaylists:e=>e?.isShowAllPlaylists||!1,$newPlaylistHash:e=>e?.newPlaylistHash||null}}),z=(0,d.combine)({audioFullId:L,loadingFetchingFullIdsMap:B}).map((({audioFullId:e,loadingFetchingFullIdsMap:t})=>!!e&&Boolean(t[e]))),Y=e.createEffect((async e=>{if(!e)throw new Error("Audio not exists");const t=M(S);try{const s=await n.ajax.promisifiedPost("al_audio.php",{act:"playlists_by_audio",owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id});if(!s)throw new Error("Unknown error when fetching playlists by audio");const[a,r,d]=s;return{playlists:(a||[]).map(O),isShowAllPlaylists:r||!1,newPlaylistHash:d||null}}catch(e){throw new Error("Error when fetching playlists by audio",{cause:e})}})),X=(0,d.attach)({source:t,effect:async e=>Y(e)}),Q=(0,d.attach)({source:(0,d.combine)({audioTuple:s,newPlaylistHash:q}),effect({audioTuple:e,newPlaylistHash:t}){if(!e)throw new Error("Audio not exists");if(!t)throw new Error("Playlist hash not exists");const s=M(S);g.AudioUtils.editPlaylist(s,!1,"edit",{addAudio:e,newPlaylistHash:t,onSavePlaylistDone(){k()}})}}),Z=(0,d.attach)({source:(0,d.combine)({audioEl:f,addedPlaylistsFullIdsMap:W,initializedPlaylistsFullIdsMap:K,addedAudiosMap:D.$addedAudiosMap}),async effect({audioEl:e,addedPlaylistsFullIdsMap:t,initializedPlaylistsFullIdsMap:s,addedAudiosMap:n},{audio:a,playlist:r}){if(!a||!e)throw new Error("Audio not exists");const d=(0,I.getAudioPlaylistId)(a.id,r.id),l=d in s?d in t:r.hasTargetAudio;if(D.setUserId(window.vk.id),l){const e=n[(0,m.getPlaylistAudioFullId)({playlist:{id:r.id,ownerId:r.ownerId},originalAudio:a})]??{id:a.id,ownerId:window.vk.id};await D.deleteAudioFx({originalAudioIdentity:a,audioIdentity:e,playlistId:r.id})}else await D.addAudioFx({audioIdentity:a,playlistId:r.id});(0,E.onAdditionalEvent)(e,a,{type:l?A.TYPE_REMOVED:A.TYPE_ADDED,subtype:A.SUBTYPE_PLAYLIST})}}),J=(0,d.attach)({source:t,async effect(e,t){await Z({audio:e,playlist:t})}}),ee=(0,d.attach)({source:$,async effect(e,t){if(e&&t){for(const s of e){const e=(0,I.getAudioPlaylistId)(t.id,s.id);U.remove(e),H.remove(e),j.remove(e)}R.remove((0,_.getAudioFullId)(t))}}}),te=(0,d.attach)({source:t,effect(e){if(!e)throw new Error("Audio not exists");const t=M(S);(0,b.showBox)("al_audio.php?act=more_playlists_add",{owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id},{params:{bodyStyle:"padding: 0px",width:560},onDone(){ee(e)}})}});return(0,d.sample)({source:V,clock:(0,d.combine)({audio:t,isShowTooltip:C}),filter:(e,{isShowTooltip:t,audio:s})=>t&&!e&&Boolean(s)&&l.Ranges.isUserId(window.vk.id),target:X}),(0,d.sample)({source:L,clock:X.doneData,filter:e=>Boolean(e),fn:(e,t)=>({audioFullId:e,playlistsData:t}),target:R.add}),(0,d.sample)({clock:Y,filter:e=>Boolean(e),fn:e=>(0,_.getAudioFullId)({id:e.id,ownerId:e.ownerId}),target:F.add}),(0,d.sample)({clock:Y.finally,filter:({params:e})=>Boolean(e),fn:({params:e})=>{const t=e;return(0,_.getAudioFullId)({id:t.id,ownerId:t.ownerId})},target:F.remove}),(0,d.sample)({clock:Z,filter:({audio:e,playlist:t})=>Boolean(e)&&Boolean(t),fn:({audio:e,playlist:t})=>(0,I.getAudioPlaylistId)(e.id,t.id),target:U.add}),(0,d.sample)({clock:Z.finally,filter:({params:{audio:e,playlist:t}})=>Boolean(e)&&Boolean(t),fn:({params:e})=>{const{audio:t,playlist:s}=e;return(0,I.getAudioPlaylistId)(t.id,s.id)},target:U.remove}),(0,d.sample)({source:(0,d.combine)({addedPlaylistsFullIdsMap:W,initializedPlaylistsFullIdsMap:K}),clock:Z.done,filter:(e,{params:{audio:t,playlist:s}})=>Boolean(t)&&Boolean(s),fn:({addedPlaylistsFullIdsMap:e,initializedPlaylistsFullIdsMap:t},{params:s})=>{const{audio:n,playlist:a}=s,r=(0,I.getAudioPlaylistId)(n.id,a.id);return{added:r in t?r in e:a.hasTargetAudio,audioPlaylistId:r}},target:[j.add.prepend((({audioPlaylistId:e})=>e)),(0,P.condition)({if:({added:e})=>e,then:H.remove.prepend((({audioPlaylistId:e})=>e)),else:H.add.prepend((({audioPlaylistId:e})=>e))})]}),(0,T.reset)({clock:k,target:[x,B,N,K,W]}),{$audioPlaylists:$,$isShowAllPlaylists:G,$isAudioPlaylistsFetching:z,$loadingAddToPlaylistFullIdsMap:N,$addedPlaylistsFullIdsMap:W,$initializedPlaylistsFullIdsMap:K,addAudioToNewPlaylistFx:Q,toggleAddAudioToPlaylistFx:J,showAllPlaylistsFx:te}}function O(e){return{ownerId:+e[f.AudioPlaylistTupleKeys.OwnerId],id:+e[f.AudioPlaylistTupleKeys.Id],title:e[f.AudioPlaylistTupleKeys.Title]||null,hasTargetAudio:e[f.AudioPlaylistTupleKeys.HasTargetAudio]||!1,actionHash:e[f.AudioPlaylistTupleKeys.ActionHash]||null}}function M(e){let t;return t=(0,r.isNumber)(e.ownerId)&&e.ownerId<0&&e.canEditGroup?e.ownerId:window.vk.id,t}},836141:(e,t,s)=>{"use strict";function n(e,t){return`${e}_${t}`}s.d(t,{getAudioPlaylistId:()=>n})},775784:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsDataService:()=>n.createAudioPlaylistsDataService});var n=s(2884)},921832:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsDataMap:()=>d});var n=s(32489),a=s(46201),r=s(786979);function d(e){const t=e.createStore({});return{$audioPlaylistsDataMap:t,audioPlaylistsDataMapApi:(0,n.createApi)(t,{add:(e,{audioFullId:t,playlistsData:s})=>(0,a.addPairToMap)(e,{key:t,value:s}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},602337:(e,t,s)=>{"use strict";var n;s.d(t,{AudioPlaylistTupleKeys:()=>n}),function(e){e[e.OwnerId=0]="OwnerId",e[e.Id=1]="Id",e[e.Title=2]="Title",e[e.HasTargetAudio=3]="HasTargetAudio",e[e.ActionHash=4]="ActionHash"}(n||(n={}))},832486:(e,t,s)=>{"use strict";s.d(t,{createAudioRowMoreTooltipService:()=>f});var n=s(746573),a=s(35215),r=s(584053),d=s(32489),l=s(810780),c=s(909436),u=s(459899),_=s(674522),p=s(775784),m=s(803111),y=s(991590);function f(e){const t=(0,n.getEffectorServiceDomain)(e),s=u.AudioPageProxy.ensure(),f=(0,m.ensureAudioPlayerService)(),E=new r.Emitter,A=(0,d.createEvent)(),b=t.createEvent(),P=t.createEvent(),I=(0,d.restore)(b,!1),T=t.createStore(null),C=t.createStore(null),O=t.createStore(null),M=t.createStore(null),S=t.createStore(null),D=(0,d.restore)(P,null),{$audioPlaylists:k,$isShowAllPlaylists:L,$isAudioPlaylistsFetching:x,$loadingAddToPlaylistFullIdsMap:R,$addedPlaylistsFullIdsMap:B,$initializedPlaylistsFullIdsMap:F,addAudioToNewPlaylistFx:N,toggleAddAudioToPlaylistFx:U,showAllPlaylistsFx:W}=(0,p.createAudioPlaylistsDataService)({domain:t,$audio:C,$audioEl:T,$audioTuple:O,$isShowTooltip:I}),H=C.map((e=>!!e&&Boolean(e?.isClaimed))),K=C.map((e=>!!e&&Boolean(c.AudioUtils.isPodcast(e)))),j=C.map((e=>!!e&&Boolean(e?.album))),V=C.map((e=>!!e&&Boolean(e?.isCurrentAlbumSnippet))),$=(0,d.combine)({audioEl:T,audio:C}).map((({audioEl:e,audio:t})=>{if(!e||!t)return!1;const s=c.AudioUtils.getContextPlaylist(e,!0),[n,a]=c.AudioUtils.contextSplit(s);if(!n||"my_audios_block"===a)return Boolean(t?.isInSnippet);switch(n){case"search_results":case"catalog":case"album_page":case"my":case"module":case"user_list":case"group_list":case"edit_playlist":return!0}return Boolean(t?.isInSnippet)})),G=(0,_.createMusicAudioMyDislikesService)({domain:t,$audio:C,$audioEl:T}),q=(0,d.attach)({source:(0,d.combine)({audio:C,audioLinkPathname:M,audioAccessKey:S}),async effect({audio:e,audioLinkPathname:t,audioAccessKey:s}){if(!e)throw new Error("Audio not exist");t?await c.AudioUtils.copyAudioLink(t):await c.AudioUtils.copyAudioLinkByIdentity(e,s??""),E.emit(y.AudioRowMoreTooltipServiceEventType.AudioLinkCopied,e)}}),z=(0,d.attach)({source:(0,d.combine)({audioEl:T,currentAudio:C}),effect:({audioEl:e,currentAudio:t})=>{const n=t||s.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&c.AudioUtils.shareAudio(e??!1,n)}}),Y=(0,d.attach)({source:(0,d.combine)({audioEl:T,currentAudio:C}),effect:({audioEl:e,currentAudio:t})=>{const n=t||s.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&c.AudioUtils.openEpisode(e??!1,n)}}),X=(0,d.attach)({source:(0,d.combine)({audioEl:T,currentAudio:C}),effect:({audioEl:e,currentAudio:t})=>{const n=t||s.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&c.AudioUtils.showAudioAlbum(e??!1,n)}}),Q=(0,d.attach)({source:(0,d.combine)({audioEl:T,audio:C}),effect:({audioEl:e,audio:t})=>{if(!e||!t)throw new Error("Audio not exist");t&&f.setNextFx({audioEl:e,audio:t})}}),Z=(0,d.attach)({source:C,async effect(e){if(!e)throw new Error("Audio not exists");const t=s.ownerId&&(0,a.isNumber)(s.ownerId)&&s.ownerId<0&&s.canAddToGroup&&s.ownerId!==e.ownerId;P(t?-s.ownerId:null)}});return(0,l.spread)({source:A.map(g),targets:{audioEl:T,audioTuple:O,audio:C,audioLinkPathname:M,audioAccessKey:S}}),s.events.on(u.AudioPageEventType.Updated,(()=>{Z()})),{init:A,$audio:C,$audioEl:T,$isAudioClaimed:H,$isEpisode:K,$isAlbum:j,$isCurrentAlbumSnippet:V,$isAudioHasSnippet:$,$audioPlaylists:k,$isShowAllPlaylists:L,$isAudioPlaylistsFetching:x,$loadingAddToPlaylistFullIdsMap:R,$addedPlaylistsFullIdsMap:B,$initializedPlaylistsFullIdsMap:F,$currentGroupId:D,setIsShowTooltip:b,copyAudioLinkFx:q,shareAudioFx:z,openEpisodeFx:Y,openAlbumFx:X,setNextInPlayerQueueFx:Q,addAudioToNewPlaylistFx:N,toggleAddAudioToPlaylistFx:U,showAllPlaylistsFx:W,dislikesService:G,events:E.listenable}}function g(e){return{audioEl:e.audioEl??null,audio:e.audio??null,audioTuple:e.audioTuple,audioLinkPathname:e?.audioLinkPathname||e.audio?.trackPageId||null,audioAccessKey:e?.audioAccessKey||null}}},991590:(e,t,s)=>{"use strict";var n;s.d(t,{AudioRowMoreTooltipServiceEventType:()=>n}),function(e){e.AudioLinkCopied="audioLinkCopied"}(n||(n={}))},235447:(e,t,s)=>{"use strict";s.d(t,{ensureAudioRowMoreTooltipService:()=>d});var n=s(558137),a=s(32489),r=s(832486);const d=(0,n.makeSharedState)("audio/audioPage/audioRow/moreTooltip",(()=>(0,r.createAudioRowMoreTooltipService)({domain:(0,a.createDomain)("audio/audioPage/audioRow/moreTooltip"),name:"audio/audioPage/audioRow/moreTooltip"})),{version:3})},545549:(e,t,s)=>{"use strict";s.d(t,{ForwardElementRef:()=>n});const n=(0,s(296540).forwardRef)((function({element:e,getRootRef:t},s){return t&&a(t,e),a(s,e),null}));function a(e,t){e&&("function"==typeof e?e(t):e.current=t)}},863024:(e,t,s)=>{"use strict";s.d(t,{SaveUserForQuickLoginBox:()=>f});var n=s(474848),a=s(296540),r=s(866467),d=s(314309),l=s(211413),c=s(694244),u=s(782174),_=s(63614),p=s(303800),m=s(908242),y=s(454154);const f=({logoutUrl:e,onLogout:t,onClose:s})=>{const[f,g]=(0,a.useState)(!0),E=()=>{d.vkConnectNavigationCollector.logCancelOnExit(),s()};return(0,a.useEffect)((()=>{d.vkConnectNavigationCollector.logSaveLoginModalShow()}),[]),(0,n.jsxs)(c.ModalBox,{children:[(0,n.jsx)(u.ModalHeader,{onClose:E,closeAriaLabel:r.getLang("global_close"),children:r.getLang("vkconnect_logout_save_user_dialog_title")}),(0,n.jsx)(_.ModalBody,{insetLevel:1,children:(0,n.jsx)(p.Div,{children:(0,n.jsx)(l.SettingsCellSwitch,{description:r.getLang("vkconnect_logout_save_user_dialog_description_text"),checked:f,onChange:e=>g(e.target.checked),children:r.getLang("vkconnect_logout_save_user_dialog_description_title")})})}),(0,n.jsx)(m.ModalFooter,{actions:[(0,n.jsx)(y.Button,{size:"s",mode:"secondary",onClick:E,children:r.getLang("global_cancel")},"close"),(0,n.jsx)(y.Button,{size:"s",mode:"primary",onClick:()=>{let s="&save_user=0";f&&(s="&save_user=1"),t(`${e}${s}`)},children:r.getLang("global_head_logout")},"logout")]})]})}},996473:(e,t,s)=>{"use strict";s.d(t,{logout:()=>l,logoutWithDialog:()=>u});var n=s(474848),a=s(957994),r=s(863024),d=s(211413);const l=(e,t)=>{(0,a.removeLoginCache)(e,t)},c=e=>{l(),window.location.href=e},u=e=>{(0,a.login)("check_user_saved").then((t=>{const{feature_enabled:s,is_user_saved:a}=t;s&&!a?(0,d.showMessageBoxModal)((t=>(0,n.jsx)(r.SaveUserForQuickLoginBox,{...t,logoutUrl:e,onLogout:c})),{width:420}):c(e)})).catch((()=>{c(e)}))}},556351:(e,t,s)=>{"use strict";s.d(t,{writeLogout:()=>l});var n=s(636576),a=s(146175),r=s(64323),d=s(239895);const l=(e="unknown",t="",s="")=>{if(!t)return;let l=0;try{const e=(0,a.imDbGet)(window.vk.id);Object.entries(e).forEach((function(e){const t=e[0],s=e[1];t.startsWith("draft_")&&(s.txt||s.attaches&&s.attaches.length)&&l++}))}catch(e){}s&&((0,r.logSwitcherDropAccount)(s),localStorage.setItem(d.NOTIFY_SWITCH_KEY,"0")),(0,r.prepareLogSwitchAccountEvent)(),(0,n.statlogsValueEvent)("logout_stat",e,t,l)}},15614:(e,t,s)=>{"use strict";s.d(t,{UI_GALLERY_CLASSNAME:()=>n,UI_GALLERY_CONTENT_CLASSNAME:()=>r,UI_GALLERY_INNER_CLASSNAME:()=>a});const n="ui_gallery",a="ui_gallery__inner",r="ui_gallery__inner_cont"},541839:(e,t,s)=>{"use strict";s.d(t,{TOOLTIP_CLASSES_DEFAULT:()=>r,helpHintTooltip:()=>d});var n=s(761520),a=s(250598);const r="feature_intro_tt feature_intro_blue_tt feature_info_tooltip",d=(e,t,s={})=>{let d;const l={...{autoShow:!1,cls:r,content:t.content,withCloseButton:!0,noAutoHideOnWindowClick:!0,onHide:()=>{d?.destroy()},width:230},...s,onDestroy:()=>{var e;"isServerSideHideDisabled"in(e=t)&&e.isServerSideHideDisabled||n.ajax.post("al_index.php",{act:"help_hints_hide",hash:t.helpHintHash,hint_id:t.helpHintId}),t.onHideRequestSent?.(),s.onDestroy&&s.onDestroy()}};return"helpHintId"in t&&(l.helpHintId=t.helpHintId,l.skipShow=Boolean(t.skipShow)),d=new a.ElementTooltip(e,l),window.cur?.destroy?.push((()=>{d?.destroy()})),{tooltip:d}}},965494:(e,t,s)=>{"use strict";s.d(t,{EcoPlateAnalytics:()=>c,EcoPlateAnalyticsContext:()=>u});var n=s(317216),a=s(314309),r=s(19589),d=s(296540),l=s(511897);class c{updateThemeField(){this.theme=r.colorScheme.getMode()===r.ColorSchemeMode.Auto?"system":r.colorScheme.getMode()}init(e,t,s,n){this.securityStatus=e===l.AccountSecurityLevelEnumNames.HAVE_ISSUES?"critical_vulnerabilities":e===l.AccountSecurityLevelEnumNames.HAVE_RECOMMENDATIONS?"protection_recommendations":"securely_protected",this.nftAvatar=t,this.isVerified=s,this.multiaccId=n,this.unsubscribeThemeListener=r.colorScheme.subscribe((()=>{this.updateThemeField()}))}getCommonFields(){return{multiacc_id:this.multiaccId,metadata:JSON.stringify({security_status:this.securityStatus,theme:this.theme,nft_avatar:this.nftAvatar,is_verified:this.isVerified}),options:[{names:n.VkidEcosystemNavigationItem.AVATAR,values:n.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:n.VkidEcosystemNavigationItem.VKID_LK,values:n.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:n.VkidEcosystemNavigationItem.BALANCE,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.QR_SIGN_IN,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.SETTINGS,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.THEME,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.HELP,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.LOGOUT,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.SWITCHER,values:n.VkidEcosystemNavigationItemPlace.MULTIACCOUNT}]}}logTopNavItemClick(e){e!==n.VkidEcosystemNavigationItemEventType.LOGOUT?a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.TAP,item:e,...this.getCommonFields()}):a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.LOGOUT,...this.getCommonFields()},{force:!0})}logThemeChange(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.THEME_CHANGED,item:n.VkidEcosystemNavigationItem.THEME,...this.getCommonFields()})}logTopNavToggle(e){a.vkIdEcosystemNavigationCollector.logEvent({event:e?n.VkidEcosystemNavigationItemEventType.OPEN:n.VkidEcosystemNavigationItemEventType.CLOSE,...this.getCommonFields()})}logApiError(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ERROR_API,...this.getCommonFields()})}logSwitcherError(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ERROR_SWITCHER,...this.getCommonFields()})}logMultiaccAddAnotherTap(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ADD_ANOTHER_ACCOUNT_TAP,...this.getCommonFields()})}logMultaccSwitchAccountTap(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.SWITCH_ACCOUNT_TAP,...this.getCommonFields()})}logMultaccDropAccountTap(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.DROP_ACCOUNT_TAP,...this.getCommonFields()})}logSecurityRecommShow(){a.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.SECURITY_RECCOMENDATION_SHOW,...this.getCommonFields()})}unsubscribe(){this.unsubscribeThemeListener()}constructor(){this.updateThemeField()}}const u=(0,d.createContext)(void 0)},64323:(e,t,s)=>{"use strict";s.d(t,{logSwitchAccountEvent:()=>f,logSwitchAccountTapEvent:()=>m,logSwitcherAddAnotherTapEvent:()=>_,logSwitcherDropAccount:()=>p,logTopNavElements:()=>g,prepareLogSwitchAccountEvent:()=>y});var n=s(314309),a=s(338761);const r=new n.ProductionStatCollector,d=new n.ActionStatCollector(r),l=new n.RegistrationItemStatCollector(d),c=new a.VkConnectNavigationCollector;function u(e,t){const s=[],a=d.productionStatCollector.getCurrentTime(!1);return s.push({name:n.RegistrationFieldItemNames.TO_SWITCHER_FROM,value:e,start_interaction_time:a,end_interaction_time:a}),0===t&&s.push({name:n.RegistrationFieldItemNames.NAME_MULTIACC_ADD_ACCOUNT_TYPE,value:n.RegistrationFieldItemValues.ADD_ACCOUNT_CREATE_MULTIACC,start_interaction_time:a,end_interaction_time:a}),s}function _(e,t,s){l.logEvent(n.RegistrationItemEventTypes.MULTIACC_ADD_ANOTHER_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(t,s),void 0,void 0,e)}function p(e,t="profile"){e&&(l.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(t),void 0,void 0,e),l.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(t),void 0,void 0,e))}function m(e,t){e&&l.logEvent(n.RegistrationItemEventTypes.SWITCH_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(t),void 0,void 0,e)}function y(){window.vk.id&&sessionStorage.setItem("LOG_ACC_SWITCH",String(window.vk.id))}function f(e,t,s,a){e&&t&&s&&(l.logEvent(n.RegistrationItemEventTypes.SWITCH_FROM_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(a),void 0,t,e),l.logEvent(n.RegistrationItemEventTypes.SWITCH_TO_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},u(a),void 0,s,e))}function g(e){c.logTopNavElements(e)}},239895:(e,t,s)=>{"use strict";s.d(t,{APP_NAME:()=>n,LAST_ACC_ID_KEY:()=>d,LOG_ACC_SWITCH_KEY:()=>r,NOTIFY_SWITCH_KEY:()=>a});const n="EcosystemMultiAccountsEntry",a="multiacc_should_show_notifier",r="multacc_should_send_analytics",d="multiacc_last_id"},596706:(e,t,s)=>{"use strict";s.d(t,{init:()=>u});var n=s(338329),a=s(530107),r=s(246429),d=s(862566),l=s(984745),c=s(298077);const u=()=>{(0,n.init)(),(0,a.tqi)().setHandler("Common/nav_go",(e=>{e.payload.event?.target&&window.nav.go(e.payload.event.target,e.payload.event,JSON.parse(e.payload.dataAttrs?.options||"{}"))}),!1),(0,a.tqi)().setHandler("Common/cur_box_hide",(()=>{(0,r.curBox)()?.hide()}),!1),(0,a.tqi)().setHandler("Common/show_menu_settings",(e=>{const t=e.payload.dataAttrs?.type?Number(e.payload.dataAttrs.type):void 0;(0,d.loadMenuSettingsBox)(t)}),!1),(0,a.tqs)().setHandler("HelpHints/init",(({payload:{target:e}})=>{e?.remove(),(0,l.ensureAccountHelpHintsService)().initialize({viewerId:window.vk?.id,logErrorFn:c.logError})}),!0)}},170001:(e,t,s)=>{"use strict";s.d(t,{FEED_OFFLINE_MODE_FIELD:()=>n,PageCacheState:()=>a});const n="feed_offline_mode_state";var a;!function(e){e.Active="active",e.Inactive="inactive",e[e.Unset="%%pageCacheState%%"]="Unset"}(a||(a={}))},892369:(e,t,s)=>{"use strict";s.d(t,{handleSWResponse:()=>l,handleSWTimingsMessage:()=>d});var n=s(596181),a=s(558137);const r=(0,a.makeSharedState)("feed_with_offline_mode_sw_timings_data",(()=>({})),{version:1}),d=e=>{r().timings=e},l=()=>{const e=Date.now(),{timings:t}=r();if(!t?.lastTimestamp)return;const{lastTimestamp:s,...a}=t;(e=>{const{gettingFromCache:t,fetching:s,gettingFromCacheOnError:a,puttingIntoCache:r,postingFeedStateMessage:d,responding:l}=e;new n.DevNullStatCollector(new n.CustomStatCollector).logEvent({key:"feed_with_offline_mode_sw_content_timings",value:t,value2:s,value3:a,value4:r,value5:d,value6:l})})({...a,responding:e-s})}},954961:(e,t,s)=>{"use strict";s.d(t,{isPageCacheStateActive:()=>a,setPageCacheState:()=>r});var n=s(170001);const a=()=>window.vk.pageCacheState===n.PageCacheState.Active,r=e=>{window.vk.pageCacheState=e}},457498:(e,t,s)=>{"use strict";var n;function a(e){return e.type?`profile_tooltip__${e.type}`:"profile_tooltip"}function r(e){return e.type?`profile_tooltip_all__${e.type}`:"profile_tooltip"}s.d(t,{GiftRef:()=>n,getAllGiftsRefInTooltip:()=>r,getGiftRefInTooltip:()=>a}),function(e){e.PROFILE_BUTTON="profile_button",e.PROFILE_MODULE="profile_module",e.PROFILE_TOOLTIP="profile_tooltip",e.PROFILE_TOOLTIP_ALL="profile_tooltip_all"}(n||(n={}))},127609:(e,t,s)=>{"use strict";function n(e,t,s){return window.nav.go(e,t,s)}function a(e,t=!1){return window.nav.subscribeOnModuleEvaluated(e,t),function(){window.nav.unsubscribeOnModuleEvaluated(e)}}function r(e){return window.nav.onLocationChange(e)}function d(e){window.nav.setLoc({...window.nav.objLoc,...e})}s.d(t,{navGo:()=>n,subscribeModuleEvaluated:()=>a,subscribeNavLocationChange:()=>r,updateNavLoc:()=>d})},687903:(e,t,s)=>{"use strict";s.d(t,{default:()=>c,unpackStore:()=>u});var n=s(740342),a=s(469004),r=s(593159),d=s(755119);function l(e,t){if(!t)return a.ls.get(e);a.ls.set(e,t)}function c(e={},t={}){const s=(0,n.debounce)(l,300);let c=(0,r.extend)({},e),u=[],_=[];return t.store&&(c=a.ls.get(t.key)||c),{get:()=>c,set(e){return e(c).then((e=>(c=e,t.store&&s(t.key,e),this.emit(),this))).catch(d.dummyCatch)},setState(e){return this.set((t=>(t=(0,r.extend)(t,e),this.emit(),Promise.resolve(t))))},stash(){u.push(c),c=(0,r.extend)({},e),this.emit()},reset(){c=(0,r.extend)({},e),this.emit()},unmount(){c={},e=!1,_=[]},pop(){u.length>0&&(c=u.pop(),this.emit())},emit(){_.length>0&&_.forEach((e=>e(this)))},subscribe(e){_.includes(e)||_.push(e)},unsubscribe(e){_=_.filter((t=>t!==e))},mutate(e){e(c),t.store&&s(t.key,c),this.emit()}}}function u(e){return function(e){return!!e.get}(e)?e.get():e}},330721:(e,t,s)=>{"use strict";s.d(t,{MARKET_ALIEXPRESS_APP_ID:()=>n,MARKET_ALIEXPRESS_APP_NAME:()=>a,MARKET_ALIEXPRESS_GROUP_ID:()=>d,MARKET_ALIEXPRESS_HOME_URL:()=>r,MARKET_YOULA_GROUP_ID:()=>l});const n=6706576,a="ae_app",r="https://aliexpress.com",d=36941068,l=198582766},755119:(e,t,s)=>{"use strict";function n(e=!1){console.trace(),e||window.alert("Вы поймали баг исчезнувшего lastMsg. Пожалуйста откройте консоль (Cmd + Option + I), остановите выполнение JS на странице (F8+cmd+\\) и свяжитесь с командой сообщений на вебе.")}function a(e){return console.error(e),Promise.reject(e)}s.d(t,{dummyCatch:()=>a,showDebugAlert:()=>n})},902403:(e,t,s)=>{"use strict";s.d(t,{getErrorText:()=>r,logImError:()=>a});var n=s(298077);function a(e,t=""){console.error(e);const s=e=>{(0,n.logError)(e,{environment:"im"})};if(e instanceof Error){const n=new Error(r(e,t));return n.name=e.name,n.stack=e.stack,s(n)}return s(new Error(r(e,t)))}function r(e,t=""){if(e instanceof Error)return t?`${t}: ${e.message}`:e.message;if("string"==typeof e||"number"==typeof e)return t?`${t}: ${e}`:`${e}`;if(e&&"api_error"===e.type){const s=JSON.stringify(e.error);return t?`${t}: ${s}`:s}if(e instanceof Object){let s="";try{s=JSON.stringify(e)}catch(e){s=`Error data ${e}`}return t?`${t}: ${s}`:s}return t}},120101:(e,t,s)=>{"use strict";s.d(t,{isVKCOMProfileRedesignedEnabled:()=>_,markLiveInStoriesFinished:()=>y,markSeenStoriesInProfile:()=>m,showFansBox:()=>p,showOwnerGiftsBox:()=>E,showSendGiftBox:()=>f,showSendSelectedGiftInBirthdayBox:()=>g,showSilentModeBox:()=>A});var n=s(270959),a=s(246429),r=s(457498),d=s(636576),l=s(540462),c=s(792242),u=s(67631);function _(){return(0,l.partConfigEnabled)("redesign_web_profile_feature")}function p(e,t,s,a={},r=""){return window.cur.viewAsBox?window.cur.viewAsBox():!(0,n.showBox)("al_fans.php",{act:"box",tab:t||"fans",oid:e,from:r},{cache:1,stat:["page_help.css",window.jsc("web/fansbox.js")],params:{...a}},s)}function m(e){"profile"===window.cur.module&&window.Profile?.markSeenStories&&window.Profile.markSeenStories(e)}function y(e){"profile"===window.cur.module&&window.Profile?.markLiveInStoriesFinished&&window.Profile.markLiveInStoriesFinished(e)}function f(e,t,s,d,l){const c=(0,a.getBoxLayerWrap)();c&&(window.cur.gftbxWasScroll=c.scrollTop,c.scrollTop=0);l&&l<0?(0,u.giftStickerProducts)([-l],[e],{ref:d??r.GiftRef.PROFILE_BUTTON,gift_ref:d??r.GiftRef.PROFILE_BUTTON}):(0,n.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e===t?1:0,ref:d??r.GiftRef.PROFILE_BUTTON,gift:l??null},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"],cache:1},s)}function g(e,t,s=r.GiftRef.PROFILE_BUTTON){(0,d.statlogsValueEvent)("gifts_tooltip_action",0,"gift_click",t),(0,n.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,gift:t,ref:s})}function E(e,t,s){return!(0,n.showBox)("al_gifts.php",{act:"box",tab:s||"received",mid:e},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)}function A(e,t,s,n){(0,c.showSilentModeEnabledFormBox)({csrf:s,endDate:e,callsMailSend:t,redirectOnClose:!1,redirectOnSubmit:!1,onSubmit:n})}},646367:(e,t,s)=>{"use strict";s.r(t),s.d(t,{showAskQuestionBox:()=>p,showMyQuestionsBox:()=>_});var n=s(754866),a=s(246429),r=s(131393),d=s(680960),l=s(540462),c=s(148230),u=s(508611);function _(e){if(!(0,l.partConfigEnabled)("profile_questions_enabled"))return;if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(window.MyQuestionsBox?.isMounted())return;e?.ref&&(0,u.logQuestionsOpeningEvent)(window.vk.id,e.ref,c.QuestionAnalyticBoxName.myQuestions);const t=document.querySelector("#box_layer_wrap"),s=document.querySelector("#box_loader");(0,n.show)(t),(0,n.show)(s),(0,a.refreshBoxLoaderCoords)(),Promise.all([(0,r.getQuestions)(),window.stManager.add([window.jsc("web/my_questions.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_my_questions_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([a])=>{window.boxQueue.count()||(0,n.hide)(t),(0,n.hide)(s),window.MyQuestionsBox.init(a.count,a.items,a.profiles,a.next_from,{onClose:e?.onClose,fromElement:e?.fromElement})})).catch((e=>{(0,n.hide)(t),(0,n.hide)(s),(0,d.logQuestionError)({error:e,additionalText:"An error occurred while loading data for my_questions.js"})}))}function p(e,t){if(!(0,l.partConfigEnabled)("profile_questions_enabled"))return;if(e===window.vk.id)return void _({ref:t?.ref,fromElement:t?.fromElement});if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(window.AskQuestionBox?.isMounted())return;if(!e)return void(0,d.logQuestionError)({error:"Empty toUserId has been passed to showAskQuestionBox"});t?.ref&&(0,u.logQuestionsOpeningEvent)(e,t.ref,c.QuestionAnalyticBoxName.askQuestion);const s=document.querySelector("#box_layer_wrap"),p=document.querySelector("#box_loader");(0,n.show)(s),(0,n.show)(p),(0,a.refreshBoxLoaderCoords)(),Promise.all([(0,r.getUsers)([e]),window.stManager.add([window.jsc("web/ask_question.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_question_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([e])=>{(0,n.hide)(s),(0,n.hide)(p);const a=e[0];a&&window.AskQuestionBox.init(a,t?.fromElement)})).catch((e=>{(0,n.hide)(s),(0,n.hide)(p),(0,d.logQuestionError)({error:e,additionalText:"An error occurred while loading data for ask_question.js"})}))}},792242:(e,t,s)=>{"use strict";s.d(t,{showSilentModeEnabledFormBox:()=>l,showSilentModeEndFormBox:()=>c,showSilentModeFormBox:()=>d});var n=s(474848),a=s(725669),r=s(281356);function d(e){const t=(0,a.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(73214)]).then(s.bind(s,544993))),(({SilentModeForm:e})=>e));(0,r.showMessageBoxModalSuspense)((s=>(0,n.jsx)(t,{...s,...e})),{width:400})}function l(e){const t=(0,a.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(73214)]).then(s.bind(s,828186))),(({SilentModeEnabledForm:e})=>e));(0,r.showMessageBoxModalSuspense)((s=>(0,n.jsx)(t,{...s,...e})),{width:400})}function c(e,t){const d=(0,a.asyncComponent)((()=>Promise.all([s.e(91498),s.e(89631),s.e(73214)]).then(s.bind(s,734350))),(({SilentModeEndForm:e})=>e));(0,r.showMessageBoxModalSuspense)((t=>(0,n.jsx)(d,{...t,...e})),{width:400,onDestroy:t})}},90345:(e,t,s)=>{"use strict";s.d(t,{EventItemType:()=>a.EventItemType,SearchClickActionMap:()=>a.SearchClickActionMap,getTrackCodeFromElement:()=>d,logEvent:()=>l,logSearchAudioClick:()=>u,logSearchClipClick:()=>c,logSearchPlaylistClickOut:()=>_});var n=s(314309),a=s(317216),r=s(843570);const d=(e,t)=>e?t&&e.dataset?.[t]?e.dataset?.[t]||"":e.dataset?.trackCode?e.dataset?.trackCode||"":d(e.parentElement,t):"",l=e=>{e.track_code&&n.searchStatsCollector.logEvent(e)},c=e=>{/^search$|^clips\/search$|^search\?|^clips\/search\?|^search\/clips$|^search\/clips?$/g.test(window?.mvcur?.mvPrevLoc?.[0]??"")&&window?.mvcur?.mvShown&&n.searchStatsCollector.logEvent({action:e,type:a.EventItemType.CLIP,track_code:(0,r.getVideoTrackCode)()})},u=(e,t="")=>{l({action:e,track_code:t,type:a.EventItemType.MUSIC_AUDIO})},_=e=>{n.searchStatsCollector.logOutOfSerpEvent({type:a.EventItemType.MUSIC_PLAYLIST,action:e})}},843570:(e,t,s)=>{"use strict";s.d(t,{getVideoTrackCode:()=>r,pickTrackCodeFromURL:()=>a});var n=s(231450);const a=()=>{setTimeout((()=>n.TRACK_CODE_TYPES.some((e=>(e=>{const t=window.nav.objLoc[e];if(!t)return!1;const s={...window.nav.objLoc};return delete s[e],window.nav.setLoc(s,{replace:!0}),history.replaceState({...history.state,[e]:t},""),!0})(e)))))},r=()=>window?.Videoview?.getMvData()?.track_code??window.mvcur?.options?.addParams?.track_code??""},862566:(e,t,s)=>{"use strict";async function n(e){const{showMenuSettingsBox:t}=await Promise.all([s.e(91498),s.e(89631),s.e(6694)]).then(s.bind(s,641921));t(e)}s.d(t,{loadMenuSettingsBox:()=>n})},187403:(e,t,s)=>{"use strict";s.d(t,{initColorSchemeDropdowns:()=>d});var n=s(19589),a=s(64323),r=s(428374);function d(){document.querySelectorAll(".SettingsColorSchemeDropdown").forEach((e=>{!function(e){if(e.dataset.inited)return;e.dataset.inited="1";let t=e.dataset.value,s=JSON.parse(e.dataset.items||"[]");n.ColorScheme.isSchemesAutoSwitchingSupported()||(t===n.ColorSchemeMode.Auto&&(t=n.ColorSchemeMode.Light),s=s.filter((([e])=>e!==n.ColorSchemeMode.Auto)));const d=new r.InlineDropdown(e,{selected:t,items:s,onSelect(t){n.colorScheme.setMode(t),(0,a.logTopNavElements)("theme");const s=e.dataset.hash;window.ajax.post("al_settings.php?act=a_save_color_scheme_mode",{mode:t,hash:s})}}),l=n.colorScheme.subscribe((()=>{e&&d?d.val(n.colorScheme.getMode(),!0):l()}))}(e)}))}},944041:(e,t,s)=>{"use strict";s.d(t,{getCache:()=>c,getPackByStickerId:()=>y,getSticker:()=>_,getStickers:()=>p,updateCache:()=>u});var n=s(761520),a=s(353679),r=s(612831),d=s(440487),l=s(469004);const c=()=>{if(!window.stickersCache){const e=l.ls.get("stickers_cache");window.stickersCache={...a.DEFAULT_CACHE,...e}}return window.stickersCache},u=e=>{window.stickersCache={...c(),...e}},_=e=>c().stickers.get(e),p=e=>{const{stickers:t}=c();return e.map((e=>t.get(e)))},m=e=>{const t=_(e);if(!t||!t.pack_id)return null;const s=(0,d.getProductFromCache)(t.pack_id);return s&&(0,r.isBasePack)(s)?s:null},y=e=>{const t=m(e);return t?Promise.resolve(t):new Promise((t=>{n.ajax.post("stickers.php",{act:"get_products",sticker_ids:[e]},{onDone(s){(0,d.cacheProductsData)(s),t(m(e))},onFail:e=>(console.error(e),t(null),!0)})}))}},416577:(e,t,s)=>{"use strict";s.d(t,{Cart:()=>c});var n=s(761520),a=s(433409),r=s(353679),d=s(440487),l=s(246429);class c{static create(e,t=[]){const s=e.map((e=>({product_id:e,amount:1})));return new c(s,t)}copy(){const e=new c(this.getItems(),this.getRecipientIds());return e.setOrder(this.getOrder()),e}getItems(){return Array.from(this.items.values())}setItems(e){this.items=new Map(e.map((e=>[e.product_id,e])))}loadItems(){const e=Array.from(this.items.keys());return(0,d.getProducts)(e).then((()=>{for(const e of Array.from(this.items.values()))e.product=(0,d.getProductFromCache)(e.product_id)}))}getProducts(){return(0,d.getProductsFromCache)(Array.from(this.items.keys()))}hasProduct(e){return this.items.has(e)}addProduct(e,t=!1){if(!this.hasProduct(e)){const s={product_id:e,amount:1};t?this.setItems([...this.getItems(),s]):this.setItems([s,...this.getItems()]),this.onChange&&this.onChange()}}removeProduct(e){this.hasProduct(e)&&(this.items.delete(e),this.onChange&&this.onChange())}getRecipientIds(e=!1){return this.recipientIds.size?Array.from(this.recipientIds.values()):this.isGift&&e?[r.SAMPLE_RECIPIENT_ID]:[]}setRecipientIds(e){this.recipientIds=new Set(e)}hasRecipientId(e){return this.recipientIds.has(e)}addRecipientId(e){this.hasRecipientId(e)||(this.recipientIds.add(e),this.onChange&&this.onChange())}removeRecipientId(e){this.hasRecipientId(e)&&(this.recipientIds.delete(e),this.onChange&&this.onChange())}setOrder(e){if(this._order=e,e){this.recipientIds.clear();for(const t of e.items)t.recipient_id!==r.SAMPLE_RECIPIENT_ID&&this.recipientIds.add(t.recipient_id)}}loadOrder(e){const t=e.items.map((e=>e.product_id));return(0,d.getProducts)(t).then((t=>({...e,items:e.items.map(((e,s)=>({...e,product:t[s]})))})),(()=>e))}getOrder(){return this._order}getRecipientsMap(){return this.recipients}getRecipients(){return Array.from(this.recipients.values())}getRecipientById(e){return this.recipients.get(e)}addRecipients(e){this.recipients=new Map([...this.getRecipients(),...e].map((e=>[e[0],e])))}getJSON(){return JSON.stringify({items:this.getItems().map((e=>({...e,product:void 0}))),recipient_ids:this.getRecipientIds(!0)})}isLoaded(){return null!==this.getOrder()}cancelLoad(){this.loadTimeout&&(window.clearTimeout(this.loadTimeout),this.loadTimeout=null),this.loadCancellationToken&&(this.loadCancellationToken.cancel(),this.loadCancellationToken=null)}load(e=!1){return this.cancelLoad(),new Promise((t=>{this.loadTimeout=window.setTimeout((()=>{this.loadCancellationToken=new a.AjaxCancellationToken,n.ajax.post("stickers.php",{act:"preview_products_order",cart:this.getJSON(),with_suggested_recipients:e?1:0},{cancellationToken:this.loadCancellationToken,onDone:e=>{(0,d.cacheProductsData)(e),Promise.all([this.loadItems(),this.loadOrder(e.order)]).then((([,s])=>{this.setOrder(s),e.recipients&&this.addRecipients(e.recipients),t(this)}),(()=>{}))},onFail:e=>(e&&window.__dev&&console.error(e),t(this),!0)})}),300)}))}order({ignoreEmptyError:e,emptyErrorLoader:t,...s}={}){return new Promise((a=>{n.ajax.post("stickers.php",{act:"order_products",cart:this.getJSON(),hash:s.hash||this.getOrder()?.hash,message:s.message,is_private:s.is_private?1:0,ref:s.ref,gift_ref:s.gift_ref,v:s.v,random_sticker_pack_attempt_id:s.randomStickerPackAttemptId},{onDone:e=>{requestAnimationFrame((()=>{(0,l.hideBoxLoader)()})),(0,d.cacheProductsData)(e),e.result.random_selector_result=e.random_selector_result,Promise.all([this.loadOrder(e.order),this.loadOrder(e.result)]).then((([e,t])=>{this.setOrder(e),a(t)}),(()=>{}))},onFail:s=>!s&&e?(t&&requestAnimationFrame((()=>{(0,l.showBoxLoader)()})),!0):(s&&console.error(s),a(null),!0)})}))}constructor(e,t=[]){this.loadTimeout=null,this.loadCancellationToken=null,this.isGift=!1,this.onChange=null,this._order=null,this.setItems(e),this.recipientIds=new Set(t),this.recipients=new Map}}},25221:(e,t,s)=>{"use strict";s.d(t,{StickerProductsGift:()=>M});var n=s(474848),a=s(296540),r=s(694244),d=s(782174),l=s(63614),c=s(303800),u=s(700272),_=s(945206),p=s(944048),m=s(908242),y=s(817590),f=s(246429),g=s(102088),E=s(866467),A=s(612831),b=s(847771),P=s(212125),I=s(890221),T=s(150445),C=s(764557),O=s(8520);const M=({cart:e,options:{ref:t,gift_ref:s},closeBox:M,updateBox:S})=>{const[D,k]=(0,P.useCart)(e),L=!D.isLoaded()&&k;(0,a.useEffect)((()=>{S()}),[L]);const x=D.getRecipientIds(),R=D.getOrder(),B=R&&!R.error&&R.items.find((e=>!e.error&&!(0,b.isSampleOrderItem)(e))),[F,N]=function(e){if(!e)return[null,null];let t;for(const s of e.items){const{product:e}=s;if(e&&(0,A.isPackProduct)(e)){t=e;break}}let s=e.items.filter((({product:e})=>e?.can_gift));const n=s.filter((e=>!e.error&&!(0,b.isSampleOrderItem)(e)));n.length&&(s=n);const a=new A.ProductsByType(s.map((e=>e.product))),r=a.pack.values().next().value,d=Array.from(a.style);let l="",c="";if(1===d.length)l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_1_style"),"title",d[0].title),r?c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_with_pack"),"title",r.title):t&&(c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_for_pack"),"title",t.title));else if(r){if(l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_pack"),"title",r.title),d.length)switch(d.length){case 2:c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_with_2_styles"),"title1",d[0].title,"title2",d[1].title);break;case 3:c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_with_3_styles"),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title);break;case 4:c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_with_3_styles_and_1_more"),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title);break;default:const e=d.length-3;c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_with_3_styles_and_n_more",e),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title,"n",e)}}else if(d.length){switch(d.length){case 2:l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_2_styles"),"title1",d[0].title,"title2",d[1].title);break;case 3:l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_3_styles"),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title);break;case 4:l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_3_styles_and_1_more"),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title);break;default:const e=d.length-3;l=(0,g.langStr)(E.getLang("purchases_stickers_gift_title_3_styles_and_n_more",e),"title1",d[0].title,"title2",d[1].title,"title3",d[2].title,"n",e)}t&&(c=(0,g.langStr)(E.getLang("purchases_stickers_gift_description_for_pack"),"title",t.title))}d.length?c+=" "+E.getLang("purchases_stickers_gift_description_styles"):c+=" "+E.getLang("purchases_stickers_gift_description");return[l,c]}(R),[,U]=(0,a.useState)(null);(0,a.useLayoutEffect)((()=>{const e=D.getRecipients();if(U(window.WideDropdown.init("StickerProductsGiftRecipientsDropdown",{defaultItems:e,items:e,noResult:E.getLang("gifts_nobody_found"),introText:E.getLang("gifts_start_typing_recipient"),maxItems:20,onChange:(e,t)=>{1===e?D.addRecipientId(+t):D.removeRecipientId(+t)}})),x.length)for(const e of x){const t=D.getRecipientById(e);t&&window.WideDropdown.select("StickerProductsGiftRecipientsDropdown",!1,t)}else window.WideDropdown.focus("StickerProductsGiftRecipientsDropdown");return()=>{window.WideDropdown.deinit("StickerProductsGiftRecipientsDropdown")}}),[L]);const[W,H]=(0,a.useState)(""),[K,j]=(0,a.useState)(!1),[V,$]=(0,a.useState)(!1),G=()=>{V||($(!0),D.order({message:W,is_private:K,ref:t,gift_ref:s}).then((e=>{$(!1),e&&!e.error&&((0,f.showDoneBox)(function(e,t){const s=new A.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),n=function(e){const t=e.getPack(),s=e.getStyles();if(t)return s.length?(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_pack_and_styles",s.length),"title",t.title,"styles_num",s.length):(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_pack"),"title",t.title);if(s.length)switch(s.length){case 1:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_1_style"),"title",s[0].title);case 2:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_2_styles"),"title1",s[0].title,"title2",s[1].title);case 3:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_3_styles"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);case 4:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_3_styles_and_1_more"),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title);default:{const e=s.length-3;return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_products_3_styles_and_n_more",e),"title1",s[0].title,"title2",s[1].title,"title3",s[2].title,"n",e)}}return null}(s);if(!n)return null;const a=new Set;for(const s of e.items){const{error:e,recipient_id:n}=s;if(e)continue;const r=t(n);r&&a.add(r)}const r=function(e,t){const s=Array.from(e.values());switch(s.length){case 0:return null;case 1:{const e=1===t?E.getLang("purchases_stickers_gift_result_1_recipient_single","raw"):E.getLang("purchases_stickers_gift_result_1_recipient_multiple","raw");return(0,g.langStr)((0,E.langSex)(s[0][8],e),"name",s[0][8])}case 2:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_2_recipients",t),"name1",s[0][8],"name2",s[1][8]);case 3:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_3_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8]);case 4:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_4_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8]);case 5:return(0,g.langStr)(E.getLang("purchases_stickers_gift_result_5_recipients",t),"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8],"name5",s[4][8]);default:{const e=s.length-4,n=1===t?E.getLang("purchases_stickers_gift_result_4_recipients_and_n_more_single"):E.getLang("purchases_stickers_gift_result_4_recipients_and_n_more_multiple");return(0,g.langStr)(n,"name1",s[0][8],"name2",s[1][8],"name3",s[2][8],"name4",s[3][8],"n",e)}}return null}(a,s.getCount());if(!r)return null;return(0,g.langStr)(r,"products",n)}(e,(e=>D.getRecipientById(e)))),M())}),(()=>{})))};return(0,a.useEffect)((()=>{window.WideDropdown.disable("StickerProductsGiftRecipientsDropdown",V)}),[V]),(0,n.jsxs)(r.ModalBox,{"data-testid":"sticker-gift-modal",children:[(0,n.jsx)(d.ModalHeader,{onClose:M,closeAriaLabel:E.getLang("global_close"),children:E.getLang("purchases_stickers_gift_box_title")}),(0,n.jsx)(l.ModalBody,{insetLevel:2,children:L?(0,n.jsx)(c.Div,{children:(0,n.jsx)(u.Spinner,{stretched:!0})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.default,{order:R,forceValid:!B}),(0,n.jsx)("h1",{className:"StickerProductsGift__productsTitle",children:(0,O.decodeHTMLEntities)(F||"")}),(0,n.jsx)("p",{className:"StickerProductsGift__productsDescription",children:(0,O.decodeHTMLEntities)(N||"")}),R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("dl",{className:"StickerProductsGift__price",children:[(0,n.jsx)("dt",{className:"StickerProductsGift__priceLabel",children:E.getLang("purchases_gift_price_label")})," ",(0,n.jsx)("dd",{className:"StickerProductsGift__priceValue",children:E.getLang("global_n_votes",R.price.current)})]}),(0,n.jsx)("div",{className:"StickerProductsGift__balance",children:(0,g.langStr)(E.getLang("gifts_you_have_X_votes"),"votes",E.getLang("global_n_votes",R.balance))})]}),(0,n.jsxs)("div",{className:"StickerProductsGift__recipients",children:[(0,n.jsx)("label",{className:"StickerProductsGift__recipientsLabel",htmlFor:"StickerProductsGiftRecipientsInput",children:E.getLang("gifts_receiver")}),(0,n.jsxs)("div",{className:"wdd StickerProductsGift__recipientsDropdown",id:"StickerProductsGiftRecipientsDropdown",children:[(0,n.jsx)("div",{className:"fl_r wdd_arr"}),(0,n.jsx)("input",{className:"wdd_text fl_l",id:"StickerProductsGiftRecipientsInput",placeholder:E.getLang("gifts_choose_recipients")})]})]}),(0,n.jsxs)("div",{className:"StickerProductsGift__message",children:[(0,n.jsx)("label",{className:"StickerProductsGift__messageLabel",htmlFor:"StickerProductsGiftMessageInput",children:E.getLang("purchases_gift_your_message")}),(0,n.jsx)(_.Textarea,{id:"StickerProductsGiftMessageInput",rows:3,value:W,onChange:e=>H(e.currentTarget.value),onResize:()=>S(),disabled:V})]}),(0,n.jsx)(p.Checkbox,{noPadding:!0,stretched:!1,checked:K,disabled:V,onChange:()=>j(!K),children:E.getLang("gifts_receiver_only")})]})}),(0,n.jsx)(m.ModalFooter,{before:(0,n.jsx)("div",{className:"StickerProductsGift__footerNote",children:!k&&R&&(0,n.jsxs)("div",{className:"StickerProductsGift__details",children:[E.getLang("purchases_stickers_gift_details_label"),(0,n.jsx)(y.HintIcon,{gap:"l",tooltip:{placement:"top",...(0,T.stickerProductsGiftDetails)({order:R,recipients:D.getRecipientsMap()})}})]})}),actions:(0,n.jsx)(C.default,{className:"StickerProductsGift__gift",mode:B?"primary":"secondary",size:"m",loading:k||V,disabled:!B,price:R?.price,text:B?(0,g.langStr)(E.getLang("purchases_stickers_gift_send_for"),"price",E.getLang("global_n_votes",R?.price.current)):E.getLang("purchases_stickers_gift_send"),onClick:()=>G()})})]})}},150445:(e,t,s)=>{"use strict";s.d(t,{stickerProductsGiftDetails:()=>p});var n=s(474848),a=s(296540),r=s(8520),d=s(373080),l=s(102088),c=s(866467),u=s(847771),_=s(612831);const p=({order:e,recipients:t})=>{const s=function(e){if(!e)return null;let t=e.items.filter((({product:e})=>e?.can_gift));const s=t.filter((e=>!e.error&&!(0,u.isSampleOrderItem)(e)));s.length&&(t=s);const n=[],a=[];for(const e of t){const{product:t}=e;t&&((0,_.isPackProduct)(t)?n.push(e):(0,_.isStyleProduct)(t)&&a.push(e))}const r=a.reduce(((e,t)=>e+(t.price?.current||0)),0);if(n.length){const e=n.reduce(((e,t)=>e+(t.price?.current||0)),0);return a.length?(0,l.langStr)(c.getLang("purchases_stickers_gift_details_summary_pack_with_styles",a.length),"pack_price_sum",c.getLang("global_n_votes",e),"styles_num",a.length,"styles_price_sum",c.getLang("global_n_votes",r)):(0,l.langStr)(c.getLang("purchases_stickers_gift_details_summary_pack"),"pack_price_sum",c.getLang("global_n_votes",e))}if(a.length)return(0,l.langStr)(c.getLang("purchases_stickers_gift_details_summary_styles",a.length),"styles_num",a.length,"styles_price_sum",c.getLang("global_n_votes",r));return null}(e)||"",p=new Map;for(const s of e.items){const{error:e,product:n,recipient_id:a}=s;if(e)continue;const r=t.get(a);if(!r)continue;let d=p.get(r);d||(d=new _.ProductsByType,p.set(r,d)),d.add(n)}const y=Array.from(p.entries()),f=y.length,g={maxWidth:291,text:y.map((([e,t])=>(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(d.InnerHTML,{Component:"span",children:e[1]}),": ",(0,r.decodeHTMLEntities)(m(t)||"")," "]},e[0])))};return g[s&&f?"header":"text"]=(0,n.jsx)(d.InnerHTML,{children:s}),g};function m(e){const t=e.getPack(),s=e.getStyles();let n="";return s.length&&(n=s.map((e=>(0,l.langStr)(c.getLang("purchases_stickers_gift_details_recipient_style_title"),"title",e.title))).join(", ")),t?n?(0,l.langStr)(c.getLang("purchases_stickers_gift_details_recipient_pack_and_styles"),"pack_title",t.title,"style_titles",n):(0,l.langStr)(c.getLang("purchases_stickers_gift_details_recipient_pack"),"title",t.title):n?(0,l.langStr)(c.getLang("purchases_stickers_gift_details_recipient_styles"),"style_titles",n):null}},890221:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var n=s(474848),a=s(8520),r=s(612831),d=s(847771);const l={s:56,m:96,l:168},c="sticker-products-gifts-icon",u=({order:e,forceValid:t=!1})=>{const s=new Map,u=new Map;if(e)for(const t of e.items){const{product:e}=t;e&&((0,r.isPackProduct)(e)?s.has(e)?s.get(e)?.push(t):s.set(e,[t]):(0,r.isStyleProduct)(e)&&(u.has(e)?u.get(e)?.push(t):u.set(e,[t])))}const _=s.keys().next().value,p=(_?1:0)+u.size,m=p>1?p>2?"s":"m":"l",y=l[m],f=Array.from(u.entries());t||f.sort((([,e],[,t])=>t.filter((e=>!e.error)).length-e.filter((e=>!e.error)).length));const g=f.slice(0,3);let E=f.slice(3),A=!0;if(!t){const e=E.filter((([,e])=>e.find((e=>!e.error))));e.length?E=e:A=!1}return(0,n.jsxs)("ul",{className:"StickerProductsGiftIcons",children:[_&&(0,n.jsx)("li",{"data-testid":c,className:(0,a.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${m}`,"StickerProductsGiftIcons__icon--pack",{"StickerProductsGiftIcons__icon--invalid":!t&&!s.get(_)?.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,d.getStickerPackIconUrl)(_,y,y)})`}},_.id),g.map((([e,s])=>(0,n.jsx)("li",{"data-testid":c,className:(0,a.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${m}`,"StickerProductsGiftIcons__icon--style",{"StickerProductsGiftIcons__icon--invalid":!t&&!s.find((e=>!e.error))}),style:{backgroundImage:`url(${(0,d.getStickerPackIconUrl)(e,y,y)})`}},e.id))),E.length?(0,n.jsxs)("li",{"data-testid":c,className:(0,a.classNames)("StickerProductsGiftIcons__icon",`StickerProductsGiftIcons__icon--${m}`,"StickerProductsGiftIcons__icon--more",{"StickerProductsGiftIcons__icon--invalid":!A}),children:["+",E.length]},"more"):null]})}},764557:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(474848),a=s(296540),r=s(454154),d=s(8520),l=s(866467);const c=({className:e,price:t,text:s,placeholder:c,...u})=>{let _=(0,a.useMemo)((()=>{if(t){let e;t.current!==t.regular&&t.regular&&(e=(0,n.jsx)("span",{className:"StickersPriceButton__regular",children:t.current?t.regular:(0,l.langStr)(l.getLang("purchases_stickers_n_for_m"),"%n","","%m",l.getLang("global_n_votes",t.regular))},"regular"));const a=(0,n.jsx)("span",{className:"StickersPriceButton__current",children:t.current?l.getLang("global_n_votes",t.current):l.getLang("purchases_for_free_btn").toLowerCase()},"current");return s?s.split(/(\{regular_price\}|\{price\})/).map(((t,s)=>"{regular_price}"===t?e:"{price}"===t?a:t?(0,n.jsx)("span",{className:"StickersPriceButton__label",children:t},`label${s}`):void 0)):[e,a]}return[c]}),[s,c,t?.regular,t?.current]);return(0,n.jsx)(r.Button,{className:(0,d.classNames)("StickersPriceButton",e),...u,children:_})}},614098:(e,t,s)=>{"use strict";var n;s.d(t,{REGULAR_SIZES:()=>r,SIZE_512:()=>a,STICKER_ICON_CLASS:()=>l,STICKER_ROW_CLASS:()=>d,StickerSize:()=>n}),function(e){e[e.SMALL=128]="SMALL",e[e.MIDDLE=168]="MIDDLE",e[e.BIG=208]="BIG"}(n||(n={}));const a=512,r=[64,128,256,352,a],d="stickerRow",l="stickerIcon"},212125:(e,t,s)=>{"use strict";s.d(t,{useCart:()=>a});var n=s(296540);const a=e=>{const[t,s]=(0,n.useState)(e),[a,r]=(0,n.useState)(null),d=(0,n.useCallback)((()=>{const e=t.load();r(e),e.then((t=>{s(t),r((t=>t===e?null:t))}),(()=>{}))}),[t]);return(0,n.useEffect)((()=>(t.onChange=d,t.isLoaded()||d(),()=>{t.onChange=null,t.cancelLoad()})),[t]),[t,null!==a]}},440487:(e,t,s)=>{"use strict";s.d(t,{activateProduct:()=>m,cacheProductsData:()=>r,getProduct:()=>p,getProductFromCache:()=>d,getProducts:()=>_,getProductsFromCache:()=>l,updateUserProductState:()=>y});var n=s(761520),a=s(944041);const r=(e,t=[])=>{const s=(0,a.getCache)();if(e.stickers){const{stickers:t}=s;for(const s of e.stickers)t.has(s.id)?t.set(s.id,{...t.get(s.id),...s}):t.set(s.id,s)}if(e.products)for(const t of e.products)s.products.set(t.id,t),s.productPromises.delete(t.id);for(const e of t)s.products.has(e)||s.products.set(e,null),s.productPromises.delete(e);e.emoji&&window.Emoji&&window.Emoji.updateTabs(e.emoji.stickers,e.emoji.keywords,!0),(0,a.updateCache)(s)},d=e=>(0,a.getCache)().products.get(e),l=e=>{const t=(0,a.getCache)().products;return e.map((e=>t.get(e)))};function c(){let{productsPromise:e}=(0,a.getCache)();return e||(e=new Promise((e=>setTimeout((()=>{const t=(0,a.getCache)().productIdsQueue,s=Array.from(t);t.clear(),(0,a.updateCache)({productIdsQueue:t,productsPromise:void 0}),n.ajax.post("stickers.php",{act:"get_products",product_ids:s},{onDone(t){r(t,s),e([])},onFail:t=>(console.error(t),r({},s),e([]),!0)})}),300))),(0,a.updateCache)({productsPromise:e})),e}const u=e=>{if(!e.length)return Promise.resolve([]);const{productPromises:t,productIdsQueue:s}=(0,a.getCache)(),n=new Set;for(const a of e)if(t.has(a)){const e=t.get(a);e&&n.add(e)}else{s.add(a);const e=c();t.set(a,e),n.add(e)}return(0,a.updateCache)({productIdsQueue:s,productPromises:t}),Promise.all(n).then((()=>l(e)))},_=(e,t=!0)=>{const s=t?e.filter((e=>void 0===d(e))):e;return s.length?u(s).then((()=>l(e))):Promise.resolve(l(e))},p=(e,t=!0)=>{if(t){const t=d(e);if(void 0!==t)return Promise.resolve(t)}return u([e]).then((()=>d(e)))},m=e=>new Promise((t=>{n.ajax.post("stickers.php",{act:"activate_product",product_id:e.id,hash:e.csrf_hash},{onDone(e){r(e),t()},onFail:e=>(console.error(e),t(),!0)})})),y=(e,t,s,a=!0)=>new Promise((d=>{n.ajax.post("stickers.php",{act:"update_user_product_state",product_ids:[e],key:t,value:s},{onDone(e){a&&r(e),d()},onFail:e=>(console.error(e),d(),!0)})}))},67631:(e,t,s)=>{"use strict";s.d(t,{giftStickerProducts:()=>m,giftStickersCart:()=>p});var n=s(474848),a=s(440961),r=s(865708),d=s(270959),l=s(416577),c=s(177838),u=s(944041),_=s(25221);function p(e,t){const{productsGiftLock:s}=(0,u.getCache)();if(s)return null;let l;(0,u.updateCache)({productsGiftLock:!0});const p={...t};function m(){return l?.bodyNode.querySelector(".StickersProductsGift")}function y(){l?.hide()}function f(){l?.updateBoxCoords()}return(0,c.showLoader)(),e.isGift=!0,Promise.all([e.load(!0),window.stManager.add(["stickers.css",window.jsc("web/wide_dd.js"),"wide_dd.css"])]).then((([e])=>{(0,c.hideLoader)(),l=new d.MessageBox({hideButtons:!0,bodyStyle:"padding: 0; background: none;",width:450,onShow(){!function(e){const t=m();t&&a.render((0,n.jsx)(r.AppRootProvider,{children:(0,n.jsx)(_.StickerProductsGift,{cart:e,options:p,closeBox:y,updateBox:f})}),t)}(e),requestAnimationFrame((()=>{f()}))},onHideAttempt:()=>(function(){const e=m();e&&a.unmountComponentAtNode(e)}(),!0),onHide(){(0,u.updateCache)({productsGiftLock:!1})}}),l.content('<div class="StickersProductsGift"></div>'),l.show()}),(()=>{})),{hide:y}}function m(e,t=[],s){return p(l.Cart.create(e,t),s)}},177838:(e,t,s)=>{"use strict";s.d(t,{findClosestStickerSize:()=>b,getBoxLayerWrap:()=>m,getLangCode:()=>A,getPurchaseResult:()=>g,hideLoader:()=>f,showLoader:()=>y,updateStickersFromQueue:()=>E});var n=s(102088),a=s(866467),r=s(19589),d=s(754866),l=s(246429),c=s(612831),u=s(614098),_=s(847771);function p(){return document.querySelector("#box_loader")}function m(){return document.querySelector("#box_layer_wrap")}function y(){const e=p();(0,l.refreshBoxLoaderCoords)(),(0,d.show)(e),(0,d.show)(m())}function f(){(0,d.hide)(p())}function g(e){const t=new c.ProductsByType(e.items.filter((e=>!e.error)).map((e=>e.product))),s=t.getPack(),r=t.getStyles();if(s)return r.length?(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_pack_and_styles",r.length),"pack_title",s.title,"n",r.length):(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_pack"),"title",s.title);if(r.length)switch(r.length){case 1:return(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_1_style"),"title",r[0].title);case 2:return(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_2_styles"),"title1",r[0].title,"title2",r[1].title);case 3:return(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_3_styles"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);case 4:return(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title);default:const e=r.length-3;return(0,n.langStr)(a.getLang("purchases_stickers_purchase_result_3_styles_and_n_more",e),"title1",r[0].title,"title2",r[1].title,"title3",r[2].title,"n",e)}return null}function E(e){!function(e){const t=r.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light";e.querySelectorAll(`.sticker_img[${t}]`).forEach((e=>{const s=e.getAttribute(t);s&&(e.src=s)}))}(e)}const A=()=>window.vk.lang||"ru",b=e=>e>u.SIZE_512?((0,_.logStickersError)("Нет размера стикера больше 512px"),u.SIZE_512):u.REGULAR_SIZES.find((t=>t>=e))},288478:(e,t,s)=>{"use strict";s.d(t,{injectTimestampIntoParamsObj:()=>d,makeWrappedImporter:()=>r});var n=s(8520),a=s(703280);function r(e){let t=null;return s=>{if(!(0,a.isStoryPerfStatsEnabledOnDesktopWeb)())return;const r=performance.now();t||(t=(0,n.asyncImportLoader)(e,3),t.then((()=>{}))),t.then((e=>s(e,r)),(()=>{}))}}function d(e,t=performance.now()){return{...e,time:e.time??t}}},703280:(e,t,s)=>{"use strict";s.d(t,{isStoryPerfStatsEnabledOnDesktopWeb:()=>d});var n=s(540462);const a=()=>(0,n.partConfigEnabled)("tech_stories_metrics_web"),r=()=>(0,n.partConfigEnabled)("tech_stories_metrics_web_mvk");function d(){return a()&&r()}},194065:(e,t,s)=>{"use strict";s.d(t,{trackHideViewerLoader:()=>p,trackShowViewerLoader:()=>_,trackStoryClosed:()=>u,trackStoryDownloadEnd:()=>c,trackStoryOpened:()=>d,trackStoryOpeningStart:()=>r,trackStoryViewerClosed:()=>l});var n=s(288478);const a=(0,n.makeWrappedImporter)((()=>s.e(12334).then(s.bind(s,166756)))),r=e=>{a(((t,s)=>{t.trackStoryOpeningStart((0,n.injectTimestampIntoParamsObj)(e,s))}))},d=e=>{a(((t,s)=>{t.trackStoryOpened((0,n.injectTimestampIntoParamsObj)(e,s))}))},l=e=>{a(((t,s)=>{t.trackStoryViewerClosed((0,n.injectTimestampIntoParamsObj)(e,s))}))},c=e=>{a(((t,s)=>{t.trackStoryDownloadEnd((0,n.injectTimestampIntoParamsObj)(e,s))}))},u=e=>{a(((t,s)=>{t.trackStoryClosed((0,n.injectTimestampIntoParamsObj)(e,s))}))},_=e=>{a(((t,s)=>{t.trackShowViewerLoader((0,n.injectTimestampIntoParamsObj)(e,s))}))},p=e=>{a(((t,s)=>{t.trackHideViewerLoader((0,n.injectTimestampIntoParamsObj)(e,s))}))}},55090:(e,t,s)=>{"use strict";s.d(t,{isWidget:()=>n});const n=()=>window.vk.widget},450927:(e,t,s)=>{"use strict";function n(){return window.stManager.add([window.jsc("web/video.js")])}function a(){return window.VideoUpload?Promise.resolve():Promise.all([s.e(91498),s.e(89631),s.e(50560),s.e(85172),s.e(762),s.e(21529),s.e(49190),s.e(21916),s.e(62015),s.e(98350),s.e(64105),s.e(35632),s.e(58292),s.e(86270),s.e(9232),s.e(51681),s.e(56881),s.e(76683),s.e(25459),s.e(86506),s.e(42099),s.e(51943)]).then(s.bind(s,193773)).then((({initVideoUpload:e,VideoUpload:t,VideoUploadSubtitles:s,VideoInlineUpload:n})=>{!window.VideoUpload&&t&&(window.VideoUpload=t),!window.VideoUploadSubtitles&&s&&(window.VideoUploadSubtitles=s),!window.VideoInlineUpload&&n&&(window.VideoInlineUpload=n),e()}))}function r(){return window.stManager.add([window.jsc("web/video_showcase.js")])}function d(){return window.stManager.add([window.jsc("web/indexer.js")])}function l(){return window.stManager.add([window.jsc("web/grid_sorter.js")])}s.d(t,{getGridSorterModule:()=>l,getIndexerModule:()=>d,getVideoModule:()=>n,getVideoShowcaseModule:()=>r,getVideoUploadModule:()=>a})},826619:(e,t,s)=>{"use strict";s.d(t,{CreatePlaylistRequestOrigin:()=>O,PlaylistFormEvents:()=>C,VideoAddToPlaylistActionSheetEvents:()=>I,VideoCardAddButtonEvents:()=>T,VideoOrderEvents:()=>P,checkVideoIsPreloaded:()=>A,createPlaylistPopup:()=>f,getAdditionalInfo:()=>_.getAdditionalInfo,getFormattedBigViewsToShortCase:()=>_.getFormattedBigViewsToShortCase,getFormattedPostponePublishDateTime:()=>_.getFormattedPostponePublishDateTime,getFormattedUpdatedTime:()=>_.getFormattedUpdatedTime,getOwnerForShortVideo:()=>M,getVideoTrackCode:()=>m,idlizeCall:()=>p,isMediaHlsSupported:()=>b,logClipClick:()=>y,redirectToRedesignedForm:()=>D,saveShortVideoData:()=>S,startLiveVideoPopup:()=>E,uploadVideoPopup:()=>g});var n=s(450927),a=s(317216),r=s(314309),d=s(468073),l=s(957994),c=s(573825),u=s(119995),_=s(856289);const p=(e,t=1e3)=>{const s=()=>{setTimeout((()=>e()),t)};return"function"==typeof window.requestIdleCallback?window.requestIdleCallback(s,{timeout:5e3}):s()},m=()=>window?.Videoview?.getMvData()?.track_code||window.mvcur?.options?.addParams?.track_code,y=(e,t)=>{r.shortVideoStatsCollector.logEvent({type:a.EventItemType.CLIP,action:e,track_code:t})},f=async(e,t,s,a,r)=>{window.Video||await(0,n.getVideoModule)(),window.Video.createAlbum(e,t,s,a,r)},g=(e,t,s)=>{window.VideoUpload.showBox({aid:t,from:"video",oid:e,disabled:s})},E=e=>{window.cur.webcast_settings?window.VideoUpload.showLiveVideoLeaveWarning(e):window.VideoUpload.showLiveTypeModal(e)},A=e=>Object.keys(window.ajaxCache).some((t=>t.startsWith("/al_video.php?act=video_box")&&t.includes(`&video=${e}`))),b=()=>window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),P={START_LOADING:"VideoOrderEvents/START_LOADING",END_LOADING:"VideoOrderEvents/END_LOADING"},I={INIT:"VideoAddToPlaylistActionSheetEvents/INIT",SHOW:"VideoAddToPlaylistActionSheetEvents/SHOW",HIDE:"VideoAddToPlaylistActionSheetEvents/HIDE"},T={SET_ADD:"VideoCardAddButtonEvents/SET_ADD",SET_ADDED:"VideoCardAddButtonEvents/SET_ADDED",SHOW:"VideoCardAddButtonEvents/SHOW",HIDE:"VideoCardAddButtonEvents/HIDE"},C={CREATE:"PlaylistFormEvents/CREATE",UPDATE:"PlaylistFormEvents/UPDATE",DELETE:"PlaylistFormEvents/DELETE"},O={VIDEO_PLAYLISTS_MODAL:"CreatePlaylistRequestOrigin/VIDEO_PLAYLISTS_MODAL",NEW_PLAYLIST_PAGE:"CreatePlaylistRequestOrigin/NEW_PLAYLIST_PAGE",VIDEO_CATALOG:"CreatePlaylistRequestOrigin/VIDEO_CATALOG"},M=async e=>{if(d.Ranges.isUserId(e)){const[t]=await(0,l.api)("users.get",{user_ids:`${e}`,fields:"is_closed,photo_50,photo_100,first_name,last_name,screen_name,domain"});return t}{const{groups:t}=await(0,l.api)("groups.getById",{group_ids:String(Math.abs(e)),fields:"is_closed,photo_50,photo_100,name,screen_name"});return t?.[0]??null}},S=(e,t)=>{const s=new c.ShortVideoUploadService;s.setOwner(t),s.setFiles(e)},D=e=>{if(!location.pathname.includes(u.CLIPS_SECTIONS.UPLOAD)){const t=d.Ranges.isGroupId(e)?d.Ranges.convertGroupIdToOwnerId(e):e;window.nav.go(`${u.BASE_ROUTE}/upload${t}`)}}},349835:(e,t,s)=>{"use strict";s.d(t,{getWkViewNodes:()=>a,handleWkViewCloseEvent:()=>u,isWkLayerWallPostOpen:()=>r,preparePostElToDetaching:()=>d,sendWkViewCloseEvent:()=>c,updatePostElAfterAttaching:()=>l});var n=s(15614);function a(){const e=window.wkcur.wkBox,t=window.wkcur.wkContent;return{wkBox:e,wkContent:t,wkContentText:t.firstElementChild,wkRight:window.wkcur.wkRight}}const r=()=>!!window.cur.wallLayer,d=e=>{const t=e.querySelector(`.${n.UI_GALLERY_CLASSNAME}`);if(t){const e=t.querySelector(`.${n.UI_GALLERY_CONTENT_CLASSNAME}`)?.scrollLeft;e&&(t.dataset.contentScrollLeft=e.toString())}},l=e=>{const t=e.querySelector(`.${n.UI_GALLERY_CLASSNAME}`);if(t){const e=t.querySelector(`.${n.UI_GALLERY_CONTENT_CLASSNAME}`),{contentScrollLeft:s}=t.dataset;e&&s&&(e.scrollLeft=parseInt(s,10))}},c=()=>{const e=new CustomEvent("wkview_close");window.dispatchEvent(e)},u=e=>{const t=()=>{e()};return window.addEventListener("wkview_close",t),()=>{window.removeEventListener("wkview_close",t)}}},545537:(e,t,s)=>{"use strict";function n(){return window.wkcur&&Array.isArray(window.wkcur._hide)?window.wkcur._hide:[]}function a(e){"function"==typeof e&&n().push(e)}function r(e){var t;t=n().filter((t=>t!==e)),window.wkcur&&(window.wkcur._hide=t)}function d(){n().forEach((e=>{e()}))}s.d(t,{addWkViewHideQueue:()=>a,executeWkViewHideQueue:()=>d,removeWkViewHideQueue:()=>r})},755330:(e,t,s)=>{"use strict";s.d(t,{Ranges:()=>n.Ranges});var n=s(810068)},835077:(e,t,s)=>{"use strict";s.d(t,{MessageBoxDismissButton:()=>n.MessageBoxDismissButton,MessageBoxModal:()=>n.MessageBoxModal,MessageBoxModalLoader:()=>n.MessageBoxModalLoader,PageBlockOffsetSpacing:()=>n.PageBlockOffsetSpacing,showMessageBoxModal:()=>n.showMessageBoxModal,showMessageBoxModalSuspense:()=>n.showMessageBoxModalSuspense,useMessageBoxHideAttempt:()=>n.useMessageBoxHideAttempt,useNarrowColumnOffset:()=>n.useNarrowColumnOffset});var n=s(211413)},220428:(e,t,s)=>{"use strict";s.d(t,{DIRootWebProvider:()=>n.DIRootWebProvider});var n=s(319756)},893069:(e,t,s)=>{"use strict";s.d(t,{AudioRowSkeleton:()=>c});var n=s(474848),a=s(303800),r=s(753457),d=s(157643),l=s(194528);function c(){return(0,n.jsx)(a.Div,{mode:"vertical",paddingTop:4,paddingBottom:4,children:(0,n.jsxs)(r.Flex,{align:"center",children:[(0,n.jsx)(d.Skeleton,{width:48,height:48,borderRadius:4}),(0,n.jsx)(l.Spacing,{size:12,mode:"vertical"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Skeleton,{width:255,height:12,borderRadius:2}),(0,n.jsx)(l.Spacing,{size:8}),(0,n.jsx)(d.Skeleton,{width:87,height:8,borderRadius:2})]})]})})}},119995:(e,t,s)=>{"use strict";s.d(t,{BASE_ROUTE:()=>n.BASE_ROUTE,CLIPS_SECTIONS:()=>n.CLIPS_SECTIONS,EXCLUDED_SECTIONS:()=>n.EXCLUDED_SECTIONS,PUBLISH_STAT_LOG_SECTIONS:()=>n.PUBLISH_STAT_LOG_SECTIONS,ROUTES:()=>n.ROUTES,getArtistUrl:()=>a.getArtistUrl,getClipsGridSoundUrl:()=>a.getClipsGridSoundUrl,getCompilationUrl:()=>a.getCompilationUrl,getEffectUrl:()=>a.getEffectUrl,getFeedTopUrl:()=>a.getFeedTopUrl,getFeedUrl:()=>a.getFeedUrl,getHashtagUrl:()=>a.getHashtagUrl,getMarketUrl:()=>a.getMarketUrl,getMusicUrl:()=>a.getMusicUrl,getOwnerClipsUrl:()=>a.getOwnerClipsUrl,getOwnerProfileUrl:()=>a.getOwnerProfileUrl,getPlaceUrl:()=>a.getPlaceUrl,getPlaylistUrl:()=>a.getPlaylistUrl,getPopupClipUrl:()=>a.getPopupClipUrl,getPostponedClipsUrl:()=>a.getPostponedClipsUrl,getPublishedClipsUrl:()=>a.getPublishedClipsUrl,getSharedClipFullUrl:()=>a.getSharedClipFullUrl,getStatisticsUrl:()=>a.getStatisticsUrl,usePath:()=>d.usePath,useRoute:()=>r.useRoute});var n=s(942765),a=s(120197),r=s(223347),d=s(902875)},942765:(e,t,s)=>{"use strict";s.d(t,{BASE_ROUTE:()=>a,BASE_SINGLE_CLIP_ROUTE:()=>r,CLIPS_SECTIONS:()=>d,CLIP_POPUP_QUERY_PARAMETER:()=>p,CLIP_QUERY_PARAMETER:()=>_,EXCLUDED_SECTIONS:()=>l,PUBLISH_STAT_LOG_SECTIONS:()=>u,ROUTES:()=>c});var n=s(317849);const a="/clips",r="/clip",d={TOP:"top",SUBSCRIPTIONS:"subscriptions",MY:"my",OWNER:"owner",HASHTAG:"hashtag",UPLOAD:"upload",MUSIC:"music",COMPILATION:"compilation",EFFECT:"effect",POSTPONED:"postponed",PLAYLIST:"playlist",PLACE:"place",SEARCH:"search",SEARCH_SECTION:"search_section"},l=[(0,n.partConfigEnabled)("clips_web_upload_form")?"":d.UPLOAD,(0,n.partConfigEnabled)("clips_web_compilations")?"":d.MUSIC,(0,n.partConfigEnabled)("clips_web_compilations")?"":d.HASHTAG,(0,n.partConfigEnabled)("clips_web_compilations")?"":d.COMPILATION,(0,n.partConfigEnabled)("clips_web_compilations")?"":d.EFFECT],c={[d.SEARCH]:`${a}/search`,[d.MY]:[`${a}${window.vk.id}`,`${a}/id${window.vk.id}`],[d.SUBSCRIPTIONS]:`${a}/subscriptions`,[d.UPLOAD]:`${a}/upload(-?\\d+)`,[d.MUSIC]:`${a}/music/(-?\\d+_\\d+)`,[d.HASHTAG]:`${a}/hashtag/(.*)`,[d.COMPILATION]:`${a}/compilation/(\\d+)`,[d.POSTPONED]:`${a}/postponed`,[d.PLAYLIST]:`${a}/playlist/(-?\\d+_\\d+)`,[d.EFFECT]:`${a}/effect/(-?\\d+_-?\\d+)`,[d.PLACE]:`${a}/place/(\\d+)`,[d.OWNER]:[`${a}(-?\\d+)`,`${a}/id(\\d+)`,`${a}/club(\\d+)`,`${a}/([0-9a-z_.-]+)`],[d.TOP]:[`${r}(-?\\d+_\\d+)?`,`${r}`,`${a}`]},u={[d.TOP]:"rec",[d.SUBSCRIPTIONS]:"subscriptions",[d.MY]:"myclips"},_="clip",p="z"},120197:(e,t,s)=>{"use strict";s.d(t,{getArtistUrl:()=>O,getClipsGridSoundUrl:()=>m,getCompilationUrl:()=>b,getEffectUrl:()=>I,getFeedClipUrl:()=>l,getFeedTopUrl:()=>u,getFeedUrl:()=>c,getHashtagUrl:()=>P,getMarketUrl:()=>S,getMusicUrl:()=>T,getOwnerClipsUrl:()=>E,getOwnerProfileUrl:()=>A,getPlaceUrl:()=>M,getPlaylistUrl:()=>C,getPopupClipUrl:()=>p,getPostponedClipsUrl:()=>f,getPublishedClipsUrl:()=>g,getSharedClipFullUrl:()=>_,getStatisticsUrl:()=>y});var n=s(317849),a=s(538522),r=s(755330),d=s(942765);const l=(e,t="")=>(0,n.partConfigEnabled)("clips_open_direct_link")&&e===d.CLIPS_SECTIONS.TOP?`${d.BASE_SINGLE_CLIP_ROUTE}${t}`:`${location.pathname}${t}`,c=(e,t="")=>(0,n.partConfigEnabled)("clips_open_direct_link")&&"top"===e?`${t}`:"top"===e||"subscriptions"===e?`?${d.CLIP_QUERY_PARAMETER}=${t}`:`${d.BASE_ROUTE}`,u=()=>`${d.BASE_ROUTE}`,_=e=>`${window.location.origin}/clip${e}`,p=e=>`?${d.CLIP_POPUP_QUERY_PARAMETER}=${d.CLIP_QUERY_PARAMETER}${e}`,m=e=>`${d.BASE_ROUTE}/music/${e}`,y=(e=0)=>`/clips_stats#owner_id=${e}`,f=e=>`${d.BASE_ROUTE}/postponed/${r.Ranges.isGroupId(+e)?"club"+Math.abs(+e):e}`,g=e=>{const t=Number(e)?e:`/${e}`;return`${d.BASE_ROUTE}${t}`},E=e=>`${d.BASE_ROUTE}/${e}`,A=e=>`/${e}`,b=e=>`${d.BASE_ROUTE}/compilation/${e}`,P=e=>`${d.BASE_ROUTE}/hashtag/${e}`,I=e=>`${d.BASE_ROUTE}/effect/${e}`,T=e=>`${d.BASE_ROUTE}/music/${e}`,C=(e,t)=>`${d.BASE_ROUTE}/playlist/${e}_${t}`,O=e=>`/artist/${e}`,M=e=>`${d.BASE_ROUTE}/place/${e}`,S=(e,t)=>`${r.Ranges.isGroupId(e)?`club${r.Ranges.convertOwnerIdToGroupId(e)}`:`id${e}`}?w=product${(0,a.joinRawId)({ownerId:e,itemId:t})}&ref=clips&ref_screen=clips`},902875:(e,t,s)=>{"use strict";s.d(t,{usePath:()=>l});var n=s(899631),a=s(864175),r=s(296540),d=s(120197);const l=e=>{const t=(0,n.useLocation)(),{navigate:s}=(0,a.useNavigate)();return{pushPathToCurrentLoc:(0,r.useCallback)((t=>{window.cur.onAfterReset=(e,t)=>(t.module=e.module,t.urlAttachmentTimeHash=e.urlAttachmentTimeHash,t),s((0,d.getFeedClipUrl)(e,t))}),[t.pathname])}}},223347:(e,t,s)=>{"use strict";s.d(t,{useRoute:()=>l});var n=s(263290),a=s(899631),r=s(317849),d=s(942765);function l(){const e=(0,n.useQuery)(),t=(0,a.useLocation)(),s=(0,r.partConfigEnabled)("clips_open_direct_link")?t.pathname.match(new RegExp("\\/clip(-?\\d+_\\d+)$"))?.[1]:"",l=Boolean(e[d.CLIP_POPUP_QUERY_PARAMETER]);return{activeClipId:e[d.CLIP_QUERY_PARAMETER]||s||"",isPopupOpened:l}}},749903:(e,t,s)=>{"use strict";s.d(t,{getOwnedAudioListSource:()=>r});var n=s(70148),a=s(391751);function r(e,t){const s=function({cookie:e}){const t=e.get(d);if(!t)return null;try{const e=JSON.parse(t);return e||null}catch{return null}}(t);if(!s||!s.ref)return null;const r=n.OwnedIdentity.fromRawId(e),l=n.OwnedIdentity.fromRawId(s.list_id);return(0,a.compareIdentities)(r,l)?s:null}const d="remixaudio_last_list_ref"},488629:(e,t,s)=>{"use strict";s.d(t,{AudioListItemsBodySkeleton:()=>p});var n=s(474848),a=s(296540),r=s(8520),d=s(194528),l=s(303800),c=s(753457),u=s(893069),_=s(991121);function p({item:e=(0,n.jsx)(u.AudioRowSkeleton,{}),count:t=_.AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT}){const s=(0,a.useMemo)((()=>(0,r.createArray)(t||5)),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Spacing,{mode:"vertical",size:20}),(0,n.jsx)(l.Div,{mode:"vertical",spacing:12,paddingTop:0,paddingBottom:0,children:(0,n.jsx)(l.Div,{mode:"vertical",spacing:8,paddingTop:0,paddingBottom:0,children:(0,n.jsx)(c.Flex,{direction:"column",gap:8,children:s.map((t=>(0,n.jsx)("div",{children:e},t)))})})})]})}},726296:(e,t,s)=>{"use strict";s.d(t,{AudioListItemsFooterSkeleton:()=>c});var n=s(474848),a=s(303800),r=s(194528),d=s(753457),l=s(157643);function c(){return(0,n.jsxs)(a.Div,{mode:"vertical",spacing:12,paddingTop:0,paddingBottom:0,children:[(0,n.jsx)(r.Spacing,{size:5}),(0,n.jsx)(a.Div,{mode:"vertical",spacing:8,paddingTop:0,paddingBottom:0,children:(0,n.jsxs)(d.Flex,{direction:"column",justify:"center",align:"center",children:[(0,n.jsx)(r.Spacing,{size:10}),(0,n.jsx)(l.Skeleton,{width:92,height:8,borderRadius:2}),(0,n.jsx)(r.Spacing,{size:10})]})}),(0,n.jsx)(r.Spacing,{size:5})]})}},518090:(e,t,s)=>{"use strict";s.d(t,{AudioListItemsHeaderSkeleton:()=>l});var n=s(474848),a=s(194528),r=s(303800),d=s(157643);function l(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Spacing,{size:15}),(0,n.jsx)(r.Div,{mode:"vertical",spacing:12,paddingTop:0,paddingBottom:0,children:(0,n.jsxs)(r.Div,{mode:"vertical",spacing:8,paddingTop:0,paddingBottom:0,children:[(0,n.jsx)(d.Skeleton,{width:75,height:12,borderRadius:4}),(0,n.jsx)(a.Spacing,{size:12}),(0,n.jsx)(d.Skeleton,{width:154,height:8,borderRadius:2})]})}),(0,n.jsx)(a.Spacing,{size:25})]})}},195589:(e,t,s)=>{"use strict";s.d(t,{AudioListItemsSkeleton:()=>u});var n=s(474848),a=s(893069),r=s(488629),d=s(726296),l=s(518090),c=s(991121);function u({header:e=(0,n.jsx)(l.AudioListItemsHeaderSkeleton,{}),item:t=(0,n.jsx)(a.AudioRowSkeleton,{}),count:s=c.AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT,hasHeader:u,hasFooter:_}){return(0,n.jsxs)(n.Fragment,{children:[u?e:void 0,(0,n.jsx)(r.AudioListItemsBodySkeleton,{item:t,count:s}),_&&(0,n.jsx)(d.AudioListItemsFooterSkeleton,{})]})}},736521:(e,t,s)=>{"use strict";s.d(t,{AudioListModalHeaderSkeleton:()=>u});var n=s(474848),a=s(303800),r=s(753457),d=s(157643),l=s(194528),c=s(582192);function u(){return(0,n.jsx)(a.Div,{mode:"vertical",paddingTop:8,paddingBottom:0,spacing:8,children:(0,n.jsx)(a.Div,{mode:"vertical",paddingTop:12,paddingBottom:0,spacing:12,children:(0,n.jsxs)(r.Flex,{direction:"column",children:[(0,n.jsxs)(r.Flex,{direction:"row",justify:"space-between",children:[(0,n.jsx)(d.Skeleton,{width:156,height:156,borderRadius:10}),(0,n.jsxs)(r.Flex,{direction:"column",align:"stretch",children:[(0,n.jsx)(l.Spacing,{size:6}),(0,n.jsx)(r.Flex.Item,{alignSelf:"end",flex:"fixed",flexBasis:0,children:(0,n.jsxs)(r.Flex,{direction:"row",gap:16,children:[(0,n.jsx)(d.Skeleton,{width:16,height:16,circle:!0}),(0,n.jsx)(d.Skeleton,{width:16,height:16,circle:!0})]})}),(0,n.jsx)(d.Skeleton,{width:166,height:16,borderRadius:4}),(0,n.jsx)(l.Spacing,{size:4}),(0,n.jsxs)(r.Flex,{align:"center",children:[(0,n.jsx)(d.Skeleton,{width:16,height:16,circle:!0}),(0,n.jsx)(l.Spacing,{mode:"vertical",size:6}),(0,n.jsx)(d.Skeleton,{height:8,width:40,borderRadius:2})]}),(0,n.jsx)(l.Spacing,{size:4}),(0,n.jsx)(d.Skeleton,{width:187,height:8,borderRadius:2}),(0,n.jsx)(l.Spacing,{size:30}),(0,n.jsx)(d.Skeleton,{width:330,height:16,borderRadius:4})]})]}),(0,n.jsx)(l.Spacing,{size:36}),(0,n.jsx)(d.Skeleton,{width:502,height:16,borderRadius:4}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(d.Skeleton,{width:502,height:16,borderRadius:4}),(0,n.jsx)(l.Spacing,{size:12}),(0,n.jsx)(d.Skeleton,{width:502,height:16,borderRadius:4}),(0,n.jsx)(l.Spacing,{size:16}),(0,n.jsx)(c.Separator,{wide:!0})]})})})}},991121:(e,t,s)=>{"use strict";s.d(t,{AUDIO_LIST_ITEMS_SKELETON_COUNT_DEFAULT:()=>n});const n=5},221062:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistModalContentSkeleton:()=>l});var n=s(474848),a=s(194528),r=s(195589),d=s(736521);function l(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.AudioListModalHeaderSkeleton,{}),(0,n.jsx)(r.AudioListItemsSkeleton,{count:5,hasHeader:!0,hasFooter:!0}),(0,n.jsx)(a.Spacing,{size:20})]})}},887205:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistModalLayout:()=>c});var n=s(474848),a=s(296540),r=s(694244),d=s(753457),l=s(65760);function c({children:e,...t}){const{onClose:s,refreshCoordinates:c=(()=>{})}=t,u=(0,a.useRef)(null);return(0,l.useRefreshModalCoordinates)(u,c),(0,n.jsxs)(r.ModalBox,{width:542,getRef:u,children:[(0,n.jsx)(d.ModalDismissButton,{onClick:s}),e]})}},65760:(e,t,s)=>{"use strict";s.d(t,{useRefreshModalCoordinates:()=>r});var n=s(296540),a=s(138875);function r(e,t){const s=(0,n.useRef)(0);(0,n.useEffect)((()=>{t()}),[]),(0,a.useResize)(e,(e=>{!function(e,t,s){(function(e,t){const s=window.visualViewport;if(!s)return!1;return function(e,t){return Math.min(e.clientHeight,t.current)}(e,t)>=s.height})(e,t)||s()}(e,s,t),s.current=e.clientHeight}))}},138875:(e,t,s)=>{"use strict";s.d(t,{useResize:()=>r});var n=s(296540),a=s(634444);function r(e,t){const s=(0,a.useStableCallback)(t);(0,n.useEffect)((()=>{const t=e?.current;if(!t)return;const n=new ResizeObserver((()=>s(t)));return n.observe(t),()=>n.disconnect()}),[e])}},658247:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistModalLayout:()=>n.MusicPlaylistModalLayout});var n=s(887205)},896809:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistModalFallback:()=>d});var n=s(474848),a=s(989732),r=s(658247);function d(){return(0,n.jsx)(r.MusicPlaylistModalLayout,{children:(0,n.jsx)(a.MusicPlaylistFallback,{})})}},176317:(e,t,s)=>{"use strict";s.d(t,{showMusicPlaylistModal:()=>p});var n=s(474848),a=s(8520),r=s(837293),d=s(835077),l=s(220428),c=s(589694),u=s(896809);const _=(0,r.lazyModule)({loader:async()=>{const{MusicPlaylistModal:e}=await Promise.all([s.e(91498),s.e(89631),s.e(21529),s.e(79210),s.e(95811),s.e(51794),s.e(51678),s.e(33641)]).then(s.bind(s,788339));return e},name:"MusicPlaylistModal",LoadingComponent:c.MusicPlaylistModalSkeleton,LoadingErrorComponent:u.MusicPlaylistModalFallback});function p(e,t={}){return(0,d.showMessageBoxModal)((({onClose:t,refreshCoordinates:s})=>(0,n.jsx)(l.DIRootWebProvider,{children:(0,n.jsx)(_,{...e,onClose:t,onDeleted:m(t),refreshCoordinates:s,loading:(0,n.jsx)(c.MusicPlaylistModalSkeleton,{})})})),{...t,width:542,hideOnBGClick:!0,fullscreen:!1})}function m(e){return(0,a.debounce)(e,300)}},589694:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistModalSkeleton:()=>d});var n=s(474848),a=s(658247),r=s(221062);function d(){return(0,n.jsx)(a.MusicPlaylistModalLayout,{children:(0,n.jsx)(r.MusicPlaylistModalContentSkeleton,{})})}},989732:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistFallback:()=>l});var n=s(474848),a=s(149333),r=s(303800),d=s(720836);function l(){const e=(0,a.useLangs)(),t=e.getLang("audio_music_playlist_crash_placeholder_header"),s=e.getLang("audio_music_playlist_crash_placeholder_description");return(0,n.jsx)(r.Div,{paddingTop:16,paddingBottom:16,spacing:8,children:(0,n.jsx)(d.Placeholder,{header:t,children:s})})}},702130:(e,t,s)=>{"use strict";s.d(t,{AudioList:()=>c});var n=s(434518),a=s(763812),r=s(817834),d=s(157336),l=(0,a._)("_ensureFetchable");class c{fetchAt(e,t){return(0,n._)(this,l)[l]().fetchAt(e,t)}fetchNext(e){return(0,n._)(this,l)[l]().fetchNext(e)}async ensureAt(e){const t=this.ensureAbsIndex(e);let s=this.audioAt(t);return s||this.fetchAt(t,{prefetch:!0})}ensureAbsIndex(e){return(0,r.ensureAudioListAbsIndex)(this,e)}get maxIndex(){return(0,d.getAudioListMaxIndex)(this)}constructor(){Object.defineProperty(this,l,{value:u})}}function u(){const{fetchable:e}=this;if(!e)throw new Error("AudioListFetchable not implemented");return e}},817834:(e,t,s)=>{"use strict";s.d(t,{ensureAudioListAbsIndex:()=>r});var n=s(140462),a=s(120388);function r(e,t){const s=(0,n.indexAbs)(e.length,t);if(!(0,a.isValidAudioListAbsIndex)(e,s))throw new Error("Index is out of range");return s}},157336:(e,t,s)=>{"use strict";function n(e){const t=e.length;return e.infinite?t:t-1}s.d(t,{getAudioListMaxIndex:()=>n})},120388:(e,t,s)=>{"use strict";s.d(t,{isValidAudioListAbsIndex:()=>a});var n=s(157336);function a(e,t){return t>=0&&t<=(0,n.getAudioListMaxIndex)(e)}},31580:(e,t,s)=>{"use strict";s.d(t,{allowLinkOnclickWebAttrs:()=>a,isAllowLinkOnclickWebForLink:()=>r});const n="data-allow-link-onclick-web",a={[n]:1};function r(e){return!!(e&&e instanceof HTMLElement)&&e.hasAttribute(n)}},201511:(e,t,s)=>{"use strict";s.d(t,{toAudioData:()=>d});var n=s(520790),a=s(293658),r=s(35215);function d(e){const{duration:t}=e;return{identity:(0,n.toOwnedAudioIdentityData)(e),title:e.title,artwork:u(e),url:e.url||null,isExplicit:e.is_explicit??!1,authors:l(e),duration:Number.isFinite(t)?t:void 0,isBlocked:_(e)}}function l(e){return{main:e?.main_artists?.map(c)??[],feat:e?.featured_artists?.map(c)??[],raw:e.artist}}function c(e){return{name:e.name}}function u(e){const t=e.album?.thumb;return t?(0,a.toAudioArtworkImages)(t):[]}function _({dmca_blocked:e,content_restricted:t}){return!!e||(0,r.isNumber)(t)&&0!==t}},520790:(e,t,s)=>{"use strict";function n(e){return{id:e.id,ownerId:e.owner_id,accessKey:e.access_key}}s.d(t,{toOwnedAudioIdentityData:()=>n})},588357:(e,t,s)=>{"use strict";var n;s.d(t,{AudioType:()=>n}),function(e){e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio"}(n||(n={}))},293658:(e,t,s)=>{"use strict";s.d(t,{toAudioArtworkImages:()=>a});const n=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function a(e,t){const s=[];if(!e)return s;for(const[a,r]of n){const n=e[a];n&&s.push({src:n,size:r,mainColor:t})}return s}},598539:(e,t,s)=>{"use strict";s.d(t,{AudioContextableEntityMultiton:()=>u});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=s(70916),c=(0,a._)("_makeCachedDataGetter");class u{get(e,t){const s=this.getEntityKey(e,t);let n=this.entities.get(s);if(n)return n;if(!t)return;const a=this.data.get(e);if(a){const r=this.constructEntity(this.makeEntityParams(e,a),t);n=r,this.entities.set(s,r)}return n}getStrict(e,t){const s=this.get(e,t);if(!s)throw new Error("Entity not created or lost cache");return s}create(e,t){const{identity:s,data:n}=e;if(this.setState(s,e.state),this.data.set(s,n),t){const t=this.constructEntity(this.makeEntityParams(s,n));this.entities.set(this.getEntityKey(e.identity),t)}const a=this.constructEntity(this.makeEntityParams(s,n),t);return this.entities.set(this.getEntityKey(e.identity,t),a),a}getEntityKey(e,t){const s=t&&this.getContextKey(t);return`${e.fullId}${s??""}`}makeEntityParams(e,t){return{identity:e,getData:(0,n._)(this,c)[c](e,t),attachContext:t=>this.getStrict(e,t)}}constructor(){Object.defineProperty(this,c,{value:_}),this.entities=new Map,this.data=new l.ObservableIdentityMap,(0,d.makeObservable)(this)}}function _(e,t){let s=t;return()=>{let t=this.data.get(e);return t&&(s=t),t??s}}(0,r.__decorate)([d.observable],u.prototype,"entities",void 0),(0,r.__decorate)([d.observable],u.prototype,"data",void 0),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof CreateParams?Object:CreateParams,"undefined"==typeof Context?Object:Context]),(0,r.__metadata)("design:returntype",Object)],u.prototype,"create",null)},694132:(e,t,s)=>{"use strict";s.d(t,{AudioNavScreenModalType:()=>u,AudioNavScreenPageType:()=>c,AudioNavScreenProvider:()=>p});var n=s(434518),a=s(763812),r=s(331635),d=s(132028);const l=(0,s(558137).makeSharedState)("domains/audio/AudioNavScreenState",(()=>({page:null,catalogSectionId:null,modals:[]})),{version:1});var c,u;!function(e){e.Catalog="audio_catalog",e.Artist="music_artist",e.Album="music_album",e.Playlist="music_playlist",e.Track="music_track",e.SnippetsFeed="music_snippets_list",e.Podcast="podcast_podcast"}(c||(c={})),function(e){e.Album="music_album_popup",e.Playlist="music_playlist_popup",e.Longtap="music_longtap_preview_popup",e.PodcastEpisode="podcast_episode_popup"}(u||(u={}));var _=(0,a._)("_clearModal");class p{get isModal(){return!!l().modals.length}get screen(){const e=l(),t=e.modals[0];return t||e.page}get catalogSectionId(){return"audio_catalog"!==this.screen?null:l().catalogSectionId}setPage(e,t){const s=l();s.page=e,s.catalogSectionId=t??null}clearPage(){const e=l();e.page=null,e.catalogSectionId=null}pushModal(e){l().modals.unshift(e)}popModal(e){const t=l();t.modals[0]===e?t.modals.shift():(0,n._)(this,_)[_]()}constructor(){Object.defineProperty(this,_,{value:m})}}function m(){l().modals=[]}p=(0,r.__decorate)([d.scope.global()],p)},735859:(e,t,s)=>{"use strict";s.d(t,{Audio:()=>m});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=s(545208),c=(0,a._)("_identity"),u=(0,a._)("_context"),_=(0,a._)("_getData"),p=(0,a._)("_attachContext");class m{get identity(){return(0,n._)(this,c)[c]}get context(){return(0,n._)(this,u)[u]}attachContext(e){const t=(0,n._)(this,p)[p];if(!t)throw new Error("Audio is not contextable");return t(e)}get data(){return(0,n._)(this,_)[_]()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get artwork(){return this.data.artwork}get isExplicit(){return this.data.isExplicit}get authors(){return this.data.authors}get duration(){return this.data.duration}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:e}=this;return{title:this.title,artist:e&&(0,l.stringifyAudioAuthors)(e),artwork:[...this.artwork]}}getContextStrict(){const{context:e}=this;if(!e)throw new Error("Audio is not contextual");return e}constructor(e){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=e.identity,(0,n._)(this,u)[u]=e.context??null,(0,n._)(this,_)[_]=e.getData,(0,n._)(this,p)[p]=e.attachContext,(0,d.makeObservable)(this)}}(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],m.prototype,"data",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"type",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"url",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"title",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"artwork",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"isExplicit",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"authors",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"duration",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Object)],m.prototype,"isBlocked",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit)],m.prototype,"mediaMetadata",null)},545208:(e,t,s)=>{"use strict";function n(e){return[e.main.map((({name:e})=>e)).filter(Boolean).join(", "),e.feat.map((({name:e})=>e)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||e.raw}s.d(t,{stringifyAudioAuthors:()=>n})},921259:(e,t,s)=>{"use strict";s.d(t,{AudioEntityToggle:()=>r});var n=s(331635),a=s(327813);class r{get isPending(){return this.toggleService.pending.has(this.identity)}get state(){return!!this.toggleService.state.get(this.identity)}activate(...[e]){return this.toggleService.activate(this.identity,e)}deactivate(...[e]){return this.toggleService.deactivate(this.identity,e)}toggle(e,t){return this.toggleService.toggle(this.identity,e,t)}constructor(e,t){this.identity=e,this.toggleService=t,(0,a.makeObservable)(this)}}(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],r.prototype,"isPending",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],r.prototype,"state",null)},841376:(e,t,s)=>{"use strict";s.d(t,{AudioEntityToggleService:()=>f});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=s(70916),c=s(74270),u=s(558137),_=(0,a._)("_activating"),p=(0,a._)("_deactivating"),m=(0,a._)("_pending"),y=(0,a._)("_state");class f{get events(){return this.emitter.listenable}get pending(){return(0,n._)(this,m)[m]}get state(){return(0,n._)(this,y)[y]}async activate(e,t){this.assertRequestsAllowed?.();const s=(0,n._)(this,_)[_].get(e);if(s)return s;if(await(0,n._)(this,p)[p].get(e),!0===(0,n._)(this,y)[y].get(e))return;const a=this.forceActivate(e,t);try{(0,n._)(this,_)[_].set(e,a),await a}finally{(0,n._)(this,_)[_].delete(e)}}async deactivate(e,t){this.assertRequestsAllowed?.();const s=(0,n._)(this,p)[p].get(e);if(s)return s;if(await(0,n._)(this,_)[_].get(e),!1===(0,n._)(this,y)[y].get(e))return;const a=this.forceDeactivate(e,t);try{(0,n._)(this,p)[p].set(e,a),await a}finally{(0,n._)(this,p)[p].delete(e)}}async toggle(e,t,s){if(this.assertRequestsAllowed?.(),(0,n._)(this,m)[m].has(e))return;const a=(0,n._)(this,y)[y].get(e),r=s??!a;return r!==a?r?this.activate(e,t.activate):this.deactivate(e,t.deactivate):void 0}setState(e,t){(0,n._)(this,y)[y].set(e,t)}assertRequestsAllowed(){}async forceActivate(e,t){try{(0,n._)(this,m)[m].add(e),this.emitter.emit("activate",{identity:e,params:t}),await this.requestActivate(e,t),this.setState(e,!0)}finally{(0,n._)(this,m)[m].delete(e)}this.emitter.emit("activated",{identity:e,params:t})}async forceDeactivate(e,t){try{(0,n._)(this,m)[m].add(e),this.emitter.emit("deactivate",{identity:e,params:t}),await this.requestDeactivate(e,t),this.setState(e,!1)}finally{(0,n._)(this,m)[m].delete(e)}this.emitter.emit("deactivated",{identity:e,params:t})}constructor(e,t={}){Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0});const s=function(e,{sharedStateConfig:t}){if(!t)return g(e);const{key:s,version:n}=t,a=(0,u.makeSharedState)(s,(()=>({})),{version:n})();a.current||(a.current=g(e));return a.current}(e,t);this.emitter=s.emitter,(0,n._)(this,_)[_]=s.activating,(0,n._)(this,p)[p]=s.deactivating,(0,n._)(this,m)[m]=s.pending,(0,n._)(this,y)[y]=s.state,(0,d.makeObservable)(this)}}function g(e){return{emitter:e.create(),activating:new l.ObservableIdentityMap,deactivating:new l.ObservableIdentityMap,pending:new c.ObservableIdentitySet,state:new l.ObservableIdentityMap}}(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof ActivateParams?Object:ActivateParams]),(0,r.__metadata)("design:returntype",Promise)],f.prototype,"activate",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof DeactivateParams?Object:DeactivateParams]),(0,r.__metadata)("design:returntype",Promise)],f.prototype,"deactivate",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof IAudioEntityToggleActionToggleParams?Object:IAudioEntityToggleActionToggleParams,Boolean]),(0,r.__metadata)("design:returntype",Promise)],f.prototype,"toggle",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,Boolean]),(0,r.__metadata)("design:returntype",void 0)],f.prototype,"setState",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof ActivateParams?Object:ActivateParams]),(0,r.__metadata)("design:returntype",Promise)],f.prototype,"forceActivate",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof Identity?Object:Identity,"undefined"==typeof DeactivateParams?Object:DeactivateParams]),(0,r.__metadata)("design:returntype",Promise)],f.prototype,"forceDeactivate",null)},153346:(e,t,s)=>{"use strict";s.d(t,{MusicAudio:()=>p});var n=s(331635),a=s(327813),r=s(70148),d=s(735859),l=s(833600),c=s(116710),u=s(921259),_=s(741991);class p extends d.Audio{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){const e=this.data.releaseAudioIdentity;return e&&new r.OwnedIdentity(e)}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){const e=this.releaseAudioIdentity;return e?this.trackProvider.get(e)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.isMine)return null;const e=this.service.myMusic.getSource(this.identity);return e?this.trackProvider.get(e)??null:null}get isMine(){return this.myMusic.isOwned}constructor(e){super(e);const{identity:t}=this,{service:s}=e,n=this.context?.trackCode??null;this.trackProvider=e.trackProvider,this.service=s,this.myMusic=new c.MusicAudioOwning({identity:t,trackCode:n,service:s.myMusic}),this.groupsMusic=new _.MusicAudioGroupsMusic({identity:t,trackCode:n,service:s.groupMusicServices}),this.dislike=new u.AudioEntityToggle(t,s.dislikes),this.lyrics=new l.MusicLyrics({identity:t,service:s.lyrics}),(0,a.makeObservable)(this)}}(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],p.prototype,"subtitle",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],p.prototype,"album",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],p.prototype,"hasLyrics",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",Object)],p.prototype,"apiAudio",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",Object)],p.prototype,"releaseAudioIdentity",null),(0,n.__decorate)([a.override,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit)],p.prototype,"mediaMetadata",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",Object)],p.prototype,"releaseAudio",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",Object)],p.prototype,"originalAudio",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],p.prototype,"isMine",null)},741991:(e,t,s)=>{"use strict";s.d(t,{MusicAudioGroupsMusic:()=>a});var n=s(116710);class a{create(e){return new n.MusicAudioOwning({identity:this.identity,trackCode:this.trackCode,service:this.service.get(e)})}constructor(e){this.identity=e.identity,this.trackCode=e.trackCode,this.service=e.service}}},441615:(e,t,s)=>{"use strict";s.d(t,{MusicTrack:()=>d});var n=s(331635),a=s(327813),r=s(153346);class d extends r.MusicAudio{get isFocusTrack(){return this.data.isFocusTrack}constructor(e){super(e),(0,a.makeObservable)(this)}}(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],d.prototype,"isFocusTrack",null)},385275:(e,t,s)=>{"use strict";s.d(t,{MusicTrackLegacyProvider:()=>p});var n=s(331635),a=s(327813),r=s(70916),d=s(132028),l=s(70148),c=s(441615),u=s(824501),_=s(735584);class p{provide(e){const t=this.get(this.toEntityIdentity(e.identity),e.context);return t||this.create(e)}create(e){const{identity:t,data:s,state:n,context:a}=e;this.setState(t,n),this.data.set(t,s);const r=this.constructEntity(this.makeEntityParams(t,s),a);return this.entities.set(this.getEntityKey(t,a),r),r}getEntityKey(e,t){const s=t&&this.getContextKey(t);return`${e.fullId}${s??""}`}getContextKey(e){return`${e.list?.identity.fullId??""}/${e.trackCode}`}toEntityIdentity(e){return new l.OwnedIdentity(e)}setState(e,t){const{hasLyrics:s}=t;void 0!==s&&this.service.lyrics.setHasLyrics(e,s)}constructEntity(e,t){const s=new c.MusicTrack({...e,context:t,trackProvider:this.trackProvider,service:this.service});if(s.context)return s;throw new Error("This entity not contextual track")}get(e,t){const s=this.getEntityKey(e,t);let n=this.entities.get(s);if(n)return n;const a=this.data.get(e);if(a){const r=this.constructEntity(this.makeEntityParams(e,a),t);n=r,this.entities.set(s,r)}return n}getStrict(e,t){const s=this.get(e,t);if(!s)throw new Error("Entity not created or lost cache");return s}makeEntityParams(e,t){return{identity:e,getData:this.makeCachedDataGetter(e,t),attachContext:t=>this.getStrict(e,t)}}makeCachedDataGetter(e,t){let s=t;return()=>{const t=this.data.get(e);return t&&(s=t),t??s}}constructor(e,t){this.trackProvider=e,this.service=t,this.entities=new Map,this.data=new r.ObservableIdentityMap,(0,a.makeAutoObservable)(this)}}p=(0,n.__decorate)([d.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===_.MusicTrackProvider?Object:_.MusicTrackProvider,void 0===u.MusicService?Object:u.MusicService])],p)},735584:(e,t,s)=>{"use strict";s.d(t,{MusicTrackProvider:()=>E});var n=s(331635),a=s(327813),r=s(346675),d=s(132028),l=s(74270),c=s(70148),u=s(873900),_=s(598539),p=s(520790),m=s(441615),y=s(824501),f=s(551054),g=s(831321);class E extends _.AudioContextableEntityMultiton{createContextualFromAPI(e,t){const s=e.track_code;if(!s)throw new Error("trackCode is not defined in source");return this.createFromAPI(e).attachContext({...t,trackCode:s})}createFromAPI(e){return this.create({identity:new c.OwnedIdentity((0,p.toOwnedAudioIdentityData)(e)),data:(0,f.toMusicTrackData)(e),state:(0,g.toMusicAudioStateData)(e)})}isFetchingAudio(e){return this.pendingEntities.has(this.toEntityIdentity(e))}async ensure(e){const t=this.get(e);return t||this.fetch(e)}async fetch(e){const[t]=await this.fetchMany([e]);if(!t)throw new Error("Server did not return the audio");return t}async fetchMany(e){if(!e.length)return[];try{this.markPending(e);return(await this.audioApi.getById({audios:e.map(u.getIdentityAccessRawId).join(",")})).map((e=>this.createFromAPI(e)))}finally{this.unmarkPending(e)}}async ensureMany(e){let t=[],s=[];for(const n of e){const e=this.get(n);e?t.push(e):s.push(n)}if(!s.length)return t;const n=await this.fetchMany(s);t=[];for(const a of e){const r=this.get(a);if(!r)throw console.error("AudioData not found in entities",{identity:a,audio:r,fetched:n,entities:this.entities,identities:e,missing:s,result:t}),new Error("AudioData not found in entities");t.push(r)}return t}constructEntity(e,t){return new m.MusicTrack({...e,context:t,trackProvider:this,service:this.service})}setState(e,t){const{hasLyrics:s,disliked:n}=t;void 0!==s&&this.service.lyrics.setHasLyrics(e,s),void 0!==n&&this.service.dislikes.setState(e,n)}getContextKey(e){return`${e.list?.identity.fullId??""}/${e.trackCode}`}toEntityIdentity(e){return new c.OwnedIdentity(e)}markPending(e){e.forEach((e=>this.pendingEntities.add(this.toEntityIdentity(e))))}unmarkPending(e){e.forEach((e=>this.pendingEntities.delete(this.toEntityIdentity(e))))}constructor(e,t){super(),this.audioApi=e,this.service=t,this.pendingEntities=new l.ObservableIdentitySet,(0,a.makeObservable)(this)}}(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,n.__metadata)("design:returntype",Promise)],E.prototype,"ensure",null),(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,n.__metadata)("design:returntype",Promise)],E.prototype,"fetch",null),(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],E.prototype,"fetchMany",null),(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],E.prototype,"ensureMany",null),(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],E.prototype,"markPending",null),(0,n.__decorate)([a.action,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],E.prototype,"unmarkPending",null);E=(0,n.__decorate)([d.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.AudioApi?Object:r.AudioApi,void 0===y.MusicService?Object:y.MusicService])],E)},551054:(e,t,s)=>{"use strict";s.d(t,{toMusicSnippetClip:()=>u,toMusicSnippetData:()=>c,toMusicTrackData:()=>l});var n=s(201511),a=s(588357),r=s(70148);function d(e,t){return{...(0,n.toAudioData)(t),type:e,hasLyrics:t.has_lyrics??!1,authors:_(t),album:m(t),duration:t.duration,subtitle:t.subtitle??"",releaseAudioIdentity:t.release_audio_id?r.OwnedIdentity.fromRawId(t.release_audio_id):null,apiAudio:t}}function l(e){return{...d(a.AudioType.MusicTrack,e),isFocusTrack:e.is_focus_track??!1}}function c(e){return{...d(a.AudioType.MusicSnippet,e),clip:null}}function u(e){return e?.clip_from&&e?.clip_to?{to:e.clip_to,from:e.clip_from}:null}function _(e){return{main:e.main_artists?.map(p)??[],feat:e.featured_artists?.map(p)??[],raw:e.artist}}function p(e){return{name:e.name,id:e.id}}function m(e){const{album:t}=e;return t?{id:t.id,ownerId:t.owner_id,title:t.title}:null}},831321:(e,t,s)=>{"use strict";function n(e){return{hasLyrics:e.has_lyrics,disliked:e.dislike}}s.d(t,{toMusicAudioStateData:()=>n})},833600:(e,t,s)=>{"use strict";s.d(t,{MusicLyrics:()=>u});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=(0,a._)("_identity"),c=(0,a._)("_service");class u{get data(){return(0,n._)(this,c)[c].get((0,n._)(this,l)[l])}get isExist(){return(0,n._)(this,c)[c].hasLyrics((0,n._)(this,l)[l])}ensure(){return(0,n._)(this,c)[c].ensure((0,n._)(this,l)[l])}constructor(e){Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=e.identity,(0,n._)(this,c)[c]=e.service,(0,d.makeObservable)(this)}}(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],u.prototype,"data",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],u.prototype,"isExist",null)},329286:(e,t,s)=>{"use strict";s.d(t,{MusicLyricsService:()=>u});var n=s(331635),a=s(327813),r=s(132028),d=s(346675),l=s(503234),c=s(582170);class u{get(e){const t=this.hasLyrics(e);return t?this.lyricsCache.get(e):!1===t?null:void 0}hasLyrics(e){return this.hasLyricsCache.get(e)}async ensure(e){const t=this.get(e);if(t||null===t)return t;const s=await this.fetch(e);return this.setLyrics(e,s),s}setHasLyrics(e,t){this.hasLyricsCache.set(e,t)}async fetch(e){const t=await this.api.getLyrics({audio_id:e.accessRawId});return(0,l.toMusicLyricsData)(t)}setLyrics(e,t){this.lyricsCache.set(e,t),this.setHasLyrics(e,!!t)}constructor(e){this.api=e;const t=(0,c.ensureStuffing)();this.lyricsCache=t.lyricsCache,this.hasLyricsCache=t.hasLyricsCache,(0,a.makeAutoObservable)(this)}}u=(0,n.__decorate)([r.scope.container(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===d.AudioApi?Object:d.AudioApi])],u)},582170:(e,t,s)=>{"use strict";s.d(t,{ensureStuffing:()=>r});var n=s(558137),a=s(70916);function r(){const e=(0,n.makeSharedState)("domains/audio/MusicLyricsService/stuffing",(()=>({})),{version:1})();return e.current||(e.current={lyricsCache:new a.ObservableIdentityMap,hasLyricsCache:new a.ObservableIdentityMap}),e.current}},503234:(e,t,s)=>{"use strict";function n(e){return e.lyrics?.timestamps?{kind:"karaoke",karaoke:e.lyrics.timestamps.map((e=>({begin:e.begin,end:e.end,text:e.line??null})))}:e.lyrics?.text?{kind:"text",text:e.lyrics.text}:null}s.d(t,{toMusicLyricsData:()=>n})},116710:(e,t,s)=>{"use strict";s.d(t,{MusicAudioOwning:()=>c});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=(0,a._)("_service");class c{get ownerId(){return(0,n._)(this,l)[l].ownerId}get hasOwned(){return(0,n._)(this,l)[l].has(this.identity)}get isOwned(){return(0,n._)(this,l)[l].isOwned(this.identity)}get isDeleted(){return(0,n._)(this,l)[l].isDeleted(this.identity)}get isPending(){return(0,n._)(this,l)[l].checkPending(this.identity)}add(e){if(!this.trackCode)throw new Error("trackCode required");return(0,n._)(this,l)[l].add(this.identity,{...e,trackCode:this.trackCode})}delete(e){return(0,n._)(this,l)[l].delete(this.identity,e)}restore(e){return(0,n._)(this,l)[l].restore(this.identity,e)}constructor(e){Object.defineProperty(this,l,{writable:!0,value:void 0}),this.identity=e.identity,this.trackCode=e.trackCode,(0,n._)(this,l)[l]=e.service,(0,d.makeObservable)(this)}}(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],c.prototype,"hasOwned",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],c.prototype,"isOwned",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],c.prototype,"isDeleted",null),(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],c.prototype,"isPending",null)},41102:(e,t,s)=>{"use strict";s.d(t,{MusicAudioOwningService:()=>P});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=s(70916),c=s(74270),u=s(558137),_=s(70148),p=s(467585),m=(0,a._)("_ownerId"),y=(0,a._)("_authService"),f=(0,a._)("_emitter"),g=(0,a._)("_targets"),E=(0,a._)("_sources"),A=(0,a._)("_deletedTargets"),b=(0,a._)("_pendingIdentities");class P{get ownerId(){return"currentUser"===(0,n._)(this,m)[m]?(0,n._)(this,y)[y].userId??0:(0,n._)(this,m)[m]}get events(){return(0,n._)(this,f)[f].listenable}has(e){const t=this.getTarget(e);return!(!t||(0,n._)(this,A)[A].has(t))}getTarget(e){return this.isOwned(e)?e:(0,n._)(this,g)[g].get(e)}getSource(e){return(0,n._)(this,E)[E].get(e)}isOwned(e){return this.ownerId===e.ownerId}isDeleted(e){const t=this.getTarget(e);return!!t&&(0,n._)(this,A)[A].has(t)}checkPending(e){return(0,n._)(this,b)[b].has(this.getPendingIdentity(e))}async add(e,t){if(this.assertIsNotOwnedSource(e),this.assertWriteAllowed(),!t.force){const s=this.getTarget(e);if(s)try{return await this.restore(s,t),s}catch{}}this.markPending(e);const{trackCode:s}=t;let a;try{(0,n._)(this,f)[f].emit("add",{source:e,trackCode:s,params:t});const{newAudioId:r}=await this.requestAdd(e,s);if(null==r)throw new Error("Missing audio ID in response from audio.add api method");a=this.createIdentity(r),this.setCache(e,a),(0,n._)(this,f)[f].emit("added",{source:e,target:a,trackCode:s,params:t})}finally{this.unmarkPending(e)}return a}async delete(e,t){const s=this.getTarget(e);this.assertIsOwnedTarget(s),this.assertWriteAllowed(),this.markPending(s),(0,n._)(this,f)[f].emit("delete",{target:s,params:t??{}}),this.markAsDeleted(s);try{await this.api.delete({audio_id:s.id,owner_id:s.ownerId}),(0,n._)(this,f)[f].emit("deleted",{target:s,params:t??{}})}catch(e){throw this.unmarkAsDeleted(s),e}finally{this.unmarkPending(s)}}async restore(e,t){const s=this.getTarget(e);this.assertIsOwnedTarget(s),this.assertWriteAllowed(),this.markPending(s),(0,n._)(this,f)[f].emit("restore",{target:s,params:t??{}}),this.unmarkAsDeleted(s);try{await this.api.restore({audio_id:s.id,owner_id:s.ownerId}),(0,n._)(this,f)[f].emit("restored",{target:s,params:t??{}})}catch(e){if(e?.error?.error_code===p.AudioApiRestoreErrorCode.Expired){const e=this.getSource(s);e&&this.deleteCache(e)}throw e}finally{this.unmarkPending(s)}}assertWriteAllowed(){(0,n._)(this,y)[y].assertAuthorized()}setCache(e,t){(0,n._)(this,g)[g].set(e,t),(0,n._)(this,E)[E].set(t,e),this.unmarkAsDeleted(t)}deleteCache(e){const t=(0,n._)(this,g)[g].get(e);t&&((0,n._)(this,g)[g].delete(e),(0,n._)(this,E)[E].delete(t),this.unmarkAsDeleted(t))}markPending(e){(0,n._)(this,b)[b].add(this.getPendingIdentity(e))}unmarkPending(e){(0,n._)(this,b)[b].delete(this.getPendingIdentity(e))}markAsDeleted(e){(0,n._)(this,A)[A].add(e)}unmarkAsDeleted(e){(0,n._)(this,A)[A].delete(e)}createIdentity(e){return new _.OwnedIdentity({id:e,ownerId:this.ownerId})}assertIsOwnedTarget(e){if(!e||e.ownerId!==this.ownerId)throw new Error("Target identity is not owned")}assertIsNotOwnedSource(e){if(!e||e.ownerId===this.ownerId)throw new Error("Source identity is owned")}getPendingIdentity(e){return this.getTarget(e)??e}constructor(e){Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0});const t=function({sharedStateConfig:e,emitterFactory:t}){if(!e)return I(t);const{key:s,version:n}=e,a=(0,u.makeSharedState)(s,(()=>({})),{version:n})();a.current||(a.current=I(t));return a.current}(e);(0,n._)(this,m)[m]=e.ownerId,(0,n._)(this,y)[y]=e.authService,this.api=e.api,(0,n._)(this,f)[f]=t.emitter,(0,n._)(this,g)[g]=t.targets,(0,n._)(this,E)[E]=t.sources,(0,n._)(this,A)[A]=t.deletedTargets,(0,n._)(this,b)[b]=t.pendingIdentities,(0,d.makeObservable)(this)}}function I(e){return{emitter:e.create(),targets:new l.ObservableIdentityMap,sources:new l.ObservableIdentityMap,deletedTargets:new c.ObservableIdentitySet,pendingIdentities:new c.ObservableIdentitySet}}(0,r.__decorate)([d.computed,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"ownerId",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity,"undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"setCache",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"deleteCache",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"markPending",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"unmarkPending",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"markAsDeleted",null),(0,r.__decorate)([d.action,(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.__metadata)("design:returntype",void 0)],P.prototype,"unmarkAsDeleted",null)},467585:(e,t,s)=>{"use strict";var n;s.d(t,{AudioApiRestoreErrorCode:()=>n}),function(e){e[e.Expired=15]="Expired"}(n||(n={}))},246855:(e,t,s)=>{"use strict";var n;s.d(t,{MusicDislikeDeactivateReason:()=>n}),function(e){e.MyMusic="MyMusic"}(n||(n={}))},824501:(e,t,s)=>{"use strict";s.d(t,{MusicService:()=>O});var n=s(434518),a=s(763812),r=s(331635),d=s(132028),l=s(74270),c=s(481120),u=s(495488),_=s(447044),p=s(685434),m=s(329286),y=s(323706),f=s(246855),g=s(139845),E=(0,a._)("_myMusic"),A=(0,a._)("_dislikes"),b=(0,a._)("_groupMusicServices"),P=(0,a._)("_playlistsFollowing"),I=(0,a._)("_lyrics"),T=(0,a._)("_playlistItemsServices"),C=(0,a._)("_connectLikeEvents");class O{get myMusic(){return(0,n._)(this,E)[E]}get dislikes(){return(0,n._)(this,A)[A]}get groupMusicServices(){return(0,n._)(this,b)[b]}get playlistsFollowing(){return(0,n._)(this,P)[P]}get lyrics(){return(0,n._)(this,I)[I]}get playlistItemsServices(){return(0,n._)(this,T)[T]}constructor(e,t,s,a,r,d){Object.defineProperty(this,C,{value:M}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),(0,n._)(this,E)[E]=e,(0,n._)(this,A)[A]=t,(0,n._)(this,b)[b]=s,(0,n._)(this,P)[P]=a,(0,n._)(this,I)[I]=d,(0,n._)(this,T)[T]=r,(0,n._)(this,C)[C]()}}function M(){const{myMusic:e,dislikes:t}=this,s=new l.ObservableIdentitySet;e.events.on("add",(({source:e})=>{t.state.has(e)&&t.deactivate(e,{reason:f.MusicDislikeDeactivateReason.MyMusic})})),e.events.on("restore",(({target:e})=>{t.state.has(e)&&t.deactivate(e,{reason:f.MusicDislikeDeactivateReason.MyMusic})})),t.events.on("activate",(({identity:t})=>{e.has(t)&&e.delete(t,{reason:g.MyMusicDeleteReason.Dislike})})),t.events.on("deactivate",(({identity:t,params:{reason:n}})=>{n!==f.MusicDislikeDeactivateReason.MyMusic&&s.has(t)&&e.restore(t)})),e.events.on("deleted",(({target:e,params:t})=>{t.reason===g.MyMusicDeleteReason.Dislike&&s.add(e)})),e.events.on("restored",(({target:e})=>{s.delete(e)}))}O=(0,r.__decorate)([d.scope.global(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===u.MyMusicService?Object:u.MyMusicService,void 0===_.MusicDislikesService?Object:_.MusicDislikesService,void 0===c.GroupMusicServices?Object:c.GroupMusicServices,void 0===p.MusicPlaylistFollowingService?Object:p.MusicPlaylistFollowingService,void 0===y.MusicPlaylistItemsServices?Object:y.MusicPlaylistItemsServices,void 0===m.MusicLyricsService?Object:m.MusicLyricsService])],O)},139845:(e,t,s)=>{"use strict";var n;s.d(t,{MyMusicDeleteReason:()=>n}),function(e){e.Dislike="Dislike"}(n||(n={}))},725377:(e,t,s)=>{"use strict";s.d(t,{GroupMusicService:()=>l});var n=s(331635),a=s(327813),r=s(468073),d=s(41102);class l extends d.MusicAudioOwningService{get groupId(){return r.Ranges.convertOwnerIdToGroupId(this.ownerId)}async requestAdd(e,t){const s=await this.api.add({audio_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,group_id:this.groupId,track_code:t});return{newAudioId:s.items?.[0]?.new_audio_id}}constructor(e){const{groupId:t}=e;if(t<1)throw new Error("[GroupMusicServices] groupId is not group id");super({ownerId:r.Ranges.convertGroupIdToOwnerId(t),api:e.api,authService:e.authService,emitterFactory:e.emitterFactory,sharedStateConfig:{key:`domains/audio/GroupsMusicService/${t}/stuffing`,version:1}}),(0,a.makeObservable)(this)}}(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],l.prototype,"groupId",null)},481120:(e,t,s)=>{"use strict";s.d(t,{GroupMusicServices:()=>_});var n=s(331635),a=s(327813),r=s(132028),d=s(346675),l=s(951652),c=s(26530),u=s(725377);class _{get(e){let t=this.services.get(e);return t||(t=this.create(e),this.services.set(e,t)),t}create(e){return new u.GroupMusicService({groupId:e,api:this.api,authService:this.authService,emitterFactory:this.emitterFactory})}constructor(e,t,s){this.api=e,this.authService=t,this.emitterFactory=s,this.services=new Map,(0,a.makeAutoObservable)(this)}}_=(0,n.__decorate)([r.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===d.AudioApi?Object:d.AudioApi,void 0===l.AuthService?Object:l.AuthService,void 0===c.EmitterFactory?Object:c.EmitterFactory])],_)},447044:(e,t,s)=>{"use strict";s.d(t,{MusicDislikesService:()=>u});var n=s(331635),a=s(132028),r=s(26530),d=s(951652),l=s(346675),c=s(841376);class u extends c.AudioEntityToggleService{assertRequestsAllowed(){this.authService.ensureUserId()}async requestActivate(e){await this.api.addDislike({audio_ids:e.rawId})}async requestDeactivate(e){await this.api.removeDislike({audio_ids:e.rawId})}constructor(e,t,s){super(e,{sharedStateConfig:{key:"domains/audio/MusicDislikesService/stuffing",version:1}}),this.authService=t,this.api=s}}u=(0,n.__decorate)([a.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.EmitterFactory?Object:r.EmitterFactory,void 0===d.AuthService?Object:d.AuthService,void 0===l.AudioApi?Object:l.AudioApi])],u)},685434:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistFollowingService:()=>p});var n=s(331635),a=s(327813),r=s(132028),d=s(951652),l=s(346675),c=s(26530),u=s(70148),_=s(214495);class p{get events(){return this.emitter.listenable}has(e){const t=this.getTarget(e);return!(!t||this.unfollowedTargets.has(t))}getTarget(e){return this.isMine(e)?e:this.targets.get(e)}getSource(e){return this.sources.get(e)}isMine(e){return this.myId===e.ownerId}checkPending(e){return this.pendingIdentities.has(this.getPendingIdentity(e))}async follow(e,t){const{ref:s}=t;let n;this.assertIsNotMineSource(e),this.assertWriteAllowed(),this.markPending(e);try{this.emitter.emit("follow",{source:e,ref:s});const t=await this.api.followPlaylist({playlist_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,ref:s??void 0});n=new u.OwnedIdentity({id:t.playlist_id,ownerId:t.owner_id,accessKey:t.access_key}),this.setCache(e,n),this.emitter.emit("followed",{source:e,target:n,ref:s})}finally{this.unmarkPending(e)}return n}async unfollow(e){const t=this.getTarget(e);this.assertIsMineTarget(t),this.assertWriteAllowed(),this.markPending(t),this.emitter.emit("unfollow",{target:t}),this.markAsDeleted(t);try{await this.api.deletePlaylist({playlist_id:t.id,owner_id:t.ownerId}),this.emitter.emit("unfollowed",{target:t})}catch(e){throw this.unmarkAsDeleted(t),e}finally{this.unmarkPending(t)}}setCache(e,t){this.targets.set(e,t),this.sources.set(t,e),this.unmarkAsDeleted(t)}assertWriteAllowed(){this.authService.assertAuthorized()}get myId(){return this.authService.userId??0}markPending(e){this.pendingIdentities.add(this.getPendingIdentity(e))}unmarkPending(e){this.pendingIdentities.delete(this.getPendingIdentity(e))}markAsDeleted(e){this.unfollowedTargets.add(e)}unmarkAsDeleted(e){this.unfollowedTargets.delete(e)}assertIsMineTarget(e){if(!e||e.ownerId!==this.myId)throw new Error("Target identity is not mine")}assertIsNotMineSource(e){if(!e||e.ownerId===this.myId)throw new Error("Source identity is mine")}getPendingIdentity(e){return this.getTarget(e)??e}constructor(e,t,s){this.authService=e,this.api=t;const n=(0,_.ensureStuffing)(s);this.emitter=n.emitter,this.targets=n.targets,this.sources=n.sources,this.unfollowedTargets=n.unfollowedTargets,this.pendingIdentities=n.pendingIdentities,(0,a.makeAutoObservable)(this)}}p=(0,n.__decorate)([r.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===d.AuthService?Object:d.AuthService,void 0===l.AudioApi?Object:l.AudioApi,void 0===c.EmitterFactory?Object:c.EmitterFactory])],p)},214495:(e,t,s)=>{"use strict";s.d(t,{ensureStuffing:()=>d});var n=s(558137),a=s(70916),r=s(74270);function d(e){const t=(0,n.makeSharedState)("domains/audio/MusicPlaylistFollowingService/stuffing",(()=>({})),{version:1})();return t.current||(t.current=function(e){return{emitter:e.create(),targets:new a.ObservableIdentityMap,sources:new a.ObservableIdentityMap,unfollowedTargets:new r.ObservableIdentitySet,pendingIdentities:new r.ObservableIdentitySet}}(e)),t.current}},913130:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistItemsService:()=>u});var n=s(327813),a=s(70916),r=s(70148),d=s(391751),l=s(768035),c=s(922224);class u{get isInitialized(){return this._isInitialized}get hasFetching(){return this._hasFetching}get togglingEvents(){return this.emitter.listenable}has(e){return this.targets.has(e)||this.sources.has(e)}checkToggling(e){return this.togglingIdentities.has(e)}async toggle(e,t){const s=void 0!==t?t:!this.has(e);await this[s?"add":"remove"](e)}async add(e){let t;this.assertWriteAllowed(),this.assertIsInitialized(),this.assertIsNotOwnedTarget(e);try{this.markToggling(e);const s=await this.api.addToPlaylist({playlist_id:this.identity.id,owner_id:this.identity.ownerId,audio_ids:e.accessRawId}),a=s[0]?.audio_id,d=s[0]?.track_code;if(null==a||!d)throw this.logError("Missing audio ID or tracking data in response from audio.addToPlaylist api method");t=new r.OwnedIdentity({id:a,ownerId:this.identity.ownerId});const l={identity:t,trackCode:d??""};return(0,n.runInAction)((()=>{this.addToCache(e,l)})),l}finally{this.unmarkToggling(e)}}async remove(e){const t=this.sources.get(e)??e,s=this.targets.get(e);this.assertWriteAllowed(),this.assertIsInitialized(),this.assertIsOwnedTarget(s);const{id:a,ownerId:r}=this.identity;try{this.markToggling(e),await this.api.removeFromPlaylist({playlist_id:a,owner_id:r,audio_ids:s.accessRawId}),(0,n.runInAction)((()=>{this.removeFromCache(t,s)}))}finally{this.unmarkToggling(e)}}async ensure(){return this.isInitialized?this.items:this.fetch()}async fetch(){try{this.markFetching(),this.clearCache();const{audios:e}=await this.api.getAudioIdsBySource({source:"playlist",entity_id:this.identity.rawId,ref:this.context.ref??void 0});return(0,n.runInAction)((()=>{this.addItemsFromApi(e),this._isInitialized=!0})),this.items}catch(e){throw this.logError("Error when trying to initialize items in a music playlist",e)}finally{this.unmarkFetching()}}addItemsFromApi(e){const t=new a.ObservableIdentityMap(this.sources);for(const s of e){const e=u.createItemIdentityFromApi(s);if(!e)break;const n={identity:e,trackCode:s.track_code},a=n.identity,r=t.get(a)??a;this.addToCache(r,n)}return this.items}addToCache(e,t){this.targets.set(e,t.identity),this.sources.set(t.identity,e);this.items.some((e=>(0,d.compareIdentities)(e.identity,t.identity)))||this.items.push(t)}removeFromCache(e,t){this.targets.delete(e),this.sources.delete(t);const s=this.items.findIndex((e=>(0,d.compareIdentities)(e.identity,t)));s>=0&&this.items.splice(s,1)}clearCache(){this.sources.clear(),this.targets.clear(),this.items.length=0}markFetching(){this._hasFetching=!0}unmarkFetching(){this._hasFetching=!1}markToggling(e){this.togglingIdentities.add(e)}unmarkToggling(e){this.togglingIdentities.delete(e)}assertWriteAllowed(){this.authService.assertAuthorized()}assertIsInitialized(){if(!this.isInitialized)throw this.logError("Music playlist are not initialized")}assertIsNotOwnedTarget(e){if(!e||this.has(e))throw this.logError("Target identity are already in playlist")}assertIsOwnedTarget(e){if(!e||!this.has(e))throw this.logError("Target identity is not in playlist")}logError(e,t){const s=new Error(e,{cause:t});return this.errorLogger.log(s),s}static createItemIdentityFromApi({audio_id:e}){try{return new r.OwnedIdentity((0,l.parseRawId)(e))}catch(e){return console.error("Invalid audio rawId"),null}}constructor({identity:e,context:t,api:s,authService:a,emitterFactory:r,errorLogger:d}){this.items=[],this._isInitialized=!1,this._hasFetching=!1,this.identity=e,this.context=t,this.api=s,this.authService=a,this.errorLogger=d;const l=(0,c.ensureStuffing)({identity:e,context:t,emitterFactory:r});this.emitter=l.emitter,this.targets=l.targets,this.sources=l.sources,this.togglingIdentities=l.pendingIdentities,(0,n.makeAutoObservable)(this)}}},922224:(e,t,s)=>{"use strict";s.d(t,{ensureStuffing:()=>d});var n=s(558137),a=s(70916),r=s(74270);function d({identity:e,context:t,emitterFactory:s}){const d=(0,n.makeSharedState)(`domains/audio/IMusicPlaylistItemsService/${e.fullId}/${t.ref}/stuffing`,(()=>({})),{version:1})();return d.current||(d.current=function(e){return{emitter:e.create(),sources:new a.ObservableIdentityMap,targets:new a.ObservableIdentityMap,pendingIdentities:new r.ObservableIdentitySet}}(s)),d.current}},323706:(e,t,s)=>{"use strict";s.d(t,{MusicPlaylistItemsServices:()=>m});var n=s(331635),a=s(327813),r=s(132028),d=s(346675),l=s(951652),c=s(26530),u=s(955060),_=s(913130),p=s(811207);class m{provide(e,t){const{getContextKey:s}=m;let n=this.provideContextMap(e).get(s(t));return n||this.createCached(e,t)}createCached(e,t){const{getContextKey:s}=m,n=this.provideContextMap(e),a=this.create(e,t);return n.set(s(t),a),a}create(e,t){const{api:s,authService:n,emitterFactory:a,errorLogger:r}=this;return new _.MusicPlaylistItemsService({identity:e,context:t,api:s,authService:n,emitterFactory:a,errorLogger:r})}provideContextMap(e){let t=this.entities.get(e);return t||(t=(0,a.observable)(new Map),this.entities.set(e,t)),t}static getContextKey(e){return e.ref}constructor(e,t,s,n){this.api=e,this.authService=t,this.emitterFactory=s,this.errorLogger=n,this.entities=(0,p.ensureStuffing)().entities,(0,a.makeAutoObservable)(this)}}m=(0,n.__decorate)([r.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===d.AudioApi?Object:d.AudioApi,void 0===l.AuthService?Object:l.AuthService,void 0===c.EmitterFactory?Object:c.EmitterFactory,void 0===u.ErrorLogger?Object:u.ErrorLogger])],m)},811207:(e,t,s)=>{"use strict";s.d(t,{ensureStuffing:()=>r});var n=s(558137),a=s(70916);function r(){const e=(0,n.makeSharedState)("domains/audio/MusicPlaylistItemsServices/stuffing",(()=>({})),{version:1})();return e.current||(e.current={entities:new a.ObservableIdentityMap}),e.current}},495488:(e,t,s)=>{"use strict";s.d(t,{MyMusicService:()=>u});var n=s(331635),a=s(132028),r=s(346675),d=s(951652),l=s(26530),c=s(41102);class u extends c.MusicAudioOwningService{async requestAdd(e,t){const s=await this.api.add({audio_id:e.id,owner_id:e.ownerId,access_key:e.accessKey,track_code:t});return{newAudioId:s.items?.[0]?.new_audio_id}}constructor(e,t,s){super({ownerId:"currentUser",api:e,authService:t,emitterFactory:s,sharedStateConfig:{key:"domains/audio/MyMusicService/stuffing",version:1}})}}u=(0,n.__decorate)([a.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.AudioApi?Object:r.AudioApi,void 0===d.AuthService?Object:d.AuthService,void 0===l.EmitterFactory?Object:l.EmitterFactory])],u)},425354:(e,t,s)=>{"use strict";s.d(t,{PodcastEpisodeFavoritesService:()=>c});var n=s(331635),a=s(132028),r=s(26530),d=s(972573),l=s(841376);class c extends l.AudioEntityToggleService{async requestActivate(e){await this.audioApi.addPodcastEpisode({owner_id:e.ownerId,episode_id:e.id})}async requestDeactivate(e){await this.audioApi.removePodcastEpisode({owner_id:e.ownerId,episode_id:e.id})}constructor(e,t){super(e,{sharedStateConfig:{key:"domains/audio/PodcastEpisodeFavoritesService/stuffing",version:1}}),this.audioApi=t}}c=(0,n.__decorate)([a.scope.global(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.EmitterFactory?Object:r.EmitterFactory,void 0===d.FaveApi?Object:d.FaveApi])],c)},20085:(e,t,s)=>{"use strict";s.d(t,{PodcastAudioIdentity:()=>a});var n=s(70148);class a extends n.OwnedIdentity{constructor(e){super(e),this.podcastId=e.podcastId}}},573825:(e,t,s)=>{"use strict";s.d(t,{ShortVideoUploadService:()=>d});var n=s(331635),a=s(558137),r=s(132028);class d{get owner(){return this.ensureData().owner}get files(){return this.ensureData().files}setOwner(e){this.ensureData().owner=e}setFiles(e){this.ensureData().files=e}resetFiles(){this.ensureData().files=(new DataTransfer).files}resetOwner(){this.ensureData().owner=void 0}reset(){this.resetOwner(),this.resetFiles()}constructor(){this.ensureData=(0,a.makeSharedState)("domains/shortVideo/upload/data",(()=>({owner:void 0,files:(new DataTransfer).files})),{version:1})}}d=(0,n.__decorate)([r.scope.global()],d)},73573:(e,t,s)=>{"use strict";s.d(t,{VideoGroup:()=>a});var n=s(327813);class a{get data(){return this._data}get name(){return this._data.name}constructor(e){this._data=e,(0,n.makeAutoObservable)(this,{},{autoBind:!0})}}},23893:(e,t,s)=>{"use strict";s.d(t,{VideoOwnerStore:()=>l});var n=s(327813),a=s(468073),r=s(73573),d=s(805373);class l{static isVideoGroup(e){return e instanceof r.VideoGroup}static isVideoUser(e){return e instanceof d.VideoUser}getById(e){if(a.Ranges.isGroupId(e)){const t=a.Ranges.convertOwnerIdToGroupId(e);return this.groupsStore.getById(t)}if(a.Ranges.isUserId(e))return this.usersStore.getById(e)}constructor(e,t){this.groupsStore=e,this.usersStore=t,(0,n.makeAutoObservable)(this)}}},805373:(e,t,s)=>{"use strict";s.d(t,{VideoUser:()=>a});var n=s(327813);class a{get data(){return this._data}get name(){return`${this._data.first_name} ${this._data.last_name}`}constructor(e){this._data=e,(0,n.makeAutoObservable)(this,{},{autoBind:!0})}}},595059:(e,t,s)=>{"use strict";s.d(t,{Video:()=>d});var n=s(327813),a=s(873900),r=s(23893);class d{static createRawId(e){return(0,a.getIdentityRawId)(e)}get rawId(){const{id:e,owner_id:t}=this.data;return d.createRawId({id:e,ownerId:t})}get data(){return this._data}get owner(){return this.ownerStore instanceof r.VideoOwnerStore?this.ownerStore.getById(this._data.owner_id):this.ownerStore?.getOwner(this._data.owner_id)}constructor(e,t){this._data=e,this.ownerStore=t,(0,n.makeAutoObservable)(this,{},{autoBind:!0})}}},70916:(e,t,s)=>{"use strict";s.d(t,{ObservableIdentityMap:()=>p});var n=s(434518),a=s(763812),r=s(331635),d=s(327813),l=(0,a._)("_identities"),c=(0,a._)("_ensureIdentity");let u=Symbol.iterator,_=Symbol.toStringTag;class p{get size(){return this.store.size}has(e){return this.store.has(e.fullId)}get(e){return this.store.get(e.fullId)}set(e,t){return(0,n._)(this,l)[l].set(e.fullId,e),this.store.set(e.fullId,t),this}delete(e){return(0,n._)(this,l)[l].delete(e.fullId),this.store.delete(e.fullId)}clear(){return(0,n._)(this,l)[l].clear(),this.store.clear()}forEach(e,t){this.store.forEach(((s,a)=>{e.call(t,s,(0,n._)(this,c)[c](a),this)}))}*keys(){for(const e of this.store.keys())yield(0,n._)(this,c)[c](e)}values(){return this.store.values()}*entries(){for(const[e,t]of this.store.entries())yield[(0,n._)(this,c)[c](e),t]}[u](){return this.entries()}get[_](){return"ObservableIdentityMap"}constructor(e){Object.defineProperty(this,c,{value:m}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.store=new Map,(0,n._)(this,l)[l]=new Map;for(const[t,s]of e??[])this.set(t,s);(0,d.makeObservable)(this)}}function m(e){const t=(0,n._)(this,l)[l].get(e);if(!t)throw new Error("IdentityMap inconsistency");return t}(0,r.__decorate)([d.observable.shallow,(0,r.__metadata)("design:type","undefined"==typeof Map?Object:Map)],p.prototype,"store",void 0)},74270:(e,t,s)=>{"use strict";s.d(t,{ObservableIdentitySet:()=>r});var n=s(331635),a=s(327813);class r{get size(){return this.store.size}has(e){return this.store.has(e.fullId)}add(e){return this.store.set(e.fullId,e),this}delete(e){return this.store.delete(e.fullId)}clear(){return this.store.clear()}forEach(e,t){this.store.forEach((s=>{e.call(t,s,s,this)}))}values(){return this.store.values()}keys(){return this.values()}*entries(){for(const e of this.store.values())yield[e,e]}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ObservableIdentitySet"}union(){throw new Error("Not implemented yet!")}intersection(){throw new Error("Not implemented yet!")}difference(){throw new Error("Not implemented yet!")}symmetricDifference(){throw new Error("Not implemented yet!")}isSubsetOf(){throw new Error("Not implemented yet!")}isSupersetOf(){throw new Error("Not implemented yet!")}isDisjointFrom(){throw new Error("Not implemented yet!")}constructor(e){this.store=new Map;for(const t of e??[])this.add(t);(0,a.makeObservable)(this)}}(0,n.__decorate)([a.observable.shallow,(0,n.__metadata)("design:type","undefined"==typeof Map?Object:Map)],r.prototype,"store",void 0)},26530:(e,t,s)=>{"use strict";s.d(t,{EmitterFactory:()=>_});var n=s(434518),a=s(763812),r=s(331635),d=s(132028),l=s(584053),c=s(955060),u=(0,a._)("_logger");class _{create(e={}){return new l.Emitter({catchListener:e=>{if(!(e instanceof Error))throw e;(0,n._)(this,u)[u].log(e)},...e})}constructor(e){Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,u)[u]=e}}_=(0,r.__decorate)([d.scope.global(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===c.ErrorLogger?Object:c.ErrorLogger])],_)},149333:(e,t,s)=>{"use strict";s.d(t,{useLangs:()=>r});var n=s(132028),a=s(712600);function r(){return(0,n.useContainer)().resolve(a.Langs)}},230414:(e,t,s)=>{"use strict";s.d(t,{MediaFocus:()=>_});var n=s(331635),a=s(327813),r=s(558137),d=s(235901),l=s(204739);const c=(0,r.makeSharedState)("media-focus",(()=>({instance:null})),{version:1}),u=(0,r.makeSharedState)("media-focus/stuffing",(()=>({mediaSessionController:new d.MediaSessionController,channels:(0,a.observable)(new Map)})),{version:1});class _{static ensure(){const e=c();return e.instance||(e.instance=new _),e.instance}createUncontrolledChannel(e){return this.createChannel(e,{pause:p,resume:p})}createChannel(e,t){if(this.channels.has(e))throw new Error(`MediaFocusChannel id ${e} already registered`);const s=new l.MediaFocusChannel(e,t);return(0,a.runInAction)((()=>{this.channels.set(e,s)})),s.events.on("start",(()=>this.handleChannelStart(s))),s.events.on("stop",(()=>this.handleChannelStop(s))),this.updateGlobals(),s}get activeChannels(){return[...this.channels.values()].filter((e=>e.active))}get lastActiveChannel(){return[...this.activeChannels].sort(((e,t)=>t.activatedAt-e.activatedAt)).at(0)}updateGlobals(){this.updateMediaSession()}pauseLowerPriority(e){for(const t of this.activeChannels)t.id===e.id||t.config.priority<e.config.priority||t.pause()}resumeHighestPriority(e){const t=[...this.channels.values()].filter((t=>t.paused&&t.id!==e.id)).sort(((e,t)=>e.config.priority-t.config.priority)).at(0);t&&t.resume()}updateMediaSession(){const e=this.mediaSessionController,t=this.channels.get("calls"),s=t?.active?t:this.lastActiveChannel;s&&e.current!==s.mediaSession&&e.setCurrent(s.mediaSession)}constructor(){this.handleChannelStart=e=>{this.channels.get(e.id)===e&&(this.pauseLowerPriority(e),this.updateGlobals())},this.handleChannelStop=e=>{this.channels.get(e.id)===e&&(this.resumeHighestPriority(e),this.updateGlobals())};const e=u();this.mediaSessionController=e.mediaSessionController,this.channels=e.channels,(0,a.makeObservable)(this)}}function p(){throw new Error("This channel can not be paused or resumed")}(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"activeChannels",null),(0,n.__decorate)([a.computed,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],_.prototype,"lastActiveChannel",null)},204739:(e,t,s)=>{"use strict";s.d(t,{MediaFocusChannel:()=>c});var n=s(331635),a=s(327813),r=s(584053),d=s(709282),l=s(460424);class c{get events(){return this.emitter.listenable}createAction(e,t){return(...s)=>{if(this.currentAction)throw new Error(`Unexpected action ${e} call while another action ${this.currentAction} is in progress`);try{this.currentAction=e;const n=(0,a.runInAction)((()=>t(...s)));return this.emitter.emit(e),n}finally{this.currentAction=null}}}constructor(e,t){this.emitter=new r.Emitter,this.currentAction=null,this.mediaSession=new d.MediaSessionObject,this.active=!1,this.paused=!1,this.activatedAt=0,this.start=this.createAction("start",(()=>{this.active||(this.active=!0,this.activatedAt=+new Date,this.paused=!1)})),this.stop=this.createAction("stop",(()=>{this.active&&(this.active=!1,this.paused=!1)})),this.pause=this.createAction("pause",(()=>{this.paused||(this.actions.pause(),this.paused=!0)})),this.resume=this.createAction("resume",(()=>{this.paused&&(this.actions.resume(),this.paused=!1)})),this.id=e,this.config=l.CONFIGS[e],this.actions=t,(0,a.makeObservable)(this)}}(0,n.__decorate)([a.observable],c.prototype,"active",void 0),(0,n.__decorate)([a.observable],c.prototype,"paused",void 0),(0,n.__decorate)([a.observable],c.prototype,"activatedAt",void 0)},235901:(e,t,s)=>{"use strict";s.d(t,{MediaSessionController:()=>p});var n=s(434518),a=s(763812),r=(0,a._)("_native"),d=(0,a._)("_supportedActions"),l=(0,a._)("_current"),c=(0,a._)("_setActionHandler"),u=(0,a._)("_applyNative"),_=(0,a._)("_handleChangeCurrentData");class p{get current(){return(0,n._)(this,l)[l]}setCurrent(e){(0,n._)(this,l)[l]?.events.off("change",(0,n._)(this,_)[_]),(0,n._)(this,l)[l]=e,e.events.on("change",(0,n._)(this,_)[_]),(0,n._)(this,u)[u](e)}constructor(){if(Object.defineProperty(this,c,{value:m}),Object.defineProperty(this,u,{value:y}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,n._)(this,r)[r]=null,(0,n._)(this,d)[d]=["nexttrack","pause","play","previoustrack","seekbackward","seekforward","seekto","skipad","stop","hangup","enterpictureinpicture"],(0,n._)(this,l)[l]=null,(0,n._)(this,_)[_]=({diff:{metadata:e,playbackState:t,actionHandler:s,positionState:a,cameraActive:d,microphoneActive:l}})=>{const u=(0,n._)(this,r)[r];u&&(void 0!==e&&(u.metadata=e),t&&(u.playbackState=t),s&&(0,n._)(this,c)[c](s[0],s[1]),void 0!==a&&u.setPositionState(a??void 0),void 0!==d&&"setCameraActive"in u&&u.setCameraActive(d),void 0!==l&&"setMicrophoneActive"in u&&u.setMicrophoneActive(l))},"undefined"==typeof window||!("mediaSession"in window.navigator))return;const e=window.navigator.mediaSession;(0,n._)(this,r)[r]=e,"setCameraActive"in e&&(0,n._)(this,d)[d].push("togglecamera"),"setMicrophoneActive"in e&&(0,n._)(this,d)[d].push("togglemicrophone")}}function m(e,t){const s=(0,n._)(this,r)[r];if(s)try{s.setActionHandler(e,t)}catch(e){t&&console.error(e)}}function y(e){const t=(0,n._)(this,r)[r];if(t){t.metadata=e.metadata,t.playbackState=e.playbackState,t.setPositionState(e.positionState),"setCameraActive"in t&&t.setCameraActive(e.cameraActive),"setMicrophoneActive"in t&&t.setMicrophoneActive(e.microphoneActive);for(const t of(0,n._)(this,d)[d]){const s=e.actionHandlers.get(t)??null;(0,n._)(this,c)[c](t,s)}}}},709282:(e,t,s)=>{"use strict";s.d(t,{MediaSessionObject:()=>f});var n=s(434518),a=s(763812),r=s(584053),d=(0,a._)("_emitter"),l=(0,a._)("_actionHandlers"),c=(0,a._)("_positionState"),u=(0,a._)("_metadata"),_=(0,a._)("_playbackState"),p=(0,a._)("_cameraActive"),m=(0,a._)("_microphoneActive"),y=(0,a._)("_emitChange");class f{get events(){return(0,n._)(this,d)[d].listenable}get metadata(){return(0,n._)(this,u)[u]}set metadata(e){(0,n._)(this,u)[u]=e,(0,n._)(this,y)[y]({metadata:e})}get playbackState(){return(0,n._)(this,_)[_]}set playbackState(e){(0,n._)(this,_)[_]=e,(0,n._)(this,y)[y]({playbackState:e})}get actionHandlers(){return(0,n._)(this,l)[l]}get positionState(){return(0,n._)(this,c)[c]}get cameraActive(){return(0,n._)(this,p)[p]}get microphoneActive(){return(0,n._)(this,m)[m]}setPositionState(e){(0,n._)(this,c)[c]=e,(0,n._)(this,y)[y]({positionState:e})}setActionHandler(e,t){this.actionHandlers.set(e,t),(0,n._)(this,y)[y]({actionHandler:[e,t]})}setCameraActive(e){(0,n._)(this,p)[p]=e,(0,n._)(this,y)[y]({cameraActive:e})}setMicrophoneActive(e){(0,n._)(this,m)[m]=e,(0,n._)(this,y)[y]({microphoneActive:e})}constructor(){Object.defineProperty(this,y,{value:g}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),(0,n._)(this,d)[d]=new r.Emitter,(0,n._)(this,l)[l]=new Map,(0,n._)(this,u)[u]=null,(0,n._)(this,_)[_]="none",(0,n._)(this,p)[p]=!1,(0,n._)(this,m)[m]=!1}}function g(e){(0,n._)(this,d)[d].emit("change",{diff:e})}},460424:(e,t,s)=>{"use strict";s.d(t,{CONFIGS:()=>n});const n={calls:{priority:0},video:{priority:1},audio:{priority:2}}},756314:(e,t,s)=>{"use strict";s.d(t,{MediaPlayersSwitch:()=>p});var n,a=s(434518),r=s(763812),d=s(558137),l=s(26530),c=s(516993);!function(e){e.ChannelAutoResume="CHANNEL_AUTO_RESUME",e.Unknown="UNKNOWN"}(n||(n={}));const u=(0,d.makeSharedState)("media-players-switch",(()=>({instance:null})),{version:0});var _=(0,r._)("_resume");class p{static ensure(e){const t=u();return t.instance||(t.instance=new p(e.resolve(l.EmitterFactory))),t.instance}connect(e){const t=new c.MediaPlayersSwitchChannel(e,this.emitterFactory),s=this.handlePlay.bind(this,t),n=this.handleStop.bind(this,t),a=this.handleMute.bind(this,t),r=this.handleUnmute.bind(this,t);t.events.on("play",s),t.events.on("stop",n),t.events.on("mute",a),t.events.on("unmute",r);return{emit:t.emitter.emit.bind(t.emitter),disconnect:()=>{t.events.off("play",s),t.events.off("stop",n),t.events.off("mute",a),t.events.off("unmute",r),this.activeChannel===t&&(this.activeChannel=null),this.mutedChannel===t&&(this.mutedChannel=null)}}}resume(e={reason:"UNKNOWN"}){return(0,a._)(this,_)[_]({...e,reason:e.reason??"UNKNOWN"})}autoResume(e){(0,a._)(this,_)[_]({...e,reason:"CHANNEL_AUTO_RESUME"})}pause(e={}){this.activeChannel&&!this.activeChannel.state.isPaused&&this.mutedChannel&&!this.mutedChannel.state.isPaused&&(e.initiatedByCalls?this.activeChannel.pauseByCalls(e):(this.activeChannel.pause(e),this.mutedChannel.pause(e)))}stop(e={}){this.activeChannel&&(this.activeChannel.stop(e),this.activeChannel=null)}handlePlay(e,t=!1){t?(e!==this.mutedChannel&&this.mutedChannel?.state.isPlaying&&this.mutedChannel.pause({}),this.mutedChannel=e):(e!==this.activeChannel&&this.activeChannel?.state.isPlaying&&this.activeChannel.pause({}),this.activeChannel=e)}handleMute(e){e!==this.mutedChannel&&this.mutedChannel?.state.isPlaying&&this.mutedChannel.pause({}),this.activeChannel===e&&(this.activeChannel=null),this.mutedChannel=e}handleUnmute(e){e!==this.activeChannel&&this.activeChannel?.state.isPlaying&&this.activeChannel.pause({}),this.mutedChannel===e&&(this.mutedChannel=null),this.activeChannel=e}handleStop(e){e===this.activeChannel&&(this.activeChannel=null),e===this.mutedChannel&&(this.mutedChannel=null)}constructor(e){Object.defineProperty(this,_,{value:m}),this.emitterFactory=e,this.activeChannel=null,this.mutedChannel=null}}function m(e){!this.activeChannel||this.activeChannel.state.isPlaying||e.initiatedByCalls&&!this.activeChannel.state.isPausedByCalls||this.activeChannel.resume(e)}},516993:(e,t,s)=>{"use strict";s.d(t,{MediaPlayersSwitchChannel:()=>u});var n=s(434518),a=s(763812),r=(0,a._)("_connectEvents"),d=(0,a._)("_handlePlay"),l=(0,a._)("_handlePause"),c=(0,a._)("_handleStop");class u{get events(){return this.emitter.listenable}get state(){return this._state}set state(e){this._state={...this._state,...e},(this._state.isPlaying||this._state.isPaused||this._state.isPausedByCalls)&&(this._state.isIdle=!1)}pauseByCalls(e){this.state={isPausedByCalls:!0},this.pause(e)}constructor(e,t){Object.defineProperty(this,r,{value:_}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),this.emitterFactory=t,this._state={isIdle:!0,isPlaying:!1,isPaused:!1,isPausedByCalls:!1},this.emitter=this.emitterFactory.create(),(0,n._)(this,d)[d]=()=>{this.state={isPlaying:!0,isPaused:!1,isPausedByCalls:!1}},(0,n._)(this,l)[l]=()=>{this.state={isPlaying:!1,isPaused:!0}},(0,n._)(this,c)[c]=()=>{this.state={isPlaying:!1,isPaused:!1,isPausedByCalls:!1}},this.resume=e.resume.bind(this),this.pause=e.pause.bind(this),this.stop=e.stop.bind(this),(0,n._)(this,r)[r]()}}function _(){const{events:e}=this;e.on("play",(0,n._)(this,d)[d]),e.on("pause",(0,n._)(this,l)[l]),e.on("stop",(0,n._)(this,c)[c])}},749216:(e,t,s)=>{"use strict";s.d(t,{MyTracker:()=>p});var n=s(434518),a=s(763812),r=s(331635),d=s(132028),l=s(951652),c=s(130653),u=s(164865);var _=(0,a._)("_activityCounters");class p{ensureActivityCounter({counterId:e="2579437",activityId:t,timespentType:s="screen",strict:a=!0}){const r=`${e}/${t}`;let d=(0,n._)(this,_)[_].get(r);if(d&&d.timespentType!==s)throw new Error(`ActivityCounter ${r} already registered with another timespentType (created: ${d.timespentType}, given: ${s})`);return d||(d=new u.MyTrackerActivityCounter({tmr:this.tmr,authService:this.authService,counterId:e,activityId:t,timespentType:s,strict:a}),(0,n._)(this,_)[_].set(r,d)),d}constructor(e,t){Object.defineProperty(this,_,{writable:!0,value:void 0}),this.authService=e,this.tmr=t,(0,n._)(this,_)[_]=new Map}}p=(0,r.__decorate)([d.scope.global(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===l.AuthService?Object:l.AuthService,void 0===c.Tmr?Object:c.Tmr])],p)},164865:(e,t,s)=>{"use strict";s.d(t,{MyTrackerActivityCounter:()=>m});var n=s(434518),a=s(763812),r=(0,a._)("_authService"),d=(0,a._)("_tmr"),l=(0,a._)("_isActiveTimespent"),c=(0,a._)("_tmrStartTimespent"),u=(0,a._)("_tmrStopTimespent"),_=(0,a._)("_tmrIncrement"),p=(0,a._)("_userId");class m{get isActiveTimespent(){return(0,n._)(this,l)[l]}startTimespent(){if(this.isActiveTimespent){if(this.strict)throw new Error("ActivityCounter already started")}else(0,n._)(this,c)[c](),(0,n._)(this,l)[l]=!0}stopTimespent(){if(this.isActiveTimespent)(0,n._)(this,u)[u](),(0,n._)(this,l)[l]=!1;else if(this.strict)throw new Error("ActivityCounter is not started")}increment(){(0,n._)(this,_)[_]()}constructor({authService:e,tmr:t,counterId:s,activityId:a,timespentType:m,strict:A}){Object.defineProperty(this,c,{value:y}),Object.defineProperty(this,u,{value:f}),Object.defineProperty(this,_,{value:g}),Object.defineProperty(this,p,{get:E,set:void 0}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=!1,(0,n._)(this,r)[r]=e,(0,n._)(this,d)[d]=t,this.counterId=s,this.activityId=a,this.timespentType=m,this.strict=A}}function y(){(0,n._)(this,d)[d].push({id:this.counterId,type:"startTimespent",activity:this.activityId,userId:(0,n._)(this,p)[p],canUseInBackground:"service"===this.timespentType})}function f(){(0,n._)(this,d)[d].push({id:this.counterId,type:"stopTimespent",activity:this.activityId,userId:(0,n._)(this,p)[p],canUseInBackground:"service"===this.timespentType})}function g(){(0,n._)(this,d)[d].push({id:this.counterId,type:"incrementEventTimespent",activity:this.activityId,userId:(0,n._)(this,p)[p]})}function E(){return(0,n._)(this,r)[r].userId??0}},346675:(e,t,s)=>{"use strict";s.d(t,{AudioApi:()=>d});var n=s(331635),a=s(132028),r=s(641569);class d extends r.ApiNamespace{get namespace(){return"audio"}constructor(...e){super(...e),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.createPlaylist=this.makeMethod("createPlaylist"),this.followPlaylist=this.makeMethod("followPlaylist"),this.deletePlaylist=this.makeMethod("deletePlaylist"),this.savePlaylistAsCopy=this.makeMethod("savePlaylistAsCopy"),this.addToPlaylist=this.makeMethod("addToPlaylist"),this.removeFromPlaylist=this.makeMethod("removeFromPlaylist"),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.getPlaylistById=this.makeMethod("getPlaylistById"),this.getPlaylists=this.makeMethod("getPlaylists"),this.searchPlaylists=this.makeMethod("searchPlaylists"),this.getPlaylistByIdExtended=this.makeMethod("getPlaylistById"),this.editPlaylist=this.makeMethod("editPlaylist"),this.getAudioIdsBySource=this.makeMethod("getAudioIdsBySource"),this.getAudioPreviewUrl=this.makeMethod("getAudioPreviewUrl"),this.getSnippets=this.makeMethod("getSnippets"),this.getSearchSuggestions=this.makeMethod("getSearchSuggestions"),this.getStreamMixAudios=this.makeMethod("getStreamMixAudios"),this.search=this.makeMethod("search"),this.addDislike=this.makeMethod("addDislike"),this.removeDislike=this.makeMethod("removeDislike"),this.followRadioStation=this.makeMethod("followRadioStation"),this.unfollowRadioStation=this.makeMethod("unfollowRadioStation"),this.getLyrics=this.makeMethod("getLyrics")}}d=(0,n.__decorate)([a.scope.global()],d)},972573:(e,t,s)=>{"use strict";s.d(t,{FaveApi:()=>d});var n=s(331635),a=s(641569),r=s(132028);class d extends a.ApiNamespace{get namespace(){return"fave"}constructor(...e){super(...e),this.addArticle=this.makeMethod("addArticle"),this.addClassified=this.makeMethod("addClassified"),this.addClip=this.makeMethod("addClip"),this.addGroup=this.makeMethod("addGroup"),this.addLink=this.makeMethod("addLink"),this.addNarrative=this.makeMethod("addNarrative"),this.addPage=this.makeMethod("addPage"),this.addPodcastEpisode=this.makeMethod("addPodcastEpisode"),this.addPost=this.makeMethod("addPost"),this.addProduct=this.makeMethod("addProduct"),this.addTag=this.makeMethod("addTag"),this.addUser=this.makeMethod("addUser"),this.addVideo=this.makeMethod("addVideo"),this.checkLink=this.makeMethod("checkLink"),this.editTag=this.makeMethod("editTag"),this.get=this.makeMethod("get"),this.getPages=this.makeMethod("getPages"),this.getTags=this.makeMethod("getTags"),this.removeArticle=this.makeMethod("removeArticle"),this.removeClassified=this.makeMethod("removeClassified"),this.removeClip=this.makeMethod("removeClip"),this.removeGroup=this.makeMethod("removeGroup"),this.removeLink=this.makeMethod("removeLink"),this.removeNarrative=this.makeMethod("removeNarrative"),this.removePage=this.makeMethod("removePage"),this.removePodcastEpisode=this.makeMethod("removePodcastEpisode"),this.removePost=this.makeMethod("removePost"),this.removeProduct=this.makeMethod("removeProduct"),this.removeTag=this.makeMethod("removeTag"),this.removeUser=this.makeMethod("removeUser"),this.removeVideo=this.makeMethod("removeVideo"),this.reorderTags=this.makeMethod("reorderTags"),this.setPageTags=this.makeMethod("setPageTags"),this.setTags=this.makeMethod("setTags")}}d=(0,n.__decorate)([r.scope.global()],d)},697157:(e,t,s)=>{"use strict";s.d(t,{useExternRef:()=>a});var n=s(296540);function a(...e){const t=(0,n.useRef)(null);return(0,n.useMemo)((()=>({get current(){return t.current},set current(s){t.current=s,e.forEach((e=>{e&&function(e,t){t&&("function"==typeof t?t(e):t.current=e)}(s,e)}))}})),e)}},840741:(e,t,s)=>{"use strict";s.d(t,{useObjectMemo:()=>r});var n=s(296540),a=s(8520);const r=e=>{const[t,s]=(0,n.useState)(e);return(0,a.isEqual)(e,t)||s(e),t}},382010:(e,t,s)=>{"use strict";s.d(t,{usePatchChildrenRef:()=>d});var n=s(296540),a=s(697157);const r=e=>"string"==typeof e.type,d=e=>{const t=(0,n.isValidElement)(e)&&(r(e)?e.ref:e.props.getRootRef),s=(0,a.useExternRef)(t);return(0,n.useEffect)((()=>{s.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[e?.type,s]),[s,(0,n.isValidElement)(e)?(0,n.cloneElement)(e,{[r(e)?"ref":"getRootRef"]:s}):e]}},634444:(e,t,s)=>{"use strict";s.d(t,{useStableCallback:()=>a});var n=s(296540);function a(e){const t=(0,n.useRef)(e);return(0,n.useLayoutEffect)((()=>{t.current=e})),(0,n.useCallback)(((...e)=>t.current(...e)),[t])}},913157:(e,t,s)=>{"use strict";s.d(t,{DefaultLoading:()=>a});var n=s(474848);const a=()=>(0,n.jsx)("h2",{children:"Loading..."})},636683:(e,t,s)=>{"use strict";s.d(t,{DefaultLoadingError:()=>a});var n=s(474848);const a=()=>(0,n.jsx)("h2",{children:"Cannot load component..."})},733230:(e,t,s)=>{"use strict";s.d(t,{ErrorBoundary:()=>r});var n=s(296540),a=s(156051);class r extends n.Component{componentDidCatch(e){(0,a.logError)(e),this.setState({hasError:!0})}render(){const{fallback:e,children:t}=this.props,{hasError:s}=this.state;return s?e:t}constructor(...e){super(...e),this.state={hasError:!1}}}},991070:(e,t,s)=>{"use strict";s.d(t,{Default:()=>r});var n=s(913157),a=s(636683);const r={Loading:n.DefaultLoading,LoadingError:a.DefaultLoadingError}},837293:(e,t,s)=>{"use strict";s.d(t,{lazyModule:()=>c});var n=s(474848),a=s(296540),r=s(991070),d=s(733230),l=s(156051);function c({loader:e,name:t,LoadingComponent:s=r.Default.Loading,LoadingErrorComponent:c=r.Default.LoadingError}){const u=({loading:r=(0,n.jsx)(s,{}),loadingError:u=(0,n.jsx)(c,{}),..._})=>{const[p,m]=(0,a.useState)(!1),y=(0,a.useMemo)((()=>(0,a.lazy)((()=>e().then((e=>({default:e})),(e=>((0,l.logError)(e),m(!0),{default:()=>null})))))),[e]);return(0,n.jsx)(d.ErrorBoundary,{fallback:u,moduleName:t,children:p?u:(0,n.jsx)(a.Suspense,{fallback:r,children:(0,n.jsx)(y,{..._})})})};return u.displayName=`lazyModule(${t})`,u}},156051:(e,t,s)=>{"use strict";function n(e){console.error(e)}s.d(t,{logError:()=>n})},960126:(e,t,s)=>{"use strict";s.d(t,{getLottieManager:()=>n});const n=(0,s(8520).asyncImportLoader)((async()=>{const{LottieManager:e}=await Promise.all([s.e(54962),s.e(23666)]).then(s.bind(s,535130));return e}))},880259:(e,t,s)=>{"use strict";s.d(t,{RouterContext:()=>a,useRouterContext:()=>r});var n=s(296540);const a=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(a);if(!e)throw new Error("@vkontakte-internal/router: Empty RouterContext");return e}},263290:(e,t,s)=>{"use strict";s.d(t,{useQuery:()=>a});var n=s(880259);function a(){const{router:e}=(0,n.useRouterContext)();return e.query}},687741:(e,t,s)=>{"use strict";s.d(t,{createAccountGetHelpHintsFx:()=>u,createAccountGetInfoFx:()=>r,createAccountGetPrivacySettingsFx:()=>m,createAccountGetProfileInfoFx:()=>c,createAccountHideHelpHintFx:()=>_,createAccountSetInfoFx:()=>d,createAccountShowHelpHintFx:()=>p,createAccountUnbanFx:()=>y});var n=s(32489),a=s(412554);const r=e=>(0,a.createApiEffect)("account.getInfo",e),d=e=>(0,n.attach)({effect:(0,a.createApiEffect)("account.setInfo",e),mapParams:({query:e,...t})=>({...t,query:{...e,value:l(e.value)}})});function l(e){return"boolean"==typeof e?e?"1":"0":"number"==typeof e?String(e):e}const c=e=>(0,a.createApiEffect)("account.getProfileInfo",e),u=e=>(0,a.createApiEffect)("account.getHelpHints",e),_=e=>(0,a.createApiEffect)("account.hideHelpHint",e),p=e=>(0,a.createApiEffect)("account.showHelpHint",e),m=e=>(0,a.createApiEffect)("account.getPrivacySettings",e),y=e=>(0,a.createApiEffect)("account.unban",e)},580352:(e,t,s)=>{"use strict";s.d(t,{createAudioAddDislikeFx:()=>b,createAudioAddFx:()=>_,createAudioAddToPlaylistFx:()=>C,createAudioCreatePlaylistFx:()=>y,createAudioDeleteFx:()=>p,createAudioDeletePlaylistFx:()=>f,createAudioFollowRadioStationFx:()=>I,createAudioGetAudioIdsBySourceFx:()=>d,createAudioGetAudioPreviewFx:()=>u,createAudioGetByIdFx:()=>a,createAudioGetFx:()=>l,createAudioGetPlaylistByIdFx:()=>r,createAudioGetSearchSuggestionsFx:()=>E,createAudioGetSnippetsFx:()=>g,createAudioGetStreamMixAudiosFx:()=>A,createAudioRemoveDislikeFx:()=>P,createAudioRemoveFromPlaylistFx:()=>O,createAudioRestoreFx:()=>m,createAudioSearchFx:()=>c,createAudioUnfollowRadioStationFx:()=>T});var n=s(412554);const a=e=>(0,n.createApiEffect)("audio.getById",e),r=e=>(0,n.createApiEffect)("audio.getPlaylistById",e),d=e=>(0,n.createApiEffect)("audio.getAudioIdsBySource",e),l=e=>(0,n.createApiEffect)("audio.get",e),c=e=>(0,n.createApiEffect)("audio.search",e),u=e=>(0,n.createApiEffect)("audio.getAudioPreviewUrl",e),_=e=>(0,n.createApiEffect)("audio.add",e),p=e=>(0,n.createApiEffect)("audio.delete",e),m=e=>(0,n.createApiEffect)("audio.restore",e),y=e=>(0,n.createApiEffect)("audio.createPlaylist",e),f=e=>(0,n.createApiEffect)("audio.deletePlaylist",e),g=e=>(0,n.createApiEffect)("audio.getSnippets",e),E=e=>(0,n.createApiEffect)("audio.getSearchSuggestions",e),A=e=>(0,n.createApiEffect)("audio.getStreamMixAudios",e),b=e=>(0,n.createApiEffect)("audio.addDislike",e),P=e=>(0,n.createApiEffect)("audio.removeDislike",e),I=e=>(0,n.createApiEffect)("audio.followRadioStation",e),T=e=>(0,n.createApiEffect)("audio.unfollowRadioStation",e),C=e=>(0,n.createApiEffect)("audio.addToPlaylist",e),O=e=>(0,n.createApiEffect)("audio.removeFromPlaylist",e)},278116:(e,t,s)=>{"use strict";s.d(t,{createFaveAddGroupFx:()=>c,createFaveAddPodcastEpisodeFx:()=>_,createFaveAddProductFx:()=>d,createFaveAddVideoFx:()=>a,createFaveRemoveGroupFx:()=>u,createFaveRemovePodcastEpisodeFx:()=>p,createFaveRemoveProductFx:()=>l,createFaveRemoveVideoFx:()=>r});var n=s(412554);const a=e=>(0,n.createApiEffect)("fave.addVideo",e),r=e=>(0,n.createApiEffect)("fave.removeVideo",e),d=e=>(0,n.createApiEffect)("fave.addProduct",e),l=e=>(0,n.createApiEffect)("fave.removeProduct",e),c=e=>(0,n.createApiEffect)("fave.addGroup",e),u=e=>(0,n.createApiEffect)("fave.removeGroup",e),_=e=>(0,n.createApiEffect)("fave.addPodcastEpisode",e),p=e=>(0,n.createApiEffect)("fave.removePodcastEpisode",e)},335797:(e,t,s)=>{"use strict";s.d(t,{useEntitiesStore:()=>a,useNotNullEntitiesStore:()=>r});var n=s(293721);const a=(e,t)=>(0,n.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>e[t],defaultValue:null}),r=(e,t)=>(0,n.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>{const s=e[t];if(null==s)throw new Error("Empty value entity store");return s}})},978746:(e,t,s)=>{"use strict";s.d(t,{ensureAccountInfoService:()=>d});var n=s(32489),a=s(264040);let r;function d(){if(!r){const e=(0,n.createDomain)("global/account/info");r=(0,a.createAccountInfoService)({domain:e})}return r}},503505:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPlaylistsService:()=>d});var n=s(32489),a=s(558137),r=s(990996);const d=(0,a.makeSharedState)("global/audio/playlists",(()=>(0,r.createAudioPlaylistsService)({domain:(0,n.createDomain)("global/audio/playlists"),name:"global/audio/playlists"})),{version:1})},983327:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPreviewsService:()=>d});var n=s(32489),a=s(536673);let r;function d(){if(!r){const e=(0,n.createDomain)("global/audio/audioPreviews");r=(0,a.createAudioPreviewsService)({domain:e})}return r}},308227:(e,t,s)=>{"use strict";s.d(t,{ensureAudiosService:()=>d});var n=s(32489),a=s(110957);let r;function d(){if(!r){const e=(0,n.createDomain)("global/audio/audios");r=(0,a.createAudiosService)({domain:e})}return r}},466915:(e,t,s)=>{"use strict";s.d(t,{ensureGroupsMusicService:()=>d});var n=s(32489),a=s(558137),r=s(413678);const d=(0,a.makeSharedState)("global/audio/groupsMusic",(()=>(0,r.createGroupsMusicService)({domain:(0,n.createDomain)("global/audio/groupsMusic"),name:"global/audio/groupsMusic"})),{version:3})},498486:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioDislikesService:()=>d});var n=s(32489),a=s(558137),r=s(328568);const d=(0,a.makeSharedState)("global/audio/myDislikes",(()=>(0,r.createMyAudioDislikesService)({domain:(0,n.createDomain)("global/audio/myDislikes"),name:"global/audio/myDislikes"})),{version:1})},30899:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioPlaylistsService:()=>l});var n=s(32489),a=s(558137),r=s(131084),d=s(503505);const l=(0,a.makeSharedState)("global/audio/myPlaylists",(()=>(0,r.createMyAudioPlaylistsService)({config:{domain:(0,n.createDomain)("global/audio/myPlaylists"),name:"global/audio/myPlaylists"},audioPlaylistsService:(0,d.ensureAudioPlaylistsService)()})),{version:2})},797612:(e,t,s)=>{"use strict";s.d(t,{ensureMyAudioRadioStationsService:()=>d});var n=s(32489),a=s(558137),r=s(197796);const d=(0,a.makeSharedState)("global/audio/myRadioStations",(()=>(0,r.createMyAudioRadioStationsService)({domain:(0,n.createDomain)("global/audio/myRadioStations"),name:"global/audio/myRadioStations"})),{version:1})},345997:(e,t,s)=>{"use strict";s.d(t,{ensureMyMusicService:()=>d});var n=s(32489),a=s(558137),r=s(944374);const d=(0,a.makeSharedState)("global/audio/myMusic",(()=>(0,r.createMyMusicService)({domain:(0,n.createDomain)("global/audio/myMusic"),name:"global/audio/myMusic"})),{version:2})},560756:(e,t,s)=>{"use strict";s.d(t,{ensureAudioPodcastsFaveService:()=>d});var n=s(32489),a=s(558137),r=s(213059);const d=(0,a.makeSharedState)("global/fave/audio/podcasts",(()=>(0,r.createAudioPodcastsFaveService)({domain:(0,n.createDomain)("global/fave/audio/podcasts"),name:"global/fave/audio/podcasts"})),{version:1})},984745:(e,t,s)=>{"use strict";s.d(t,{ensureAccountHelpHintsService:()=>_});var n=s(32489),a=s(558137),r=s(687741),d=s(746573),l=s(782399),c=s(603025),u=s(679005);const _=(0,a.makeSharedState)("global/account/helpHints",(()=>(e=>{const t=(0,d.getEffectorServiceDomain)(e),s=t.createStore({}),a=t.createStore({viewerId:0}),_=t.createEvent("helpHints/initialize"),p=t.createEvent("helpHints/reload"),m=t.createEvent("helpHints/logError"),y=t.createEvent("helpHints/hide"),f=t.createEvent("helpHints/show"),g=(0,r.createAccountGetHelpHintsFx)({domain:t});let E=null;const A=async()=>{const{items:e}=await g({query:{}});return e.reduce(((e,t)=>(e[t.id]=t,e)),{})},b=(0,n.attach)({name:"helpHints/getHelpHintsFx",source:s,effect:t.createEffect((e=>Object.keys(e).length?Promise.resolve(e):E||(E=A().finally((()=>{E=null})),E)))}),P=t.createEffect("helpHints/reloadHelpHintsFx");P.use((()=>A()));const I=(0,n.attach)({name:"helpHints/hideHelpHintFx",effect:(0,r.createAccountHideHelpHintFx)({domain:t}),mapParams:({hintId:e})=>({query:{hint_id:e}})}),T=(0,n.attach)({name:"helpHints/showHelpHintFx",effect:(0,r.createAccountShowHelpHintFx)({domain:t}),mapParams:e=>({query:{hint_id:e}})}),C=t.createEffect("helpHints/logErrorFx");return C.use((({error:e,logErrorFn:t})=>{let s=null,n=null;t?((0,l.isNetworkError)(e)?s=e.error:(0,c.isApiError)(e)?(s=new Error(e.type),n=e.error):s=e,s&&t(s,{environment:"global/account/helpHints",data:n})):console.error(e)})),(0,n.sample)({clock:_,target:a}),(0,n.sample)({clock:_,source:b.pending,filter:e=>!e,target:b}),(0,n.sample)({clock:p,target:P}),(0,n.sample)({clock:[b.doneData,P.doneData],target:s}),(0,n.sample)({clock:y,target:I}),(0,n.sample)({clock:y,source:s,filter:(e,{isOptimistic:t})=>Boolean(t),fn:(e,{hintId:t})=>(0,u.produce)(e,(e=>{delete e[t]})),target:s}),(0,n.sample)({clock:f,target:T}),(0,n.sample)({clock:I.done,source:s,filter:(e,{params:{isOptimistic:t}})=>!t,fn:(e,{params:{hintId:t}})=>(0,u.produce)(e,(e=>{delete e[t]})),target:s}),(0,n.sample)({clock:T.done,target:p}),(0,n.sample)({clock:m,source:a,fn:({logErrorFn:e},t)=>({error:t,logErrorFn:e}),target:C}),(0,n.sample)({clock:[b.failData,P.failData,T.failData,I.failData],target:m}),{initialize:_,canShow:e=>Boolean(s.getState()[e]),getHelpHintsFx:b,$helpHints:s,hideHelpHint:y,showHelpHint:f}})({domain:(0,n.createDomain)("global/account/helpHints"),name:"global/account/helpHints"})),{version:1})},264040:(e,t,s)=>{"use strict";s.d(t,{createAccountInfoService:()=>d});var n,a=s(32489),r=s(687741);!function(e){e[e.Pending=0]="Pending",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(n||(n={}));const d=({domain:e})=>{const t=e.createStore({}),s=e.createStore(0),n=(0,r.createAccountGetInfoFx)({domain:e}),d=(0,r.createAccountSetInfoFx)({domain:e}),l=e.createEffect((()=>n({query:{}})));s.on(n,((e,t)=>t.query.fields?e:e<=0?1:void 0)).on(n.finally,((e,t)=>t.params.query.fields||"done"!==t.status?e:1)),t.on(n.finally,((e,t)=>"done"===t.status?{...e,...t.result}:e)).on(d.done,((e,t)=>{const{result:s,params:{query:{name:n,value:a}}}=t;return s&&n in e?{...e,[n]:a}:e}));const c=e.createEvent();return(0,a.sample)({clock:c,source:s,filter:e=>2!==e,target:l}),{$accountInfo:t,getInfoFx:n,setInfoFx:d,initEvent:c}}},848040:(e,t,s)=>{"use strict";function n({id:e,ownerId:t,accessKey:s}){return`${t}_${e}${s?`_${s}`:""}`}s.d(t,{getAudioAccessId:()=>n})},478455:(e,t,s)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}s.d(t,{getAudioFullId:()=>n})},680033:(e,t,s)=>{"use strict";function n(e){const t={id:e.id,ownerId:e.owner_id,accessKey:e.access_key,releaseAudioId:e.release_audio_id};return{...t,identity:t,title:e.title,author:l(e),artwork:d(e.album?.thumb),duration:e.duration,url:e.url||null,isExplicit:e.is_explicit}}function a(e){if(!e.track_code)throw new Error("track_code is not defined");return{...n(e),trackCode:e.track_code}}s.d(t,{mapAPIAudioArtistToAudioDataArtistInfo:()=>c,mapAPIAudioToAudioData:()=>n,mapAPIAudioToAudioDataAuthor:()=>l,mapAPIAudioToTrackedAudioData:()=>a});const r=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function d(e){const t=[];if(!e)return t;for(const[s,n]of r){const a=e[s];a&&t.push({src:a,size:n})}return t}function l(e){return{main:e?.main_artists?.map(u)??[],feat:e?.featured_artists?.map(u)??[],raw:e.artist}}function c(e){return{id:e.id,name:e.name}}function u(e){return{name:e.name}}},139612:(e,t,s)=>{"use strict";function n(e){const[t,s,n]=e.split("_");if(!s||!t)throw new Error(`Invalid audio_id: ${e}`);return{id:parseInt(s,10),ownerId:parseInt(t,10),accessKey:n}}s.d(t,{mapAPIRawIdToAudioIdentity:()=>n})},234386:(e,t,s)=>{"use strict";s.d(t,{mapAPIRawIdTrackedToTrackedAudioIdentity:()=>a});var n=s(139612);function a(e){return{...(0,n.mapAPIRawIdToAudioIdentity)(e.audio_id),trackCode:e.track_code}}},488150:(e,t,s)=>{"use strict";var n;s.d(t,{AudioType:()=>n}),function(e){e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio"}(n||(n={}))},346127:(e,t,s)=>{"use strict";s.d(t,{mapAPIAudioToMusicAudioData:()=>r,mapAPIAudioToTrackedMusicAudioData:()=>d});var n=s(680033),a=s(796674);function r(e,t){return{...(0,n.mapAPIAudioToAudioData)(t),...l(e,t),...(0,a.mapAPIAudioToTrackedMusicAudioState)(t)}}function d(e,t){return{...(0,n.mapAPIAudioToTrackedAudioData)(t),...l(e,t),...(0,a.mapAPIAudioToTrackedMusicAudioState)(t)}}function l(e,t){return{type:e,hasLyrics:t.has_lyrics??!1,author:(s=t,{...(0,n.mapAPIAudioToAudioDataAuthor)(s),main:s?.main_artists?.map(c)??[],feat:s?.featured_artists?.map(c)??[]})};var s}function c(e){return{name:e.name,id:e.id}}},796674:(e,t,s)=>{"use strict";function n(e){return{disliked:e.dislike??!1}}s.d(t,{mapAPIAudioToTrackedMusicAudioState:()=>n})},280481:(e,t,s)=>{"use strict";function n({id:e,ownerId:t,podcastId:s}){return`${t}_${Number.isFinite(s)?s:e}`}s.d(t,{getPodcastAudioFullId:()=>n})},990996:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsService:()=>g});var n=s(32489),a=s(580352),r=s(594241),d=s(46201),l=s(786979),c=s(865409),u=s(234386),_=s(393344),p=s(121574),m=s(169134),y=s(836222),f=s(746573);function g(e){const t=(0,f.getEffectorServiceDomain)(e),s=(0,a.createAudioGetPlaylistByIdFx)({domain:t}),g=(0,a.createAudioGetAudioIdsBySourceFx)({domain:t}),E=(0,_.createAudioPlaylistsCreateFx)({domain:t}),A=(0,p.createAudioPlaylistsDeleteFx)({domain:t}),b=(0,m.createAddAudioFx)({domain:t}),P=(0,y.createDeleteAudioFx)({domain:t}),I=t.createStore({}),T=t.createStore({}),C=t.createEffect((async({id:e,ownerId:t})=>{const n=await s({query:{playlist_id:e,owner_id:t}});return(0,c.mapAPIPlaylistToAudioPlaylistData)(n)})),O=(0,n.attach)({source:I,async effect(e,t){const s=e[(0,r.getAudioPlaylistFullId)(t)];return s||C(t)}}),M=t.createEffect((async e=>(await g({query:{source:"playlist",entity_id:(0,r.getAudioPlaylistFullId)(e)}})).audios.map(u.mapAPIRawIdTrackedToTrackedAudioIdentity))),S=(0,n.attach)({source:T,async effect(e,t){const s=e[(0,r.getAudioPlaylistFullId)(t)];return s||M(t)}});return I.on(C.done,((e,{result:t})=>({...e,[(0,r.getAudioPlaylistFullId)(t)]:t}))),T.on(M.done,((e,{params:t,result:s})=>({...e,[(0,r.getAudioPlaylistFullId)(t)]:s}))),I.on(E.done,((e,{result:t})=>(0,d.addPairToMap)(e,{key:(0,r.getAudioPlaylistFullId)(t),value:t}))),I.on(A.done,((e,{params:t})=>(0,l.removePairFromMap)(e,(0,r.getAudioPlaylistFullId)({id:t.id,ownerId:t.ownerId})))),{$playlistDataEntities:I,$playlistAudioIdsEntities:T,createFx:E,deleteFx:A,addAudioFx:b,deleteAudioFx:P,fetchPlaylistFx:C,ensurePlaylistFx:O,fetchPlaylistAudioIdsFx:M,ensurePlaylistAudioIdsFx:S}}},169134:(e,t,s)=>{"use strict";s.d(t,{createAddAudioFx:()=>r});var n=s(580352),a=s(848040);function r({domain:e}){const t=(0,n.createAudioAddToPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:s,audioIdentity:n})=>{const r=await t({query:{owner_id:e,playlist_id:s,audio_ids:(0,a.getAudioAccessId)(n)}}),d=r?.[0]?.audio_id;if(!d)throw new Error("Error when trying to add audio to a playlist");return{id:d,ownerId:e}}))}},393344:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsCreateFx:()=>d});var n=s(580352),a=s(865409),r=s(478455);function d({domain:e}){const t=(0,n.createAudioCreatePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,audios:s,title:n,description:d})=>{const l=s.map(r.getAudioFullId).join(","),c=await t({query:{owner_id:e,audio_ids:l,title:n,description:d}});return(0,a.mapAPIPlaylistToAudioPlaylistData)(c)}))}},121574:(e,t,s)=>{"use strict";s.d(t,{createAudioPlaylistsDeleteFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioDeletePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,id:s})=>{await t({query:{owner_id:e,playlist_id:s}})}))}},836222:(e,t,s)=>{"use strict";s.d(t,{createDeleteAudioFx:()=>r});var n=s(580352),a=s(478455);function r({domain:e}){const t=(0,n.createAudioRemoveFromPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:s,audioIdentity:n})=>{await t({query:{owner_id:e,playlist_id:s,audio_ids:(0,a.getAudioFullId)(n)}})}))}},536673:(e,t,s)=>{"use strict";s.d(t,{createAudioPreviewsService:()=>l});var n=s(32489),a=s(580352),r=s(65047),d=s(478455);function l({domain:e}){const t=(0,a.createAudioGetAudioPreviewFx)({domain:e}),s=e.createStore({}),l=e.createEffect((async({identity:e})=>{const s=await t({query:{audio_id:(0,d.getAudioFullId)(e),preview_type:"longtap"}});return(0,r.mapApiAudioPreviewToAudioPreviewData)(s)}));return(0,n.sample)({clock:l.done,source:s,fn:(e,{params:t,result:s})=>{const{id:n,ownerId:a}=t.identity,r=(0,d.getAudioFullId)({id:n,ownerId:a});return{...e,[r]:s}},target:s}),{fetchAudioPreviewFx:l,$audioPreviewEntities:s}}},241024:(e,t,s)=>{"use strict";s.d(t,{createAudioVkMixService:()=>a});var n=s(399452);function a(e){const t=e.createStore([]),s=(0,n.createAudioVkMixFetchNextFx)(e);return t.on(s.doneData,((e,t)=>t.length?[...e,...t]:e)),{$lists:t,fetchNextFx:s}}},399452:(e,t,s)=>{"use strict";s.d(t,{createAudioVkMixFetchNextFx:()=>a});var n=s(580352);function a(e){const t=(0,n.createAudioGetStreamMixAudiosFx)({domain:e});return e.createEffect((async({id:e,count:s=1,isSessionLaunched:n=!1,isSessionFeatureEnabled:a=!1})=>await t({query:{mix_id:e,count:s,...a?{append:n?1:0}:{}}})))}},110957:(e,t,s)=>{"use strict";s.d(t,{createAudiosService:()=>u});var n=s(32489),a=s(580352),r=s(848040),d=s(346127),l=s(488150),c=s(478455);function u({domain:e}){const t=(0,a.createAudioGetByIdFx)({domain:e}),s=(0,a.createAudioGetFx)({domain:e}),u=(0,a.createAudioSearchFx)({domain:e}),p=e.createStore({}),m=e.createEffect((async e=>{if(!e.length)return[];return(await t({query:{audios:e.map(r.getAudioAccessId).join(",")}})).map((e=>(0,d.mapAPIAudioToMusicAudioData)(l.AudioType.MusicTrack,e)))})),y=e.createEffect((async e=>{let t;t=e.q?await u({query:{owner_id:e.ownerId,count:e.count,offset:e.offset,q:e.q}}):await s({query:{owner_id:e.ownerId,count:e.count,offset:e.offset}});const n=t.items.map((e=>(0,d.mapAPIAudioToMusicAudioData)(l.AudioType.MusicTrack,e)));return{count:t.count,audios:n}})),f=(0,n.attach)({source:p,async effect(e,t){if(!t.length)return[];let s=[],n=[];for(const a of t){const t=e[(0,c.getAudioFullId)(a)];t?s.push(t):n.push(a)}if(!n.length)return s;const a=await m(n),r=_(a);s=[];for(const d of t){const l=(0,c.getAudioFullId)(d),u=r[l]??e[l];if(!u)throw console.error("AudioData not found in entities",{identity:d,fullId:l,audio:u,fetched:a,fetchedEntities:r,entities:e,identities:t,missing:n,result:s}),new Error("AudioData not found in entities");s.push(u)}return s}});return p.on(m.done,((e,{result:t})=>({...e,..._(t)}))),p.on(y.done,((e,{result:t})=>({...e,..._(t.audios)}))),{$audioEntities:p,fetchAudiosFx:m,ensureAudiosFx:f,searchAudiosFx:y}}function _(e){return e.reduce(((e,t)=>(e[(0,c.getAudioFullId)(t)]=t,e)),{})}},413678:(e,t,s)=>{"use strict";s.d(t,{createGroupsMusicService:()=>m});var n=s(32489),a=s(61108),r=s(12204),d=s(896588),l=s(506535),c=s(720222),u=s(746573),_=s(97295),p=s(205337);function m(e){const t=(0,u.getEffectorServiceDomain)(e),s=(0,a.createGroupsMusicAddFx)({domain:t}),m=(0,r.createGroupsMusicRestoreFx)({domain:t}),y=(0,d.createGroupsMusicDeleteFx)({domain:t}),{$addedIdentitiesMap:f,$removedIdentitiesMap:g,$identitiesMap:E,removeFromAllIdentitiesMaps:A,removedIdentitiesMapApi:b,addedIdentitiesMapApi:P}=(0,c.createIdentitiesMaps)({domain:t}),I=(0,n.attach)({source:(0,n.combine)({addedIdentitiesMap:f,removedIdentitiesMap:g}),mapParams:(e,t)=>({...e,...t}),effect:(0,n.createEffect)((async({groupId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:a})=>{let r,d;const c=(0,p.convertToGroupMusicId)(e);if(c===t.ownerId)r=t,d=(0,_.getGroupAudioFullId)({id:t.id,ownerId:c},c);else{const e=(0,_.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},c);if(!(e in n))return await s({trackedIdentity:t,groupId:c});if(r=n[e],d=(0,_.getGroupAudioFullId)({id:r.id,ownerId:c},c),!(d in a))return await s({trackedIdentity:t,groupId:c})}const u=(0,_.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},c);try{return await m({audioId:r.id,groupId:c}),{id:r.id,ownerId:c}}catch(e){const n=e;if(n?.error?.error_code===l.GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return A({addedGroupAudioFullId:u,removedGroupAudioFullId:d}),await s({trackedIdentity:t,groupId:c});throw n}}))});return(0,n.sample)({clock:I.done,source:f,filter:(e,{params:{groupId:t,trackedIdentity:s}})=>t===s.ownerId&&!((0,_.getGroupAudioFullId)(s,t)in e),fn:(e,{params:{groupId:t,trackedIdentity:s},result:n})=>({groupAudioFullId:(0,_.getGroupAudioFullId)(s,t),identity:n}),target:P.add}),(0,n.sample)({clock:s.done,fn:({params:{groupId:e,trackedIdentity:{id:t,ownerId:s}},result:n})=>{const a=(0,p.convertToGroupMusicId)(e);return{groupAudioFullId:(0,_.getGroupAudioFullId)({id:t,ownerId:s},a),identity:n}},target:P.add}),(0,n.sample)({clock:m.done,fn:({params:{groupId:e,audioId:t}})=>{const s=(0,p.convertToGroupMusicId)(e);return(0,_.getGroupAudioFullId)({id:t,ownerId:s},s)},target:b.remove}),(0,n.sample)({clock:y.done,fn:({params:{groupId:e,audioId:t}})=>{const s=(0,p.convertToGroupMusicId)(e);return(0,_.getGroupAudioFullId)({id:t,ownerId:s},s)},target:b.add}),{addFx:I,deleteFx:y,$identitiesMap:E}}},61108:(e,t,s)=>{"use strict";s.d(t,{createGroupsMusicAddFx:()=>d});var n=s(580352),a=s(468073),r=s(205337);function d({domain:e}){const t=(0,n.createAudioAddFx)({domain:e});return e.createEffect((async({trackedIdentity:e,groupId:s})=>{const{id:n,ownerId:d,accessKey:l,trackCode:c}=e,u=(0,r.convertToGroupMusicId)(s),_=await t({query:{audio_id:n,owner_id:d,access_key:l,track_code:c,group_id:a.Ranges.convertOwnerIdToGroupId(u)}}),p=_.items?.[0]?.new_audio_id;if(null==p)throw new Error("[GroupsMusicAddFx] addFx - missing audio ID in response from audio.add api method");return{id:p,ownerId:u}}))}},896588:(e,t,s)=>{"use strict";s.d(t,{createGroupsMusicDeleteFx:()=>r});var n=s(580352),a=s(205337);function r({domain:e}){const t=(0,n.createAudioDeleteFx)({domain:e});return e.createEffect((async({audioId:e,groupId:s})=>{await t({query:{audio_id:e,owner_id:(0,a.convertToGroupMusicId)(s)}})}))}},506535:(e,t,s)=>{"use strict";s.d(t,{GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},12204:(e,t,s)=>{"use strict";s.d(t,{createGroupsMusicRestoreFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioRestoreFx)({domain:e});return e.createEffect((async({audioId:e,groupId:s})=>{await t({query:{audio_id:e,owner_id:s}})}))}},205337:(e,t,s)=>{"use strict";s.d(t,{convertToGroupMusicId:()=>a});var n=s(468073);function a(e){return n.Ranges.isGroupId(e)?e:n.Ranges.convertGroupIdToOwnerId(e)}},216856:(e,t,s)=>{"use strict";function n(e){return+e.split("_")?.[0]}s.d(t,{extractGroupIdFromGroupAudioFullId:()=>n})},97295:(e,t,s)=>{"use strict";s.d(t,{getGroupAudioFullId:()=>r});var n=s(478455),a=s(205337);function r({id:e,ownerId:t},s){return`${(0,a.convertToGroupMusicId)(s)}_${(0,n.getAudioFullId)({id:e,ownerId:t})}`}},720222:(e,t,s)=>{"use strict";s.d(t,{createIdentitiesMaps:()=>u});var n=s(32489),a=s(810780),r=s(46201),d=s(786979),l=s(97295),c=s(216856);const u=({domain:e})=>{const t=e.createStore({}),s=e.createStore({}),u=(0,n.createEvent)(),_=(0,n.combine)(t,s,((e,t)=>Object.entries(e).reduce(((e,[s,n])=>((0,l.getGroupAudioFullId)(n,(0,c.extractGroupIdFromGroupAudioFullId)(s))in t||(e[s]=n),e)),{}))),p=(0,n.createApi)(t,{add:(e,{groupAudioFullId:t,identity:s})=>(0,r.addPairToMap)(e,{key:t,value:s}),remove:(e,t)=>(0,d.removePairFromMap)(e,t)}),m=(0,n.createApi)(s,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,d.removePairFromMap)(e,t)});return(0,n.sample)({clock:u,target:(0,a.spread)({targets:{addedGroupAudioFullId:p.remove,removedGroupAudioFullId:m.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:s,$identitiesMap:_,addedIdentitiesMapApi:p,removedIdentitiesMapApi:m,removeFromAllIdentitiesMaps:u}}},328568:(e,t,s)=>{"use strict";s.d(t,{createMyAudioDislikesService:()=>u});var n=s(746573),a=s(373945),r=s(8683),d=s(32489),l=s(478455),c=s(586049);function u(e){const t=(0,n.getEffectorServiceDomain)(e),s=(0,a.createAddFx)({domain:t}),u=(0,r.createRemoveFx)({domain:t}),{fullIdsMapApi:_,$fullIdsMap:p}=(0,c.createFullIdsMap)(t);return(0,d.sample)({clock:s.done,fn:({params:{identity:e}})=>(0,l.getAudioFullId)(e),target:_.add}),(0,d.sample)({clock:u.done,fn:({params:{identity:e}})=>(0,l.getAudioFullId)(e),target:_.remove}),{addFx:s,removeFx:u,$identitiesMap:p}}},373945:(e,t,s)=>{"use strict";s.d(t,{createAddFx:()=>r});var n=s(580352),a=s(478455);function r({domain:e}){const t=(0,n.createAudioAddDislikeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{audio_ids:(0,a.getAudioFullId)(e)}})}))}},8683:(e,t,s)=>{"use strict";s.d(t,{createRemoveFx:()=>r});var n=s(580352),a=s(478455);function r({domain:e}){const t=(0,n.createAudioRemoveDislikeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{audio_ids:(0,a.getAudioFullId)(e)}})}))}},131084:(e,t,s)=>{"use strict";s.d(t,{createMyAudioPlaylistsService:()=>c});var n=s(32489),a=s(746573),r=s(73042),d=s(178246),l=s(163374);function c({config:e,audioPlaylistsService:t}){const s=(0,a.getEffectorServiceDomain)(e),{$addedAudiosMap:c,addedAudiosMapApi:u}=(0,d.createAddedAudiosMap)(s),_=s.createEvent(),p=(0,n.restore)(_,null),m=s.createStore({},{updateFilter:(e,t)=>!(0,r.shallowEqual)(e,t),serialize:"ignore"}),y=(0,n.attach)({source:p,async effect(e,s){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To create a playlist, set the userId using setUserId.");return t.createFx({...s,ownerId:e})}}),f=(0,n.attach)({source:p,async effect(e,s){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete a playlist, set the userId using setUserId.");return t.deleteFx({...s,ownerId:e})}}),g=(0,n.attach)({source:p,async effect(e,s){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To add audio to playlist, set the userId using setUserId.");return t.addAudioFx({...s,ownerId:e})}}),E=(0,n.attach)({source:p,async effect(e,s){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete audio from playlist, set the userId using setUserId.");return t.deleteAudioFx({...s,ownerId:e})}});return(0,n.sample)({clock:(0,n.combine)({playlistDataEntities:t.$playlistDataEntities,userId:p}),fn:({playlistDataEntities:e,userId:t})=>t?Object.entries(e).reduce(((e,[s,n])=>(n.ownerId===t&&(e[s]=n),e)),{}):{},target:m}),(0,n.sample)({clock:g.done,source:p,fn:(e,{params:t,result:s})=>({originalPlaylistAudioFullId:(0,l.getPlaylistAudioFullId)({originalAudio:t.audioIdentity,playlist:{id:t.playlistId,ownerId:e}}),addedIdentity:s}),target:u.add}),(0,n.sample)({clock:E.done,source:p,fn:(e,{params:t})=>(0,l.getPlaylistAudioFullId)({originalAudio:t.originalAudioIdentity,playlist:{id:t.playlistId,ownerId:e}}),target:u.remove}),{createFx:y,deleteFx:f,addAudioFx:g,deleteAudioFx:E,setUserId:_,$myAudioPlaylistsIdentitiesMap:m,$addedAudiosMap:c}}},178246:(e,t,s)=>{"use strict";s.d(t,{createAddedAudiosMap:()=>d});var n=s(32489),a=s(46201),r=s(786979);function d(e){const t=e.createStore({});return{$addedAudiosMap:t,addedAudiosMapApi:(0,n.createApi)(t,{add:(e,{originalPlaylistAudioFullId:t,addedIdentity:s})=>(0,a.addPairToMap)(e,{key:t,value:s}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},163374:(e,t,s)=>{"use strict";s.d(t,{getPlaylistAudioFullId:()=>r});var n=s(848040),a=s(594241);function r({playlist:e,originalAudio:t}){return`PLAYLIST_${(0,a.getAudioPlaylistFullId)(e)}AUDIO_${(0,n.getAudioAccessId)(t)}`}},197796:(e,t,s)=>{"use strict";s.d(t,{createMyAudioRadioStationsService:()=>u});var n=s(746573),a=s(294219),r=s(685065),d=s(32489),l=s(478455),c=s(586049);function u(e){const t=(0,n.getEffectorServiceDomain)(e),s=(0,a.createFollowFx)({domain:t}),u=(0,r.creatUnfollowFx)({domain:t}),{fullIdsMapApi:_,$fullIdsMap:p}=(0,c.createFullIdsMap)(t);return(0,d.sample)({clock:s.done,fn:({params:{identity:e}})=>(0,l.getAudioFullId)(e),target:_.add}),(0,d.sample)({clock:u.done,fn:({params:{identity:e}})=>(0,l.getAudioFullId)(e),target:_.remove}),{followFx:s,unfollowFx:u,$identitiesMap:p}}},294219:(e,t,s)=>{"use strict";s.d(t,{createFollowFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioFollowRadioStationFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{station_id:e.id}})}))}},685065:(e,t,s)=>{"use strict";s.d(t,{creatUnfollowFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioUnfollowRadioStationFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{station_id:e.id}})}))}},944374:(e,t,s)=>{"use strict";s.d(t,{createMyMusicService:()=>p});var n=s(32489),a=s(606066),r=s(245666),d=s(478794),l=s(838325),c=s(478455),u=s(182464),_=s(746573);function p(e){const t=(0,_.getEffectorServiceDomain)(e),s=(0,a.createAddFx)({domain:t}),p=(0,r.createRestoreFx)({domain:t}),m=(0,d.createDeleteFx)({domain:t}),{$addedIdentitiesMap:y,$removedIdentitiesMap:f,$identitiesMap:g,addedIdentitiesMapApi:E,removedIdentitiesMapApi:A,addToStore:b,removeFromStore:P,removeFromAllIdentitiesMaps:I}=(0,u.createIdentitiesMaps)({domain:t}),T=(0,n.attach)({source:(0,n.combine)({addedIdentitiesMap:y,removedIdentitiesMap:f}),mapParams:(e,t)=>({...e,...t}),effect:(0,n.createEffect)((async({userId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:a})=>{let r,d;if(e===t.ownerId)r=t,d=(0,c.getAudioFullId)({id:t.id,ownerId:e});else{const l=(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId});if(!(l in n))return await s({trackedIdentity:t,userId:e});if(r=n[l],d=(0,c.getAudioFullId)({id:r.id,ownerId:e}),!(d in a))return await s({trackedIdentity:t,userId:e})}const u=(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId});try{return await p({identity:{id:r.id,ownerId:e}}),{id:r.id,ownerId:e}}catch(n){const a=n;if(a?.error?.error_code===l.MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return I({addedFullId:u,removedFullId:d}),await s({trackedIdentity:t,userId:e});throw a}}))});return(0,n.sample)({clock:T.done,source:y,filter:(e,{params:{userId:t,trackedIdentity:s}})=>t===s.ownerId&&!((0,c.getAudioFullId)(s)in e),fn:(e,{params:{trackedIdentity:t},result:s})=>({fullId:(0,c.getAudioFullId)(t),identity:s}),target:E.add}),(0,n.sample)({clock:s.done,fn:({params:{trackedIdentity:{id:e,ownerId:t}},result:s})=>({fullId:(0,c.getAudioFullId)({id:e,ownerId:t}),identity:s}),target:E.add}),(0,n.sample)({clock:p.done,fn:({params:{identity:e}})=>(0,c.getAudioFullId)(e),target:A.remove}),(0,n.sample)({clock:m.done,fn:({params:{identity:e}})=>(0,c.getAudioFullId)(e),target:A.add}),{addFx:T,deleteFx:m,addToStore:b,removeFromStore:P,$identitiesMap:g}}},606066:(e,t,s)=>{"use strict";s.d(t,{createAddFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioAddFx)({domain:e});return e.createEffect((async({trackedIdentity:e,userId:s})=>{const{id:n,ownerId:a,accessKey:r,trackCode:d,ref:l}=e,c=await t({query:{audio_id:n,owner_id:a,access_key:r,track_code:d,ref:l}}),u=c.items?.[0]?.new_audio_id;if(null==u)throw new Error("[MyMusicService] addFx - missing audio ID in response from audio.add api method");return{id:u,ownerId:s}}))}},478794:(e,t,s)=>{"use strict";s.d(t,{createDeleteFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioDeleteFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:s,ownerId:n}=e;await t({query:{audio_id:s,owner_id:n}})}))}},838325:(e,t,s)=>{"use strict";s.d(t,{MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},245666:(e,t,s)=>{"use strict";s.d(t,{createRestoreFx:()=>a});var n=s(580352);function a({domain:e}){const t=(0,n.createAudioRestoreFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:s,ownerId:n}=e;await t({query:{audio_id:s,owner_id:n}})}))}},182464:(e,t,s)=>{"use strict";s.d(t,{createIdentitiesMaps:()=>c});var n=s(32489),a=s(478455),r=s(810780),d=s(46201),l=s(786979);const c=({domain:e})=>{const t=e.createStore({}),s=e.createStore({}),c=(0,n.createEvent)(),u=(0,n.createEvent)(),_=(0,n.createEvent)(),p=(0,n.combine)(t,s,((e,t)=>Object.entries(e).reduce(((e,[s,n])=>((0,a.getAudioFullId)(n)in t||(e[s]=n),e)),{}))),m=(0,n.createApi)(t,{add:(e,{fullId:t,identity:s})=>(0,d.addPairToMap)(e,{key:t,value:s}),remove:(e,t)=>(0,l.removePairFromMap)(e,t)}),y=(0,n.createApi)(s,{add:(e,t)=>(0,d.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,l.removePairFromMap)(e,t)});return(0,n.sample)({clock:c,source:t,fn:(e,{oldIdentity:t,newIdentity:s})=>{const n=(0,a.getAudioFullId)(t),r=(0,a.getAudioFullId)(s);return{addToStoreParams:{identity:s,fullId:n},removeFromStoreFullId:e[n]?(0,a.getAudioFullId)(e[n]):r}},target:(0,r.spread)({targets:{addToStoreParams:m.add,removeFromStoreFullId:y.remove}})}),(0,n.sample)({clock:u,filter:({newIdentity:e})=>Boolean(e),target:(0,r.spread)({targets:{oldIdentity:m.remove.prepend((e=>(0,a.getAudioFullId)(e))),newIdentity:y.remove.prepend((e=>(0,a.getAudioFullId)(e)))}})}),(0,n.sample)({clock:_,target:(0,r.spread)({targets:{addedFullId:m.remove,removedFullId:y.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:s,$identitiesMap:p,addedIdentitiesMapApi:m,removedIdentitiesMapApi:y,addToStore:c,removeFromStore:u,removeFromAllIdentitiesMaps:_}}},586049:(e,t,s)=>{"use strict";s.d(t,{createFullIdsMap:()=>d});var n=s(32489),a=s(46201),r=s(786979);function d(e){const t=e.createStore({});return{$fullIdsMap:t,fullIdsMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,a.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},46201:(e,t,s)=>{"use strict";function n(e,t){return t.key in e?e:{...e,[t.key]:t.value}}s.d(t,{addPairToMap:()=>n})},594241:(e,t,s)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}s.d(t,{getAudioPlaylistFullId:()=>n})},786979:(e,t,s)=>{"use strict";function n(e,t){if(!(t in e))return e;const{[t]:s,...n}=e;return n}s.d(t,{removePairFromMap:()=>n})},865409:(e,t,s)=>{"use strict";function n(e){return{id:e.id,ownerId:e.owner_id,title:e.title,description:e.description,length:e.count}}s.d(t,{mapAPIPlaylistToAudioPlaylistData:()=>n})},65047:(e,t,s)=>{"use strict";s.d(t,{mapApiAudioPreviewToAudioPreviewData:()=>n});const n=e=>{const{url:t,clip_from:s,clip_to:n}=e;return{url:t||"",clip:{from:s||0,to:n||0}}}},213059:(e,t,s)=>{"use strict";s.d(t,{createAudioPodcastsFaveService:()=>u});var n=s(746573),a=s(33383),r=s(354491),d=s(32489),l=s(586049),c=s(280481);function u(e){const t=(0,n.getEffectorServiceDomain)(e),s=(0,a.createAddFx)({domain:t}),u=(0,r.createDeleteFx)({domain:t}),{fullIdsMapApi:_,$fullIdsMap:p}=(0,l.createFullIdsMap)(t);return(0,d.sample)({clock:s.done,fn:({params:{identity:e}})=>(0,c.getPodcastAudioFullId)(e),target:_.add}),(0,d.sample)({clock:u.done,fn:({params:{identity:e}})=>(0,c.getPodcastAudioFullId)(e),target:_.remove}),{addFx:s,deleteFx:u,$identitiesMap:p}}},33383:(e,t,s)=>{"use strict";s.d(t,{createAddFx:()=>a});var n=s(278116);function a({domain:e}){const t=(0,n.createFaveAddPodcastEpisodeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{owner_id:e.ownerId,episode_id:e.podcastId}})}))}},354491:(e,t,s)=>{"use strict";s.d(t,{createDeleteFx:()=>a});var n=s(278116);function a({domain:e}){const t=(0,n.createFaveRemovePodcastEpisodeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{owner_id:e.ownerId,episode_id:e.podcastId}})}))}},412554:(e,t,s)=>{"use strict";s.d(t,{createApiEffect:()=>a});var n=s(957994);const a=(e,{domain:t})=>t.createEffect((({query:t,controller:s,config:a,options:r})=>{const d=s?.signal;return(0,n.api)(e,t,a,{signal:d,...r})}))},603025:(e,t,s)=>{"use strict";s.d(t,{isApiError:()=>n});const n=e=>!!e&&"type"in e&&"api_error"===e.type},782399:(e,t,s)=>{"use strict";s.d(t,{isNetworkError:()=>n});const n=e=>"network_error"===e?.type},632731:(e,t,s)=>{"use strict";var n;s.d(t,{AvailableHelpHints:()=>n}),function(e){e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_PROFILE="mini_apps:button_mvk_profile",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_APP_MENU="mini_apps:button_mvk_app_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU="mini_apps:counter_toggle_in_action_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO="mini_apps:counter_toggle_in_action_menu_intro",e.ACCOUNT_HINT_MINI_APPS_OPEN_CATALOG_WITH_BADGES="mini_apps:open_catalog_with_badges",e.ACCOUNT_HINT_MINI_APPS_CATALOG_SECTION_WITH_BADGES="mini_apps:catalog_section_with_badges",e.ACCOUNT_HINT_SUPERAPP_RECOMMEND_ACTION_IN_MENU="superapp:recommend_action_in_menu",e.ACCOUNT_HINT_SUPERAPP_SHOW_RECOMMEND_ACTION="superapp:show_recommend_action",e.ACCOUNT_HINT_MINI_APPS_NAV_BUTTONS_THIRD_PARTY_BUTTONS="mini_apps:nav_buttons_third_party_buttons",e.ACCOUNT_HINT_POSTING_EDITOR_ONLINE_BOOKING="posting:editor_online_booking",e.ACCOUNT_HINT_PROFILE_SERVICES_MENU_BANNER="profile:services_menu_banner",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING="profile:services_onboarding",e.ACCOUNT_HINT_MVK_PWA_TABBAR="mvk:pwa_tabbar",e.ACCOUNT_HINT_SUPERAPP_MVK_SHOWCASE="superapp:mvk_showcase",e.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_FORCIBLY_ENABLED_ONBOARDING="friends:followers_mode_forcibly_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_CAN_BE_ENABLED_ONBOARDING="friends:followers_mode_can_be_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_ABOUT_MODAL_IMAGES="friends:followers_mode_about_modal_images",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_PROFILE_PASSKEY_ONBOARDING_WEB="profile:passkey_onboarding_web",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_INTERACTIVE_TIME_INDICATOR="video:interactive_time_indicator",e.ACCOUNT_HINT_CLIPS_WEB_UPLOAD_VIDEO_AS_CLIP="clips:upload_video_as_clip_web",e.AUTHOR_LIKE_ONBOARDING_HINT="feed:author_like_onboarding",e.GROUP_LIKE_ONBOARDING_HINT="feed:group_like_onboarding",e.ACCOUNT_HINT_COMMUNITY_REVIEW_TOOLTIP_MVK="community:review:tooltip_mvk",e.ACCOUNT_HINT_GROUPS_EDIT_MARKET_EXTRACTED_SETTINGS_HINT="groups:edit:market_extracted_settings_checkbox_hint",e.ACCOUNT_HINT_GROUPS_MAIN_MARKET_ACTION_EXTRACTED_SETTINGS_HINT="groups:main:market_action_extracted_settings_hint",e.ACCOUNT_HINT_GROUPS_DONUT_GOALS_ONBOARDING="groups:donut_goals_onboarding",e.ACCOUNT_HINT_GROUPS_REDESIGN_ONBOARDING="group:redesign_onboarding_mvk",e.ACCOUNT_HINT_GROUPS_TABS_ORDER_ONBOARDING="group:onboarding_tab_order",e.ACCOUNT_HINT_VIDEO_PIN="video:pin",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_BUTTON="video:watch_later_button",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION="video:watch_later_action",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_MENU="video:watch_later_menu",e.ACCOUNT_HINT_VIDEO_GROUP_CROP_COVER="video:group_crop_cover",e.ACCOUNT_HINT_VIDEO_MULTIPLE_VOLUME="video:multiple_volume",e.ACCOUNT_HINT_VIDEO_SUBTITLES_KAZ_LANG="video:subtitles_kaz_lang",e.ACCOUNT_HINT_MVK_VIDEO_FILTERS="mvk:video_filters",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_MVK="profile:photo_flow_onboarding_banner_profile_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_MVK="profile:photo_flow_onboarding_banner_show_all_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__MVK="profile:photo_flow_onboarding_banner_photo__mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_MVK="profile:photo_flow_onboarding_banner_mobile_question_mvk",e.ACCOUNT_HINT_PROFILE_OWNER_CONTENT_TABS_SETTINGS="profile:redesign_owner_content_tabs_settings",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING_WEB="profile:services_onboarding_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_WEB="profile:photo_flow_onboarding_banner_profile_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_WEB="profile:photo_flow_onboarding_banner_show_all_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__WEB="profile:photo_flow_onboarding_banner_photo__web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_WEB="profile:photo_flow_onboarding_banner_mobile_question_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_TOOLTIP_MOVE_PHOTO="profile:photo_flow_onboarding_tooltip_move_photo",e.ACCOUNT_HINT_ARTICLES_MOBILE_EDITOR="articles:mobile_editor",e.ACCOUNT_HINT_ADSEDIT_SITE_REMOVAL_POPUP="adsedit:site_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_REMOVAL_POPUP="adsedit:community_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_AND_SITE_REMOVAL_POPUP="adsedit:community_and_site_removal_popup",e.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_PRESENT_MINIAPP_MODAL="audio_studio:show_present_miniapp_modal",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_ANNUAL_RESULT_BANNER="audio_studio:show_annual_result_banner",e.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB="audio:longtap_preview_web",e.ACCOUNT_HINT_CLIPS_SYNCING_CLIPS_WITH_POSTS_WEB="clips:syncing_clips_with_posts_web",e.ACCOUNT_HINT_BANNED_RESET_SESSIONS="banned:can_not_reset_sessions",e.ACCOUNT_HINT_CLIPS_FORCE_UPLOAD_VIDEO_AS_CLIP="clips:force_upload_video_as_clip",e.ACCOUNT_HINT_CLIPS_SYNCING_CLIPS_WITH_POSTS_MVK="clips:syncing_clips_with_posts_mvk",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP="posting:editor_photo_attachements_crop",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP_ZOOM="posting:editor_photo_attachements_crop_zoom",e.ACCOUNT_HINT_SMB_YCLIENTS_ONLINE_BOOKING="smb:yclients:online_booking",e.UNBAN_SECURITY_RECOMMENDATION_HINT="feed:after_auth:unban_security_recommendation",e.ACCOUNT_HINT_SETTINGS_BOOKING="smb:yclients:group_settings_online_booking",e.ACCOUNT_HINT_VIDEO_ATTACH_SHORT_VIDEO="video:attach_short_video",e.ACCOUNT_HINT_STORIES_EDITOR_TEXT_CREATING_WEB="stories:editor_text_creating_web",e.ACCOUNT_HINT_VIDEO_SMART_CROP="video:smart_crop",e.ACCOUNT_HINT_GROUP_SETTINGS_MONETIZATION_ADBLOGGER="group_settings:monetization_adblogger",e.ACCOUNT_HINT_CLIPS_VIDEO_TO_CLIPS_APP_ENTRYPOINT_WEB="clips:video_to_clips_app_entrypoint_web",e.ACCOUNT_HINT_PRIVACY_FOLLOWERS_MODE_MODAL_PIC="privacy:followers_mode_modal_pic",e.ACCOUNT_HINT_FEED_POSTING_CROP_ZOOM_WEB="feed:posting_crop_zoom_web",e.ACCOUNT_HINT_FEED_POSTING_CROP_ZOOM_MVK="feed:posting_crop_zoom_mvk"}(n||(n={}))},746573:(e,t,s)=>{"use strict";s.d(t,{getEffectorServiceDomain:()=>r});var n=s(32489),a=s(418562);const r=e=>{const t=e?.name||(0,a.default)();return e?.domain?e.domain.createDomain(t):(0,n.createDomain)(t)}},140462:(e,t,s)=>{"use strict";function n(e,t){return t<0?e+t:t}s.d(t,{indexAbs:()=>n})},35215:(e,t,s)=>{"use strict";function n(e){return"number"==typeof e&&!Number.isNaN(e)}s.d(t,{isNumber:()=>n})},538522:(e,t,s)=>{"use strict";s.d(t,{joinFullId:()=>n,joinRawId:()=>a});const n=(e,t)=>`${e}_${t}`,a=({ownerId:e,itemId:t,externalId:s})=>[e,t,s].filter(Boolean).join("_")},73042:(e,t,s)=>{"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let n=0;n<s.length;n++)if(!Object.prototype.hasOwnProperty.call(t,s[n])||e[s[n]]!==t[s[n]])return!1;return!0}s.d(t,{shallowEqual:()=>n})},70148:(e,t,s)=>{"use strict";s.d(t,{OwnedIdentity:()=>r});var n=s(768035),a=s(873900);class r{static fromRawId(e){const t=(0,n.parseRawId)(e);return new r(t)}get rawId(){return(0,a.getIdentityRawId)(this)}get accessRawId(){return(0,a.getIdentityAccessRawId)(this)}get fullId(){return this.rawId}constructor(e){this.id=e.id,this.ownerId=e.ownerId,this.accessKey=e.accessKey}}},843161:(e,t,s)=>{"use strict";s.d(t,{SingleIdentity:()=>n});class n{get fullId(){return this.id}constructor(e){this.id=e.id}}},391751:(e,t,s)=>{"use strict";function n(...e){if(e.length<2)return!0;const t=e[0].fullId;return e.every((e=>e.fullId===t))}s.d(t,{compareIdentities:()=>n})},873900:(e,t,s)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}function a(e){const{accessKey:t}=e,s=n(e);return t?`${s}_${t}`:s}s.d(t,{getIdentityAccessRawId:()=>a,getIdentityRawId:()=>n})},768035:(e,t,s)=>{"use strict";s.d(t,{parseRawId:()=>a});var n=s(8520);function a(e){const t=e.split("_"),s=t[0]&&parseInt(t[0],10),a=t[1]&&parseInt(t[1],10);if(!(0,n.isNumber)(a)||!(0,n.isNumber)(s))throw new Error(`Invalid rawId: ${e}`);return{id:a,ownerId:s,accessKey:t[2]}}},33305:(e,t,s)=>{"use strict";s.d(t,{getOwnerFullName:()=>l,getOwnerHref:()=>d,getOwnerShortName:()=>c,isOwnerGroup:()=>r,isOwnerUser:()=>a});var n=s(74605);const a=e=>!!e&&"first_name"in e,r=e=>!!e&&"name"in e;function d(e,t=!1){let s="/";return e&&(r(e)?s+=e.screen_name||`club${e.id}`:s+=e.screen_name||e.domain||`id${e.id}`),t?window.location.origin+s:s}function l(e){let t="";return e?(e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim()}`),e.maiden_name&&e.sex===n.BaseSexEnumNames.FEMALE&&(t+=` (${e.maiden_name.trim()})`),t):t}function c(e){let t="";return e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim().slice(0,1)}.`),t}},926505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Embedded:()=>n});var n=function(){function e(e){var t=this;this.receiver=!1,this._requestId=1,this._requests={},this._onMessage=function(e){if(e.origin===t.origin&&e.data&&e.data.embeddedName===t.name){t.target=e.source;var s=e.data,n=s.response;if(n){var a=t._requests[n];a&&a(s.data),t._requests[n]=null}else s.request&&s.action&&Promise.resolve(t.onMessage(s.action,s.data)).then((function(e){t._sendResponse(s.request,s.action,e)}))}},this.name=e.name,this.target=e.target,this.origin=e.origin||"https://"+e.host,this.receiver=e.receiver||!1,this.onMessage=e.onMessage,window.addEventListener("message",this._onMessage,!1)}return e.prototype._sendResponse=function(e,t,s){this.target&&this.target.postMessage({embeddedName:this.name,action:t,response:e,data:s},this.origin)},e.prototype.sendMessage=function(e,t){var s=this;if(void 0===t&&(t={}),!this.target)return Promise.reject();var n=this._requestId,a=new Promise((function(e){s._requestId++,s._requests[n]=e}));return this.target.postMessage({embeddedName:this.name,action:e,data:t,request:n},this.origin),a},e.prototype.destroy=function(){window.removeEventListener("message",this._onMessage,!1),this.target=void 0},e}()},156720:(e,t,s)=>{"use strict";s(296540)},511413:(e,t,s)=>{"use strict";s.d(t,{makeIcon:()=>p});var n=s(171893),a=s(855456),r=s(918542),d=s(296540),l=s(846339),c=s(568329),u=s(622765),_=function(e){var t=e.width,s=void 0===t?0:t,l=e.height,c=void 0===l?0:l,u=e.viewBox,_=e.id,p=e.className,m=void 0===p?"":p,y=e.fill,f=e.getRootRef,g=e.style,E=void 0===g?{}:g,A=e.title,b=e.children,P=(0,r._)(e,["width","height","viewBox","id","className","fill","getRootRef","style","title","children"]),I=d.Children.toArray(b)[0],T=d.isValidElement(I)&&"function"==typeof I.type&&"mountIcon"in I.type,C=Math.max(s,c),O=(0,n._)({width:s,height:c},E);return d.createElement("svg",(0,a._)((0,n._)({"aria-hidden":"true",display:"block"},P),{className:["vkuiIcon","vkuiIcon--".concat(C),"vkuiIcon--w-".concat(s),"vkuiIcon--h-".concat(c),"vkuiIcon--".concat(_),m].join(" ").trim(),viewBox:u,width:s,height:c,style:O,ref:f}),A&&d.createElement("title",null,A),T&&b,d.createElement("use",{xlinkHref:"#".concat(_),style:{fill:"currentColor",color:y}},!T&&b))};function p(e,t,s,r,p,m,y,f,g){var E=!1;function A(){E||((0,c.addSpriteSymbol)(new l.BrowserSymbol({content:r})),E=!0)}var b=(0,u.warnOnce)(e),P=function(e){if((0,c.useIsomorphicLayoutEffect)(A,[]),y){var r=f?". Замените на ".concat(f):"";b("Иконка устарела"+r)}return d.createElement(_,(0,a._)((0,n._)({},g,e),{viewBox:s,id:t,width:void 0===e.width||isNaN(e.width)?p:+e.width,height:void 0===e.height||isNaN(e.height)?m:+e.height}))};return P.mountIcon=A,P.displayName=e,P}},775746:(e,t,s)=>{"use strict";s.d(t,{BrowserSprite:()=>c});var n=s(730494),a=s(799407),r=s(50467),d=s(846339),l="http://www.w3.org/2000/svg",c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n._)(this,e),(0,r._)(this,"symbols",new Map),(0,r._)(this,"config",{attrs:{xmlns:l,"xmlns:xlink":"http://www.w3.org/1999/xlink",style:"position:absolute;width:0;height:0","aria-hidden":"true"}}),(0,r._)(this,"node",null),Object.assign(this.config.attrs,t.attrs)}return(0,a._)(e,[{key:"push",value:function(e){var t=this.symbols,s=t.has(e.id);return t.set(e.id,e),!s}},{key:"add",value:function(e){var t=this.push(e);return this.node&&t&&e.mount(this.node),t}},{key:"attach",value:function(e){var t=this;this.node||(this.node=e,this.symbols.forEach((function(t){t.mount(e)})),e.querySelectorAll("symbol").forEach((function(e){var s=d.BrowserSymbol.createFromExistingNode(e);t.add(s)})))}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.node||(this.node=this.render(),t&&e.childNodes[0]?e.insertBefore(this.node,e.firstChild):e.appendChild(this.node)),this.node}},{key:"render",value:function(){var e=document.createElementNS(l,"svg");return Object.entries(this.config.attrs).forEach((function(t){return e.setAttribute(t[0],t[1])})),this.symbols.forEach((function(t){return e.appendChild(t.node)})),e}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)}}]),e}()},846339:(e,t,s)=>{"use strict";s.d(t,{BrowserSymbol:()=>l});var n=s(730494),a=s(799407),r=s(50467),d=s(878715),l=function(){function e(t){var s=t.content;(0,n._)(this,e),(0,r._)(this,"isMounted",!1),(0,r._)(this,"node",void 0),this.node=(0,d.parse)(s)}return(0,a._)(e,[{key:"id",get:function(){return this.node.id}},{key:"mount",value:function(e){return this.isMounted||(this.isMounted=!0,e.appendChild(this.node)),this.node}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.isMounted=!1)}}],[{key:"createFromExistingNode",value:function(t){var s=new e({content:""});return s.node=t,s}}]),e}()},844990:(e,t,s)=>{"use strict";s.d(t,{IconAppearanceProvider:()=>r.IconAppearanceProvider,makeIcon:()=>n.makeIcon,makeRasterIcon:()=>a.makeRasterIcon});var n=s(511413),a=s(411178),r=(s(156720),s(994026))},994026:(e,t,s)=>{"use strict";s.d(t,{IconAppearanceProvider:()=>d,appearanceTypes:()=>a,useIconAppearance:()=>l});var n=s(296540),a=["light","dark"],r=n.createContext("light"),d=r.Provider,l=function(){return n.useContext(r)}},411178:(e,t,s)=>{"use strict";s.d(t,{makeRasterIcon:()=>p});var n=s(171893),a=s(918542),r=s(296540),d=s(994026),l=s(243189),c={mdpi:1,hdpi:1.5,xhdpi:1.5,xxhdpi:3,xxxhdpi:4},u=Object.keys(c),_=r.memo((function(e){var t=e.getRootRef,s=e.id,_=e.size,p=e.className,m=(0,a._)(e,["getRootRef","id","size","className"]),y=(0,d.useIconAppearance)(),f=u.reduce((function(e,t){var s=(0,l.getDensityBucketAppearanceKey)(y,t),n=m[s];delete m[s];var a=!0,r=!1,u=void 0;try{for(var _,p=d.appearanceTypes[Symbol.iterator]();!(a=(_=p.next()).done);a=!0){var f=_.value,g=(0,l.getDensityBucketAppearanceKey)(f,t);n||(n=m[g]),delete m[g]}}catch(e){r=!0,u=e}finally{try{a||null==p.return||p.return()}finally{if(r)throw u}}return n&&e.push("".concat(n," ").concat(c[t],"x")),e}),[]).join(", ");return r.createElement("img",(0,n._)({ref:t,"aria-hidden":"true",alt:"",className:["vkuiIcon","vkuiIcon--".concat(_),"vkuiIcon--w-".concat(_),"vkuiIcon--h-".concat(_),"vkuiIcon--".concat(s),"vkuiRasterIcon",p].join(" ").trim(),width:_,height:_,srcSet:f,loading:"lazy",draggable:!1},m))}));function p(e,t,s,a){var d=function(e){return r.createElement(_,(0,n._)({id:t,size:s},a,e))};return d.size=s,d.isRasterIcon=!0,d.displayName=e,d}},243189:(e,t,s)=>{"use strict";s.d(t,{getDensityBucketAppearanceKey:()=>n});var n=function(e,t){return"".concat(e).concat(t)}},568329:(e,t,s)=>{"use strict";s.d(t,{addSpriteSymbol:()=>u,useIsomorphicLayoutEffect:()=>_});var n,a=s(775746),r=s(296540),d=!("undefined"==typeof window||!window.document||!window.document.createElement);if(d){var l="__SVG_SPRITE_NODE__";n=new a.BrowserSprite({attrs:{id:l}});var c=function(){var e=document.getElementById(l);e?n.attach(e):n.mount(document.body),document.removeEventListener("DOMContentLoaded",c)};document.querySelector("body")?c():document.addEventListener("DOMContentLoaded",c)}else n=null;function u(e){n&&n.add(e)}var _=d?r.useLayoutEffect:r.useEffect},878715:(e,t,s)=>{"use strict";function n(e){var t=!!document.importNode,s=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(s,!0):s}s.d(t,{parse:()=>n})},622765:(e,t,s)=>{"use strict";function n(e){var t={};return function(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[s]||(console[n]("[@vkontakte/icons][".concat(e,"] ").concat(s)),t[s]=!0)}}s.d(t,{warnOnce:()=>n})},331599:(e,t,s)=>{"use strict";s.d(t,{Icon12OnlineMobile:()=>n});var n=(0,s(844990).makeIcon)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0zm.008 3H2.003a.5.5 0 0 0-.503.502v4.996c0 .277.225.502.503.502h3.995a.5.5 0 0 0 .502-.502V3.503A.5.5 0 0 0 5.997 3" /></symbol>',8,12,!1,void 0)},555738:(e,t,s)=>{"use strict";s.d(t,{Icon16Spinner:()=>n});var n=(0,s(844990).makeIcon)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},679804:(e,t,s)=>{"use strict";s.d(t,{Icon20CalendarOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20CalendarOutline","calendar_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="calendar_outline_20"><path fill-rule="evenodd" d="M6.25 1a.75.75 0 0 1 .75.75v.257Q7.588 1.998 8.317 2h3.366q.729-.002 1.317.007V1.75a.75.75 0 0 1 1.5 0v.356c.428.064.816.172 1.18.357a4.25 4.25 0 0 1 1.857 1.858c.253.497.361 1.04.413 1.67.05.613.05 1.374.05 2.326v3.366c0 .952 0 1.713-.05 2.327-.052.63-.16 1.172-.413 1.67a4.25 4.25 0 0 1-1.857 1.857c-.498.253-1.04.361-1.67.413-.614.05-1.375.05-2.327.05H8.317c-.952 0-1.713 0-2.327-.05-.63-.052-1.172-.16-1.67-.413a4.25 4.25 0 0 1-1.857-1.857c-.253-.498-.361-1.04-.413-1.67C2 13.396 2 12.635 2 11.683V8.317c0-.952 0-1.713.05-2.327.052-.63.16-1.172.413-1.67a4.25 4.25 0 0 1 1.858-1.857A3.8 3.8 0 0 1 5.5 2.106V1.75A.75.75 0 0 1 6.25 1M5.5 3.63c-.203.044-.361.1-.498.17A2.75 2.75 0 0 0 3.8 5.002c-.128.25-.21.573-.255 1.11-.02.255-.032.543-.038.878h12.986a14 14 0 0 0-.038-.878c-.044-.537-.127-.86-.255-1.11A2.75 2.75 0 0 0 15 3.8a2 2 0 0 0-.499-.17v.12a.75.75 0 0 1-1.5 0v-.243a80 80 0 0 0-1.35-.007h-3.3c-.525 0-.968 0-1.35.007v.243a.75.75 0 0 1-1.5 0zm11 4.86h-13v3.16c0 .992 0 1.692.045 2.238.044.537.127.86.255 1.11A2.75 2.75 0 0 0 5.002 16.2c.25.128.573.21 1.11.255.546.044 1.246.045 2.238.045h3.3c.992 0 1.692 0 2.238-.045.537-.044.86-.127 1.11-.255A2.75 2.75 0 0 0 16.2 15c.128-.252.21-.574.255-1.111.044-.546.045-1.245.045-2.238z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},168799:(e,t,s)=>{"use strict";s.d(t,{Icon20Check:()=>n});var n=(0,s(844990).makeIcon)("Icon20Check","check_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="check_20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},540969:(e,t,s)=>{"use strict";s.d(t,{Icon20CheckBoxIndetermanate:()=>n});var n=(0,s(844990).makeIcon)("Icon20CheckBoxIndetermanate","check_box_indetermanate_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_indetermanate_20"><path fill="currentColor" fill-rule="evenodd" d="M2 8.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C5.04 2 6.16 2 8.4 2h3.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C18 5.04 18 6.16 18 8.4v3.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C14.96 18 13.84 18 11.6 18H8.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C2 14.96 2 13.84 2 11.6zm4.4.7a.9.9 0 1 0 0 1.8h7.2a.9.9 0 1 0 0-1.8z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},111603:(e,t,s)=>{"use strict";s.d(t,{Icon20CheckBoxOff:()=>n});var n=(0,s(844990).makeIcon)("Icon20CheckBoxOff","check_box_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_off_20"><path fill="currentColor" fill-rule="evenodd" d="M4.046 2.534C4.788 2.138 5.517 2 7.128 2h5.744c1.61 0 2.34.138 3.082.534.65.348 1.164.862 1.512 1.512.396.742.534 1.471.534 3.082v5.744c0 1.61-.138 2.34-.534 3.082a3.64 3.64 0 0 1-1.512 1.512c-.742.396-1.472.534-3.082.534H7.128c-1.61 0-2.34-.138-3.082-.534a3.64 3.64 0 0 1-1.512-1.512C2.138 15.212 2 14.482 2 12.872V7.128c0-1.61.138-2.34.534-3.082a3.65 3.65 0 0 1 1.512-1.512m3.082.966c-1.531 0-1.962.136-2.374.357a2.15 2.15 0 0 0-.897.897c-.22.412-.357.843-.357 2.374v5.744c0 1.531.136 1.962.357 2.374q.313.585.897.897c.412.22.843.357 2.374.357h5.744c1.531 0 1.962-.136 2.374-.357q.585-.313.897-.897c.22-.412.357-.843.357-2.374V7.128c0-1.531-.136-1.962-.357-2.374a2.15 2.15 0 0 0-.897-.897c-.412-.22-.843-.357-2.374-.357z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},63455:(e,t,s)=>{"use strict";s.d(t,{Icon20CheckBoxOn:()=>n});var n=(0,s(844990).makeIcon)("Icon20CheckBoxOn","check_box_on_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_on_20"><path fill="currentColor" fill-rule="evenodd" d="M2.436 4.184C2 5.04 2 6.16 2 8.4v3.2c0 2.24 0 3.36.436 4.216a4 4 0 0 0 1.748 1.748C5.04 18 6.16 18 8.4 18h3.2c2.24 0 3.36 0 4.216-.436a4 4 0 0 0 1.748-1.748C18 14.96 18 13.84 18 11.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 0 0-1.748-1.748C14.96 2 13.84 2 11.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 0 0-1.748 1.748m12.2 3.803a.9.9 0 1 0-1.272-1.274l-4.673 4.665-2.055-2.052A.9.9 0 0 0 5.364 10.6l2.691 2.687a.9.9 0 0 0 1.272 0z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},831960:(e,t,s)=>{"use strict";s.d(t,{Icon20CheckCircleOff:()=>n});var n=(0,s(844990).makeIcon)("Icon20CheckCircleOff","check_circle_off_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" viewBox="0 0 20 20" id="check_circle_off_20"><defs><path id="check_circle_off_20_a" fill="currentColor" fill-rule="evenodd" d="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10m0-1a9 9 0 1 0 0-18 9 9 0 0 0 0 18" clip-rule="evenodd" /></defs><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /><use xlink:href="#check_circle_off_20_a" fill-rule="evenodd" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},64821:(e,t,s)=>{"use strict";s.d(t,{Icon20ChevronLeftOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20ChevronLeftOutline","chevron_left_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="chevron_left_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M12.526 4.217a.75.75 0 0 1 0 1.06L7.81 10l4.716 4.721a.75.75 0 1 1-1.061 1.06l-5.246-5.25a.75.75 0 0 1 0-1.061l5.246-5.252a.75.75 0 0 1 1.06-.001z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},516102:(e,t,s)=>{"use strict";s.d(t,{Icon20ChevronUp:()=>n});var n=(0,s(844990).makeIcon)("Icon20ChevronUp","chevron_up_20","0 0 20 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16" id="chevron_up_20"><path fill-rule="evenodd" d="M15.78 11.125a1 1 0 0 1-1.405.156L10 7.78l-4.375 3.5a1 1 0 0 1-1.25-1.562l5-4a1 1 0 0 1 1.25 0l5 4a1 1 0 0 1 .156 1.406Z" clip-rule="evenodd" /></symbol>',20,16,!1,void 0)},490363:(e,t,s)=>{"use strict";s.d(t,{Icon20ListPlusOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20ListPlusOutline","list_plus_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="list_plus_outline_20"><path fill-rule="evenodd" d="M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75m0 5A.75.75 0 0 1 2.75 9h8.5a.75.75 0 0 1 0 1.5h-8.5A.75.75 0 0 1 2 9.75M15.5 11a.75.75 0 0 1 .75.75V14h2.25a.75.75 0 0 1 0 1.5h-2.25v2.25a.75.75 0 0 1-1.5 0V15.5H12.5a.75.75 0 0 1 0-1.5h2.25v-2.25a.75.75 0 0 1 .75-.75M2 14.75a.75.75 0 0 1 .75-.75H8a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},203788:(e,t,s)=>{"use strict";s.d(t,{Icon20PodcastOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20PodcastOutline","podcast_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="podcast_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" opacity=".4" /><path fill="currentColor" fill-rule="nonzero" d="M10 5a4 4 0 0 1 4 4v3c0 1.953-1.4 3.578-3.25 3.93v1.32a.75.75 0 1 1-1.5 0v-1.32A4 4 0 0 1 6 12V9a4 4 0 0 1 4-4m0 1.5A2.5 2.5 0 0 0 7.5 9v3a2.5 2.5 0 0 0 4.502 1.498l-.13.002H10.45a.75.75 0 1 1 0-1.5h2.05v-1.5h-2.05a.75.75 0 1 1 0-1.5h2.05A2.5 2.5 0 0 0 10 6.5M10 2a7 7 0 0 1 6.938 6.065A1.5 1.5 0 0 1 18 9.5v3a1.5 1.5 0 0 1-3 0v-3c0-.428.18-.815.468-1.088a5.5 5.5 0 0 0-5.247-4.908L10 3.5a5.5 5.5 0 0 0-5.469 4.912c.29.273.469.66.469 1.088v3a1.5 1.5 0 0 1-3 0v-3a1.5 1.5 0 0 1 1.062-1.435A7 7 0 0 1 10 2" /></g></symbol>',20,20,!1,void 0)},223173:(e,t,s)=>{"use strict";s.d(t,{Icon20ShareOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20ShareOutline","share_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="share_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M9.764 4.753a.25.25 0 0 1 .402-.198l6.742 5.247a.25.25 0 0 1 0 .395l-6.747 5.25a.25.25 0 0 1-.402-.198v-3.136a.75.75 0 0 0-.75-.75c-2.456 0-4.342.913-5.832 2.197.266-1.454.824-2.577 1.57-3.426 1.066-1.212 2.58-1.941 4.385-2.228a.75.75 0 0 0 .632-.741zm1.324-1.381c-1.15-.895-2.824-.075-2.824 1.38v1.791c-1.81.394-3.434 1.225-4.643 2.6-1.352 1.538-2.117 3.68-2.117 6.445a.75.75 0 0 0 1.329.477c1.362-1.655 3.059-2.942 5.426-3.167v2.35c0 1.456 1.674 2.277 2.823 1.382l6.747-5.25c.9-.7.9-2.061 0-2.762z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},136017:(e,t,s)=>{"use strict";s.d(t,{Icon20ThumbsDown:()=>n});var n=(0,s(844990).makeIcon)("Icon20ThumbsDown","thumbs_down_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_20"><path fill-rule="evenodd" d="m14.725 12.63-1.944 4.52a2.232 2.232 0 0 1-4.283-.883v-2.326a.285.285 0 0 0-.285-.285H4.498c-2.105 0-3.556-2.111-2.8-4.076l2.076-5.4A3.4 3.4 0 0 1 6.947 2h4.849a3.2 3.2 0 0 1 3.2 3.2v6.114c0 .453-.092.9-.271 1.316M16.745 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},715782:(e,t,s)=>{"use strict";s.d(t,{Icon20ThumbsDownOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20ThumbsDownOutline","thumbs_down_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_outline_20"><path fill-rule="evenodd" d="M10.762 18.503c.898 0 1.711-.532 2.07-1.355l1.77-4.057c.058-.134.097-.224.132-.317.152-.4.24-.823.261-1.251.005-.1.005-.198.005-.345v-4.46c0-.673 0-1.223-.037-1.671-.037-.463-.118-.882-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318C11.506 2 10.955 2 10.282 2h-2.47c-.829 0-1.433 0-1.974.197a3.25 3.25 0 0 0-1.254.826c-.395.42-.633.975-.96 1.736l-.994 2.32c-.387.902-.698 1.626-.89 2.218-.196.6-.306 1.166-.2 1.726a3.25 3.25 0 0 0 1.378 2.09c.473.319 1.036.441 1.665.498.62.057 1.408.057 2.389.057h1.531v2.578a2.26 2.26 0 0 0 2.26 2.258Zm.695-1.955a.759.759 0 0 1-1.454-.303V13.2c0-.571-.463-1.034-1.034-1.034h-1.96c-1.027 0-1.747-.001-2.29-.05-.543-.05-.803-.141-.963-.249a1.75 1.75 0 0 1-.742-1.125c-.036-.19-.017-.465.152-.983.169-.52.452-1.18.857-2.125l.93-2.167c.399-.93.534-1.215.724-1.417a1.75 1.75 0 0 1 .675-.445c.26-.095.576-.106 1.587-.106h2.311c.713 0 1.202 0 1.581.032.37.03.57.085.713.159.33.168.598.435.765.765.074.144.13.343.16.713.03.38.031.869.031 1.581v4.411c0 .17 0 .23-.003.29-.013.27-.069.537-.165.79-.02.055-.045.11-.113.267l-1.761 4.04ZM16.75 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" /></symbol>',20,20,!1,void 0)},684540:(e,t,s)=>{"use strict";s.d(t,{Icon20VinylOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon20VinylOutline","vinyl_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="vinyl_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 7.5a2.5 2.5 0 0 0-1.768.732A2.5 2.5 0 0 0 7.5 10c0 .69.28 1.315.732 1.768A2.5 2.5 0 0 0 10 12.5a2.5 2.5 0 0 0 1.768-.732A2.5 2.5 0 0 0 12.5 10a2.5 2.5 0 0 0-.732-1.768A2.5 2.5 0 0 0 10 7.5m-.707 1.793A1 1 0 0 1 10 9a1 1 0 0 1 .707.293A1 1 0 0 1 11 10a1 1 0 0 1-.293.707A1 1 0 0 1 10 11a1 1 0 0 1-.707-.293A1 1 0 0 1 9 10a1 1 0 0 1 .293-.707" clip-rule="evenodd" /><path fill="currentColor" d="M10.21 6.006a4 4 0 0 0-4.205 4.2.75.75 0 0 1-.71.787.75.75 0 0 1-.788-.71 5.5 5.5 0 0 1 5.78-5.775.75.75 0 0 1-.078 1.497m5.283 3.712a.75.75 0 0 0-1.498.077 4 4 0 0 1-4.204 4.2.75.75 0 0 0-.079 1.498 5.5 5.5 0 0 0 4.175-1.602 5.5 5.5 0 0 0 1.606-4.173" /><path fill="currentColor" fill-rule="evenodd" d="M10 1.5a8.47 8.47 0 0 0-6.01 2.49C2.45 5.528 1.5 7.653 1.5 10s.951 4.472 2.49 6.01C5.528 17.55 7.653 18.5 10 18.5s4.472-.951 6.01-2.49c1.539-1.538 2.49-3.663 2.49-6.01s-.951-4.472-2.49-6.01A8.47 8.47 0 0 0 10 1.5M5.05 5.05A6.97 6.97 0 0 1 10 3c1.933 0 3.681.782 4.95 2.05A6.97 6.97 0 0 1 17 10a6.97 6.97 0 0 1-2.05 4.95A6.97 6.97 0 0 1 10 17a6.97 6.97 0 0 1-4.95-2.05A6.97 6.97 0 0 1 3 10c0-1.933.782-3.681 2.05-4.95" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},292215:(e,t,s)=>{"use strict";s.d(t,{Icon24ArrowLeftOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon24ArrowLeftOutline","arrow_left_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="arrow_left_outline_24"><path fill="currentColor" d="M11.532 4.26a.9.9 0 0 1 .089 1.18l-.08.092L6.05 11.1H20.1a.9.9 0 0 1 .113 1.793l-.113.007H6.05l5.49 5.568a.9.9 0 0 1 .073 1.181l-.081.092a.9.9 0 0 1-1.181.072l-.092-.081-7-7.1a.9.9 0 0 1-.08-1.172l.08-.092 7-7.1a.9.9 0 0 1 1.273-.009" /></symbol>',24,24,!1,void 0)},413784:(e,t,s)=>{"use strict";s.d(t,{Icon24CancelOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon24CancelOutline","cancel_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="cancel_outline_24"><path fill="currentColor" d="M5.264 5.264a.9.9 0 0 1 1.272 0L12 10.727l5.464-5.463a.9.9 0 0 1 1.272 1.272L13.273 12l5.463 5.464a.9.9 0 1 1-1.272 1.272L12 13.273l-5.464 5.463a.9.9 0 1 1-1.272-1.272L10.727 12 5.264 6.536a.9.9 0 0 1 0-1.272" /></symbol>',24,24,!1,void 0)},190214:(e,t,s)=>{"use strict";s.d(t,{Icon24Chevron:()=>n});var n=(0,s(844990).makeIcon)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24,!1,void 0)},798180:(e,t,s)=>{"use strict";s.d(t,{Icon24ChevronCompactLeft:()=>n});var n=(0,s(844990).makeIcon)("Icon24ChevronCompactLeft","chevron_compact_left_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 24" id="chevron_compact_left_24"><path fill="currentColor" d="M11.293 7.706a1 1 0 0 0 0-1.412l-.088-.088a.997.997 0 0 0-1.414.002l-5.084 5.084a1 1 0 0 0 0 1.416l5.084 5.084c.39.391 1.026.39 1.414.002l.088-.088a.995.995 0 0 0 0-1.412L7 12z" /></symbol>',16,24,!1,void 0)},189270:(e,t,s)=>{"use strict";s.d(t,{Icon24ChevronUp:()=>n});var n=(0,s(844990).makeIcon)("Icon24ChevronUp","chevron_up_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="chevron_up_24"><path d="m12 10.302-5.36 4.466a1 1 0 1 1-1.28-1.536l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.536z" /></symbol>',24,24,!1,void 0)},75123:(e,t,s)=>{"use strict";s.d(t,{Icon24Dismiss:()=>n});var n=(0,s(844990).makeIcon)("Icon24Dismiss","dismiss_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12" opacity=".12" /><path d="M16.736 7.264a.9.9 0 0 1 0 1.272L13.273 12l3.463 3.464a.9.9 0 0 1 .081 1.18l-.08.092a.9.9 0 0 1-1.273 0L12 13.273l-3.464 3.463a.9.9 0 1 1-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 0 1-.08-1.18l.08-.092a.9.9 0 0 1 1.272 0L12 10.727l3.464-3.463a.9.9 0 0 1 1.272 0" /></g></symbol>',24,24,!1,void 0)},724162:(e,t,s)=>{"use strict";s.d(t,{Icon24Reorder:()=>n});var n=(0,s(844990).makeIcon)("Icon24Reorder","reorder_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M21 18a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1M3 6a1 1 0 0 1 1-1h16a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1" /></g></symbol>',24,24,!1,void 0)},313644:(e,t,s)=>{"use strict";s.d(t,{Icon24ReorderIos:()=>n});var n=(0,s(844990).makeIcon)("Icon24ReorderIos","reorder_ios_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_ios_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" opacity=".1" /><path fill="currentColor" fill-rule="nonzero" d="M2.75 7h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5" /></g></symbol>',24,24,!1,void 0)},843752:(e,t,s)=>{"use strict";s.d(t,{Icon24Spinner:()=>n});var n=(0,s(844990).makeIcon)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},520143:(e,t,s)=>{"use strict";s.d(t,{Icon28ArrowLeftOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon28ArrowLeftOutline","arrow_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path fill="currentColor" fill-rule="nonzero" d="M12.293 6.293a1 1 0 0 1 1.414 1.414L8.414 13H22a1 1 0 0 1 .993.883L23 14a1 1 0 0 1-1 1H8.414l5.293 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0l-7-7-.073-.082A1 1 0 0 1 5 14l.004.09L5 14.02V14a1 1 0 0 1 .125-.484 1 1 0 0 1 .071-.111 1 1 0 0 1 .097-.112l-.08.09q.037-.047.08-.09Z" /></g></symbol>',28,28,!1,void 0)},451840:(e,t,s)=>{"use strict";s.d(t,{Icon28CancelOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon28CancelOutline","cancel_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="cancel_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M6.293 6.293a1 1 0 0 1 1.414 0L14 12.585l6.293-6.292a1 1 0 0 1 1.32-.083l.094.083a1 1 0 0 1 0 1.414L15.415 14l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0L14 15.415l-6.293 6.292a1 1 0 0 1-1.32.083l-.094-.083a1 1 0 0 1 0-1.414L12.585 14 6.293 7.707a1 1 0 0 1-.083-1.32Z" /></g></symbol>',28,28,!1,void 0)},21460:(e,t,s)=>{"use strict";s.d(t,{Icon28ChevronBack:()=>n});var n=(0,s(844990).makeIcon)("Icon28ChevronBack","chevron_back_28","0 0 20 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 28" id="chevron_back_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v28H0z" /><path fill="currentColor" d="M4.56 12.94 13 4.5a1.414 1.414 0 0 1 2 2L7.5 14l7.5 7.5a1.414 1.414 0 0 1-2 2l-8.44-8.44a1.5 1.5 0 0 1 0-2.12" /></g></symbol>',20,28,!1,void 0)},680277:(e,t,s)=>{"use strict";s.d(t,{Icon28ChevronLeftOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0)},55382:(e,t,s)=>{"use strict";s.d(t,{Icon28DoneOutline:()=>n});var n=(0,s(844990).makeIcon)("Icon28DoneOutline","done_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="done_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="m11 18.586-5.293-5.293a1 1 0 1 0-1.414 1.414l6 6a1 1 0 0 0 1.414 0l12-12a1 1 0 1 0-1.414-1.414z" /></g></symbol>',28,28,!1,void 0)},78326:(e,t,s)=>{"use strict";s.d(t,{Icon32Spinner:()=>n});var n=(0,s(844990).makeIcon)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 16 16 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},299664:(e,t,s)=>{"use strict";s.d(t,{Icon44Spinner:()=>n});var n=(0,s(844990).makeIcon)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A22 22 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},126645:function(e){e.exports=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},e.apply(this,arguments)},t=1,s=7,n=96*t,a=96*t,r=25,d=function(e,t,n,a,d){if(e<s&&t<s)return!1;if(e>=n-s&&t<s)return!1;if(e<s&&t>=n-s)return!1;if(d){var l=s+2;n<=r&&l--;var c=(n-2*s-l)/2-1;return n<=r&&c++,!(e>s+c&&e<n-s-c-1&&t>s+c&&t<n-s-c-1)&&0<=e&&e<n&&0<=t&&t<n&&a[t][e]}return a[t]&&a[t][e]},l=function(e,t,s,n,a){return void 0===a&&(a=!0),{l:d(e-1,t,s,n,a),r:d(e+1,t,s,n,a),t:d(e,t-1,s,n,a),b:d(e,t+1,s,n,a),current:d(e,t,s,n,a)}},c=function(e,a){if("number"!=typeof a.qrSize)throw new Error("Size should be a number");if("string"!=typeof a.className)throw new Error("Classname should be a string");for(var c=2*t,u=12.7*t,_=12.8*t,p=14.7*t,m=14.8*t,y=15.9*t,f=28.6*t,g=30.5*t,E=84.7776815*t,A=87.3*t,b=71.4*t,P=42.9*t,I=87.2*t,T=85.2*t,C=85.3*t,O=69.5*t,M=98*t,S=100*t,D=[],k=0,L=0,x=0,R=0,B=0;B<e.size;B++){k=0;for(var F=0;F<e.size;F++){x=F+k,k+=n,R=B+L;var N=l(F,B,e.size,e.modules,a.isShowLogo),U="",W="";N.current?(W=!(W=W||N.l||N.r||N.t||N.b?"":"empty")&&N.l&&N.r||N.t&&N.b?"rect":"")||(W+=N.l?"l":N.r?"r":"",(W+=N.t?"t":N.b?"b":"")||(W="empty")):W=!(W=!(W=!(W=!W&&N.l&&N.t&&d(F-1,B-1,e.size,e.modules,a.isShowLogo)?"n_lt":"")&&N.l&&N.b&&d(F-1,B+1,e.size,e.modules,a.isShowLogo)?"n_lb":"")&&N.r&&N.t&&d(F+1,B-1,e.size,e.modules,a.isShowLogo)?"n_rt":"")&&N.r&&N.b&&d(F+1,B+1,e.size,e.modules,a.isShowLogo)?"n_rb":"",W&&(U='<use xlink:href="#'+W+"-"+a.suffix+'"/>',D.push('<g transform="translate('+x+","+R+')">'+U+"</g>"))}L+=n}var H="",K=(e.size-3*s)/2*n+n*s-10;e.size<=r&&(H="scale(0.85)",K+=50);var j=(e.size-s)*a.incTileSize;D.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-'+a.suffix+'"/>'),D.push('<use fill-rule="evenodd" transform="translate('+j+',0)" xlink:href="#point-'+a.suffix+'"/>'),D.push('<use fill-rule="evenodd" transform="translate(0,'+j+')" xlink:href="#point-'+a.suffix+'"/>'),a.isShowLogo&&(a.logoData?D.push('\n        <image\n          preserveAspectRatio="xMidYMid slice" clip-path="url(#logo-mask-'+a.suffix+')"\n          style="width: 750px; height: 750px;" width="750" height="750"\n          transform="translate('+K+","+K+") "+H+'"\n          xlink:href="'+a.logoData+'"\n        />\n      '):D.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750"\n          fill="none"\n          fill-rule="evenodd"\n          transform="translate('+K+","+K+") "+H+'" xlink:href="#vk_logo-'+a.suffix+'"\n        />\n      '));var V=99*e.size,$="",G="translate(0,0)";if(a.isShowBackground){var q=(a.qrSize-40)/a.qrSize,z=V/a.qrSize*21;$='\n      <rect\n        x="0"\n        width="'+V+'"\n        height="'+V+'"\n        rx="'+Math.ceil(V/(a.qrSize/36))+'"\n        fill="'+a.backgroundColor+'"\n      />',G="translate("+z+", "+z+") scale("+q+")"}var Y="M0,0 L66,0 C"+E+",-3.44940413e-15 "+S+",15.2223185 "+S+",34 L"+S+",66 C"+S+","+E+" "+E+","+S+" 66,"+S+" L0,"+S+" L0,0 Z",X="M0,0 L"+S+",0 L"+S+",66 C"+S+","+E+" "+E+","+S+" 66,"+S+" L0,"+S+" L0,0 Z";return'\n  <svg\n    version="1.1"\n    viewBox="0 0 '+V+" "+V+'"\n    width="'+a.qrSize+'px"\n    height="'+a.qrSize+'px"\n    '+(a.className?'class="'+a.className+'"':"")+'\n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-'+a.suffix+'" width="100" height="100" fill="'+a.foregroundColor+'"/>\n      <path\n        id="empty-'+a.suffix+'"\n        d="M0,'+f+"v"+P+"C0,"+A+","+_+","+S+","+f+","+S+"h"+P+"c"+y+",0,"+f+"-"+_+","+f+"-"+f+"V"+f+"C"+S+","+u+","+I+",0,"+b+",0H"+f+" C"+_+",0,0,"+_+",0,"+f+'z"\n        fill="'+a.foregroundColor+'"\n      />\n      <path id="b-'+a.suffix+'" d="'+Y+'" transform="rotate(-90 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="r-'+a.suffix+'" d="'+Y+'" transform="rotate(-180 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="l-'+a.suffix+'" d="'+Y+'" fill="'+a.foregroundColor+'"/>\n      <path id="t-'+a.suffix+'" d="'+Y+'" transform="rotate(90 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="l-'+a.suffix+'" d="'+X+'" transform="rotate(-90 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="lt-'+a.suffix+'" d="'+X+'" fill="'+a.foregroundColor+'"/>\n      <path id="lb-'+a.suffix+'" d="'+X+'" transform="rotate(-90 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="rb-'+a.suffix+'" d="'+X+'" transform="rotate(-180 50 50)" fill="'+a.foregroundColor+'"/>\n      <path id="rt-'+a.suffix+'" d="'+X+'" transform="rotate(90 50 50)" fill="'+a.foregroundColor+'"/>\n      <path\n        id="n_lt-'+a.suffix+'"\n        d="M'+g+","+c+"V0H0v"+g+"h"+c+"C"+c+","+p+","+m+","+c+","+g+","+c+'z"\n        fill="'+a.foregroundColor+'"\n      />\n      <path\n        id="n_lb-'+a.suffix+'"\n        d="M'+c+","+O+"H0V"+S+"h"+g+"v-"+c+"C"+p+","+M+","+c+","+T+","+c+","+O+'z"\n        fill="'+a.foregroundColor+'"\n      />\n      <path\n        id="n_rt-'+a.suffix+'"\n        d="M'+M+","+g+"h"+c+"V0H"+O+"v"+c+"C"+C+","+c+","+M+","+m+","+M+","+g+'z"\n        fill="'+a.foregroundColor+'"\n      />\n      <path id="n_rb-'+a.suffix+'"\n        d="M'+O+","+M+"v"+c+"H"+S+"V"+O+"h-"+c+"C"+M+","+C+","+T+","+M+","+O+","+M+'z"\n        fill="'+a.foregroundColor+'"\n      />\n      <path\n        id="point-'+a.suffix+'"\n        fill="'+a.foregroundColor+'"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z"\n      />\n      <g id="vk_logo-'+a.suffix+'">\n        <path\n          fill="'+a.logoColor+'"\n          d="M83.3334 363.333C83.3334 231.34 83.3334 165.343 124.338 124.338C165.343 83.3333 231.34              83.3333 363.333 83.3333H386.667C518.66 83.3333 584.657 83.3333 625.662 124.338C666.667 165.343              666.667 231.34 666.667 363.333V386.667C666.667 518.66 666.667 584.657 625.662 625.662C584.657              666.667 518.66 666.667 386.667 666.667H363.333C231.34 666.667 165.343 666.667 124.338 625.662C83.3334              584.657 83.3334 518.66 83.3334 386.667V363.333Z"\n        />\n        <path\n          fill="#FFF"\n          d="M394.907 508.681C263.293 508.681 183.442 417.365 180.313 265.625H246.972C249.05 377.09              299.763 424.323 338.638 434.036V265.625H402.519V361.82C440.016 357.664 479.264 313.909              492.456 265.625H555.333C545.27 325 502.543 368.754 472.353 386.803C502.566 401.395 551.177              439.593 569.926 508.681H500.815C486.222 462.498 450.476 426.728 402.542 421.872V508.681H394.907Z"\n        />\n      </g>\n      <clipPath id="logo-mask-'+a.suffix+'">\n        <rect x="0" y="0" width="750" height="750" />\n      </clipPath>\n    </defs>\n\n    '+$+'\n\n    <g transform="'+G+'">\n      '+D.join("\n")+"\n    </g>\n  </svg>"},u=function(){function e(t,s,n,a){if(this.version=t,this.errorCorrectionLevel=s,this.mask=a,this.modules=[],this.isFunction=[],t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version value out of range";if(a<-1||a>7)throw"Mask value out of range";this.size=4*t+17;for(var r=[],d=0;d<this.size;d++)r.push(!1);for(d=0;d<this.size;d++)this.modules.push(r.slice()),this.isFunction.push(r.slice());this.drawFunctionPatterns();var l=this.addEccAndInterleave(n);if(this.drawCodewords(l),-1==a){var c=1e9;for(d=0;d<8;d++){this.applyMask(d),this.drawFormatBits(d);var u=this.getPenaltyScore();u<c&&(a=d,c=u),this.applyMask(d)}}if(a<0||a>7)throw"Assertion error";this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}return e.encodeText=function(t,s){var n=p.makeSegments(t);return e.encodeSegments(n,s)},e.encodeBinary=function(t,s){var n=p.makeBytes(t);return e.encodeSegments([n],s)},e.encodeSegments=function(t,s,n,a,r,d){if(void 0===n&&(n=1),void 0===a&&(a=40),void 0===r&&(r=-1),void 0===d&&(d=!0),!(e.MIN_VERSION<=n&&n<=a&&a<=e.MAX_VERSION)||r<-1||r>7)throw"Invalid value";var l,c;for(l=n;;l++){var u=8*e.getNumDataCodewords(l,s),_=p.getTotalBits(t,l);if(_<=u){c=_;break}if(l>=a)throw"Data too long"}for(var m=0,f=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];m<f.length;m++){var g=f[m];d&&c<=8*e.getNumDataCodewords(l,g)&&(s=g)}for(var E=new y,A=0,b=t;A<b.length;A++){var P=b[A];E.appendBits(P.mode.modeBits,4),E.appendBits(P.numChars,P.mode.numCharCountBits(l));for(var I=0,T=P.getData();I<T.length;I++){var C=T[I];E.array.push(C)}}if(E.array.length!=c)throw"Assertion error";var O=8*e.getNumDataCodewords(l,s);if(E.array.length>O)throw"Assertion error";if(E.appendBits(0,Math.min(4,O-E.array.length)),E.appendBits(0,(8-E.array.length%8)%8),E.array.length%8!=0)throw"Assertion error";for(var M=236;E.array.length<O;M^=253)E.appendBits(M,8);for(var S=[];8*S.length<E.array.length;)S.push(0);return E.array.forEach((function(e,t){return S[t>>>3]|=e<<7-(7&t)})),new e(l,s,S,r)},e.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},e.prototype.drawCanvas=function(e,t,s){if(e<=0||t<0)throw"Value out of range";var n=(this.size+2*t)*e;s.width=n,s.height=n;for(var a=s.getContext("2d"),r=-t;r<this.size+t;r++)for(var d=-t;d<this.size+t;d++)a.fillStyle=this.getModule(d,r)?"#000000":"#FFFFFF",a.fillRect((d+t)*e,(r+t)*e,e,e)},e.prototype.toSvgString=function(e){if(e<0)throw"Border must be non-negative";for(var t=[],s=0;s<this.size;s++)for(var n=0;n<this.size;n++)this.getModule(n,s)&&t.push("M"+(n+e)+","+(s+e)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(this.size+2*e)+" "+(this.size+2*e)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+t.join(" ")+'" fill="#000000"/>\n</svg>\n'},e.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),s=t.length;for(e=0;e<s;e++)for(var n=0;n<s;n++)0==e&&0==n||0==e&&n==s-1||e==s-1&&0==n||this.drawAlignmentPattern(t[e],t[n]);this.drawFormatBits(0),this.drawVersion()},e.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,s=t,n=0;n<10;n++)s=s<<1^1335*(s>>>9);var a=21522^(t<<10|s);if(a>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)this.setFunctionModule(8,n,_(a,n));for(this.setFunctionModule(8,7,_(a,6)),this.setFunctionModule(8,8,_(a,7)),this.setFunctionModule(7,8,_(a,8)),n=9;n<15;n++)this.setFunctionModule(14-n,8,_(a,n));for(n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,_(a,n));for(n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,_(a,n));this.setFunctionModule(8,this.size-8,!0)},e.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var s=this.version<<12|e;if(s>>>18!=0)throw"Assertion error";for(t=0;t<18;t++){var n=_(s,t),a=this.size-11+t%3,r=Math.floor(t/3);this.setFunctionModule(a,r,n),this.setFunctionModule(r,a,n)}}},e.prototype.drawFinderPattern=function(e,t){for(var s=-4;s<=4;s++)for(var n=-4;n<=4;n++){var a=Math.max(Math.abs(n),Math.abs(s)),r=e+n,d=t+s;0<=r&&r<this.size&&0<=d&&d<this.size&&this.setFunctionModule(r,d,2!=a&&4!=a)}},e.prototype.drawAlignmentPattern=function(e,t){for(var s=-2;s<=2;s++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+s,1!=Math.max(Math.abs(n),Math.abs(s)))},e.prototype.setFunctionModule=function(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0},e.prototype.addEccAndInterleave=function(t){var s=this.version,n=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(s,n))throw"Invalid argument";for(var a=e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][s],r=e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][s],d=Math.floor(e.getNumRawDataModules(s)/8),l=a-d%a,c=Math.floor(d/a),u=[],_=new m(r),p=0,y=0;p<a;p++){var f=t.slice(y,y+c-r+(p<l?0:1));y+=f.length;var g=_.getRemainder(f);p<l&&f.push(0),u.push(f.concat(g))}var E=[];for(p=0;p<u[0].length;p++)for(var A=0;A<u.length;A++)(p!=c-r||A>=l)&&E.push(u[A][p]);if(E.length!=d)throw"Assertion error";return E},e.prototype.drawCodewords=function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var s=0,n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(var a=0;a<this.size;a++)for(var r=0;r<2;r++){var d=n-r,l=n+1&2?a:this.size-1-a;!this.isFunction[l][d]&&s<8*t.length&&(this.modules[l][d]=_(t[s>>>3],7-(7&s)),s++)}}if(s!=8*t.length)throw"Assertion error"},e.prototype.applyMask=function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var s=0;s<this.size;s++){var n=void 0;switch(e){case 0:n=(s+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=s%3==0;break;case 3:n=(s+t)%3==0;break;case 4:n=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:n=s*t%2+s*t%3==0;break;case 6:n=(s*t%2+s*t%3)%2==0;break;case 7:n=((s+t)%2+s*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][s]&&n&&(this.modules[t][s]=!this.modules[t][s])}},e.prototype.getPenaltyScore=function(){for(var t=0,s=0;s<this.size;s++){for(var n=[0,0,0,0,0,0,0],a=!1,r=0,d=0;d<this.size;d++)this.modules[s][d]==a?5==++r?t+=e.PENALTY_N1:r>5&&t++:(e.addRunToHistory(r,n),!a&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),a=this.modules[s][d],r=1);e.addRunToHistory(r,n),a&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(d=0;d<this.size;d++){n=[0,0,0,0,0,0,0],a=!1;var l=0;for(s=0;s<this.size;s++)this.modules[s][d]==a?5==++l?t+=e.PENALTY_N1:l>5&&t++:(e.addRunToHistory(l,n),!a&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),a=this.modules[s][d],l=1);e.addRunToHistory(l,n),a&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(s=0;s<this.size-1;s++)for(d=0;d<this.size-1;d++)(a=this.modules[s][d])==this.modules[s][d+1]&&a==this.modules[s+1][d]&&a==this.modules[s+1][d+1]&&(t+=e.PENALTY_N2);for(var c=0,u=0,_=this.modules;u<_.length;u++)for(var p=0,m=_[u];p<m.length;p++)(a=m[p])&&c++;var y=this.size*this.size;return t+=(Math.ceil(Math.abs(20*c-10*y)/y)-1)*e.PENALTY_N4},e.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),s=[6],n=this.size-7;s.length<e;n-=t)s.splice(1,0,n);return s},e.getNumRawDataModules=function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version number out of range";var s=(16*t+128)*t+64;if(t>=2){var n=Math.floor(t/7)+2;s-=(25*n-10)*n-55,t>=7&&(s-=36)}return s},e.getNumDataCodewords=function(t,s){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[s.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][t]},e.addRunToHistory=function(e,t){t.pop(),t.unshift(e)},e.hasFinderLikePattern=function(e){var t=e[1];return t>0&&e[2]==t&&e[4]==t&&e[5]==t&&e[3]==3*t&&Math.max(e[0],e[6])>=4*t},e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e}();function _(e,t){return!!(e>>>t&1)}var p=function(){function e(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw"Invalid argument";this.bitData=s.slice()}return e.makeBytes=function(t){for(var s=new y,n=0,a=t;n<a.length;n++){var r=a[n];s.appendBits(r,8)}return new e(e.Mode.BYTE,t.length,s.array)},e.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var s=new y,n=0;n<t.length;){var a=Math.min(t.length-n,3);s.appendBits(parseInt(t.substr(n,a),10),3*a+1),n+=a}return new e(e.Mode.NUMERIC,t.length,s.array)},e.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var s,n=new y;for(s=0;s+2<=t.length;s+=2){var a=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s));a+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),n.appendBits(a,11)}return s<t.length&&n.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6),new e(e.Mode.ALPHANUMERIC,t.length,n.array)},e.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var s=new y;if(t<0)throw"ECI assignment value out of range";if(t<128)s.appendBits(t,8);else if(t<16384)s.appendBits(2,2),s.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";s.appendBits(6,3),s.appendBits(t,21)}return new e(e.Mode.ECI,0,s.array)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var s=0,n=0,a=e;n<a.length;n++){var r=a[n],d=r.mode.numCharCountBits(t);if(r.numChars>=1<<d)return 1/0;s+=4+d+r.bitData.length}return s},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substr(s+1,2),16)),s+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}(),m=function(){function e(t){if(this.coefficients=[],t<1||t>255)throw"Degree out of range";for(var s=this.coefficients,n=0;n<t-1;n++)s.push(0);s.push(1);var a=1;for(n=0;n<t;n++){for(var r=0;r<s.length;r++)s[r]=e.multiply(s[r],a),r+1<s.length&&(s[r]^=s[r+1]);a=e.multiply(a,2)}}return e.prototype.getRemainder=function(t){for(var s=this.coefficients.map((function(e){return 0})),n=function(t){var n=t^s.shift();s.push(0),a.coefficients.forEach((function(t,a){return s[a]^=e.multiply(t,n)}))},a=this,r=0,d=t;r<d.length;r++)n(d[r]);return s},e.multiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var s=0,n=7;n>=0;n--)s=s<<1^285*(s>>>7),s^=(t>>>n&1)*e;if(s>>>8!=0)throw"Assertion error";return s},e}(),y=function(){function e(){this.array=[]}return e.prototype.appendBits=function(e,t){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var s=t-1;s>=0;s--)this.array.push(e>>>s&1)},e}();(function(e){var t=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}();e.Ecc=t})(u||(u={})),function(e){var t=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}();e.Mode=t}(p||(p={}));var f=128,g="#ffffff",E="#000000",A="#07f";function b(t,s,n,r){if("string"!=typeof t)throw new TypeError("Enter text for encoding");var d=e(e(e({},"object"==typeof s&&null!==s?s:{}),"object"==typeof r&&null!==r?r:{}),{qrSize:"object"==typeof s&&null!==s&&"number"==typeof s.qrSize?s.qrSize:s,className:"object"==typeof s&&null!==s&&"string"==typeof s.className?s.className:n}),l=[u.Ecc.LOW,u.Ecc.MEDIUM,u.Ecc.QUARTILE,u.Ecc.HIGH],_={qrSize:"number"==typeof d.qrSize?d.qrSize:f,className:"string"==typeof d.className?d.className:n||"",isShowLogo:!!d.isShowLogo||!1,isShowBackground:!!d.isShowBackground||!1,foregroundColor:"string"==typeof d.foregroundColor?d.foregroundColor:E,backgroundColor:"string"==typeof d.backgroundColor?d.backgroundColor:g,logoColor:"string"==typeof d.logoColor?d.logoColor:A,suffix:d.suffix?d.suffix.toString():"0",logoData:"string"==typeof d.logoData?d.logoData:null,ecc:"number"==typeof d.ecc&&l[d.ecc]?d.ecc:3,incTileSize:"number"==typeof d.incTileSize?d.incTileSize:a},m=p.makeSegments(t),y=u.encodeSegments(m,l[_.ecc],1,40,-1,!0);return c(y,_)}return{createQR:b}}()},859887:(e,t)=>{"use strict";function s(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,s){var n=document.createElement("textarea"),a=document.createRange();n.value=e,n.style.position="fixed",n.contentEditable="true",document.body.appendChild(n),n.focus(),n.select(),a.selectNodeContents(n);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(a)),n.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):s(new Error("copy failed"))}catch(e){s(e)}r&&r.removeAllRanges(),document.body.removeChild(n)}))}(e)}Object.defineProperty(t,"copyTextToClipboard",{enumerable:!0,get:function(){return s}})},551009:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n={root:"SpecialProjectHeader-module__root--QbEJE",singleImage:"SpecialProjectHeader-module__singleImage--I5Wcs"}},106605:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n={root:"renderAvatarToString-module__root--RBv3N"}},401063:(e,t,s)=>{"use strict";var n=s(296540);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useState,d=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!a(e,s)}catch(e){return!0}}var _="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=r({inst:{value:s,getSnapshot:t}}),a=n[0].inst,_=n[1];return l((function(){a.value=s,a.getSnapshot=t,u(a)&&_({inst:a})}),[e,s,t]),d((function(){return u(a)&&_({inst:a}),e((function(){u(a)&&_({inst:a})}))}),[e]),c(s),s};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:_},788940:(e,t,s)=>{"use strict";var n=s(296540),a=s(19888);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},d=a.useSyncExternalStore,l=n.useRef,c=n.useEffect,u=n.useMemo,_=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var p=l(null);if(null===p.current){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=u((function(){function e(e){if(!c){if(c=!0,d=e,e=n(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return l=t}return l=e}if(t=l,r(d,e))return t;var s=n(e);return void 0!==a&&a(t,s)?t:(d=e,l=s)}var d,l,c=!1,u=void 0===s?null:s;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,s,n,a]);var y=d(e,p[0],p[1]);return c((function(){m.hasValue=!0,m.value=y}),[y]),_(y),y}},19888:(e,t,s)=>{"use strict";e.exports=s(401063)},69242:(e,t,s)=>{"use strict";e.exports=s(788940)},391943:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},913469:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},543407:(e,t,s)=>{"use strict";let n;s.d(t,{default:()=>r});const a=new Uint8Array(16);function r(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}},338823:(e,t,s)=>{"use strict";s.d(t,{unsafeStringify:()=>a});s(766382);const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function a(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}},418562:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(391943),a=s(543407),r=s(338823);const d=function(e,t,s){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const d=(e=e||{}).random||(e.rng||a.default)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=d[e];return t}return(0,r.unsafeStringify)(d)}},766382:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(913469);const a=function(e){return"string"==typeof e&&n.default.test(e)}},195361:(e,t,s)=>{"use strict";s.d(t,{arrow:()=>l,autoPlacement:()=>c,computePosition:()=>r,detectOverflow:()=>d,flip:()=>u,hide:()=>m,inline:()=>f,limitShift:()=>A,offset:()=>g,shift:()=>E,size:()=>b});var n=s(997193);function a(e,t,s){let{reference:a,floating:r}=e;const d=(0,n.getSideAxis)(t),l=(0,n.getAlignmentAxis)(t),c=(0,n.getAxisLength)(l),u=(0,n.getSide)(t),_="y"===d,p=a.x+a.width/2-r.width/2,m=a.y+a.height/2-r.height/2,y=a[c]/2-r[c]/2;let f;switch(u){case"top":f={x:p,y:a.y-r.height};break;case"bottom":f={x:p,y:a.y+a.height};break;case"right":f={x:a.x+a.width,y:m};break;case"left":f={x:a.x-r.width,y:m};break;default:f={x:a.x,y:a.y}}switch((0,n.getAlignment)(t)){case"start":f[l]-=y*(s&&_?-1:1);break;case"end":f[l]+=y*(s&&_?-1:1)}return f}const r=async(e,t,s)=>{const{placement:n="bottom",strategy:r="absolute",middleware:d=[],platform:l}=s,c=d.filter(Boolean),u=await(null==l.isRTL?void 0:l.isRTL(t));let _=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:p,y:m}=a(_,n,u),y=n,f={},g=0;for(let s=0;s<c.length;s++){const{name:d,fn:E}=c[s],{x:A,y:b,data:P,reset:I}=await E({x:p,y:m,initialPlacement:n,placement:y,strategy:r,middlewareData:f,rects:_,platform:l,elements:{reference:e,floating:t}});p=null!=A?A:p,m=null!=b?b:m,f={...f,[d]:{...f[d],...P}},I&&g<=50&&(g++,"object"==typeof I&&(I.placement&&(y=I.placement),I.rects&&(_=!0===I.rects?await l.getElementRects({reference:e,floating:t,strategy:r}):I.rects),({x:p,y:m}=a(_,y,u))),s=-1)}return{x:p,y:m,placement:y,strategy:r,middlewareData:f}};async function d(e,t){var s;void 0===t&&(t={});const{x:a,y:r,platform:d,rects:l,elements:c,strategy:u}=e,{boundary:_="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:f=0}=(0,n.evaluate)(t,e),g=(0,n.getPaddingObject)(f),E=c[y?"floating"===m?"reference":"floating":m],A=(0,n.rectToClientRect)(await d.getClippingRect({element:null==(s=await(null==d.isElement?void 0:d.isElement(E)))||s?E:E.contextElement||await(null==d.getDocumentElement?void 0:d.getDocumentElement(c.floating)),boundary:_,rootBoundary:p,strategy:u})),b="floating"===m?{x:a,y:r,width:l.floating.width,height:l.floating.height}:l.reference,P=await(null==d.getOffsetParent?void 0:d.getOffsetParent(c.floating)),I=await(null==d.isElement?void 0:d.isElement(P))&&await(null==d.getScale?void 0:d.getScale(P))||{x:1,y:1},T=(0,n.rectToClientRect)(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:P,strategy:u}):b);return{top:(A.top-T.top+g.top)/I.y,bottom:(T.bottom-A.bottom+g.bottom)/I.y,left:(A.left-T.left+g.left)/I.x,right:(T.right-A.right+g.right)/I.x}}const l=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:a,placement:r,rects:d,platform:l,elements:c,middlewareData:u}=t,{element:_,padding:p=0}=(0,n.evaluate)(e,t)||{};if(null==_)return{};const m=(0,n.getPaddingObject)(p),y={x:s,y:a},f=(0,n.getAlignmentAxis)(r),g=(0,n.getAxisLength)(f),E=await l.getDimensions(_),A="y"===f,b=A?"top":"left",P=A?"bottom":"right",I=A?"clientHeight":"clientWidth",T=d.reference[g]+d.reference[f]-y[f]-d.floating[g],C=y[f]-d.reference[f],O=await(null==l.getOffsetParent?void 0:l.getOffsetParent(_));let M=O?O[I]:0;M&&await(null==l.isElement?void 0:l.isElement(O))||(M=c.floating[I]||d.floating[g]);const S=T/2-C/2,D=M/2-E[g]/2-1,k=(0,n.min)(m[b],D),L=(0,n.min)(m[P],D),x=k,R=M-E[g]-L,B=M/2-E[g]/2+S,F=(0,n.clamp)(x,B,R),N=!u.arrow&&null!=(0,n.getAlignment)(r)&&B!==F&&d.reference[g]/2-(B<x?k:L)-E[g]/2<0,U=N?B<x?B-x:B-R:0;return{[f]:y[f]+U,data:{[f]:F,centerOffset:B-F-U,...N&&{alignmentOffset:U}},reset:N}}});const c=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var s,a,r;const{rects:l,middlewareData:c,placement:u,platform:_,elements:p}=t,{crossAxis:m=!1,alignment:y,allowedPlacements:f=n.placements,autoAlignment:g=!0,...E}=(0,n.evaluate)(e,t),A=void 0!==y||f===n.placements?function(e,t,s){return(e?[...s.filter((t=>(0,n.getAlignment)(t)===e)),...s.filter((t=>(0,n.getAlignment)(t)!==e))]:s.filter((e=>(0,n.getSide)(e)===e))).filter((s=>!e||(0,n.getAlignment)(s)===e||!!t&&(0,n.getOppositeAlignmentPlacement)(s)!==s))}(y||null,g,f):f,b=await d(t,E),P=(null==(s=c.autoPlacement)?void 0:s.index)||0,I=A[P];if(null==I)return{};const T=(0,n.getAlignmentSides)(I,l,await(null==_.isRTL?void 0:_.isRTL(p.floating)));if(u!==I)return{reset:{placement:A[0]}};const C=[b[(0,n.getSide)(I)],b[T[0]],b[T[1]]],O=[...(null==(a=c.autoPlacement)?void 0:a.overflows)||[],{placement:I,overflows:C}],M=A[P+1];if(M)return{data:{index:P+1,overflows:O},reset:{placement:M}};const S=O.map((e=>{const t=(0,n.getAlignment)(e.placement);return[e.placement,t&&m?e.overflows.slice(0,2).reduce(((e,t)=>e+t),0):e.overflows[0],e.overflows]})).sort(((e,t)=>e[1]-t[1])),D=(null==(r=S.filter((e=>e[2].slice(0,(0,n.getAlignment)(e[0])?2:3).every((e=>e<=0))))[0])?void 0:r[0])||S[0][0];return D!==u?{data:{index:P+1,overflows:O},reset:{placement:D}}:{}}}},u=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,a;const{placement:r,middlewareData:l,rects:c,initialPlacement:u,platform:_,elements:p}=t,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:A=!0,...b}=(0,n.evaluate)(e,t);if(null!=(s=l.arrow)&&s.alignmentOffset)return{};const P=(0,n.getSide)(r),I=(0,n.getSideAxis)(u),T=(0,n.getSide)(u)===u,C=await(null==_.isRTL?void 0:_.isRTL(p.floating)),O=f||(T||!A?[(0,n.getOppositePlacement)(u)]:(0,n.getExpandedPlacements)(u)),M="none"!==E;!f&&M&&O.push(...(0,n.getOppositeAxisPlacements)(u,A,E,C));const S=[u,...O],D=await d(t,b),k=[];let L=(null==(a=l.flip)?void 0:a.overflows)||[];if(m&&k.push(D[P]),y){const e=(0,n.getAlignmentSides)(r,c,C);k.push(D[e[0]],D[e[1]])}if(L=[...L,{placement:r,overflows:k}],!k.every((e=>e<=0))){var x,R;const e=((null==(x=l.flip)?void 0:x.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:L},reset:{placement:t}};let s=null==(R=L.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:R.placement;if(!s)switch(g){case"bestFit":{var B;const e=null==(B=L.filter((e=>{if(M){const t=(0,n.getSideAxis)(e.placement);return t===I||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:B[0];e&&(s=e);break}case"initialPlacement":s=u}if(r!==s)return{reset:{placement:s}}}return{}}}};function _(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p(e){return n.sides.some((t=>e[t]>=0))}const m=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:a="referenceHidden",...r}=(0,n.evaluate)(e,t);switch(a){case"referenceHidden":{const e=_(await d(t,{...r,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:p(e)}}}case"escaped":{const e=_(await d(t,{...r,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:p(e)}}}default:return{}}}}};function y(e){const t=(0,n.min)(...e.map((e=>e.left))),s=(0,n.min)(...e.map((e=>e.top)));return{x:t,y:s,width:(0,n.max)(...e.map((e=>e.right)))-t,height:(0,n.max)(...e.map((e=>e.bottom)))-s}}const f=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){const{placement:s,elements:a,rects:r,platform:d,strategy:l}=t,{padding:c=2,x:u,y:_}=(0,n.evaluate)(e,t),p=Array.from(await(null==d.getClientRects?void 0:d.getClientRects(a.reference))||[]),m=function(e){const t=e.slice().sort(((e,t)=>e.y-t.y)),s=[];let a=null;for(let e=0;e<t.length;e++){const n=t[e];!a||n.y-a.y>a.height/2?s.push([n]):s[s.length-1].push(n),a=n}return s.map((e=>(0,n.rectToClientRect)(y(e))))}(p),f=(0,n.rectToClientRect)(y(p)),g=(0,n.getPaddingObject)(c);const E=await d.getElementRects({reference:{getBoundingClientRect:function(){if(2===m.length&&m[0].left>m[1].right&&null!=u&&null!=_)return m.find((e=>u>e.left-g.left&&u<e.right+g.right&&_>e.top-g.top&&_<e.bottom+g.bottom))||f;if(m.length>=2){if("y"===(0,n.getSideAxis)(s)){const e=m[0],t=m[m.length-1],a="top"===(0,n.getSide)(s),r=e.top,d=t.bottom,l=a?e.left:t.left,c=a?e.right:t.right;return{top:r,bottom:d,left:l,right:c,width:c-l,height:d-r,x:l,y:r}}const e="left"===(0,n.getSide)(s),t=(0,n.max)(...m.map((e=>e.right))),a=(0,n.min)(...m.map((e=>e.left))),r=m.filter((s=>e?s.left===a:s.right===t)),d=r[0].top,l=r[r.length-1].bottom;return{top:d,bottom:l,left:a,right:t,width:t-a,height:l-d,x:a,y:d}}return f}},floating:a.floating,strategy:l});return r.reference.x!==E.reference.x||r.reference.y!==E.reference.y||r.reference.width!==E.reference.width||r.reference.height!==E.reference.height?{reset:{rects:E}}:{}}}};const g=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,a;const{x:r,y:d,placement:l,middlewareData:c}=t,u=await async function(e,t){const{placement:s,platform:a,elements:r}=e,d=await(null==a.isRTL?void 0:a.isRTL(r.floating)),l=(0,n.getSide)(s),c=(0,n.getAlignment)(s),u="y"===(0,n.getSideAxis)(s),_=["left","top"].includes(l)?-1:1,p=d&&u?-1:1,m=(0,n.evaluate)(t,e);let{mainAxis:y,crossAxis:f,alignmentAxis:g}="number"==typeof m?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return c&&"number"==typeof g&&(f="end"===c?-1*g:g),u?{x:f*p,y:y*_}:{x:y*_,y:f*p}}(t,e);return l===(null==(s=c.offset)?void 0:s.placement)&&null!=(a=c.arrow)&&a.alignmentOffset?{}:{x:r+u.x,y:d+u.y,data:{...u,placement:l}}}}},E=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:a,placement:r}=t,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},..._}=(0,n.evaluate)(e,t),p={x:s,y:a},m=await d(t,_),y=(0,n.getSideAxis)((0,n.getSide)(r)),f=(0,n.getOppositeAxis)(y);let g=p[f],E=p[y];if(l){const e="y"===f?"bottom":"right",t=g+m["y"===f?"top":"left"],s=g-m[e];g=(0,n.clamp)(t,g,s)}if(c){const e="y"===y?"bottom":"right",t=E+m["y"===y?"top":"left"],s=E-m[e];E=(0,n.clamp)(t,E,s)}const A=u.fn({...t,[f]:g,[y]:E});return{...A,data:{x:A.x-s,y:A.y-a}}}}},A=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:a,placement:r,rects:d,middlewareData:l}=t,{offset:c=0,mainAxis:u=!0,crossAxis:_=!0}=(0,n.evaluate)(e,t),p={x:s,y:a},m=(0,n.getSideAxis)(r),y=(0,n.getOppositeAxis)(m);let f=p[y],g=p[m];const E=(0,n.evaluate)(c,t),A="number"==typeof E?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(u){const e="y"===y?"height":"width",t=d.reference[y]-d.floating[e]+A.mainAxis,s=d.reference[y]+d.reference[e]-A.mainAxis;f<t?f=t:f>s&&(f=s)}if(_){var b,P;const e="y"===y?"width":"height",t=["top","left"].includes((0,n.getSide)(r)),s=d.reference[m]-d.floating[e]+(t&&(null==(b=l.offset)?void 0:b[m])||0)+(t?0:A.crossAxis),a=d.reference[m]+d.reference[e]+(t?0:(null==(P=l.offset)?void 0:P[m])||0)-(t?A.crossAxis:0);g<s?g=s:g>a&&(g=a)}return{[y]:f,[m]:g}}}},b=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:s,rects:a,platform:r,elements:l}=t,{apply:c=(()=>{}),...u}=(0,n.evaluate)(e,t),_=await d(t,u),p=(0,n.getSide)(s),m=(0,n.getAlignment)(s),y="y"===(0,n.getSideAxis)(s),{width:f,height:g}=a.floating;let E,A;"top"===p||"bottom"===p?(E=p,A=m===(await(null==r.isRTL?void 0:r.isRTL(l.floating))?"start":"end")?"left":"right"):(A=p,E="end"===m?"top":"bottom");const b=g-_.top-_.bottom,P=f-_.left-_.right,I=(0,n.min)(g-_[E],b),T=(0,n.min)(f-_[A],P),C=!t.middlewareData.shift;let O=I,M=T;if(y?M=m||C?(0,n.min)(T,P):P:O=m||C?(0,n.min)(I,b):b,C&&!m){const e=(0,n.max)(_.left,0),t=(0,n.max)(_.right,0),s=(0,n.max)(_.top,0),a=(0,n.max)(_.bottom,0);y?M=f-2*(0!==e||0!==t?e+t:(0,n.max)(_.left,_.right)):O=g-2*(0!==s||0!==a?s+a:(0,n.max)(_.top,_.bottom))}await c({...t,availableWidth:M,availableHeight:O});const S=await r.getDimensions(l.floating);return f!==S.width||g!==S.height?{reset:{rects:!0}}:{}}}}},818491:(e,t,s)=>{"use strict";s.d(t,{arrow:()=>k,autoPlacement:()=>C,autoUpdate:()=>I,computePosition:()=>R,flip:()=>M,hide:()=>D,inline:()=>L,limitShift:()=>x,offset:()=>T,shift:()=>O,size:()=>S});var n=s(997193),a=s(195361),r=s(786635);function d(e){const t=(0,r.getComputedStyle)(e);let s=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const d=(0,r.isHTMLElement)(e),l=d?e.offsetWidth:s,c=d?e.offsetHeight:a,u=(0,n.round)(s)!==l||(0,n.round)(a)!==c;return u&&(s=l,a=c),{width:s,height:a,$:u}}function l(e){return(0,r.isElement)(e)?e:e.contextElement}function c(e){const t=l(e);if(!(0,r.isHTMLElement)(t))return(0,n.createCoords)(1);const s=t.getBoundingClientRect(),{width:a,height:c,$:u}=d(t);let _=(u?(0,n.round)(s.width):s.width)/a,p=(u?(0,n.round)(s.height):s.height)/c;return _&&Number.isFinite(_)||(_=1),p&&Number.isFinite(p)||(p=1),{x:_,y:p}}const u=(0,n.createCoords)(0);function _(e){const t=(0,r.getWindow)(e);return(0,r.isWebKit)()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:u}function p(e,t,s,a){void 0===t&&(t=!1),void 0===s&&(s=!1);const d=e.getBoundingClientRect(),u=l(e);let p=(0,n.createCoords)(1);t&&(a?(0,r.isElement)(a)&&(p=c(a)):p=c(e));const m=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==(0,r.getWindow)(e))&&t}(u,s,a)?_(u):(0,n.createCoords)(0);let y=(d.left+m.x)/p.x,f=(d.top+m.y)/p.y,g=d.width/p.x,E=d.height/p.y;if(u){const e=(0,r.getWindow)(u),t=a&&(0,r.isElement)(a)?(0,r.getWindow)(a):a;let s=e,n=s.frameElement;for(;n&&a&&t!==s;){const e=c(n),t=n.getBoundingClientRect(),a=(0,r.getComputedStyle)(n),d=t.left+(n.clientLeft+parseFloat(a.paddingLeft))*e.x,l=t.top+(n.clientTop+parseFloat(a.paddingTop))*e.y;y*=e.x,f*=e.y,g*=e.x,E*=e.y,y+=d,f+=l,s=(0,r.getWindow)(n),n=s.frameElement}}return(0,n.rectToClientRect)({width:g,height:E,x:y,y:f})}function m(e){return p((0,r.getDocumentElement)(e)).left+(0,r.getNodeScroll)(e).scrollLeft}function y(e,t,s){let a;if("viewport"===t)a=function(e,t){const s=(0,r.getWindow)(e),n=(0,r.getDocumentElement)(e),a=s.visualViewport;let d=n.clientWidth,l=n.clientHeight,c=0,u=0;if(a){d=a.width,l=a.height;const e=(0,r.isWebKit)();(!e||e&&"fixed"===t)&&(c=a.offsetLeft,u=a.offsetTop)}return{width:d,height:l,x:c,y:u}}(e,s);else if("document"===t)a=function(e){const t=(0,r.getDocumentElement)(e),s=(0,r.getNodeScroll)(e),a=e.ownerDocument.body,d=(0,n.max)(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),l=(0,n.max)(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let c=-s.scrollLeft+m(e);const u=-s.scrollTop;return"rtl"===(0,r.getComputedStyle)(a).direction&&(c+=(0,n.max)(t.clientWidth,a.clientWidth)-d),{width:d,height:l,x:c,y:u}}((0,r.getDocumentElement)(e));else if((0,r.isElement)(t))a=function(e,t){const s=p(e,!0,"fixed"===t),a=s.top+e.clientTop,d=s.left+e.clientLeft,l=(0,r.isHTMLElement)(e)?c(e):(0,n.createCoords)(1);return{width:e.clientWidth*l.x,height:e.clientHeight*l.y,x:d*l.x,y:a*l.y}}(t,s);else{const s=_(e);a={...t,x:t.x-s.x,y:t.y-s.y}}return(0,n.rectToClientRect)(a)}function f(e,t){const s=(0,r.getParentNode)(e);return!(s===t||!(0,r.isElement)(s)||(0,r.isLastTraversableNode)(s))&&("fixed"===(0,r.getComputedStyle)(s).position||f(s,t))}function g(e,t,s){const a=(0,r.isHTMLElement)(t),d=(0,r.getDocumentElement)(t),l="fixed"===s,c=p(e,!0,l,t);let u={scrollLeft:0,scrollTop:0};const _=(0,n.createCoords)(0);if(a||!a&&!l)if(("body"!==(0,r.getNodeName)(t)||(0,r.isOverflowElement)(d))&&(u=(0,r.getNodeScroll)(t)),a){const e=p(t,!0,l,t);_.x=e.x+t.clientLeft,_.y=e.y+t.clientTop}else d&&(_.x=m(d));return{x:c.left+u.scrollLeft-_.x,y:c.top+u.scrollTop-_.y,width:c.width,height:c.height}}function E(e){return"static"===(0,r.getComputedStyle)(e).position}function A(e,t){return(0,r.isHTMLElement)(e)&&"fixed"!==(0,r.getComputedStyle)(e).position?t?t(e):e.offsetParent:null}function b(e,t){const s=(0,r.getWindow)(e);if((0,r.isTopLayer)(e))return s;if(!(0,r.isHTMLElement)(e)){let t=(0,r.getParentNode)(e);for(;t&&!(0,r.isLastTraversableNode)(t);){if((0,r.isElement)(t)&&!E(t))return t;t=(0,r.getParentNode)(t)}return s}let n=A(e,t);for(;n&&(0,r.isTableElement)(n)&&E(n);)n=A(n,t);return n&&(0,r.isLastTraversableNode)(n)&&E(n)&&!(0,r.isContainingBlock)(n)?s:n||(0,r.getContainingBlock)(e)||s}const P={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:a,strategy:d}=e;const l="fixed"===d,u=(0,r.getDocumentElement)(a),_=!!t&&(0,r.isTopLayer)(t.floating);if(a===u||_&&l)return s;let m={scrollLeft:0,scrollTop:0},y=(0,n.createCoords)(1);const f=(0,n.createCoords)(0),g=(0,r.isHTMLElement)(a);if((g||!g&&!l)&&(("body"!==(0,r.getNodeName)(a)||(0,r.isOverflowElement)(u))&&(m=(0,r.getNodeScroll)(a)),(0,r.isHTMLElement)(a))){const e=p(a);y=c(a),f.x=e.x+a.clientLeft,f.y=e.y+a.clientTop}return{width:s.width*y.x,height:s.height*y.y,x:s.x*y.x-m.scrollLeft*y.x+f.x,y:s.y*y.y-m.scrollTop*y.y+f.y}},getDocumentElement:r.getDocumentElement,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:a,strategy:d}=e;const l=[..."clippingAncestors"===s?(0,r.isTopLayer)(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let n=(0,r.getOverflowAncestors)(e,[],!1).filter((e=>(0,r.isElement)(e)&&"body"!==(0,r.getNodeName)(e))),a=null;const d="fixed"===(0,r.getComputedStyle)(e).position;let l=d?(0,r.getParentNode)(e):e;for(;(0,r.isElement)(l)&&!(0,r.isLastTraversableNode)(l);){const t=(0,r.getComputedStyle)(l),s=(0,r.isContainingBlock)(l);s||"fixed"!==t.position||(a=null),(d?!s&&!a:!s&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||(0,r.isOverflowElement)(l)&&!s&&f(e,l))?n=n.filter((e=>e!==l)):a=t,l=(0,r.getParentNode)(l)}return t.set(e,n),n}(t,this._c):[].concat(s),a],c=l[0],u=l.reduce(((e,s)=>{const a=y(t,s,d);return e.top=(0,n.max)(a.top,e.top),e.right=(0,n.min)(a.right,e.right),e.bottom=(0,n.min)(a.bottom,e.bottom),e.left=(0,n.max)(a.left,e.left),e}),y(t,c,d));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:b,getElementRects:async function(e){const t=this.getOffsetParent||b,s=this.getDimensions,n=await s(e.floating);return{reference:g(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=d(e);return{width:t,height:s}},getScale:c,isElement:r.isElement,isRTL:function(e){return"rtl"===(0,r.getComputedStyle)(e).direction}};function I(e,t,s,a){void 0===a&&(a={});const{ancestorScroll:d=!0,ancestorResize:c=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:_="function"==typeof IntersectionObserver,animationFrame:m=!1}=a,y=l(e),f=d||c?[...y?(0,r.getOverflowAncestors)(y):[],...(0,r.getOverflowAncestors)(t)]:[];f.forEach((e=>{d&&e.addEventListener("scroll",s,{passive:!0}),c&&e.addEventListener("resize",s)}));const g=y&&_?function(e,t){let s,a=null;const d=(0,r.getDocumentElement)(e);function l(){var e;clearTimeout(s),null==(e=a)||e.disconnect(),a=null}return function r(c,u){void 0===c&&(c=!1),void 0===u&&(u=1),l();const{left:_,top:p,width:m,height:y}=e.getBoundingClientRect();if(c||t(),!m||!y)return;const f={rootMargin:-(0,n.floor)(p)+"px "+-(0,n.floor)(d.clientWidth-(_+m))+"px "+-(0,n.floor)(d.clientHeight-(p+y))+"px "+-(0,n.floor)(_)+"px",threshold:(0,n.max)(0,(0,n.min)(1,u))||1};let g=!0;function E(e){const t=e[0].intersectionRatio;if(t!==u){if(!g)return r();t?r(!1,t):s=setTimeout((()=>{r(!1,1e-7)}),1e3)}g=!1}try{a=new IntersectionObserver(E,{...f,root:d.ownerDocument})}catch(e){a=new IntersectionObserver(E,f)}a.observe(e)}(!0),l}(y,s):null;let E,A=-1,b=null;u&&(b=new ResizeObserver((e=>{let[n]=e;n&&n.target===y&&b&&(b.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame((()=>{var e;null==(e=b)||e.observe(t)}))),s()})),y&&!m&&b.observe(y),b.observe(t));let P=m?p(e):null;return m&&function t(){const n=p(e);!P||n.x===P.x&&n.y===P.y&&n.width===P.width&&n.height===P.height||s();P=n,E=requestAnimationFrame(t)}(),s(),()=>{var e;f.forEach((e=>{d&&e.removeEventListener("scroll",s),c&&e.removeEventListener("resize",s)})),null==g||g(),null==(e=b)||e.disconnect(),b=null,m&&cancelAnimationFrame(E)}}a.detectOverflow;const T=a.offset,C=a.autoPlacement,O=a.shift,M=a.flip,S=a.size,D=a.hide,k=a.arrow,L=a.inline,x=a.limitShift,R=(e,t,s)=>{const n=new Map,r={platform:P,...s},d={...r.platform,_c:n};return(0,a.computePosition)(e,t,{...r,platform:d})}},786635:(e,t,s)=>{"use strict";function n(e){return d(e)?(e.nodeName||"").toLowerCase():"#document"}function a(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function r(e){var t;return null==(t=(d(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function d(e){return e instanceof Node||e instanceof a(e).Node}function l(e){return e instanceof Element||e instanceof a(e).Element}function c(e){return e instanceof HTMLElement||e instanceof a(e).HTMLElement}function u(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof a(e).ShadowRoot)}function _(e){const{overflow:t,overflowX:s,overflowY:n,display:a}=A(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!["inline","contents"].includes(a)}function p(e){return["table","td","th"].includes(n(e))}function m(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function y(e){const t=g(),s=l(e)?A(e):e;return"none"!==s.transform||"none"!==s.perspective||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||["transform","perspective","filter"].some((e=>(s.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(s.contain||"").includes(e)))}function f(e){let t=P(e);for(;c(t)&&!E(t);){if(y(t))return t;if(m(t))return null;t=P(t)}return null}function g(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function E(e){return["html","body","#document"].includes(n(e))}function A(e){return a(e).getComputedStyle(e)}function b(e){return l(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function P(e){if("html"===n(e))return e;const t=e.assignedSlot||e.parentNode||u(e)&&e.host||r(e);return u(t)?t.host:t}function I(e){const t=P(e);return E(t)?e.ownerDocument?e.ownerDocument.body:e.body:c(t)&&_(t)?t:I(t)}function T(e,t,s){var n;void 0===t&&(t=[]),void 0===s&&(s=!0);const r=I(e),d=r===(null==(n=e.ownerDocument)?void 0:n.body),l=a(r);return d?t.concat(l,l.visualViewport||[],_(r)?r:[],l.frameElement&&s?T(l.frameElement):[]):t.concat(r,T(r,[],s))}s.d(t,{getComputedStyle:()=>A,getContainingBlock:()=>f,getDocumentElement:()=>r,getNodeName:()=>n,getNodeScroll:()=>b,getOverflowAncestors:()=>T,getParentNode:()=>P,getWindow:()=>a,isContainingBlock:()=>y,isElement:()=>l,isHTMLElement:()=>c,isLastTraversableNode:()=>E,isOverflowElement:()=>_,isTableElement:()=>p,isTopLayer:()=>m,isWebKit:()=>g})},997193:(e,t,s)=>{"use strict";s.d(t,{clamp:()=>y,createCoords:()=>_,evaluate:()=>f,floor:()=>u,getAlignment:()=>E,getAlignmentAxis:()=>I,getAlignmentSides:()=>T,getAxisLength:()=>b,getExpandedPlacements:()=>C,getOppositeAlignmentPlacement:()=>O,getOppositeAxis:()=>A,getOppositeAxisPlacements:()=>M,getOppositePlacement:()=>S,getPaddingObject:()=>D,getSide:()=>g,getSideAxis:()=>P,max:()=>l,min:()=>d,placements:()=>r,rectToClientRect:()=>k,round:()=>c,sides:()=>n});const n=["top","right","bottom","left"],a=["start","end"],r=n.reduce(((e,t)=>e.concat(t,t+"-"+a[0],t+"-"+a[1])),[]),d=Math.min,l=Math.max,c=Math.round,u=Math.floor,_=e=>({x:e,y:e}),p={left:"right",right:"left",bottom:"top",top:"bottom"},m={start:"end",end:"start"};function y(e,t,s){return l(e,d(t,s))}function f(e,t){return"function"==typeof e?e(t):e}function g(e){return e.split("-")[0]}function E(e){return e.split("-")[1]}function A(e){return"x"===e?"y":"x"}function b(e){return"y"===e?"height":"width"}function P(e){return["top","bottom"].includes(g(e))?"y":"x"}function I(e){return A(P(e))}function T(e,t,s){void 0===s&&(s=!1);const n=E(e),a=I(e),r=b(a);let d="x"===a?n===(s?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[r]>t.floating[r]&&(d=S(d)),[d,S(d)]}function C(e){const t=S(e);return[O(e),t,O(t)]}function O(e){return e.replace(/start|end/g,(e=>m[e]))}function M(e,t,s,n){const a=E(e);let r=function(e,t,s){const n=["left","right"],a=["right","left"],r=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return s?t?a:n:t?n:a;case"left":case"right":return t?r:d;default:return[]}}(g(e),"start"===s,n);return a&&(r=r.map((e=>e+"-"+a)),t&&(r=r.concat(r.map(O)))),r}function S(e){return e.replace(/left|right|bottom|top/g,(e=>p[e]))}function D(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function k(e){const{x:t,y:s,width:n,height:a}=e;return{width:n,height:a,top:s,left:t,right:t+n,bottom:s+a,x:t,y:s}}},18806:(e,t,s)=>{"use strict";function n(e){if(Array.isArray(e))return e}s.d(t,{_:()=>n})},453482:(e,t,s)=>{"use strict";function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}s.d(t,{_:()=>n})},950894:(e,t,s)=>{"use strict";function n(e,t){return t.get?t.get.call(e):t.value}s.d(t,{_:()=>n})},305570:(e,t,s)=>{"use strict";function n(e,t,s){if(t.set)t.set.call(e,s);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=s}}s.d(t,{_:()=>n})},906923:(e,t,s)=>{"use strict";function n(e,t,s){if(!t.has(e))throw new TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}s.d(t,{_:()=>n})},935750:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});var n=s(950894),a=s(906923);function r(e,t){var s=(0,a._)(e,t,"get");return(0,n._)(e,s)}},518150:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var n=s(453482);function a(e,t,s){(0,n._)(e,t),t.set(e,s)}},885242:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});var n=s(305570),a=s(906923);function r(e,t,s){var r=(0,a._)(e,t,"set");return(0,n._)(e,r,s),s}},617818:(e,t,s)=>{"use strict";function n(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,a,r=[],d=!0,l=!1;try{for(s=s.call(e);!(d=(n=s.next()).done)&&(r.push(n.value),!t||r.length!==t);d=!0);}catch(e){l=!0,a=e}finally{try{d||null==s.return||s.return()}finally{if(l)throw a}}return r}}s.d(t,{_:()=>n})},252615:(e,t,s)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}s.d(t,{_:()=>n})},855456:(e,t,s)=>{"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})),e}s.d(t,{_:()=>n})},918542:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var n=s(140391);function a(e,t){if(null==e)return{};var s,a,r=(0,n._)(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)s=d[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}},140391:(e,t,s)=>{"use strict";function n(e,t){if(null==e)return{};var s,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)s=r[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}s.d(t,{_:()=>n})},53014:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var n=s(18806),a=s(617818),r=s(252615),d=s(675134);function l(e,t){return(0,n._)(e)||(0,a._)(e,t)||(0,d._)(e,t)||(0,r._)()}},43014:(e,t,s)=>{"use strict";s.d(t,{persist:()=>l});var n=s(32489),a=new Map,r=e=>(t,s)=>e(s,t.ref),d=(0,n.createEvent)();function l(e){var{adapter:t,store:s,source:l=s,target:c=s,clock:u=l,done:_,fail:p=d,finally:m,pickup:y,context:f,key:g,keyPrefix:E="",contract:A}=e;if(!t)throw Error("Adapter is not defined");if(!l)throw Error("Store or source is not defined");if(!c)throw Error("Target is not defined");if(!g&&l.shortName===l.id)throw Error("Key or name is not defined");if(l===c&&!n.is.store(l))throw Error("Source must be different from target");void 0===e.def&&n.is.store(l)&&(e.def=l.defaultState);var b="factory"in t?t(e):t,P=g||l.shortName,I=function(e,t){var s=a.get(e);void 0===s&&(s=new Map,a.set(e,s));var r=s.get(t);return void 0!==r||(r=(0,n.createStore)(null,{serialize:"ignore"}),s.set(t,r)),r}(b.keyArea||b,E+P),T=(0,n.createNode)(),C=()=>(0,n.clearNode)(T),O=e=>({status:t="fail",params:s,result:n,error:a})=>"done"===t?{status:t,key:P,keyPrefix:E,operation:e,value:"get"===e?n:s}:{status:t,key:P,keyPrefix:E,operation:e,value:s,error:a};return(0,n.withRegion)(T,(()=>{var e,t=(0,n.createStore)({ref:void 0},{serialize:"ignore"}),s=b(E+P,(e=>D(e))),a=(0,n.attach)({source:t,effect:r(s.get)}),d=(0,n.attach)({source:t,effect:r(s.set)}),g=(0,n.createEffect)((e=A,t=>!e||void 0===t||("isData"in e?e.isData(t):e(t))?t:(()=>{throw"getErrorMessages"in e?e.getErrorMessages(t):void 0})())),T=(0,n.createEvent)(),C=T.filterMap((({status:e,key:t,keyPrefix:s,operation:n,value:a})=>"done"===e?{key:t,keyPrefix:s,operation:n,value:a}:void 0)),M=T.filterMap((({status:e,key:t,keyPrefix:s,operation:n,error:a,value:r})=>"fail"===e?{key:t,keyPrefix:s,operation:n,error:a,value:r}:void 0)),S=(0,n.createEvent)(),D=a;t.updates.watch((()=>{D=(e=>{try{return(0,n.scopeBind)(e,{safe:!0})}catch(t){return e}})(a)})),(0,n.sample)({source:l,clock:u,target:S}),(0,n.guard)({source:(0,n.sample)(I,S,((e,t)=>[t,e])),filter:([e,t])=>e!==t,target:d.prepend((([e])=>e))}),(0,n.forward)({from:[a.doneData,d],to:I}),(0,n.sample)({source:(0,n.merge)([a.doneData,I]),target:g}),(0,n.forward)({from:g.doneData,to:c}),(0,n.forward)({from:[a.finally.map(O("get")),d.finally.map(O("set")),g.fail.map(O("validate"))],to:T}),(0,n.forward)({from:M,to:p}),_&&(0,n.forward)({from:C,to:_}),m&&(0,n.forward)({from:T,to:m}),f&&t.on(f,(({ref:e},t)=>({ref:void 0===t?e:t}))),y?((0,n.forward)({from:y,to:a.prepend((()=>{}))}),t.on(y,(({ref:e},t)=>({ref:void 0===t?e:t})))):a()})),C.unsubscribe=C}d.watch((e=>console.error(e.error)))},225604:(e,t,s)=>{"use strict";s.d(t,{persist:()=>c});var n=s(43014),a=s(719888),r=s(764318);function d(e){return function(){try{return"undefined"!=typeof localStorage}catch(e){return!0}}()?(0,r.storage)({storage:()=>localStorage,sync:!0,...e}):(0,a.nil)({keyArea:"local"})}d.factory=!0;var l,c=e=>(0,n.persist)({adapter:d,...l,...e})},719888:(e,t,s)=>{"use strict";function n({keyArea:e=""}={}){var t=()=>({get(){},set(){}});return t.keyArea=e,t.noop=!0,t}s.d(t,{nil:()=>n}),n.factory=!0},764318:(e,t,s)=>{"use strict";function n({storage:e,sync:t=!1,serialize:s=JSON.stringify,deserialize:n=JSON.parse,timeout:a,def:r}){var d=(d,l)=>{var c,u,_,p=()=>_.setItem(d,s(u)),m=e=>{c=clearTimeout(c),e&&p(),"undefined"!=typeof removeEventListener&&removeEventListener("beforeunload",m)};return t&&"undefined"!=typeof addEventListener&&addEventListener("storage",(s=>{s.storageArea===e()&&(s.key===d&&l("force"===t?void 0:s.newValue),null===s.key&&l(null))})),{get(t){m();var s=void 0!==t?t:e().getItem(d);return null===s?void 0!==r?r:t:n(s)},set(t){u=t,_=e(),void 0===a?p():c||(c=setTimeout(m,a,1),"undefined"!=typeof addEventListener&&addEventListener("beforeunload",m))}}};try{d.keyArea=e()}catch(e){}return d}s.d(t,{storage:()=>n}),n.factory=!0},202732:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(280702),a=s(41917);const r=(0,n.default)(a.default,"DataView")},965373:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var n=s(962944),a=s(349190),r=s(178417),d=s(18813),l=s(463957);function c(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n.default,c.prototype.delete=a.default,c.prototype.get=r.default,c.prototype.has=d.default,c.prototype.set=l.default;const u=c},277919:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var n=s(36838),a=s(362384),r=s(104787),d=s(898207),l=s(451031);function c(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n.default,c.prototype.delete=a.default,c.prototype.get=r.default,c.prototype.has=d.default,c.prototype.set=l.default;const u=c},168335:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(280702),a=s(41917);const r=(0,n.default)(a.default,"Map")},935917:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var n=s(95088),a=s(829846),r=s(831521),d=s(782509),l=s(549);function c(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n.default,c.prototype.delete=a.default,c.prototype.get=r.default,c.prototype.has=d.default,c.prototype.set=l.default;const u=c},20180:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(280702),a=s(41917);const r=(0,n.default)(a.default,"Promise")},439857:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(280702),a=s(41917);const r=(0,n.default)(a.default,"Set")},601275:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(935917),a=s(25668),r=s(529875);function d(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new n.default;++t<s;)this.add(e[t])}d.prototype.add=d.prototype.push=a.default,d.prototype.has=r.default;const l=d},93265:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var n=s(277919),a=s(591532),r=s(42),d=s(173061),l=s(144105),c=s(487681);function u(e){var t=this.__data__=new n.default(e);this.size=t.size}u.prototype.clear=a.default,u.prototype.delete=r.default,u.prototype.get=d.default,u.prototype.has=l.default,u.prototype.set=c.default;const _=u},243988:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=s(41917).default.Uint8Array},753631:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(280702),a=s(41917);const r=(0,n.default)(a.default,"WeakMap")},102634:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){for(var s=-1,n=null==e?0:e.length,a=0,r=[];++s<n;){var d=e[s];t(d,s,e)&&(r[a++]=d)}return r}},550423:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var n=s(159520),a=s(241788),r=s(292049),d=s(74616),l=s(925353),c=s(118719),u=Object.prototype.hasOwnProperty;const _=function(e,t){var s=(0,r.default)(e),_=!s&&(0,a.default)(e),p=!s&&!_&&(0,d.default)(e),m=!s&&!_&&!p&&(0,c.default)(e),y=s||_||p||m,f=y?(0,n.default)(e.length,String):[],g=f.length;for(var E in e)!t&&!u.call(e,E)||y&&("length"==E||p&&("offset"==E||"parent"==E)||m&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||(0,l.default)(E,g))||f.push(E);return f}},976912:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){for(var s=-1,n=t.length,a=e.length;++s<n;)e[a+s]=t[s];return e}},463736:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){for(var s=-1,n=null==e?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1}},652851:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(152528),a=s(166984),r=Object.prototype.hasOwnProperty;const d=function(e,t,s){var d=e[t];r.call(e,t)&&(0,a.default)(d,s)&&(void 0!==s||t in e)||(0,n.default)(e,t,s)}},210169:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(166984);const a=function(e,t){for(var s=e.length;s--;)if((0,n.default)(e[s][0],t))return s;return-1}},152528:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(684171);const a=function(e,t,s){"__proto__"==t&&n.default?(0,n.default)(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}},966318:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(687465),a=s(930901);const r=function(e,t){for(var s=0,r=(t=(0,n.default)(t,e)).length;null!=e&&s<r;)e=e[(0,a.default)(t[s++])];return s&&s==r?e:void 0}},833831:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(976912),a=s(292049);const r=function(e,t,s){var r=t(e);return(0,a.default)(e)?r:(0,n.default)(r,s(e))}},509789:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return null!=e&&t in Object(e)}},974846:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(979672),a=s(753098);const r=function(e){return(0,a.default)(e)&&"[object Arguments]"==(0,n.default)(e)}},891038:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(343244),a=s(753098);const r=function e(t,s,r,d,l){return t===s||(null==t||null==s||!(0,a.default)(t)&&!(0,a.default)(s)?t!=t&&s!=s:(0,n.default)(t,s,r,d,e,l))}},343244:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var n=s(93265),a=s(608967),r=s(480402),d=s(937265),l=s(935861),c=s(292049),u=s(74616),_=s(118719),p="[object Arguments]",m="[object Array]",y="[object Object]",f=Object.prototype.hasOwnProperty;const g=function(e,t,s,g,E,A){var b=(0,c.default)(e),P=(0,c.default)(t),I=b?m:(0,l.default)(e),T=P?m:(0,l.default)(t),C=(I=I==p?y:I)==y,O=(T=T==p?y:T)==y,M=I==T;if(M&&(0,u.default)(e)){if(!(0,u.default)(t))return!1;b=!0,C=!1}if(M&&!C)return A||(A=new n.default),b||(0,_.default)(e)?(0,a.default)(e,t,s,g,E,A):(0,r.default)(e,t,I,s,g,E,A);if(!(1&s)){var S=C&&f.call(e,"__wrapped__"),D=O&&f.call(t,"__wrapped__");if(S||D){var k=S?e.value():e,L=D?t.value():t;return A||(A=new n.default),E(k,L,s,g,A)}}return!!M&&(A||(A=new n.default),(0,d.default)(e,t,s,g,E,A))}},500759:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(93265),a=s(891038);const r=function(e,t,s,r){var d=s.length,l=d,c=!r;if(null==e)return!l;for(e=Object(e);d--;){var u=s[d];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++d<l;){var _=(u=s[d])[0],p=e[_],m=u[1];if(c&&u[2]){if(void 0===p&&!(_ in e))return!1}else{var y=new n.default;if(r)var f=r(p,m,_,e,t,y);if(!(void 0===f?(0,a.default)(m,p,3,r,y):f))return!1}}return!0}},651979:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var n=s(389610),a=s(870640),r=s(523149),d=s(281121),l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,_=c.toString,p=u.hasOwnProperty,m=RegExp("^"+_.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const y=function(e){return!(!(0,r.default)(e)||(0,a.default)(e))&&((0,n.default)(e)?m:l).test((0,d.default)(e))}},289717:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(979672),a=s(5254),r=s(753098),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;const l=function(e){return(0,r.default)(e)&&(0,a.default)(e.length)&&!!d[(0,n.default)(e)]}},952141:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(544943),a=s(256474),r=s(929008),d=s(292049),l=s(792263);const c=function(e){return"function"==typeof e?e:null==e?r.default:"object"==typeof e?(0,d.default)(e)?(0,a.default)(e[0],e[1]):(0,n.default)(e):(0,l.default)(e)}},17064:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(897271),a=s(733938),r=Object.prototype.hasOwnProperty;const d=function(e){if(!(0,n.default)(e))return(0,a.default)(e);var t=[];for(var s in Object(e))r.call(e,s)&&"constructor"!=s&&t.push(s);return t}},708823:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(523149),a=s(897271),r=s(981493),d=Object.prototype.hasOwnProperty;const l=function(e){if(!(0,n.default)(e))return(0,r.default)(e);var t=(0,a.default)(e),s=[];for(var l in e)("constructor"!=l||!t&&d.call(e,l))&&s.push(l);return s}},544943:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(500759),a=s(997960),r=s(945997);const d=function(e){var t=(0,a.default)(e);return 1==t.length&&t[0][2]?(0,r.default)(t[0][0],t[0][1]):function(s){return s===e||(0,n.default)(s,e,t)}}},256474:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var n=s(891038),a=s(877500),r=s(217511),d=s(386586),l=s(909396),c=s(945997),u=s(930901);const _=function(e,t){return(0,d.default)(e)&&(0,l.default)(t)?(0,c.default)((0,u.default)(e),t):function(s){var d=(0,a.default)(s,e);return void 0===d&&d===t?(0,r.default)(s,e):(0,n.default)(t,d,3)}}},769084:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(966318),a=s(837346),r=s(687465);const d=function(e,t,s){for(var d=-1,l=t.length,c={};++d<l;){var u=t[d],_=(0,n.default)(e,u);s(_,u)&&(0,a.default)(c,(0,r.default)(u,e),_)}return c}},82199:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(966318);const a=function(e){return function(t){return(0,n.default)(t,e)}}},837346:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(652851),a=s(687465),r=s(925353),d=s(523149),l=s(930901);const c=function(e,t,s,c){if(!(0,d.default)(e))return e;for(var u=-1,_=(t=(0,a.default)(t,e)).length,p=_-1,m=e;null!=m&&++u<_;){var y=(0,l.default)(t[u]),f=s;if("__proto__"===y||"constructor"===y||"prototype"===y)return e;if(u!=p){var g=m[y];void 0===(f=c?c(g,y,m):void 0)&&(f=(0,d.default)(g)?g:(0,r.default)(t[u+1])?[]:{})}(0,n.default)(m,y,f),m=m[y]}return e}},159520:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n}},764099:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return e.has(t)}},687465:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(292049),a=s(386586),r=s(865722),d=s(648182);const l=function(e,t){return(0,n.default)(e)?e:(0,a.default)(e,t)?[e]:(0,r.default)((0,d.default)(e))}},113161:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=s(41917).default["__core-js_shared__"]},684171:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(280702);const a=function(){try{var e=(0,n.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},608967:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(601275),a=s(463736),r=s(764099);const d=function(e,t,s,d,l,c){var u=1&s,_=e.length,p=t.length;if(_!=p&&!(u&&p>_))return!1;var m=c.get(e),y=c.get(t);if(m&&y)return m==t&&y==e;var f=-1,g=!0,E=2&s?new n.default:void 0;for(c.set(e,t),c.set(t,e);++f<_;){var A=e[f],b=t[f];if(d)var P=u?d(b,A,f,t,e,c):d(A,b,f,e,t,c);if(void 0!==P){if(P)continue;g=!1;break}if(E){if(!(0,a.default)(t,(function(e,t){if(!(0,r.default)(E,t)&&(A===e||l(A,e,s,d,c)))return E.push(t)}))){g=!1;break}}else if(A!==b&&!l(A,b,s,d,c)){g=!1;break}}return c.delete(e),c.delete(t),g}},480402:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var n=s(700241),a=s(243988),r=s(166984),d=s(608967),l=s(164877),c=s(729959),u=n.default?n.default.prototype:void 0,_=u?u.valueOf:void 0;const p=function(e,t,s,n,u,p,m){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new a.default(e),new a.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,r.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var y=l.default;case"[object Set]":var f=1&n;if(y||(y=c.default),e.size!=t.size&&!f)return!1;var g=m.get(e);if(g)return g==t;n|=2,m.set(e,t);var E=(0,d.default)(y(e),y(t),n,u,p,m);return m.delete(e),E;case"[object Symbol]":if(_)return _.call(e)==_.call(t)}return!1}},937265:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(719042),a=Object.prototype.hasOwnProperty;const r=function(e,t,s,r,d,l){var c=1&s,u=(0,n.default)(e),_=u.length;if(_!=(0,n.default)(t).length&&!c)return!1;for(var p=_;p--;){var m=u[p];if(!(c?m in t:a.call(t,m)))return!1}var y=l.get(e),f=l.get(t);if(y&&f)return y==t&&f==e;var g=!0;l.set(e,t),l.set(t,e);for(var E=c;++p<_;){var A=e[m=u[p]],b=t[m];if(r)var P=c?r(b,A,m,t,e,l):r(A,b,m,e,t,l);if(!(void 0===P?A===b||d(A,b,s,r,l):P)){g=!1;break}E||(E="constructor"==m)}if(g&&!E){var I=e.constructor,T=t.constructor;I==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof I&&I instanceof I&&"function"==typeof T&&T instanceof T||(g=!1)}return l.delete(e),l.delete(t),g}},719042:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(833831),a=s(214792),r=s(327422);const d=function(e){return(0,n.default)(e,r.default,a.default)}},883973:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(833831),a=s(283511),r=s(241865);const d=function(e){return(0,n.default)(e,r.default,a.default)}},515547:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(649914);const a=function(e,t){var s=e.__data__;return(0,n.default)(t)?s["string"==typeof t?"string":"hash"]:s.map}},997960:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(909396),a=s(327422);const r=function(e){for(var t=(0,a.default)(e),s=t.length;s--;){var r=t[s],d=e[r];t[s]=[r,d,(0,n.default)(d)]}return t}},280702:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(651979),a=s(208104);const r=function(e,t){var s=(0,a.default)(e,t);return(0,n.default)(s)?s:void 0}},315647:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=(0,s(40367).default)(Object.getPrototypeOf,Object)},214792:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(102634),a=s(613153),r=Object.prototype.propertyIsEnumerable,d=Object.getOwnPropertySymbols;const l=d?function(e){return null==e?[]:(e=Object(e),(0,n.default)(d(e),(function(t){return r.call(e,t)})))}:a.default},283511:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(976912),a=s(315647),r=s(214792),d=s(613153);const l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,n.default)(t,(0,r.default)(e)),e=(0,a.default)(e);return t}:d.default},935861:(e,t,s)=>{"use strict";s.d(t,{default:()=>T});var n=s(202732),a=s(168335),r=s(20180),d=s(439857),l=s(753631),c=s(979672),u=s(281121),_="[object Map]",p="[object Promise]",m="[object Set]",y="[object WeakMap]",f="[object DataView]",g=(0,u.default)(n.default),E=(0,u.default)(a.default),A=(0,u.default)(r.default),b=(0,u.default)(d.default),P=(0,u.default)(l.default),I=c.default;(n.default&&I(new n.default(new ArrayBuffer(1)))!=f||a.default&&I(new a.default)!=_||r.default&&I(r.default.resolve())!=p||d.default&&I(new d.default)!=m||l.default&&I(new l.default)!=y)&&(I=function(e){var t=(0,c.default)(e),s="[object Object]"==t?e.constructor:void 0,n=s?(0,u.default)(s):"";if(n)switch(n){case g:return f;case E:return _;case A:return p;case b:return m;case P:return y}return t});const T=I},208104:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return null==e?void 0:e[t]}},285054:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var n=s(687465),a=s(241788),r=s(292049),d=s(925353),l=s(5254),c=s(930901);const u=function(e,t,s){for(var u=-1,_=(t=(0,n.default)(t,e)).length,p=!1;++u<_;){var m=(0,c.default)(t[u]);if(!(p=null!=e&&s(e,m)))break;e=e[m]}return p||++u!=_?p:!!(_=null==e?0:e.length)&&(0,l.default)(_)&&(0,d.default)(m,_)&&((0,r.default)(e)||(0,a.default)(e))}},962944:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(220674);const a=function(){this.__data__=n.default?(0,n.default)(null):{},this.size=0}},349190:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},178417:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(220674),a=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;if(n.default){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return a.call(t,e)?t[e]:void 0}},18813:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(220674),a=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;return n.default?void 0!==t[e]:a.call(t,e)}},463957:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(220674);const a=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=n.default&&void 0===t?"__lodash_hash_undefined__":t,this}},925353:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=/^(?:0|[1-9]\d*)$/;const a=function(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&n.test(e))&&e>-1&&e%1==0&&e<t}},386586:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(292049),a=s(761882),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;const l=function(e,t){if((0,n.default)(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!(0,a.default)(e))||(d.test(e)||!r.test(e)||null!=t&&e in Object(t))}},649914:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},870640:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n,a=s(113161),r=(n=/[^.]+$/.exec(a.default&&a.default.keys&&a.default.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";const d=function(e){return!!r&&r in e}},897271:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=Object.prototype;const a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},909396:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(523149);const a=function(e){return e==e&&!(0,n.default)(e)}},36838:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(){this.__data__=[],this.size=0}},362384:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(210169),a=Array.prototype.splice;const r=function(e){var t=this.__data__,s=(0,n.default)(t,e);return!(s<0)&&(s==t.length-1?t.pop():a.call(t,s,1),--this.size,!0)}},104787:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(210169);const a=function(e){var t=this.__data__,s=(0,n.default)(t,e);return s<0?void 0:t[s][1]}},898207:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(210169);const a=function(e){return(0,n.default)(this.__data__,e)>-1}},451031:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(210169);const a=function(e,t){var s=this.__data__,a=(0,n.default)(s,e);return a<0?(++this.size,s.push([e,t])):s[a][1]=t,this}},95088:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(965373),a=s(277919),r=s(168335);const d=function(){this.size=0,this.__data__={hash:new n.default,map:new(r.default||a.default),string:new n.default}}},829846:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(515547);const a=function(e){var t=(0,n.default)(this,e).delete(e);return this.size-=t?1:0,t}},831521:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(515547);const a=function(e){return(0,n.default)(this,e).get(e)}},782509:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(515547);const a=function(e){return(0,n.default)(this,e).has(e)}},549:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(515547);const a=function(e,t){var s=(0,n.default)(this,e),a=s.size;return s.set(e,t),this.size+=s.size==a?0:1,this}},164877:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,n){s[++t]=[n,e]})),s}},945997:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return function(s){return null!=s&&(s[e]===t&&(void 0!==t||e in Object(s)))}}},760608:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(446632);const a=function(e){var t=(0,n.default)(e,(function(e){return 500===s.size&&s.clear(),e})),s=t.cache;return t}},220674:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=(0,s(280702).default)(Object,"create")},733938:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=(0,s(40367).default)(Object.keys,Object)},981493:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}},40367:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return function(s){return e(t(s))}}},25668:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},529875:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},729959:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s}},591532:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(277919);const a=function(){this.__data__=new n.default,this.size=0}},42:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}},173061:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return this.__data__.get(e)}},144105:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},487681:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(277919),a=s(168335),r=s(935917);const d=function(e,t){var s=this.__data__;if(s instanceof n.default){var d=s.__data__;if(!a.default||d.length<199)return d.push([e,t]),this.size=++s.size,this;s=this.__data__=new r.default(d)}return s.set(e,t),this.size=s.size,this}},865722:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(760608),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g;const d=(0,n.default)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,s,n,a){t.push(n?a.replace(r,"$1"):s||e)})),t}))},930901:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(761882);const a=function(e){if("string"==typeof e||(0,n.default)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},281121:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=Function.prototype.toString;const a=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},166984:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e,t){return e===t||e!=e&&t!=t}},877500:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(966318);const a=function(e,t,s){var a=null==e?void 0:(0,n.default)(e,t);return void 0===a?s:a}},217511:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(509789),a=s(285054);const r=function(e,t){return null!=e&&(0,a.default)(e,t,n.default)}},929008:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return e}},241788:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(974846),a=s(753098),r=Object.prototype,d=r.hasOwnProperty,l=r.propertyIsEnumerable;const c=(0,n.default)(function(){return arguments}())?n.default:function(e){return(0,a.default)(e)&&d.call(e,"callee")&&!l.call(e,"callee")}},238446:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(389610),a=s(5254);const r=function(e){return null!=e&&(0,a.default)(e.length)&&!(0,n.default)(e)}},74616:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var n=s(41917),a=s(624639),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,d=r&&"object"==typeof module&&module&&!module.nodeType&&module,l=d&&d.exports===r?n.default.Buffer:void 0;const c=(l?l.isBuffer:void 0)||a.default},389610:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(979672),a=s(523149);const r=function(e){if(!(0,a.default)(e))return!1;var t=(0,n.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5254:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},118719:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(289717),a=s(552789),r=s(364841),d=r.default&&r.default.isTypedArray;const l=d?(0,a.default)(d):n.default},269592:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){return void 0===e}},327422:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(550423),a=s(17064),r=s(238446);const d=function(e){return(0,r.default)(e)?(0,n.default)(e):(0,a.default)(e)}},241865:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(550423),a=s(708823),r=s(238446);const d=function(e){return(0,r.default)(e)?(0,n.default)(e,!0):(0,a.default)(e)}},446632:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});var n=s(935917);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var s=function(){var n=arguments,a=t?t.apply(this,n):n[0],r=s.cache;if(r.has(a))return r.get(a);var d=e.apply(this,n);return s.cache=r.set(a,d)||r,d};return s.cache=new(a.Cache||n.default),s}a.Cache=n.default;const r=a},478672:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},596034:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(952141),a=s(478672),r=s(141470);const d=function(e,t){return(0,r.default)(e,(0,a.default)((0,n.default)(t)))}},141470:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(45572),a=s(952141),r=s(769084),d=s(883973);const l=function(e,t){if(null==e)return{};var s=(0,n.default)((0,d.default)(e),(function(e){return[e]}));return t=(0,a.default)(t),(0,r.default)(e,s,(function(e,s){return t(e,s[0])}))}},792263:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var n=s(770805),a=s(82199),r=s(386586),d=s(930901);const l=function(e){return(0,r.default)(e)?(0,n.default)((0,d.default)(e)):(0,a.default)(e)}},613153:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(){return[]}},624639:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});const n=function(){return!1}}}]);try{stManager.done("dist/web/chunks/common.29538d21.js")}catch(e){}